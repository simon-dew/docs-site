<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Install and Start Using the Python SDK with Couchbase Server | Couchbase Docs (Preview)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11527/python-sdk/current/hello-world/start-using-sdk.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Get up and running quickly, installing the Couchbase Python SDK, and running our Hello World example.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="python-sdk">
<meta name="dcterms.identifier" content="4.0">
<meta name="page-url" content="/python-sdk/current/hello-world/start-using-sdk.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11527/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11527/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-python/edit/release/4.0/modules/hello-world/pages/start-using-sdk.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="overview.html">Python SDK</a></li>
<li class="crumb">Getting Started</li>
<li class="crumb"><a href="start-using-sdk.html">Start Using the Python SDK</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Install and Start Using the Python SDK with Couchbase Server</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Get up and running quickly, installing the Couchbase Python SDK, and running our Hello World example.
</blockquote>
</div>
<div class="paragraph">
<p>The Couchbase Python SDK allows Python applications to access a Couchbase cluster.
It offers a traditional synchronous API as well as integration with <em>twisted</em> and <em>asyncio</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hello-couchbase"><a class="anchor" href="#hello-couchbase"></a>Hello Couchbase</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On this page we show you how to quickly get up and running&#8201;&#8212;&#8201;installing the Couchbase Python SDK, and trying out the <em>Hello World</em> code example against Couchbase Capella, or against a local Couchbase cluster.</p>
</div>
<div class="paragraph">
<p>We will go through the code sample step by step, but for those in a hurry to see it, here it is:</p>
</div>
<div id="tabs-1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="tabs-1-couchbase-capella-sample" class="tab">
<p>Couchbase Capella Sample</p>
</li>
<li id="tabs-1-local-couchbase-server" class="tab">
<p>Local Couchbase Server</p>
</li>
</ul>
</div>
<div id="tabs-1-couchbase-capella-sample--panel" class="tabpanel" aria-labelledby="tabs-1-couchbase-capella-sample">
<div class="paragraph">
<p>To connect to <a href="../../../cloud/index.html" class="xref page">Couchbase Capella</a>, be sure to get the correct endpoint as well as user, password, and bucket name.
The certificate for connecting to Capella is included in the 4.0 Python SDK.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py">from datetime import timedelta

# needed for any cluster connection
from couchbase.auth import PasswordAuthenticator
from couchbase.cluster import Cluster
# needed for options -- cluster, timeout, SQL++ (N1QL) query, etc.
from couchbase.options import (ClusterOptions, ClusterTimeoutOptions,
                               QueryOptions)


# Update this to your cluster
endpoint = "--your-instance--.dp.cloud.couchbase.com"
username = "username"
password = "Password123!"
bucket_name = "travel-sample"
# User Input ends here.

# Connect options - authentication
auth = PasswordAuthenticator(username, password)

# Connect options - global timeout opts
timeout_opts = ClusterTimeoutOptions(kv_timeout=timedelta(seconds=10))

# get a reference to our cluster
cluster = Cluster('couchbases://{}'.format(endpoint),
                  ClusterOptions(auth, timeout_options=timeout_opts))

# Wait until the cluster is ready for use.
cluster.wait_until_ready(timedelta(seconds=5))

# get a reference to our bucket
cb = cluster.bucket(bucket_name)

cb_coll = cb.scope("inventory").collection("airline")



def upsert_document(doc):
    print("\nUpsert CAS: ")
    try:
        # key will equal: "airline_8091"
        key = doc["type"] + "_" + str(doc["id"])
        result = cb_coll.upsert(key, doc)
        print(result.cas)
    except Exception as e:
        print(e)

# get document function


def get_airline_by_key(key):
    print("\nGet Result: ")
    try:
        result = cb_coll.get(key)
        print(result.content_as[str])
    except Exception as e:
        print(e)

# query for new document by callsign


def lookup_by_callsign(cs):
    print("\nLookup Result: ")
    try:
        sql_query = 'SELECT VALUE name FROM `travel-sample`.inventory.airline WHERE callsign = $1'
        row_iter = cluster.query(
            sql_query,
            QueryOptions(positional_parameters=[cs]))
        for row in row_iter:
            print(row)
    except Exception as e:
        print(e)


airline = {
    "type": "airline",
    "id": 8091,
    "callsign": "CBS",
    "iata": None,
    "icao": None,
    "name": "Couchbase Airways",
}

upsert_document(airline)

get_airline_by_key("airline_8091")

lookup_by_callsign("CBS")</code></pre>
</div>
</div>
</div>
<div id="tabs-1-local-couchbase-server--panel" class="tabpanel" aria-labelledby="tabs-1-local-couchbase-server">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/hello_world_t.py">from datetime import timedelta

# needed for any cluster connection
from couchbase.auth import PasswordAuthenticator
from couchbase.cluster import Cluster
# needed for options -- cluster, timeout, SQL++ (N1QL) query, etc.
from couchbase.options import (ClusterOptions, ClusterTimeoutOptions,
                               QueryOptions)

# Update this to your cluster
username = "username"
password = "password"
bucket_name = "travel-sample"
cert_path = "path/to/certificate"
# User Input ends here.

# Connect options - authentication
auth = PasswordAuthenticator(
    username,
    password,
    # NOTE: If using SSL/TLS, add the certificate path.
    # We strongly reccomend this for production use.
    # cert_path=cert_path
)

# Get a reference to our cluster
# NOTE: For TLS/SSL connection use 'couchbases://&lt;your-ip-address&gt;' instead
cluster = Cluster('couchbase://localhost', ClusterOptions(auth))

# Wait until the cluster is ready for use.
cluster.wait_until_ready(timedelta(seconds=5))

# get a reference to our bucket
cb = cluster.bucket(bucket_name)

cb_coll = cb.scope("inventory").collection("airline")

# Get a reference to the default collection, required for older Couchbase server versions
cb_coll_default = cb.default_collection()

# upsert document function


def upsert_document(doc):
    print("\nUpsert CAS: ")
    try:
        # key will equal: "airline_8091"
        key = doc["type"] + "_" + str(doc["id"])
        result = cb_coll.upsert(key, doc)
        print(result.cas)
    except Exception as e:
        print(e)

# get document function


def get_airline_by_key(key):
    print("\nGet Result: ")
    try:
        result = cb_coll.get(key)
        print(result.content_as[str])
    except Exception as e:
        print(e)

# query for new document by callsign


def lookup_by_callsign(cs):
    print("\nLookup Result: ")
    try:
        sql_query = 'SELECT VALUE name FROM `travel-sample`.inventory.airline WHERE callsign = $1'
        row_iter = cluster.query(
            sql_query,
            QueryOptions(positional_parameters=[cs]))
        for row in row_iter:
            print(row)
    except Exception as e:
        print(e)


airline = {
    "type": "airline",
    "id": 8091,
    "callsign": "CBS",
    "iata": None,
    "icao": None,
    "name": "Couchbase Airways",
}

upsert_document(airline)

get_airline_by_key("airline_8091")

lookup_by_callsign("CBS")</code></pre>
</div>
</div>
<div class="paragraph">
<p>As well as the Python SDK (see below), and a running instance of Couchbase Server, you will need to load up the Travel Sample Bucket
using either the <a href="#7.1@server:manage:manage-settings/install-sample-buckets.adoc#install-sample-buckets-with-the-ui" class="xref unresolved">Web interface</a>
or the <a href="#7.1@server:manage:manage-settings/install-sample-buckets.adoc#install-sample-buckets-with-the-cli" class="xref unresolved">command line</a>.</p>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <a href="https://cloud.couchbase.com/sign-up">Couchbase Capella free trial</a> version comes with the Travel Sample Bucket, and its Query indexes, loaded and ready.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quick-installation"><a class="anchor" href="#quick-installation"></a>Quick Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The SDK will run on Python 3.7 - 3.10.
A more detailed guide in our <a href="../project-docs/sdk-full-installation.html" class="xref page">Installation page</a> covers every supported platform, but this section should be enough to get up and running in most cases.</p>
</div>
<div id="tabs-2" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="tabs-2-macos-11-12" class="tab">
<p>macOS 11 &amp; 12</p>
</li>
<li id="tabs-2-red-hat-centos" class="tab">
<p>Red Hat &amp; CentOS</p>
</li>
<li id="tabs-2-debian-ubuntu" class="tab">
<p>Debian &amp; Ubuntu</p>
</li>
<li id="tabs-2-windows" class="tab">
<p>Windows</p>
</li>
</ul>
</div>
<div id="tabs-2-macos-11-12--panel" class="tabpanel" aria-labelledby="tabs-2-macos-11-12">
<div class="paragraph">
<p>If you are running Catalina (macOS 10.15)&#8201;&#8212;&#8201;or have other detailed requirements&#8201;&#8212;&#8201;take a look at our <a href="#project-pages:sdk-full-installation.adoc" class="xref unresolved">full installation guide</a>.
Otherwise, read on for a quick install on macOS <em>Big Sur</em> or <em>Monterey</em>.</p>
</div>
<div class="paragraph">
<p>As of the 4.0.1 release of the Python SDK, wheels are available for Python 3.7 - 3.10.</p>
</div>
<div class="paragraph">
<p>First, make sure that your <em>brew</em> package index is up-to-date:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ brew update</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install a compatible Python 3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ brew install openssl@1.1 python3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that the Python installation can be called from the shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ echo 'export PATH="/usr/local/bin:"$PATH' &gt;&gt; ~/.zshrc</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, install the Python SDK:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo -H python3 -m pip install couchbase</code></pre>
</div>
</div>
</div>
<div id="tabs-2-red-hat-centos--panel" class="tabpanel" aria-labelledby="tabs-2-red-hat-centos">
<div class="paragraph">
<p>Note, check that you have a supported version of Python (3.7 - 3.10).
Suggestions for platforms with an outdated build chain, such as CentOS 7, can be found in our <a href="../project-docs/sdk-full-installation.html" class="xref page">Installation Guide</a>.
Assuming you have an updated build environment, follow these steps.</p>
</div>
<div class="paragraph">
<p>As of the 4.0.2 release of the Python SDK, manylinux wheels are available for Python 3.7 - 3.10.</p>
</div>
<div class="paragraph">
<p>During first-time setup, install the prerequisites:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo yum install gcc gcc-c++ git python3-devel python3-pip openssl-devel</code></pre>
</div>
</div>
<div class="paragraph">
<p>Full details of prerequisites can be found <a href="../project-docs/sdk-full-installation.html#requirements" class="xref page">here</a>.</p>
</div>
<div class="paragraph">
<p>Now you can install the latest Python SDK (for older versions, see the <a href="../project-docs/sdk-release-notes.html" class="xref page">Release Notes page</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 -m pip install couchbase</code></pre>
</div>
</div>
</div>
<div id="tabs-2-debian-ubuntu--panel" class="tabpanel" aria-labelledby="tabs-2-debian-ubuntu">
<div class="paragraph">
<p>Note, check that you have a supported version of Python (3.7 - 3.10).
Suggestions for platforms with an outdated build chain, such as Debian 9, can be found in our <a href="../project-docs/sdk-full-installation.html" class="xref page">Installation Guide</a>.
Assuming you have an updated build environment, follow these steps.</p>
</div>
<div class="paragraph">
<p>As of the 4.0.2 release of the Python SDK, manylinux wheels are available for Python 3.7 - 3.10.</p>
</div>
<div class="paragraph">
<p>During first-time setup, install the prerequisites:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo apt-get install git python3-dev python3-pip python3-setuptools build-essential libssl-dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>Full details of prerequisites can be found <a href="../project-docs/sdk-full-installation.html#requirements" class="xref page">here</a>.</p>
</div>
<div class="paragraph">
<p>Now you can install the latest Python SDK (for older versions, see the <a href="../project-docs/sdk-release-notes.html" class="xref page">Release Notes page</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 -m pip install couchbase</code></pre>
</div>
</div>
</div>
<div id="tabs-2-windows--panel" class="tabpanel" aria-labelledby="tabs-2-windows">
<div class="paragraph">
<p>Download and install Python from <a href="https://www.python.org/downloads" target="_blank" rel="noopener">python.org</a>.
Best practice is to use a Python virtual environment such as <em>venv</em> or <em>pyenv</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Checkout the <a href="https://github.com/pyenv-win/pyenv-win" target="_blank" rel="noopener">pyenv-win</a> project to manage multiple versions of Python.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Wheels are available on Windows for Python 3.7 - 3.10.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">python -m pip install couchbase</code></pre>
</div>
</div>
<div class="paragraph">
<p>The standard Python distributions for Windows include OpenSSL DLLs, as PIP and the inbuilt <code>ssl</code> module require it for correct operation.
The binary wheels for Windows are packaged as a binary wheel built against OpenSSL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you require a version that doesn&#8217;t have a suitable binary wheel on PyPi, follow the <a href="https://github.com/couchbase/couchbase-python-client#alternative-installation-methods">build instructions</a> on the GitHub repo.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If there are any problems, refer to the full <a href="../project-docs/sdk-full-installation.html" class="xref page">Installation page</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step-by-step"><a class="anchor" href="#step-by-step"></a>Step-by-Step</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point we want to transition from the terminal to your code editor of choice.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s now create an empty file named <code>cb-test.py</code> and walk through adding code step-by-step:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connect to a cluster, bucket, and collection;</p>
</li>
<li>
<p>Add and retrieve a new document;</p>
</li>
<li>
<p>Look up (SQL-type query) the new document by attribute value.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>Here are all of the import statements that you will need to run the sample code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L2-L10">from datetime import timedelta

# needed for any cluster connection
from couchbase.auth import PasswordAuthenticator
from couchbase.cluster import Cluster
# needed for options -- cluster, timeout, SQL++ (N1QL) query, etc.
from couchbase.options import (ClusterOptions, ClusterTimeoutOptions,
                               QueryOptions)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="connection"><a class="anchor" href="#connection"></a>Connection</h3>
<div class="paragraph">
<p>The basic connection details that you&#8217;ll need are given below&#8201;&#8212;&#8201;for more background information, refer to the <a href="../howtos/managing-connections.html#connection-strings" class="xref page">Managing Connections page</a>.</p>
</div>
<div id="tabs-3" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="tabs-3-couchbase-capella" class="tab">
<p>Couchbase Capella</p>
</li>
<li id="tabs-3-local-couchbase-server" class="tab">
<p>Local Couchbase Server</p>
</li>
</ul>
</div>
<div id="tabs-3-couchbase-capella--panel" class="tabpanel" aria-labelledby="tabs-3-couchbase-capella">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Couchbase Capella requires mandatory use of TLS (Transport Layer Security).
As of Python SDK version 4.0, the standard certificate required to connect to a Capella cluster is automatically included with no additional configuration.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L14-L32"># Update this to your cluster
endpoint = "--your-instance--.dp.cloud.couchbase.com"
username = "username"
password = "Password123!"
bucket_name = "travel-sample"
# User Input ends here.

# Connect options - authentication
auth = PasswordAuthenticator(username, password)

# Connect options - global timeout opts
timeout_opts = ClusterTimeoutOptions(kv_timeout=timedelta(seconds=10))

# get a reference to our cluster
cluster = Cluster('couchbases://{}'.format(endpoint),
                  ClusterOptions(auth, timeout_options=timeout_opts))

# Wait until the cluster is ready for use.
cluster.wait_until_ready(timedelta(seconds=5))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Couchbase Capella uses <a href="../../../cloud/organizations/organization-projects-overview.html" class="xref page">Roles</a> to control user access to database resources.
For the purposes of this example, we can use the <em>Organization Owner</em> role automatically assigned to a user account during installation of the Capella cluster.
This role grants full access to a Capella organization, including full data access to all projects and clusters.
In a production scenario, we strongly recommend setting up users with more granular access roles as a best practice.</p>
</div>
<div class="paragraph">
<p>For the SDK client to access cluster data, you will need to set up credentials for your database by <a href="../../../cloud/get-started/run-first-queries.html#credentials" class="xref page">following these steps</a>.</p>
</div>
</div>
<div id="tabs-3-local-couchbase-server--panel" class="tabpanel" aria-labelledby="tabs-3-local-couchbase-server">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/hello_world_t.py#L11-L32"># Update this to your cluster
username = "username"
password = "password"
bucket_name = "travel-sample"
cert_path = "path/to/certificate"
# User Input ends here.

# Connect options - authentication
auth = PasswordAuthenticator(
    username,
    password,
    # NOTE: If using SSL/TLS, add the certificate path.
    # We strongly reccomend this for production use.
    # cert_path=cert_path
)

# Get a reference to our cluster
# NOTE: For TLS/SSL connection use 'couchbases://&lt;your-ip-address&gt;' instead
cluster = Cluster('couchbase://localhost', ClusterOptions(auth))

# Wait until the cluster is ready for use.
cluster.wait_until_ready(timedelta(seconds=5))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Couchbase uses <a href="#7.1@server:learn:security/roles.adoc" class="xref unresolved">Role Based Access Control (RBAC)</a> to control access to resources.
For the sake of this example, we are connecting to Couchbase using the <em>Full Admin</em> role created during the installation of our Couchbase Server.
The connection is being made to a single Couchbase node, running locally.</p>
</div>
<div class="paragraph">
<p>Couchbase RBAC is fully described in the <a href="#7.1@server:manage:manage-security/manage-users-and-roles.adoc" class="xref unresolved">Manage Users, Groups, and Roles</a> page.
An <em>authenticator</em>, containing username and password, should be defined, and then passed to the cluster.</p>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Following successful authentication, the bucket can be opened:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L36-L37"># get a reference to our bucket
cb = cluster.bucket(bucket_name)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We are working with the <a href="#7.1@server:manage:manage-settings/install-sample-buckets.adoc" class="xref unresolved">travel-sample</a> data bucket.
If you are not, update the <code>bucket_name</code> variable used in the example with your bucket name.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Python SDK supports full integration with the <a href="../concept-docs/collections.html" class="xref page">Collections</a> feature introduced in Couchbase Server 7.0.
<em>Collections</em> allow documents to be grouped by purpose or theme, according to a specified <em>Scope</em>.
Here we will use the <code>airline</code> collection within the <code>inventory</code> scope from <code>travel-sample</code> bucket as an example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L41">cb_coll = cb.scope("inventory").collection("airline")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code shows how you would use a named collection and scope.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">For Local Couchbase Server only</div>
<div class="paragraph">
<p>The <code>default_collection</code> must be used when connecting to a 6.6 cluster or earlier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/hello_world_t.py#L45-L46"># Get a reference to the default collection, required for older Couchbase server versions
cb_coll_default = cb.default_collection()</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="document-addition-and-retrieval"><a class="anchor" href="#document-addition-and-retrieval"></a>Document Addition and Retrieval</h3>
<div class="paragraph">
<p>Let&#8217;s create a dictionary object in our application that we can add to our <code>travel-sample</code> bucket that conforms to the structure of a document of type <code>airline</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L90-L97">airline = {
    "type": "airline",
    "id": 8091,
    "callsign": "CBS",
    "iata": None,
    "icao": None,
    "name": "Couchbase Airways",
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="../howtos/kv-operations.html" class="xref page">Document operations</a>, such as storing and retrieving documents, can be done using simple methods on the <code>Collection</code> class such as <code>Collection.get</code> and <code>Collection.upsert</code>.
Simply pass the key (and value, if applicable) to the relevant methods.</p>
</div>
<div class="paragraph">
<p>The following function will <em>upsert</em> a document and print the returned <a href="../howtos/concurrent-document-mutations.html" class="xref page">CAS</a> value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L45-L55">

def upsert_document(doc):
    print("\nUpsert CAS: ")
    try:
        # key will equal: "airline_8091"
        key = doc["type"] + "_" + str(doc["id"])
        result = cb_coll.upsert(key, doc)
        print(result.cas)
    except Exception as e:
        print(e)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, we can simply call the <code>upsert_document()</code> function passing in our <code>airline</code> document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L101">upsert_document(airline)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s retrieve that document using a key-value operation.
The following function runs a <code>get()</code> for a document key and either logs out the result or error in our console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L59-L68"># get document function


def get_airline_by_key(key):
    print("\nGet Result: ")
    try:
        result = cb_coll.get(key)
        print(result.content_as[str])
    except Exception as e:
        print(e)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Key-value Operations are described in detail on the <a href="../howtos/kv-operations.html" class="xref page">KV Operations page</a>.</p>
</div>
<div class="paragraph">
<p>Now, we can simply call the <code>get_airline_by_key</code> function passing in our valid document key <code>airline_8091</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L105">get_airline_by_key("airline_8091")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sql-lookup"><a class="anchor" href="#sql-lookup"></a>SQL++ Lookup</h3>
<div class="paragraph">
<p>Couchbase SQL++ (formerly N1QL) queries are performed by invoking the <code>Cluster.query()</code> method.
The following function executes a lookup for <code>airline</code> documents by a provided <code>callsign</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L72-L85"># query for new document by callsign


def lookup_by_callsign(cs):
    print("\nLookup Result: ")
    try:
        sql_query = 'SELECT VALUE name FROM `travel-sample`.inventory.airline WHERE callsign = $1'
        row_iter = cluster.query(
            sql_query,
            QueryOptions(positional_parameters=[cs]))
        for row in row_iter:
            print(row)
    except Exception as e:
        print(e)</code></pre>
</div>
</div>
<div class="paragraph">
<p>We call the <code>lookup_by_callsign</code> function passing in our callsign <code>CBS</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/af3090d1921bb84bb84885badf82b1b7af133ba6/modules/hello-world/examples/cloud.py#L109">lookup_by_callsign("CBS")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="execute"><a class="anchor" href="#execute"></a>Execute!</h3>
<div class="paragraph">
<p>Now we can run our code using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 cb-test.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>The results you should expect are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">Upsert CAS:
1598469741559152640

Get Result:
{'type': 'airline', 'id': 8091, 'callsign': 'CBS', 'iata': None, 'icao': None, 'name': 'Couchbase Airways'}

Lookup Result:
Couchbase Airways</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps"><a class="anchor" href="#next-steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now you&#8217;re up and running, try one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Our <a href="sample-application.html" class="xref page">Travel Sample Application</a> demonstrates all the basics you need to know;</p>
</li>
<li>
<p>Explore <a href="../howtos/kv-operations.html" class="xref page">Key Value Operations</a> (CRUD) against a document database;</p>
</li>
<li>
<p>Or <a href="../howtos/n1ql-queries-with-sdk.html" class="xref page">Query</a> with our SQL-based SQL++ language;</p>
</li>
<li>
<p>Or read up on <a href="../concept-docs/data-services.html" class="xref page">which service fits your use case</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="additional-resources"><a class="anchor" href="#additional-resources"></a>Additional Resources</h3>
<div class="paragraph">
<p>The API reference is generated for each release and the latest can be found <a href="http://docs.couchbase.com/sdk-api/couchbase-python-client/">here</a>.</p>
</div>
<div class="paragraph">
<p>Older API references are linked from their respective sections in the <a href="../project-docs/sdk-release-notes.html" class="xref page">Individual Release Notes</a>.
Most of the API documentation can also be accessed via <code>pydoc</code>.</p>
</div>
<div class="paragraph">
<p><a href="../project-docs/migrating-sdk-code-to-3.n.html" class="xref page">Migration page</a> highlights the main differences to be aware of when migrating your code.</p>
</div>
<div class="paragraph">
<p>Couchbase welcomes community contributions to the Python SDK.
The Python SDK source code is available on <a href="https://github.com/couchbase/couchbase-python-client">GitHub</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h3>
<div class="ulist">
<ul>
<li>
<p>Couchbase Server is designed to work in the same WAN or availability zone as the client application.
If you&#8217;re running the SDK on your laptop against a Capella cluster, see further information on:</p>
<div class="ulist">
<ul>
<li>
<p>Notes on <a href="../ref/client-settings.html#constrained-network-environments" class="xref page">Constrained Network Environments</a>.</p>
</li>
<li>
<p><a href="../project-docs/compatibility.html#network-requirements" class="xref page">Network Requirements</a>.</p>
</li>
<li>
<p>If you have a consumer-grade router which has problems with DNS-SRV records review our <a href="../howtos/troubleshooting-cloud-connections.html#troubleshooting-host-not-found" class="xref page">Troubleshooting Guide</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Our <a href="https://forums.couchbase.com/c/python-sdk/10">community forum</a> is a great source of help.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"SDKs","components":["dotnet-sdk","java-sdk","nodejs-sdk","python-sdk","tableau-connector","sdk-extensions"],"url":"/home/sdk.html","latestVersions":{"dotnet-sdk":"3.3","java-sdk":"3.3","nodejs-sdk":"4.1","python-sdk":"4.0","tableau-connector":"1.x","sdk-extensions":"master"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
