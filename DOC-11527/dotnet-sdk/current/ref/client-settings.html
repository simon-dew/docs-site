<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Client Settings for the .NET SDK | Couchbase Docs (Preview)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11527/dotnet-sdk/current/ref/client-settings.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="The &lt;code&gt;ClusterOptions&lt;/code&gt; class enables you to configure .NET SDK options for bootstrapping, timeouts, reliability, and performance.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="dotnet-sdk">
<meta name="dcterms.identifier" content="3.3">
<meta name="page-url" content="/dotnet-sdk/current/ref/client-settings.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11527/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11527/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-dotnet/edit/release/3.3/modules/ref/pages/client-settings.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../hello-world/overview.html">.NET SDK</a></li>
<li class="crumb">References</li>
<li class="crumb"><a href="client-settings.html">Client Settings</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Client Settings for the .NET SDK</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The <code>ClusterOptions</code> class enables you to configure .NET SDK options for bootstrapping, timeouts, reliability, and performance. You can configure the client programmatically using JSON config files, Environmental variables settings,  XML based configuration such has app.config or web.config files.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-basics"><a class="anchor" href="#configuration-basics"></a>Configuration Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuration is essentially the same as SDK 2.x retaining capabilites with less tunable properties.
Instead of using a <code>ClientConfiguration</code> object, you would use a <code>ClusterOptions</code> object.
For example, to use a custom timeout for Key/Value (K/V) operations  you would do something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">// SDK 3.0 custom k/v timeout
var options = new ClusterOptions
{
    KvTimeout = TimeSpan.FromMilliseconds(5)
};</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Fluent Configuration</div>
<p>you can also build the <code>Cluster Options</code> in a fluent way for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var options = new ClusterOptions()
  .WithConnectionString("couchbase://localhost")
  .WithCredentials(username: "user", password: "password")
  .WithBuckets("travel-sample")
  .WithLogging(LoggerFactory.Create(builder =&gt;
  {
      builder.AddFilter("Couchbase", LogLevel.Debug)
      .AddEventLog();
  }));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The cluster options are passed into the <code>Cluster</code> object via a constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var cluster = new Cluster("couchbase://localhost", options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or by using one of the static <code>Cluster.Connect(&#8230;&#8203;)</code> methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var cluster = Cluster.Connect("couchbase://localhost", options);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dotnet-json-configuration"><a class="anchor" href="#dotnet-json-configuration"></a>JSON Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In support of .NET Core, the client can now be configured using JSON config files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
JSON configuration is only supported for versions of the SDK 2.3.0 and greater running on .NET Core 1.0 or greater.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Below is an example of how <code>appsettings.json</code> can be coded for cluster options, note the key <code>ClusterOptions</code> is simply a name of an object and can be anything you may want it to be.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "AllowedHosts": "*",
  "ClusterOptions": {
    "ConnectionString": "couchbase://localhost",
    "UserName": "user",
    "Password": "password",
    "BucketName" : "travel-sample"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of building the <code>options</code> from the JSON configuration above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var settings = Configuration.GetSection("ClusterOptions");
services.Configure&lt;ClusterOptions&gt;(settings);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The options can now be made accessible through any services as below,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">public CustomService ( IOptions&lt;ClusterOptions&gt; clusterOptions)
{
    var bucketName = clusterOptions.BucketName;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The "travel-sample" bucket is opened using any of the overridden defaults.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-options"><a class="anchor" href="#configuration-options"></a>Configuration Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following tables cover all possible configuration options and explain their usage and default values.
The tables categorize the options into groups for bootstrapping, timeout, reliability, performance, and advanced options.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security-options"><a class="anchor" href="#security-options"></a>Security Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default the client will connect to Couchbase Server using an unencrypted connection.
If you are using the Enterprise Edition, it&#8217;s possible to secure the connection using TLS.</p>
</div>
<div class="listingblock">
<div class="title">Template for configuring security settings</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var options = new ClusterOptions()
{
    EnableTls = true
};</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unless you set <code>EnableTls</code> to <code>true</code>, none of the other security settings in this section have any effect.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name: <strong>Enabling Secure Connections</strong></dt>
<dd>
<p>Cluster Option: <code>EnableTls(boolean)</code></p>
<div class="paragraph">
<p>Default:  <code>false</code></p>
</div>
<div class="paragraph">
<p>Set this to <code>true</code> to encrypt all communication between the client and server using TLS.
This feature requires the Enterprise Edition of Couchbase Server 3.0 or later.
If TLS is enabled you must also specify the trusted certificates by calling exactly one of <code>trustCertificate</code>, <code>trustCertificates</code>, or <code>trustManagerFactory</code>.
Please see the <a href="../howtos/managing-connections.html" class="xref page">Managing Connections</a> section for more details on how to set it up properly.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Enable Certificate Based Authentication</strong></dt>
<dd>
<p>Cluster Option: <code>EnableCertificateAuthentication(boolean)</code></p>
<div class="paragraph">
<p>EnableCertificateAuthentication is required to be set to <code>true</code> to use Certificate Authentication</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Ignore Remote Certificate Name Mismatch</strong></dt>
<dd>
<p>Cluster Option: <code>IgnoreRemoteCertificateNameMismatch(boolean)</code></p>
<div class="paragraph">
<p>Default: <code>false</code></p>
</div>
<div class="paragraph">
<p>If TLS is enabled via <code>EnableTls</code>, setting this to true will disable hostname validation when authenticating
connections to Couchbase Server.
This is typically done in test or development environments where a domain name (FQDN) has not been specified
for the bootstrap server&#8217;s URI, and the IP address is use to validate the certificate, which will fail with a
<code>RemoteCertificateNameMismatch</code> error.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Enable Certificate Revocation</strong></dt>
<dd>
<p>Cluster Option: <code>EnableCertificateRevocation(boolean)</code></p>
<div class="paragraph">
<p>Default:  <code>false</code></p>
</div>
<div class="paragraph">
<p>A Boolean value that specifies whether the certificate revocation list is checked during authentication.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="io-options"><a class="anchor" href="#io-options"></a>I/O Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides basic settings that will come in handy while configuring network related operations.</p>
</div>
<div class="listingblock">
<div class="title">Template for configuring I/O settings</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var options = new ClusterOptions()
{
    EnableDnsSrvResolution = true
};</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name: <strong>DNS SRV Enabled</strong></dt>
<dd>
<p>Cluster Option: <code>EnableDnsSrvResolution(boolean)</code></p>
<div class="paragraph">
<p>Default:  <code>true</code></p>
</div>
<div class="paragraph">
<p>Gets the bootstrap node list from a DNS SRV record.
See the <a href="../howtos/managing-connections.html#using-dns-srv-records" class="xref page">Connection Management</a> section for more information on how to use it properly.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Mutation Tokens Enabled</strong></dt>
<dd>
<p>Cluster Options: <code>EnableMutationTokens(boolean)</code></p>
<div class="paragraph">
<p>Default:  <code>true</code></p>
</div>
<div class="paragraph">
<p>Mutation tokens allow enhanced durability requirements as well as advanced SQL++ (formerly N1QL) querying capabilities.
Set this to <code>false</code> if you do not require these features and wish to avoid the associated overhead.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Socket Keepalive</strong></dt>
<dd>
<p>Cluster Option: <code>EnableTcpKeepAlives(boolean)</code></p>
<div class="paragraph">
<p>Default:  <code>true</code></p>
</div>
<div class="paragraph">
<p>If enabled, the client periodically sends a TCP keepalive to the server to prevent firewalls and other network equipment from dropping idle TCP connections.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Socket Keepalive Interval</strong></dt>
<dd>
<p>Cluster Option: <code>TcpKeepAliveTime(TimeSpan)</code></p>
<div class="paragraph">
<p>Default:  <code>60s</code></p>
</div>
<div class="paragraph">
<p>The idle time after which a TCP keepalive gets fired.
(This setting has no effect if <code>EnableTcpKeepAlives</code> is <code>false</code>.)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This setting only propagates to the OS on Linux when the epoll transport is used.
On all other platforms, the OS-configured time is used (and you need to tune it there if you want to override the default interval).
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Key/Value Endpoints per Node</strong></dt>
<dd>
<p>Cluster Option: <a href="https://docs.couchbase.com/sdk-api/couchbase-net-client/html/P_Couchbase_ClusterOptions_NumKvConnections.htm"><code>NumKvConnections(int)</code></a></p>
<div class="paragraph">
<p>Default:  <code>2</code></p>
</div>
<div class="paragraph">
<p>The number of actual endpoints (sockets) to open per node in the cluster against the Key/Value service.
By default, for every node in the cluster one socket is opened where all traffic is pushed through.
That way the SDK implicitly benefits from network batching characteristics when the workload increases.
If you suspect based on profiling and benchmarking that the socket is saturated you can think about slightly increasing it to have more "parallel pipelines".
This might be especially helpful if you need to push large documents through it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="../concept-docs/durability-replication-failure-considerations.html#synchronous-writes" class="xref page">Durable Write</a> operations with Couchbase Server 6.5 and above require up to 16 kvEndpoints per node, for most efficient operation, unless the environment dictates something a little lower.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Max HTTP Endpoints per Service per Node</strong></dt>
<dd>
<p>Cluster Option: <code>MaxHttpConnections(int)</code></p>
<div class="paragraph">
<p>Default:  <code>5</code></p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Each service (except the Key/Value service) has a separate dynamically sized pool of HTTP connections for issuing requests.
This setting puts an upper bound on the number of HTTP connections in each pool.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name: <strong>Enable Config Poll</strong></dt>
<dd>
<p>Cluster Option: <code>EnableConfigPolling(boolean)</code></p>
<div class="paragraph">
<p>Default:  <code>true</code></p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Enables Configuration <code>heartbeat</code> checks.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name: <strong>Config Poll Interval</strong></dt>
<dd>
<p>Cluster Option: <code>ConfigPollInterval(TimeSpan)</code></p>
<div class="paragraph">
<p>Default:  <code>2.5s</code></p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The interval at which the client fetches cluster topology information in order to proactively detect changes.
<code>EnableConfigPolling</code> should be set to true to leverage this setting.</p>
</div>
<div class="sect2">
<h3 id="circuit-breaker-options"><a class="anchor" href="#circuit-breaker-options"></a>Circuit Breaker Options</h3>
<div class="paragraph">
<p>Circuit breakers are a tool for preventing cascading failures.</p>
</div>
<div class="paragraph">
<p>When a circuit is closed, requests are sent to the server as normal.
If too many requests fail within a certain time window, the breaker opens the circuit, preventing requests from going through.</p>
</div>
<div class="paragraph">
<p>When a circuit is open, any requests to the service immediately fail without the client even talking to the server.
After a "sleep delay" elapses, the next request is allowed to go through the to the server. This trial request is called a "canary."</p>
</div>
<div class="paragraph">
<p>Each service has an associated circuit breaker which may be configured independently of the others.
The <code>IoConfig</code> builder has methods for configuring the circuit breakers of each service.</p>
</div>
<div class="listingblock">
<div class="title">Template for configuring circuit breaker settings</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var options = new ClusterOptions()
{
    CircuitBreakerConfiguration =
    new Couchbase.Core.CircuitBreakers.CircuitBreakerConfiguration
    {
        Enabled = true,
        VolumeThreshold = 45,
        ErrorThresholdPercentage = 25,
        SleepWindow = TimeSpan.FromSeconds(1),
        RollingWindow = TimeSpan.FromMinutes(2)

    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The properties of a circuit breaker are described below.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Enabled</dt>
<dd>
<p>Default: <code>true</code></p>
<div class="paragraph">
<p>Enables or disables this circuit breaker.</p>
</div>
<div class="paragraph">
<p>If this property is set to false, then the circuit breaker is not used and all other properties are ignored.</p>
</div>
</dd>
<dt class="hdlist1">VolumeThreshold</dt>
<dd>
<p>Default: <code>20</code></p>
<div class="paragraph">
<p>The volume threshold defines how many operations must be in the window before the threshold percentage can be meaningfully calculated.</p>
</div>
</dd>
<dt class="hdlist1">ErrorThresholdPercentage</dt>
<dd>
<p>Default: <code>50</code></p>
<div class="paragraph">
<p>The percentage of operations in a window that may fail before the circuit is opened.
The value is an integer in the range [0,100].</p>
</div>
</dd>
<dt class="hdlist1">SleepWindow</dt>
<dd>
<p>Default: <code>5s</code></p>
<div class="paragraph">
<p>The delay between when the circuit opens and when the canary is tried.</p>
</div>
</dd>
<dt class="hdlist1">RollingWindow</dt>
<dd>
<p>Default: <code>1m</code></p>
<div class="paragraph">
<p>How long the window is in which the number of failed ops are tracked in a rolling fashion.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="timeout-options"><a class="anchor" href="#timeout-options"></a>Timeout Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default timeout values are suitable for most environments, and should be adjusted only after profiling the expected latencies in your deployment environment.
If you get a timeout exception, it may be a symptom of another issue; increasing the timeout duration is sometimes not the best long-term solution.</p>
</div>
<div class="paragraph">
<p>Most timeouts can be overridden on a per-operation basis (for example, by passing a custom options block to a "get" or "query" method).
The values set here are used as the defaults when no per-operation timeout is specified.</p>
</div>
<div class="listingblock">
<div class="title">Template for configuring timeouts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp"> var options = new ClusterOptions()
{
    KvTimeout = TimeSpan.FromSeconds(2.5),
    KvDurabilityTimeout = TimeSpan.FromSeconds(10),
    ViewTimeout = TimeSpan.FromSeconds(75),
    QueryTimeout = TimeSpan.FromSeconds(75),
    SearchTimeout = TimeSpan.FromSeconds(75),
    AnalyticsTimeout = TimeSpan.FromSeconds(75),
    ManagementTimeout = TimeSpan.FromSeconds(75)
};</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="timeout-options-reference"><a class="anchor" href="#timeout-options-reference"></a>Timeout Options Reference</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Name: <strong>Key-Value Timeout</strong></dt>
<dd>
<p>Cluster Option: <code>KvTimeout(TimeSpan)</code></p>
<div class="paragraph">
<p>Default: <code>2.5s</code>&#8201;&#8212;&#8201;<em>but see TIP, below</em></p>
</div>
<div class="paragraph">
<p>The Key/Value default timeout is used on operations which are performed on a specific key if not overridden by a custom timeout.
This includes all commands like Get(), GetFromReplica() and all mutation commands, but does not include operations that are performed with enhanced durability requirements.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<a href="../concept-docs/durability-replication-failure-considerations.html#synchronous-writes" class="xref page">Durable Write operations</a> have their own timeout setting, <code>KvDurableTimeout</code>, see below.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Key-Value Durable Operation Timeout</strong></dt>
<dd>
<p>Cluster Option: <code>KvDurableTimeout(TimeSpan)</code></p>
<div class="paragraph">
<p>Default: <code>10s</code></p>
</div>
<div class="paragraph">
<p>Key/Value operations with enhanced durability requirements may take longer to complete, so they have a separate default timeout.</p>
</div>
<div class="paragraph">
<p><strong>Do not</strong> set this above 65s, which is the maximum possible <code>SyncWrite</code> timeout on the Server side.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The <code>KvDurableTimeout</code> property is not part of the stable API and may change or be removed at any time.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Name: <strong>View Timeout</strong></dt>
<dd>
<p>Cluster Option: <code>ViewTimeout(TimeSpan)</code></p>
<div class="paragraph">
<p>Default: <code>75s</code></p>
</div>
<div class="paragraph">
<p>The View timeout is used on view operations if not overridden by a custom timeout.
Note that it is set to such a high timeout compared to key/value since it can affect hundreds or thousands of rows.
Also, if there is a node failure during the request the internal cluster timeout is set to 60 seconds.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Query Timeout</strong></dt>
<dd>
<p>Cluster Option: <code>QueryTimeout(TimeSpan)</code></p>
<div class="paragraph">
<p>Default: <code>75s</code></p>
</div>
<div class="paragraph">
<p>The Query timeout is used on all SQL++ query operations if not overridden by a custom timeout.
Note that it is set to such a high timeout compared to key/value since it can affect hundreds or thousands of rows.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Search Timeout</strong></dt>
<dd>
<p>Cluster Option: <code>SearchTimeout(TimeSpan)</code></p>
<div class="paragraph">
<p>Default: <code>75s</code></p>
</div>
<div class="paragraph">
<p>The Search timeout is used on all FTS operations if not overridden by a custom timeout.
Note that it is set to such a high timeout compared to key/value since it can affect hundreds or thousands of rows.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Analytics Timeout</strong></dt>
<dd>
<p>Cluster Option: <code>AnalyticsTimeout(TimeSpan)</code></p>
<div class="paragraph">
<p>Default: <code>75s</code></p>
</div>
<div class="paragraph">
<p>The Analytics timeout is used on all Analytics query operations if not overridden by a custom timeout.
Note that it is set to such a high timeout compared to key/value since it can affect hundreds or thousands of rows.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Management Timeout</strong></dt>
<dd>
<p>Cluster Option: <code>ManagementTimeout(TimeSpan)</code></p>
<div class="paragraph">
<p>Default: <code>75s</code></p>
</div>
<div class="paragraph">
<p>The management timeout is used on all cluster management APIs (BucketManager, UserManager, CollectionManager, QueryIndexManager, etc.) if not overridden by a custom timeout.
The default is quite high because some operations (such as flushing a bucket, for example) might take a long time.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general-options"><a class="anchor" href="#general-options"></a>General Options</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Name: <strong>Unordered Execution</strong></dt>
<dd>
<p>Cluster Option: <code>UnorderedExecutionEnabled</code></p>
<div class="paragraph">
<p>Default: <code>true</code></p>
</div>
<div class="paragraph">
<p>From Couchbase 7.0, Out-of-Order execution allows the server to concurrently handle multiple requests on the same connection, potentially improving performance for durable writes and multi-document ACID transactions.
This means that tuning the number of connections (KV endpoints) is no longer necessary as a workaround where data not available in the cache is causing timeouts.</p>
</div>
<div class="paragraph">
<p>This is set to true by default. Note, changing the setting will only affect Server versions 7.0 onwards.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Transcoder</strong></dt>
<dd>
<p>Cluster Option: <code>Transcoder(Transcoder)</code></p>
<div class="paragraph">
<p>Default: <code>JsonTranscoder</code></p>
</div>
<div class="paragraph">
<p>The transcoder is responsible for converting KV binary packages to and from C# objects.</p>
</div>
<div class="paragraph">
<p>The default transcoder assumes you are working with JSON documents.
It uses the configured <code>jsonSerializer</code> to convert between JSON and C# objects.
When writing documents it sets the appropriate flags to indicate the document content is JSON.</p>
</div>
<div class="paragraph">
<p>The transcoder configured here is just the default; it can be overridden on a per-operation basis.</p>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Threshold Tracer</strong></dt>
<dd>
<p>Cluster Option: <code>WithThresholdTracing(ThresholdOptions)</code></p>
<div class="paragraph">
<p>Default:  <code>ThresholdLoggingTracer</code></p>
</div>
<div class="paragraph">
<p>The default tracer logs the slowest requests per service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var clusterOptions = new ClusterOptions();
  clusterOptions.WithThresholdTracing(thresholdOptions =&gt;
  {
      thresholdOptions.WithEmitInterval(TimeSpan.FromSeconds(10));
      thresholdOptions.WithSampleSize(10);
      thresholdOptions.WithKvThreshold(TimeSpan.FromMilliseconds(500));
      thresholdOptions.WithQueryThreshold(TimeSpan.FromSeconds(1));
      thresholdOptions.WithSearchThreshold(TimeSpan.FromSeconds(1));
      thresholdOptions.WithViewThreshold(TimeSpan.FromSeconds(1));
      thresholdOptions.WithAnalyticsThreshold(TimeSpan.FromSeconds(1));
  });</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Name: <strong>Orphaned Response Tracer</strong></dt>
<dd>
<p>Cluster Option: <code>WithOrphanTracing(OrphanOptions)</code></p>
<div class="paragraph">
<p>Default:  <code>enabled</code></p>
</div>
<div class="paragraph">
<p>Orphaned Response Logger will log orphaned responses if a request fails to complete for some reason.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">var clusterOptions = new ClusterOptions();
  clusterOptions.WithOrphanTracing(orphanOptions =&gt;
  {
    orphanOptions.WithEnabled(true);
    orphanOptions.WithEmitInterval(TimeSpan.FromSeconds(10));
    orphanOptions.WithSampleSize(10);
  });</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="commonly-used-options"><a class="anchor" href="#commonly-used-options"></a>Commonly Used Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The defaults above have been carefully considered and in general it is not recommended to make changes without expert guidance or careful testing of the change.
Some options may be commonly used together in certain envionments or to achieve certain effects.</p>
</div>
<div class="sect2">
<h3 id="constrained-network-environments"><a class="anchor" href="#constrained-network-environments"></a>Constrained Network Environments</h3>
<div class="paragraph">
<p>Though <a href="../project-docs/compatibility.html#network-requirements" class="xref page">wide area network</a> (WAN) connections are not directly supported, some development and non-critical operations activities across a WAN are convenient.
Most likely for connecting to Couchbase Capella, or Server running in your own cloud account, whilst developing from a laptop or other machine not located in the same data center.
These settings are some you may want to consider adjusting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connect Timeout to 30s</p>
</li>
<li>
<p>Key-Value Timeout to 5s</p>
</li>
<li>
<p>Config Poll Interval to 10s</p>
</li>
<li>
<p>Circuit Breaker ErrorThresholdPercentage to 75</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A program using the SDK can also use the <code>waitUntilReady()</code> API call to handle all connection negotiations and related errors at one place.
It may be useful to block in, for example, a basic console testing application for up to 30 seconds before proceeding in the program to perform data operations.
See the API reference for further details.</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"SDKs","components":["dotnet-sdk","java-sdk","nodejs-sdk","python-sdk","tableau-connector","sdk-extensions"],"url":"/home/sdk.html","latestVersions":{"dotnet-sdk":"3.3","java-sdk":"3.3","nodejs-sdk":"4.1","python-sdk":"4.0","tableau-connector":"1.x","sdk-extensions":"master"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
