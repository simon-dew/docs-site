<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="382px" preserveAspectRatio="none" style="width:412px;height:382px;background:#FFFFFF;" version="1.1" viewBox="0 0 412 382" width="412px" zoomAndPan="magnify"><defs/><g><ellipse cx="106" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M177.5,46.6 L177.5,63.2001 L157.5,67.2001 L177.5,71.2001 L177.5,87.8001 A0,0 0 0 0 177.5,87.8001 L400.5,87.8001 A0,0 0 0 0 400.5,87.8001 L400.5,56.6 L390.5,46.6 L177.5,46.6 A0,0 0 0 0 177.5,46.6 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M390.5,46.6 L390.5,56.6 L400.5,56.6 L390.5,46.6 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="183.5" y="64.6">Transaction started before the initial</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="183.5" y="80.2001">N1QL statement is called</text><rect fill="#F1F1F1" height="34.4001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="54.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="64.5" y="72.0001">start transaction</text><rect fill="#F1F1F1" height="34.4001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="11" y="107.8001"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="167" x="24" y="129.8001">var q = execute N1QL statement</text><rect fill="#F1F1F1" height="34.4001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="69" y="218.7001"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="82" y="240.7002">process q</text><polygon fill="#F1F1F1" points="88.5,162.2002,123.5,162.2002,135.5,174.2002,123.5,186.2002,88.5,186.2002,76.5,174.2002,88.5,162.2002" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="16" x="110" y="197.2001">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="88.5" y="178.6001">next q?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="64.5" y="172.0002">no</text><rect fill="#F1F1F1" height="34.4001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="48" y="295.1002"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="58" y="317.1003">commit or rollback</text><ellipse cx="106" cy="360.5003" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="106" cy="360.5003" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="106" y1="30" y2="50"/><polygon fill="#181818" points="102,40,106,50,110,40,106,44" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="106" y1="84.4001" y2="107.8001"/><polygon fill="#181818" points="102,97.8001,106,107.8001,110,97.8001,106,101.8001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="106" y1="186.2002" y2="218.7001"/><polygon fill="#181818" points="102,208.7001,106,218.7001,110,208.7001,106,212.7001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="106" y1="253.1002" y2="263.1002"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="155" y1="263.1002" y2="263.1002"/><polygon fill="#181818" points="151,227.3002,155,217.3002,159,227.3002,155,223.3002" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="155" x2="155" y1="174.2002" y2="263.1002"/><line style="stroke:#181818;stroke-width:1.0;" x1="155" x2="135.5" y1="174.2002" y2="174.2002"/><polygon fill="#181818" points="145.5,170.2002,135.5,174.2002,145.5,178.2002,141.5,174.2002" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="76.5" x2="57" y1="174.2002" y2="174.2002"/><polygon fill="#181818" points="53,213.3002,57,223.3002,61,213.3002,57,217.3002" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="57" x2="57" y1="174.2002" y2="275.1002"/><line style="stroke:#181818;stroke-width:1.0;" x1="57" x2="106" y1="275.1002" y2="275.1002"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="106" y1="275.1002" y2="295.1002"/><polygon fill="#181818" points="102,285.1002,106,295.1002,110,285.1002,106,289.1002" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="106" y1="142.2002" y2="162.2002"/><polygon fill="#181818" points="102,152.2002,106,162.2002,110,152.2002,106,156.2002" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="106" x2="106" y1="329.5003" y2="349.5003"/><polygon fill="#181818" points="102,339.5003,106,349.5003,110,339.5003,106,343.5003" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[b1e8363fafcf8f1907ef4dc57470dc33]
@startuml
start

:start transaction;
note right: Transaction started before the initial\nN1QL statement is called
: var q = execute N1QL statement;

 while (next q?) is (yes)

   : process q;

 endwhile (no)

:commit or rollback;

stop
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>