<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Sub-Document Operations with the Java SDK | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4752/java-sdk/3.0/howtos/subdocument-operations.html">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="java-sdk">
    <meta name="dcterms.identifier" content="3.0">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4752">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../../server/6.5/introduction/intro.html">Server</a></li>
                  <li><a href="../../../server/6.5/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../../server/6.5/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../../server/6.5/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../../server/6.5/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="#">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="#">Lite</a></li>
                  <li><a href="#">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../../server/6.5/sdk/overview.html">SDKs</a></li>
                  <li><a href="#">C</a></li>
                  <li><a href="#">.NET</a></li>
                  <li><a href="#">Go</a></li>
                  <li><a href="../hello-world/start-using-sdk.html">Java</a></li>
                  <li><a href="#">Node.js</a></li>
                  <li><a href="#">PHP</a></li>
                  <li><a href="#">Python</a></li>
                  <li><a href="#">Scala</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../../server/6.5/connectors/intro.html">Connectors</a></li>
                  <li><a href="#">Elasticsearch</a></li>
                  <li><a href="../../../server/6.5/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="#">Kafka</a></li>
                  <li><a href="#">Spark</a></li>
                  <li><a href="../../../server/6.5/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="../hello-world/start-using-sdk.html"><span class="title">Java SDK</span> <span class="version">3.0</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li class="current"><a class="navbar-item" href="subdocument-operations.html">Java SDK 3.0</a></li>
                  <li><a class="navbar-item" href="../../2.7/start-using-sdk.html">Java SDK 2.7</a></li>
                  <li><a class="navbar-item" href="../../2.6/start-using-sdk.html">Java SDK 2.6</a></li>
                  <li><a class="navbar-item" href="../../2.5/start-using-sdk.html">Java SDK 2.5</a></li>
                  <li><a class="navbar-item" href="../../2.4/start-using-sdk.html">Java SDK 2.4</a></li>
                  <li><a class="navbar-item" href="../../2.3/start-using-sdk.html">Java SDK 2.3</a></li>
                  <li><a class="navbar-item" href="../../2.2/java-intro.html">Java SDK 2.2</a></li>
                  <li><a class="navbar-item" href="../../2.1/java-intro.html">Java SDK 2.1</a></li>
                </ul>
                <ul class="related">
                  <li><a class="navbar-item" href="#">c-sdk</a></li>
                  <li><a class="navbar-item" href="#">dotnet-sdk</a></li>
                  <li><a class="navbar-item" href="#">go-sdk</a></li>
                  <li><a class="navbar-item" href="#">nodejs-sdk</a></li>
                  <li><a class="navbar-item" href="#">php-sdk</a></li>
                  <li><a class="navbar-item" href="#">python-sdk</a></li>
                  <li><a class="navbar-item" href="#">scala-sdk</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../hello-world/start-using-sdk.html">Start Using the Java SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../hello-world/sample-application.html">Sample Application</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Working with Data</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="kv-operations.html">Key Value Operations</a>
    </span>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="subdocument-operations.html">Sub-Document Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-queries-with-sdk.html">Query</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="analytics-using-sdk.html">Analytics</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="full-text-searching-with-sdk.html">Full Text Search</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Advanced Data Operations</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="concurrent-async-apis.html">Async &amp; Reactive APIs</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="distributed-acid-transactions-from-the-sdk.html">Distributed ACID Transactions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="transcoders-nonjson.html">Transcoders &amp; Non-JSON</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="working-with-collections.html">Working with Collections DP</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Managing Couchbase</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-connections.html">Managing Connections</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Errors &amp; Diagnostics</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="collecting-information-and-logging.html">Logging</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Learn</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/concepts.html">Overview</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/buckets-and-clusters.html">Buckets &amp; Clusters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/collections.html">Collections &amp; Scope</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/compression.html">Compression</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../concept-docs/data-model.html">Data Model</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/documents.html">Documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/nonjson.html">Non-json Docs</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/subdocument-operations.html">Sub-Documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/xattr.html">XATTR &amp; Virtual XATTR</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../concept-docs/errors.html">Errors and Diagnostics</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/health-check.html">Health Check</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/response-time-observability.html">Tracing</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/durability-replication-failure-considerations.html">Failure Considerations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/encryption.html">Field Level Encryption</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../concept-docs/data-services.html">Service Selection</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/analytics-for-sdk-users.html">Analytics</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/understanding-views.html">Map Reduce Views</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/n1ql-query.html">Query</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../concept-docs/full-text-search-overview.html">Search</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">References</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="https://docs.couchbase.com/sdk-api/couchbase-java-client">API Reference</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../ref/client-settings.html">Client Settings</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Project Docs</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../project-docs/sdk-release-notes.html">SDK Release Notes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../project-docs/distributed-transactions-java-release-notes.html">Transactions Release Notes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../project-docs/compatibility.html">Compatibility</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../project-docs/migrating-sdk-code-to-3.n.html">Migrating to SDK 3 API</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../project-docs/sdk-licenses.html">Licenses</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../project-docs/get-involved.html">Get involved</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../hello-world/start-using-sdk.html">Java SDK</a></li>
    <li class="crumb">Working with Data</li>
    <li class="crumb"><a href="subdocument-operations.html">Sub-Document Operations</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-java/edit/release/3.0/modules/howtos/pages/subdocument-operations.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">Sub-Document Operations with the Java SDK</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Sub-Document operations can be used to efficiently access and change parts of documents.
</blockquote>
</div>
<div class="paragraph">
<p>Sub-Document operations may be quicker and more network-efficient than <em>full-document</em> operations such as <em>upsert</em>, <em>replace</em> and <em>get</em> because they only transmit the accessed sections of the document over the network.</p>
</div>
<div class="paragraph">
<p>Sub-Document operations are also atomic, in that if one Sub-Document mutation fails then all will, allowing safe modifications to documents with built-in concurrency control.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sub-documents"><a class="anchor" href="#sub-documents"></a>Sub-Documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While full-document retrievals retrieve the entire document and full document updates require sending the entire document, Sub-Document retrievals only retrieve relevant parts of a document and Sub-Document updates only require sending the updated portions of a document.</p>
</div>
<div class="paragraph">
<p>You should use Sub-Document operations when you are modifying only portions of a document, and full-document operations when the contents of a document is to change significantly.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The Sub-Document operations described on this page are for <em>Key-Value</em> requests only: they are not related to Sub-Document N1QL queries.
(Sub-Document N1QL queries are explained in the section <a href="n1ql-queries-with-sdk.html" class="page">Querying with N1QL</a>.)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to use Sub-Document operations you need to specify a <em>path</em> indicating the location of the Sub-Document.
The <em>path</em> follows <a href="#path-syntax">Path syntax</a>.
Considering the document:</p>
</div>
<div class="listingblock">
<div class="title">customer123.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "Douglas Reynholm",
  "email": "douglas@reynholmindustries.com",
  "addresses": {
    "billing": {
      "line1": "123 Any Street",
      "line2": "Anytown",
      "country": "United Kingdom"
    },
    "delivery": {
      "line1": "123 Any Street",
      "line2": "Anytown",
      "country": "United Kingdom"
    }
  },
  "purchases": {
    "complete": [
      339, 976, 442, 666
    ],
    "abandoned": [
      157, 42, 999
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The paths <code>name</code>, <code>addresses.billing.country</code> and <code>purchases.complete[0]</code> are all valid paths.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="retrieving"><a class="anchor" href="#retrieving"></a>Retrieving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>lookupIn</em> operations query the document for certain path(s); these path(s) are then returned.
You have a choice of actually retrieving the document path using the <em>get</em> Sub-Document operation, or simply querying the existence of the path using the <em>exists</em> Sub-Document operation.
The latter saves even more bandwidth by not retrieving the contents of the path if it is not needed.</p>
</div>
<div class="paragraph">
<div class="title">Imports</div>
<p>The examples use the following imports:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import com.couchbase.client.core.error.subdoc.PathExistsException;
import com.couchbase.client.core.msg.kv.DurabilityLevel;
import com.couchbase.client.java.*;
import com.couchbase.client.java.json.JsonArray;
import com.couchbase.client.java.json.JsonObject;
import com.couchbase.client.java.kv.*;
import reactor.core.publisher.Mono;

import java.util.Arrays;
import java.util.Optional;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.ExecutionException;
import java.util.Collections;

import static com.couchbase.client.java.kv.LookupInSpec.*;
import static com.couchbase.client.java.kv.MutateInOptions.mutateInOptions;
import static com.couchbase.client.java.kv.MutateInSpec.*;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Retrieve Sub-Document value</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LookupInResult result = collection.lookupIn(
  "customer123",
  Collections.singletonList(get("addresses.delivery.country"))
);

String str = result.contentAs(0, String.class);
System.out.println("Country = " + str);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The operation used here is <code>LookupInSpec.get</code>, but we import this static method directly for readability.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Check existence of Sub-Document path</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LookupInResult result = collection.lookupIn(
  "customer123",
  Collections.singletonList(exists("addresses.delivery.does_not_exist"))
);

boolean exists = result.contentAs(0, Boolean.class);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
LookupInResult has an <code>exists</code> method, but this should not be confused with the exists <em>operation</em>.  The <code>exists</code> method
is used to check if anything was returned by the server for a given operation.  The result of the exists operation should
be checked with <code>contentAs(X, Boolean.class)</code>, as in the example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Multiple operations can be combined:</p>
</div>
<div class="listingblock">
<div class="title">Combine multiple lookup operations</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LookupInResult result = collection.lookupIn(
    "customer123",
    Arrays.asList(
        get("addresses.delivery.country"),
        exists("addresses.delivery.does_not_exist")
    )
);

String country = result.contentAs(0, String.class);
boolean exists = result.contentAs(1, Boolean.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="choosing-an-api"><a class="anchor" href="#choosing-an-api"></a>Choosing an API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Java SDK provides three APIs for all operations.  There&#8217;s the simple blocking one you&#8217;ve already seen, then this
asynchronous variant that returns Java <code>CompletableFuture</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CompletableFuture&lt;LookupInResult&gt; future = collection.async().lookupIn(
  "customer123",
  Collections.singletonList(get("addresses.delivery.country"))
);

// Just for example, block on the result - this is not best practice
LookupInResult result = future.get();</code></pre>
</div>
</div>
<div class="paragraph">
<p>And a third that uses reactive programming primitives from <a href="https://projectreactor.io/">Project Reactor</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Mono&lt;LookupInResult&gt; mono = collection.reactive().lookupIn(
  "customer123",
  Collections.singletonList(get("addresses.delivery.country"))
);

// Just for example, block on the result - this is not best practice
LookupInResult result = mono.block();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutating"><a class="anchor" href="#mutating"></a>Mutating</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mutation operations modify one or more paths in the document.
The simplest of these operations is <em>upsert</em>, which, similar to the fulldoc-level <em>upsert</em>, will either modify the value of an existing path or create it if it does not exist:</p>
</div>
<div class="listingblock">
<div class="title">Upserting a new Sub-Document value</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("customer123", Arrays.asList(
        upsert("email", "dougr96@hotmail.com")
));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Likewise, the <em>insert</em> operation will only add the new value to the path if it does not exist:</p>
</div>
<div class="listingblock">
<div class="title">Inserting a Sub-Document value</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">try {
    collection.mutateIn("customer123", Collections.singletonList(
      insert("email", "dougr96@hotmail.com")
    ));
} catch (PathExistsException err) {
    System.out.println("Error, path already exists");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dictionary values can also be replaced or removed, and you may combine any number of mutation operations within the same general <em>mutateIn</em> API.
Here&#8217;s an example of one which replaces one path and removes another.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("customer123", Arrays.asList(
        remove("addresses.billing"),
        replace("email", "dougr96@hotmail.com")
));</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>mutateIn</code> is an <em>atomic</em> operation.  If any single operation fails, then the entire document is left unchanged.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="array-append-and-prepend"><a class="anchor" href="#array-append-and-prepend"></a>Array Append and Prepend</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>arrayPrepend</em> and <em>arrayAppend</em> operations are true array prepend and append operations.
Unlike fulldoc <em>append</em>/<em>prepend</em> operations (which simply concatenate bytes to the existing value), <em>arrayAppend</em> and <em>arrayPrepend</em> are JSON-aware:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("customer123", Collections.singletonList(
  arrayAppend("purchases.complete", Collections.singletonList(777))
));

        // purchases.complete is now [339, 976, 442, 666, 777]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("customer123", Collections.singletonList(
  arrayPrepend("purchases.abandoned", Collections.singletonList(18))
));

        // purchases.abandoned is now [18, 157, 49, 999]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your document only needs to contain an array, you do not have to create a top-level object wrapper to contain it.
Simply initialize the document with an empty array and then use the empty path for subsequent Sub-Document array operations:</p>
</div>
<div class="listingblock">
<div class="title">Creating and populating an array document</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.upsert("my_array", JsonArray.create());

collection.mutateIn("my_array", Collections.singletonList(
  arrayAppend("", Collections.singletonList("some element"))
));
        // the document my_array is now ["some element"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you wish to create an array if it does not exist and also push elements to it within the same operation you may use the <a href="#subdoc_create_path"><em>createPath</em></a> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("some_doc", Collections.singletonList(
  arrayAppend("some.array", Collections.singletonList("hello world")).createPath()
));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arrays-as-unique-sets"><a class="anchor" href="#arrays-as-unique-sets"></a>Arrays as Unique Sets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Limited support also exists for treating arrays like unique sets, using the <em>arrayAddUnique</em> command.
This will do a check to determine if the given value exists or not before actually adding the item to the array:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("customer123", Collections.singletonList(
  arrayAddUnique("purchases.complete", 95)
));

try {
    collection.mutateIn("customer123", Collections.singletonList(
      arrayAddUnique("purchases.complete", 95)
    ));
} catch (PathExistsException err) {
    System.out.println("Error, path already exists");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that currently the <em>arrayAddUnique</em> will fail with a <em>PathMismatchException</em> if the array contains JSON <em>floats</em>, <em>objects</em>, or <em>arrays</em>.
The <em>arrayAddUnique</em> operation will also fail with <em>CannotInsertValueException</em> if the value to be added is one of those types as well.</p>
</div>
<div class="paragraph">
<p>Note that the actual position of the new element is undefined, and that the array is not ordered.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="array-insertion"><a class="anchor" href="#array-insertion"></a>Array Insertion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>New elements can also be <em>inserted</em> into an array.
While <em>append</em> will place a new item at the <em>end</em> of an array and <em>prepend</em> will place it at the beginning, <em>insert</em> allows an element to be inserted at a specific <em>position</em>.
The position is indicated by the last path component, which should be an array index.
For example, to insert <code>"cruel"</code> as the second element in the array <code>["Hello", "world"]</code>, the code would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("some_doc", Collections.singletonList(
  arrayInsert("foo.bar[1]", Collections.singletonList("cruel"))
));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the array must already exist and that the index must be valid (i.e.
it must not point to an element which is out of bounds).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="counters-and-numeric-fields"><a class="anchor" href="#counters-and-numeric-fields"></a>Counters and Numeric Fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Counter operations allow the manipulation of a <em>numeric</em> value inside a document.
These operations are logically similar to the <em>increment</em> and <em>decrement</em> full-document operations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MutateInResult result = collection.mutateIn("customer123", Collections.singletonList(
  increment("logins", 1)
));

// Counter operations return the updated count
Long count = result.contentAs(0, Long.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>increment</em> and <em>decrement</em> operations perform simple arithmetic against a numeric value.
The updated value is returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.upsert("player432", JsonObject.create().put("gold", 1000));

collection.mutateIn("player432", Collections.singletonList(
  decrement("gold", 150)
));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The existing value for counter operations must be within range of a 64 bit signed integer.
If the value does not exist, the operation will create it (and its parents, if <em>createPath</em> is enabled).</p>
</div>
<div class="paragraph">
<p>Note that there are several differences as compared to the full-document counter operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sub-Document counters have a range of -9223372036854775807 to 9223372036854775807, whereas full-document counters have a range of 0 to 18446744073709551615</p>
</li>
<li>
<p>Sub-Document counter operations protect against overflow and underflow, returning an error if the operation would exceed the range.
Full-document counters will use normal C semantics for overflow (in which the overflow value is carried over above 0), and will silently fail on underflow, setting the value to 0 instead.</p>
</li>
<li>
<p>Sub-Document counter operations can operate on any numeric value within a document, while full-document counter operations require a specially formatted counter document with only the counter value.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="executing-multiple-operations"><a class="anchor" href="#executing-multiple-operations"></a>Executing Multiple Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Multiple Sub-Document operations can be executed at once on the same document, allowing you to retrieve or modify several Sub-Documents at once.
When multiple operations are submitted within the context of a single <em>lookupIn</em> or <em>mutateIn</em> command, the server will execute all the operations with the same version of the document.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unlike <em>batched operations</em> which is simply a way of sending multiple individual operations efficiently on the network, multiple Sub-Document operations are formed into a single command packet, which is then executed atomically on the server.
You can submit up to 16 operations at a time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When submitting multiple <em>mutation</em> operations within a single <em>mutateIn</em> command, those operations are considered to be part of a single transaction: if any of the mutation operations fail, the server will logically roll-back any other mutation operations performed within the <em>mutateIn</em>, even if those commands would have been successful had another command not failed.</p>
</div>
<div class="paragraph">
<p>When submitting multiple <em>retrieval</em> operations within a single <em>lookupIn</em> command, the status of each command does not affect any other command.
This means that it is possible for some retrieval operations to succeed and others to fail.
While their statuses are independent of each other, you should note that operations submitted within a single <em>lookupIn</em> are all executed against the same <em>version</em> of the document.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="subdoc_create_path"><a class="anchor" href="#subdoc_create_path"></a>Creating Paths</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sub-Document mutation operations such as <em>upsert</em> or <em>insert</em> will fail if the <em>immediate parent</em> is not present in the document.
Consider:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "level_0": {
        "level_1": {
            "level_2": {
                "level_3": {
                    "some_field": "some_value"
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looking at the <code>some_field</code> field (which is really <code>level_0.level_1.level_2.level_3.some_field</code>), its <em>immediate</em> parent is <code>level_3</code>.
If we were to attempt to insert another field, <code>level_0.level_1.level_2.level_3.another_field</code>, it would succeed because the immediate parent is present.
However if we were to attempt to <em>insert</em> to <code>level_1.level_2.foo.bar</code> it would fail, because <code>level_1.level_2.foo</code> (which would be the immediate parent) does not exist.
Attempting to perform such an operation would result in a Path Not Found error.</p>
</div>
<div class="paragraph">
<p>By default the automatic creation of parents is disabled, as a simple typo in application code can result in a rather confusing document structure.
Sometimes it is necessary to have the server create the hierarchy however.
In this case, the <em>createPath</em> option may be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn("customer123", Collections.singletonList(
  upsert("level_0.level_1.foo.bar.phone",
    JsonObject.create()
      .put("num", "311-555-0101")
      .put("ext", 16))
    .createPath()
));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="concurrent-modifications"><a class="anchor" href="#concurrent-modifications"></a>Concurrent Modifications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Concurrent Sub-Document operations on different parts of a document will not conflict.
For example the following two blocks can execute concurrently without any risk of conflict:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Thread 1
collection.mutateIn("customer123", Collections.singletonList(
  arrayAppend("purchases.complete", Collections.singletonList(99))
));

// Thread 2
collection.mutateIn("customer123", Collections.singletonList(
  arrayAppend("purchases.abandoned", Collections.singletonList(101))
));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even when modifying the <em>same</em> part of the document, operations will not necessarily conflict.
For example, two concurrent <em>arrayAppend</em> operations to the same array will both succeed, never overwriting the other.</p>
</div>
<div class="paragraph">
<p>So in some cases the application will not need to supply a <a href="concurrent-document-mutations.html" class="page">CAS</a> value to protect
against concurrent modifications.</p>
</div>
<div class="paragraph">
<p>If CAS is required then it can be provided like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">GetResult doc = collection.get("player432");
collection.mutateIn(
  "player432",
  Collections.singletonList(decrement("gold", 150)),
  mutateInOptions().cas(doc.cas())
);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="durability"><a class="anchor" href="#durability"></a>Durability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase’s traditional durability, using <code>PersistTo</code> and <code>ReplicateTo</code>, is still available, particuarly for talking to Couchbase Server 6.0 and earlier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn(
  "key",
  Collections.singletonList(MutateInSpec.insert("foo", "bar")),
  mutateInOptions().durability(PersistTo.ACTIVE, ReplicateTo.ONE)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Couchbase Server 6.5 and up, this is built upon with <a href="../concept-docs/durability-replication-failure-considerations.html#durable-writes" class="page">Durable Writes</a>, which uses the concept of majority to indicate the number of configured Data Service nodes to which commitment is required:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">collection.mutateIn(
  "key",
  Collections.singletonList(MutateInSpec.insert("foo", "bar")),
  mutateInOptions().durability(DurabilityLevel.MAJORITY)
);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="error-handling"><a class="anchor" href="#error-handling"></a>Error Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sub-Document operations have their own set of errors.
When programming with Sub-Document, be prepared for any of the full-document errors (such as <em>DocumentDoesNotExistException</em>) as well as
special Sub-Document errors which are received when certain constraints are not satisfied.
Some of the errors include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>PathNotFoundException</strong>: When retrieving a path, this means the path does not exist in the document.
When inserting or upserting a path, this means the <em>immediate parent</em> does not exist.</p>
</li>
<li>
<p><strong>PathExistsException</strong>: In the context of an <em>insert</em>, it means the given path already exists.
In the context of <em>arrayAddUnique</em>, it means the given value already exists.</p>
</li>
<li>
<p><strong>PathMismatchException</strong>: This means the path may exist in the document, but that there is a type conflict between the path in the document and the path in the command.
Consider the document:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{ "tags": ["reno", "nevada", "west", "sierra"] }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The path <code>tags.sierra</code> is a mismatch, since <code>tags</code> is actually an array, while the path assumes it is a JSON object (dictionary).</p>
</div>
</li>
<li>
<p><strong>DocumentNotJsonException</strong>: This means you are attempting to modify a binary document using Sub-Document operations.</p>
</li>
<li>
<p><strong>PathInvalidException</strong>: This means the path is invalid for the command.
Certain commands such as <em>arrayInsert</em> expect array elements as their final component, while others such as <em>upsert</em> and <em>insert</em> expect dictionary (object) keys.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a Sub-Document command fails a top-level error is reported (<em>MultiMutationException</em>), rather than an individual error code (e.g. <em>PathNotFoundException</em>).
When receiving a top-level error code, you should traverse the results of the command to see which individual code failed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="path-syntax"><a class="anchor" href="#path-syntax"></a>Path Syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Path syntax largely follows N1QL conventions: A path is divided into components, with each component referencing a specific <em>level</em> in a document hierarchy.
Components are separated by dots (<code>.</code>) in the case where the element left of the dot is a dictionary, or by brackets (<code>[n]</code>) where the element left of the bracket is an array and <code>n</code> is the index within the array.</p>
</div>
<div class="paragraph">
<p>As a special extension, you can indicate the <em>last element</em> of an array by using an index of <code>-1</code>, for example to get the last element of the array in the document</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"some":{"array":[1,2,3,4,5,6,7,8,9,0]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>some.array[-1]</code> as the path, which will return the element <code>0</code>.</p>
</div>
<div class="paragraph">
<p>Each path component must conform as a JSON string, as if it were surrounded by quotes, and any character in the path which may invalidate it as a JSON string must be escaped by a backslash (<code>\</code>).
In other words, the path component must match exactly the path inside the document itself.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"literal\"quote": {"array": []}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>must be referenced as <code>literal\"quote.array</code>.</p>
</div>
<div class="paragraph">
<p>If the path also has special path characters (i.e.
a dot or brackets) it may be escaped using N1QL escapes.
Considering the document</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"literal[]bracket": {"literal.dot": true}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A path such as
 `literal[]bracket`.`literal.dot`.
You can use double-backticks (``) to reference a literal backtick.</p>
</div>
<div class="paragraph">
<p>If you need to combine both JSON <em>and</em> path-syntax literals you can do so by escaping the component from any JSON string characters (e.g.
a quote or backslash) and then encapsulating it in backticks (<code>`path`</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently, paths cannot exceed 1024 characters, and cannot be more than 32 levels deep.
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2019 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
