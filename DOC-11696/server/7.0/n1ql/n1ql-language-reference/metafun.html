<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Miscellaneous Utility Functions | Couchbase Docs (Preview)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11696/server/current/n1ql/n1ql-language-reference/metafun.html">
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Miscellaneous utility functions enable you to perform tasks beyond the usual evaluation and transformation of data.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.0">
<meta name="page-url" content="/server/7.0/n1ql/n1ql-language-reference/metafun.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11696/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11696/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.2" data-url="../../../current/n1ql/n1ql-language-reference/metafun.html">7.2</option>
        <option value="7.0" data-url="metafun.html" selected>7.0</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/n1ql/pages/n1ql-language-reference/metafun.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-banner">
<i class="fas fa-file-alt"></i> <p>A newer version of this documentation is available.</p>
<a class="btn" href="../../../current/n1ql/n1ql-language-reference/metafun.html">View Latest</a>
</div>
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">server</a></li>
<li class="crumb">Develop</li>
<li class="crumb"><a href="../query.html">Query</a></li>
<li class="crumb"><a href="index.html">N1QL Language Reference</a></li>
<li class="crumb"><a href="functions.html">Functions</a></li>
<li class="crumb"><a href="metafun.html">Miscellaneous Utility Functions</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Miscellaneous Utility Functions</h1>
<div class="labels">
<ul>
<li class="concept"><span><i class="far fa-lightbulb"></i> concept</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Miscellaneous utility functions enable you to perform tasks beyond the usual evaluation and transformation of data.
For example, there are functions to retrieve information about a document or item, perform base64 encoding and decoding, generate UUIDs, and control the flow of a query.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="abort"><a class="anchor" href="#abort"></a>ABORT(<code>expression</code>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 7.0)</em></p>
</div>
<div class="paragraph">
<p>Generates an error.
The error message contains the text specified by the given <code class="var">expression</code>.</p>
</div>
<div class="paragraph">
<p>This function is useful for flow control when <a href="createfunction.html" class="xref page">creating inline user-defined functions</a>.
You can use <a href="conditionalops.html" class="xref page">conditional operators</a> to check the parameters, and use this function to generate an error if something is wrong.</p>
</div>
<div class="sect2">
<h3 id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="var">expression</code></dt>
<dd>
<p>An expression resolving to a string.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="return-value"><a class="anchor" href="#return-value"></a>Return Value</h3>
<div class="paragraph">
<p>The function does not return a return value.</p>
</div>
<div class="paragraph">
<p>If this function is executed in a query, it causes the query to halt with an error code 5011.
The error message contains the text specified by the given <code class="var">expression</code>.</p>
</div>
<div class="paragraph">
<p>When this function is executed by a user-defined function, it causes the query to halt with an error code 10109.
The error message shows the name of the user-defined function and contains the text specified by the given <code class="var">expression</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="examples"><a class="anchor" href="#examples"></a>Examples</h3>
<div class="exampleblock">
<div class="title">Example 1. Abort a query</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT ABORT("Something went wrong");</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "code": 5011,
    "msg": "Abort: \"Something went wrong\". - cause: \"Something went wrong\""
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. User-defined function with error checking</div>
<div class="content">
<div class="listingblock">
<div class="title">Function</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE OR REPLACE FUNCTION rstr(vString, vLen) LANGUAGE INLINE AS
CASE
  WHEN NOT IS_STRING(vString)
    THEN ABORT("Search string is not a string")
  WHEN NOT IS_NUMBER(vLen)
    THEN ABORT("Substring length is not a number")
  WHEN vLen &gt; LENGTH(vString)
    THEN ABORT("Substring longer than search string")
  ELSE SUBSTR(vString, LENGTH(vString) - vLen, vLen)
END;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Test invalid string argument</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">EXECUTE FUNCTION rstr(100, 4);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "code": 10109,
    "msg": "Error executing function rstr : \"Search string is not a string\" - cause: \"Search string is not a string\""
  }
]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Test invalid number argument</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">EXECUTE FUNCTION rstr("Couchbase", "foo");</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "code": 10109,
    "msg": "Error executing function rstr : \"Substring length is not a number\" - cause: \"Substring length is not a number\""
  }
]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Test out-of-range value</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">EXECUTE FUNCTION rstr("Couchbase", 10);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "code": 10109,
    "msg": "Error executing function rstr : \"Substring longer than search string\" - cause: \"Substring longer than search string\""
  }
]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Test with valid arguments</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">EXECUTE FUNCTION rstr("Couchbase", 4);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  "base"
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="base64"><a class="anchor" href="#base64"></a>BASE64(<code class="var">expression</code>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Returns the base64 encoding of the given <code class="var">expression</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="base64-encode"><a class="anchor" href="#base64-encode"></a>BASE64_ENCODE(<code class="var">expression</code>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alias of <a href="#base64">BASE64()</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="base64-decode"><a class="anchor" href="#base64-decode"></a>BASE64_DECODE(<code class="var">expression</code>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reverses the encoding done by the <a href="#base64">BASE64()</a> or <a href="#base64-encode">BASE64_ENCODE()</a> functions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="meta"><a class="anchor" href="#meta"></a>META( [ <code>keyspace_expr</code> ] ) [ .<code>property</code> ]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This function returns the <a href="../../learn/data/data.html#metadata" class="xref page">metadata</a> for the document or keyspace specified by <code class="var">keyspace_expr</code>.
The metadata is returned as a JSON object.</p>
</div>
<div class="paragraph">
<p>To return a single property from the metadata, you must use a <a href="nestedops.html#field-selection" class="xref page">nested expression</a> containing the <code>META()</code> function and the required property, for example <code>META().id</code>.
The supported metadata properties are described below.</p>
</div>
<div class="paragraph">
<p>You can use the <code>META()</code> function with a property to <a href="indexing-meta-info.html" class="xref page">index metadata information</a>.
Only certain metadata properties are indexable; these are indicated in the description below.</p>
</div>
<div class="paragraph">
<p>You can also use the <code>META()</code> function with a property in the predicate of an <a href="join.html#section_ek1_jnx_1db" class="xref page">ANSI JOIN Clause</a>.</p>
</div>
<div class="sect2">
<h3 id="arguments-2"><a class="anchor" href="#arguments-2"></a>Arguments</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">keyspace_expr</dt>
<dd>
<p>[Optional.
Default is current keyspace.]</p>
<div class="paragraph">
<p>String or an expression that results in a keyspace or a document.
This argument is not required when creating an index, since the <code>META()</code> function implicitly uses the keyspace being indexed.</p>
</div>
</dd>
<dt class="hdlist1">property</dt>
<dd>
<p>[Optional] The name of a single metadata property.
The property name must be separated from the <code>META()</code> function by a dot (<code>.</code>) and may be one of the following:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">cas</dt>
<dd>
<p>Value representing the current state of an item which changes every time the item is modified.
For details, refer to <a href="#3.0@java-sdk:howtos:concurrent-document-mutations.adoc" class="xref unresolved">Concurrent Document Mutations</a>.</p>
<div class="paragraph">
<p>This property is indexable.</p>
</div>
</dd>
<dt class="hdlist1">expiration</dt>
<dd>
<p>Value representing a document&#8217;s expiration date.
A value of 0 (zero) means no expiration date.
For details, refer to <a href="#3.0@java-sdk:howtos:kv-operations.adoc#document-expiration" class="xref unresolved">KV Operations</a>.</p>
<div class="paragraph">
<p>This property is indexable.</p>
</div>
</dd>
<dt class="hdlist1">flags</dt>
<dd>
<p>Value set by the SDKs for non-JSON documents.
For details, refer to <a href="#3.0@java-sdk:howtos:transcoders-nonjson.adoc" class="xref unresolved">Non-JSON Documents</a>.</p>
<div class="paragraph">
<p>This property is not indexable.
If you attempt to build an index on this property, an error is returned.</p>
</div>
</dd>
<dt class="hdlist1">id</dt>
<dd>
<p>Value representing a document&#8217;s unique ID number.</p>
<div class="paragraph">
<p>This property is indexable.</p>
</div>
</dd>
<dt class="hdlist1">type</dt>
<dd>
<p>Value for the type of document; currently only <code>json</code> is supported.</p>
<div class="paragraph">
<p>This property is not indexable.
If you attempt to build an index on this property, an error is returned.</p>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="return-value-2"><a class="anchor" href="#return-value-2"></a>Return Value</h3>
<div class="paragraph">
<p>The bare function returns a JSON object containing the specified document&#8217;s metadata.
When the function is used with a property as part of a nested expression, the expression returns the JSON value of the property.</p>
</div>
</div>
<div class="sect2">
<h3 id="examples-2"><a class="anchor" href="#examples-2"></a>Examples</h3>
<div class="exampleblock">
<div class="title">Example 3. Return all metadata</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT META() AS metadata
FROM `travel-sample`.inventory.airline
LIMIT 3;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
      "metadata": {
          "cas": 1583859008179798016,
          "expiration": 0,
          "flags": 33554432,
          "id": "airline_10",
          "type": "json"
      }
  },
  {
      "metadata": {
          "cas": 1583859008180846592,
          "expiration": 0,
          "flags": 33554432,
          "id": "airline_10123",
          "type": "json"
      }
  },
  {
      "metadata": {
          "cas": 1583859008181895168,
          "expiration": 0,
          "flags": 33554432,
          "id": "airline_10226",
          "type": "json"
      }
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 4. Return a single metadata property</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT META().id AS id
FROM `travel-sample`.inventory.airline
LIMIT 3;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": "airline_10"
  },
  {
    "id": "airline_10123"
  },
  {
    "id": "airline_10226"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 5. Return a single metadata property for a specified keyspace</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT META(route).id AS id <i class="conum" data-value="1"></i><b>(1)</b>
FROM `travel-sample`.inventory.route
JOIN `travel-sample`.inventory.airport
ON route.sourceairport = airport.faa
WHERE airport.city = "Paris"
LIMIT 3;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": "route_10136"
  },
  {
    "id": "route_10137"
  },
  {
    "id": "route_10138"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You must specify a keyspace for the <code>META()</code> function because there is more than one FROM term.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For examples showing how to index metadata information, refer to <a href="indexing-meta-info.html" class="xref page">Indexing Meta Info</a>.</p>
</div>
<div class="paragraph">
<p>For examples showing how to use metadata information in the predicate of an ANSI JOIN clause, refer to <a href="join.html" class="xref page">JOIN Clause</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pairs"><a class="anchor" href="#pairs"></a>PAIRS(<code class="var">obj</code>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This function generates an array of arrays of [<code class="var">field_name</code>, <code>value</code>] pairs of all possible fields in the given JSON object <code class="var">obj</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nested sub-object fields are explored recursively.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="arguments-3"><a class="anchor" href="#arguments-3"></a>Arguments</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code class="var">obj</code></dt>
<dd>
<p>a valid JSON object</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="return-value-3"><a class="anchor" href="#return-value-3"></a>Return Value</h3>
<div class="paragraph">
<p>Array of [<code class="var">field_name</code>, <code>value</code>] arrays for each field in the input object <code class="var">obj</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code class="var">obj</code> has nested objects, then fields of such nested sub-objects are also explored and corresponding inner-array elements are produced.</p>
</li>
<li>
<p>If <code class="var">obj</code> is an array, then each element of the array is explored and corresponding inner-array elements are produced.</p>
</li>
<li>
<p>If <code class="var">obj</code> is a primitive data type of integer or string, then it returns NULL, as they don&#8217;t have a name.</p>
</li>
<li>
<p>If <code class="var">obj</code> is an array of primitive data types, then it returns an empty array <code>[]</code>.</p>
</li>
<li>
<p>If <code class="var">obj</code> is an array of objects, then it returns an array of objects.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the field_name is in curly brackets, it&#8217;s treated as an array and returns an array; but without curly bracket, it&#8217;s treated as a primitive data type and returns NULL.
For example,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PAIRS(public_likes)</code> returns NULL</p>
</li>
<li>
<p><code>PAIRS({public_likes})</code> returns an array</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="examples-3"><a class="anchor" href="#examples-3"></a>Examples</h3>
<div id="pairs-example1" class="exampleblock">
<div class="title">Example 6. Input value of a nested object</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT t        AS orig_t,
       PAIRS(t) AS pairs_t
FROM   `travel-sample`.inventory.airport t
LIMIT  1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "orig_t": {
      "airportname": "Calais Dunkerque",
      "city": "Calais",
      "country": "France",
      "faa": "CQF",
      "geo": {
        "alt": 12,
        "lat": 50.962097,
        "lon": 1.954764
      },
      "icao": "LFAC",
      "id": 1254,
      "type": "airport",
      "tz": "Europe/Paris"
    },
    "pairs_t": [
      [
        "id",
        1254
      ],
      [
        "city",
        "Calais"
      ],
      [
        "faa",
        "CQF"
      ],
      [
        "geo",
        {
          "alt": 12,
          "lat": 50.962097,
          "lon": 1.954764
        }
      ],
      [
        "lon",
        1.954764
      ],
      [
        "alt",
        12
      ],
      [
        "lat",
        50.962097
      ],
      [
        "type",
        "airport"
      ],
      [
        "tz",
        "Europe/Paris"
      ],
      [
        "airportname",
        "Calais Dunkerque"
      ],
      [
        "country",
        "France"
      ],
      [
        "icao",
        "LFAC"
      ]
    ]
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="pairs-example2" class="exampleblock">
<div class="title">Example 7. Input value of an array</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT public_likes          AS orig_t,
       PAIRS(public_likes)   AS pairs_array_t,
       PAIRS({public_likes}) AS pairs_obj_t
FROM   `travel-sample`.inventory.hotel
LIMIT  1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "orig_t": [
      "Julius Tromp I",
      "Corrine Hilll",
      "Jaeden McKenzie",
      "Vallie Ryan",
      "Brian Kilback",
      "Lilian McLaughlin",
      "Ms. Moses Feeney",
      "Elnora Trantow"
    ],
    "pairs_array_t": [],
    "pairs_obj_t": [
      [
        "public_likes",
        [
          "Julius Tromp I",
          "Corrine Hilll",
          "Jaeden McKenzie",
          "Vallie Ryan",
          "Brian Kilback",
          "Lilian McLaughlin",
          "Ms. Moses Feeney",
          "Elnora Trantow"
        ]
      ],
      [
        "public_likes",
        "Julius Tromp I"
      ],
      [
        "public_likes",
        "Corrine Hilll"
      ],
      [
        "public_likes",
        "Jaeden McKenzie"
      ],
      [
        "public_likes",
        "Vallie Ryan"
      ],
      [
        "public_likes",
        "Brian Kilback"
      ],
      [
        "public_likes",
        "Lilian McLaughlin"
      ],
      [
        "public_likes",
        "Ms. Moses Feeney"
      ],
      [
        "public_likes",
        "Elnora Trantow"
      ]
    ]
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="pairs-example3a" class="exampleblock">
<div class="title">Example 8. Input value of a primitive (field document string) data type</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT country        AS orig_t,
       PAIRS(country) AS pairs_t
FROM   `travel-sample`.inventory.airport
LIMIT  1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "orig_t": "France",
    "pairs_t": null
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="pairs-example3b" class="exampleblock">
<div class="title">Example 9. Input value of a primitive (constant) data type</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT PAIRS("N1QL")             AS constant_string,
       PAIRS(4)                  AS constant_int,
       PAIRS([1,2,3])            AS constant_int_array,
       PAIRS({"name" : 3})       AS object_constant_int,
       PAIRS({"name" : [1,2,3]}) AS object_constant_int_array;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "constant_int": null,
    "constant_int_array": [],
    "constant_string": null,
    "object_constant_int": [
      [
        "name",
        3
      ]
    ],
    "object_constant_int_array": [
      [
        "name",
        [
          1,
          2,
          3
        ]
      ],
      [
        "name",
        1
      ],
      [
        "name",
        2
      ],
      [
        "name",
        3
      ]
    ]
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="pairs-example4" class="exampleblock">
<div class="title">Example 10. Input value of an array of objects</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT reviews[*].ratings,
       PAIRS({reviews[*].ratings}) AS pairs_t
FROM   `travel-sample`.inventory.hotel
LIMIT  1;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "pairs_t": [
      [
        "ratings",
        [
          {
            "Cleanliness": 5,
            "Location": 4,
            "Overall": 4,
            "Rooms": 3,
            "Service": 5,
            "Value": 4
          },
          {
            "Business service (e.g., internet access)": 4,
            "Check in / front desk": 4,
            "Cleanliness": 4,
            "Location": 4,
            "Overall": 4,
            "Rooms": 3,
            "Service": 3,
            "Value": 5
          }
        ]
      ],
      [
        "ratings",
        {
          "Cleanliness": 5,
          "Location": 4,
          "Overall": 4,
          "Rooms": 3,
          "Service": 5,
          "Value": 4
        }
      ],
      [
        "ratings",
        {
          "Business service (e.g., internet access)": 4,
          "Check in / front desk": 4,
          "Cleanliness": 4,
          "Location": 4,
          "Overall": 4,
          "Rooms": 3,
          "Service": 3,
          "Value": 5
        }
      ],
      [
        "Cleanliness",
        5
      ],
      [
        "Location",
        4
      ],
      [
        "Overall",
        4
      ],
      [
        "Rooms",
        3
      ],
      [
        "Service",
        5
      ],
      [
        "Value",
        4
      ],
      [
        "Cleanliness",
        4
      ],
      [
        "Location",
        4
      ],
      [
        "Rooms",
        3
      ],
      [
        "Value",
        5
      ],
      [
        "Business service (e.g., internet access)",
        4
      ],
      [
        "Check in / front desk",
        4
      ],
      [
        "Overall",
        4
      ],
      [
        "Service",
        3
      ]
    ],
    "ratings": [
      {
        "Cleanliness": 5,
        "Location": 4,
        "Overall": 4,
        "Rooms": 3,
        "Service": 5,
        "Value": 4
      },
      {
        "Business service (e.g., internet access)": 4,
        "Check in / front desk": 4,
        "Cleanliness": 4,
        "Location": 4,
        "Overall": 4,
        "Rooms": 3,
        "Service": 3,
        "Value": 5
      }
    ]
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="uuid"><a class="anchor" href="#uuid"></a>UUID()</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Returns a version 4 universally unique identifier (UUID).</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
