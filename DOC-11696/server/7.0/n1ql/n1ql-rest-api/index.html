<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>N1QL REST API | Couchbase Docs (Preview)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11696/server/7.0/n1ql/n1ql-rest-api/index.html">
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.0">
<meta name="page-url" content="/server/7.0/n1ql/n1ql-rest-api/index.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11696/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11696/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.2" data-url="../../../current/index.html">7.2</option>
        <option value="7.0" data-url="index.html" selected>7.0</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/n1ql/pages/n1ql-rest-api/index.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="../../rest-api/rest-intro.html">REST API Reference</a></li>
<li class="crumb"><a href="../../rest-api/rest-endpoints-all.html">REST API endpoint list</a></li>
<li class="crumb"><a href="index.html">Query Service API</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">N1QL REST API</h1>
<div class="labels">
<ul>
<li class="concept"><span><i class="far fa-lightbulb"></i> concept</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>N1QL provides a REST API to enable clients to execute N1QL statements.
The REST API runs synchronously, so once execution of the statement in the request is started, results are streamed back to the client, terminating when execution of the statement finishes.
In this section, you will find information about the REST endpoints, request and response parameters, and examples.</p>
</div>
<div class="paragraph">
<p>The REST endpoints are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>http://node:8093/query/service</code></p>
</li>
<li>
<p><code>https://node:18093/query/service</code> (for secure access)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <code class="var">node</code> is the host name or IP address of a computer running the N1QL query engine.</p>
</div>
<div class="paragraph">
<p>The N1QL REST API query service allows you to execute a N1QL statement.</p>
</div>
<div class="paragraph">
<p>See <a href="examplesrest.html" class="xref page">Examples</a> for REST API samples.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="request-specification"><a class="anchor" href="#request-specification"></a>Request specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to specify requests.</p>
</div>
<div class="sect2">
<h3 id="request-format"><a class="anchor" href="#request-format"></a>Request format</h3>
<div class="paragraph">
<p>Here is the format for GET and POST requests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>GET /query/service</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>POST /query/service</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="request-parameters"><a class="anchor" href="#request-parameters"></a>Request parameters</h3>
<div class="paragraph">
<p>For a table of request parameters that can be passed in a request to the <code>/query/service</code> endpoint with examples, see
<a href="../../settings/query-settings.html#section_nnj_sjk_k1b" class="xref page">Request-Level Parameters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="named-parameters"><a class="anchor" href="#named-parameters"></a>Named parameters</h3>
<div class="paragraph">
<p>If the statement in a request contains named parameters, the request should contain the parameters described in the following table.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. A statement containing named parameters</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT detail FROM emp WHERE name = $nval AND age &gt; $aval</code></pre>
</div>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statement</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT detail FROM emp WHERE name = $nval AND age &gt; $aval</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$nval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"smith"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$aval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">45</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>There should be a named parameter in the request for each query parameter in the request’s statement parameter.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>%</strong> symbol is the escape character in URIs, so when using <strong>%</strong> as a wildcard in a query, we need to escape that by replacing it with its corresponding ASCII code <strong>%25</strong>.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 2. A statement containing a wildcard parameter</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ curl -v http://10.144.210.101:8093/query/service \
  -u Administrator:password \
  -d 'statement=SELECT meta().id
      FROM `travel-sample`.inventory.hotel
      WHERE meta().id LIKE $1 &amp;args=["hotel_1002%25"]'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": "hotel_10026"
  },
  {
    "id": "hotel_10025"
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="positional-parameters"><a class="anchor" href="#positional-parameters"></a>Positional parameters</h3>
<div class="paragraph">
<p>If the statement in a request contains positional parameters, the request should contain the parameters described in the following table.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. A statement containing positional parameters</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT detail FROM emp WHERE name = $1 AND hiredate &gt; $2</code></pre>
</div>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statement</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT detail FROM emp WHERE name = $1 AND age &gt; $2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>args</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ "smith", 45 ]</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Positional parameters can also be specified in a statement using the question mark (?), so the following statement is an alternative way to specify the same query:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statement</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT detail FROM emp WHERE name = ? AND age &gt; ?</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>args</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ "smith", 45 ]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="consistency-parameters"><a class="anchor" href="#consistency-parameters"></a>Consistency parameters</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">scan_consistency</dt>
<dd>
<p>This parameter specifies the consistency guarantee or constraint for index scanning using one of the values listed in the following table.</p>
<table id="table_xmr_grl_lt" class="tableblock frame-all grid-all fit-content stretch">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not_bounded</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default value for single-statement requests.</p>
<p class="tableblock">No timestamp vector is used in the index scan.
This is also the fastest mode as we eliminate the cost of obtaining the vector and any wait time for the index to catch up with the vector.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>at_plus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This implements bounded consistency.
The request includes a <code>scan_vector</code> parameter and a value, which is used as a lower bound.
This can be used to implement read-your-own-writes (RYOW).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request_plus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This implements strong consistency per request.
Before processing the request, a current vector is obtained.
The vector is used as a lower bound for the statements in the request.
If there are DML statements in the request, RYOW is also applied within the request.</p>
<p class="tableblock">If <code>request_plus</code> is specified in a query that runs during a failover of an index node, the query waits until the rebalance operation completes and the index data has rebalanced before returning a result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statement_plus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This implements strong consistency per statement.
Before processing each statement, a current vector is obtained and used as a lower bound for that statement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default behavior</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default behavior for a single statement is <code>not_bounded</code>.
For multi-statement requests, the default behavior is <code>not_bounded</code> for the request overall, and RYOW within the request.</p>
<p class="tableblock">Optional: If you want to disable RYOW within a request, add a separate <code>request_consistency</code> parameter and set it to <code class="in">not_bounded</code>.</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1">scan_vector</dt>
<dd>
<p>See <code>at_plus</code> parameter in the <a href="#table_xmr_grl_lt">scan_consistency parameters</a> table above.</p>
</dd>
<dt class="hdlist1">scan_wait</dt>
<dd>
<p>This parameter is a duration value (units of time) that specifies how much time the indexer is allowed to wait until it can satisfy the required <code>scan_consistency</code> and <code>scan_vector</code> criteria.
After receiving the scan request, if the indexer is unable to catch up within that duration and initiate the scan, the indexer aborts with an error and the scan fails.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="authentication-parameters"><a class="anchor" href="#authentication-parameters"></a>Authentication parameters</h3>
<div class="paragraph">
<p>The Query API supports two types of credentials: local (or bucket) and admin.
The format is an identity and password:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[local:] &lt;bucket-name&gt;
[admin:] &lt;admin-name&gt;
&lt;password&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that identities can be optionally qualified.
Clients passing in bucket names as the identity can prefix them with <code class="in">local:</code>.
This is to provide clarity and future-proofing for all current and future clients of query services.</p>
</div>
<div class="sect3">
<h4 id="providing-credentials-in-a-request"><a class="anchor" href="#providing-credentials-in-a-request"></a>Providing credentials in a request</h4>
<div class="paragraph">
<p>Credentials can be passed via HTTP headers (HTTP basic authentication) or via the <code class="param">creds</code> request parameter.
If a request contains both HTTP basic authentication header and a <code class="param">creds</code> parameter, the HTTP basic authentication header is ignored and only the <code class="param">creds</code> parameter is used for authenticating.</p>
</div>
<div class="paragraph">
<p>HTTP headers (HTTP basic authentication) can only be used to provide a single credential.
The <code class="param">creds</code> request parameter contains a JSON array of user/pass objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">creds=[{"user":"...","pass":"..."},{"user":"...","pass":"..."},...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code class="param">creds</code> request parameter is the only way to provide multiple credentials for a request.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="request-content-type"><a class="anchor" href="#request-content-type"></a>Request content type</h3>
<div class="paragraph">
<p>For POST requests, you can specify the parameters in the request body in URL-encoded format or JSON format.
For GET requests, you specify the parameters in the request URL in URL-encoded format.
For URL-encoded parameters, the format is consistent with the syntax for variables according to the RFC 6570.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="response"><a class="anchor" href="#response"></a>Response</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the response HTTP status codes.</p>
</div>
<div class="sect2">
<h3 id="normal-status-code"><a class="anchor" href="#normal-status-code"></a>Normal status code</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">200 OK</dt>
<dd>
<p>The request completed with or without errors.
Any errors or warnings that occurred during the request will be in the response body.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="possible-error-codes"><a class="anchor" href="#possible-error-codes"></a>Possible error codes</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">400 Bad Request</dt>
<dd>
<p>The request cannot be processed for one of the following reasons:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The statement contains a N1QL syntax error.</p>
</li>
<li>
<p>The request has a missing or unrecognized HTTP parameter.</p>
</li>
<li>
<p>The request is badly formatted (for example, the request body contains a JSON syntax error).</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">401 Unauthorized</dt>
<dd>
<p>The credentials provided with the request are missing or invalid.</p>
</dd>
<dt class="hdlist1">403 Forbidden</dt>
<dd>
<p>There is a read-only violation.
Either there was an attempt to create or update in a GET request or a POST request where <code>readonly</code> is set or the client does not have the authorization to modify an object (index, keyspace or namespace) in the statement.</p>
</dd>
<dt class="hdlist1">404 Not Found</dt>
<dd>
<p>The statement in the request references an invalid namespace or keyspace.</p>
</dd>
<dt class="hdlist1">405 Method Not Allowed</dt>
<dd>
<p>The REST method type in the request is unsupported.</p>
</dd>
<dt class="hdlist1">409 Conflict</dt>
<dd>
<p>There is an attempt to create an object (keyspace or index) that already exists.</p>
</dd>
<dt class="hdlist1">410 Gone</dt>
<dd>
<p>The server is shutting down gracefully.
Previously made requests are being completed, but no new requests are being accepted.</p>
</dd>
<dt class="hdlist1">500 Internal Server Error</dt>
<dd>
<p>There was an unforeseen problem processing the request.</p>
</dd>
<dt class="hdlist1">503 Service Unavailable</dt>
<dd>
<p>There is an issue (that is possibly temporary) preventing the request being processed; the request queue is full or the data store is not accessible.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="definitions"><a class="anchor" href="#definitions"></a>Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the properties returned by this REST API.</p>
</div>
<div class="sect2">
<h3 id="response-body"><a class="anchor" href="#response-body"></a>Response body</h3>
<div class="paragraph">
<p>The response body has the following structure:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>requestID</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A unique identifier for the response.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string (UUID)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>clientContextID</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The client context ID of the request, if one was supplied&#8201;&#8212;&#8201;see <code>client_context_id</code> in <a href="../../settings/query-settings.html#section_nnj_sjk_k1b" class="xref page">Request parameters</a>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>signature</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The schema of the results.
Present only when the query completes successfully.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p><code>*.*</code><br>
<code>field_name: field_type, &#8230;&#8203;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>results</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array of all the objects returned by the query.
An object can be any JSON value.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[ object ] array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>status</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The status of the request.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>enum (success, running, errors, completed, stopped, timeout, fatal)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>errors</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array of 0 or more error objects.
If an error occurred during processing of the request, it will be represented by an error object in this list.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[ <a href="#request-error-and-warning-format">Conditions</a> ] array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>warnings</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array of 0 or more warning objects.
If a warning occurred during processing of the request, it is represented by a warning object in this list.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[ <a href="#request-error-and-warning-format">Conditions</a> ] array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>metrics</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An object containing metrics about the request.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#metrics">Metrics</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>controls</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An object containing runtime information provided along with the request.
Present only if <code>controls</code> was set to true in the <a href="../../settings/query-settings.html#section_nnj_sjk_k1b" class="xref page">Request parameters</a>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#controls">Controls</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="request-error-and-warning-format"><a class="anchor" href="#request-error-and-warning-format"></a>Conditions</h3>
<div class="paragraph">
<p>Errors and warnings have the following format:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>code</strong><br>
<em>Required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A unique number that identifies the error or warning.
The code ranges are partitioned by component.
The codes can also include parts that indicate severity and transience.
This property is always present in every condition returned in the Query REST API or captured in a log.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>msg</strong><br>
<em>Required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A message describing the error or warning in detail.
This property is always present in every condition returned in the Query REST API or captured in a log.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>name</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Unique name that has a 1:1 mapping to the <strong>code</strong>.
Uniquely identifies the condition.
This property is helpful for pattern matching and can have meaning, making it more memorable than the code.
The name should be fully qualified.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p><code>indexing.scan.io_failure</code><br>
<code>query.execute.index_not_found</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>sev</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One of the following N1QL severity levels, listed in order of severity:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Severe</p>
</li>
<li>
<p>Error</p>
</li>
<li>
<p>Warn</p>
</li>
<li>
<p>Info</p>
</li>
</ol>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>temp</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates if the condition is transient&#8201;&#8212;&#8201;for example, the queue is full.
If the value is <strong>false</strong>, it tells clients and users that a retry without modification produces the same condition.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional elements not listed here might also be present.
Clients and consumers of the REST API or the logs must accommodate any additional elements.</p>
</div>
</div>
<div class="sect2">
<h3 id="metrics"><a class="anchor" href="#metrics"></a>Metrics</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>elapsedTime</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total time taken for the request, that is the time from when the request was received until the results were returned.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>executionTime</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The time taken for the execution of the request, that is the time from when query execution started until the results were returned.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>resultCount</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of objects in the results.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>resultSize</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of bytes in the results.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>mutationCount</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of mutations that were made during the request.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>sortCount</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of objects that were sorted.
Present only if the request includes ORDER BY.</p>
</div>
<div class="paragraph">
<p>If a query includes ORDER BY, LIMIT, or OFFSET clauses, an application can use the <code>sortCount</code> value to give the overall number of results in a message such as "<code class="out">page 1 of N</code>".</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>usedMemory</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The amount of document memory used to execute the request.
This property is only returned if a memory quota was set for the query.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>errorCount</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of errors that occurred during the request.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>warningCount</strong><br>
<em>Optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of warnings that occurred during the request.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional elements not listed here might also be present.
Clients and consumers of the REST API or the logs must accommodate any additional elements.</p>
</div>
</div>
<div class="sect2">
<h3 id="controls"><a class="anchor" href="#controls"></a>Controls</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>scan_consistency</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The value of the query setting Scan Consistency used for the query.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>use_cbo</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the cost-based optimizer was enabled for the query.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>memoryQuota</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The memory quota for the request, in MB.
This property is only returned if a memory quota was set for the query.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer (unsigned)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>stmtType</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The type of query statement.</p>
</div>
<div class="paragraph">
<div class="title">Example</div>
<p><code>SELECT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional elements not listed here might also be present.
Clients and consumers of the REST API or the logs must accommodate any additional elements.</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
