<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Getting XDCR Stats | Couchbase Docs (Preview)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11696/server/7.0/rest-api/rest-xdcr-statistics.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Requests for XDCR statistics about a destination cluster are performed on the source cluster.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.0">
<meta name="page-url" content="/server/7.0/rest-api/rest-xdcr-statistics.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11696/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11696/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.2" data-url="../../current/index.html">7.2</option>
        <option value="7.0" data-url="rest-xdcr-statistics.html" selected>7.0</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/rest-api/pages/rest-xdcr-statistics.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="rest-intro.html">REST API Reference</a></li>
<li class="crumb"><a href="rest-endpoints-all.html">REST API endpoint list</a></li>
<li class="crumb"><a href="rest-xdcr-intro.html">XDCR API</a></li>
<li class="crumb"><a href="rest-xdcr-statistics.html">Getting XDCR Stats</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Getting XDCR Stats</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Requests for XDCR statistics about a destination cluster are performed on the source cluster.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-xdcr-stats-desc"><a class="anchor" href="#rest-xdcr-stats-desc"></a>Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All XDCR statistical requests use the UUID, a unique identifier for destination cluster.
The UUID is retrieved with the <code>GET /pools/default/remoteClusters</code> HTTP method and URI.
Many of these statistics are exposed in the Couchbase Web Console.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to provide a properly URL-encoded URI string for the destination endpoint when requesting XDCR statistics.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="http-method-and-uri"><a class="anchor" href="#http-method-and-uri"></a>HTTP method and URI</h3>
<div class="paragraph">
<p>The destination endpoint follows the <code>/pools/default/buckets/[source_bucket]/stats/</code> URI endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>GET /pools/default/buckets/[source_bucket]/stats/[destination_endpoint]</pre>
</div>
</div>
<div class="paragraph">
<p>Where the destination endpoint is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>replications/[remote_UUID]/[source_bucket]/[destination_bucket]/[stat_name]</pre>
</div>
</div>
<div class="paragraph">
<p>Where the HTTP endpoint string with full URI is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://[node address]:[port]/pools/[source_bucket]/buckets/[bucket_name]/stats/replications/ \
  [remote_UUID]/[source_bucket]/[destination_bucket]/[stat_name]</pre>
</div>
</div>
<div class="paragraph">
<p>Where the HTTP string with a properly URL-encoded URI is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://[node address]:[port]/pools/[source_bucket]/buckets/[bucket_name]/stats/ \
    replications%2F[remote_UUID]%2F[source_bucket]%2F[destination_bucket]%2F[stat_name]</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23.6406%;">
<col style="width: 76.3594%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Stat name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bandwidth_usage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bandwidth used during replication, measured in bytes per second.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changes_left</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of updates still pending replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data_replicated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of data replicated in bytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_checked</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents checked for changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_failed_cr_source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents that have failed conflict resolution on the source cluster and not replicated to target cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_filtered</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents that have been filtered out and not replicated to target cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_opt_repd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of docs sent optimistically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_received_from_dcp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents received from DCP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_rep_queue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents in replication queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_processed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents processed by pipeline.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docs_written</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents written to the destination cluster via XDCR.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>meta_latency_wt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weighted average time for requesting document metadata.
XDCR uses this for conflict resolution prior to sending the document into the replication queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>num_checkpoints</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of checkpoints issued in replication queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>num_failedckpts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of checkpoints failed during replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rate_received_from_dcp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of documents received from DCP per second.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rate_replicated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rate of documents being replicated, measured in documents per second.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size_rep_queue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of replication queue in bytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>time_committing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seconds elapsed during replication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtavg_docs_latency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weighted average latency for sending replicated changes to destination cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtavg_meta_latency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Weighted average time for requesting document metadata.
XDCR uses this for conflict resolution prior to sending the document into the replication queue.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-xdcr-stats-getremoteuuid"><a class="anchor" href="#rest-xdcr-stats-getremoteuuid"></a>Getting destination cluster info</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For example, the following code example displays the destination remote name, URI and UUID (among other data):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// curl request example for retrieving the destination cluster UUID
curl -u Administrator:password http://10.5.2.54:8091/pools/default/remoteClusters


// example results
[
    {
        "deleted": false,
        "hostname": "10.5.2.117:8091",
        "name": "Remote117",
        "uri": "/pools/default/remoteClusters/Remote117",
        "username": "Administrator",
        "uuid": "995618a6a6cc9ac79731bd13240e19b5",
        "validateURI": "/pools/default/remoteClusters/Remote117?just_validate=1"
    }</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-xdcr-stats-docswritten"><a class="anchor" href="#rest-xdcr-stats-docswritten"></a>Retrieving <code>docs_written</code> stats</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="http-method-and-uri-2"><a class="anchor" href="#http-method-and-uri-2"></a>HTTP method and URI</h3>
<div class="listingblock">
<div class="content">
<pre>GET /pools/default/buckets/[source_bucket]/stats/[destination_endpoint]</pre>
</div>
</div>
<div class="paragraph">
<p>Where the [destination_endpoint] is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>replications/[remote_UUID]/[source_bucket]/[destination_bucket]/docs_written</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax"><a class="anchor" href="#syntax"></a>Syntax</h3>
<div class="paragraph">
<p>Curl request syntax for number of documents written:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -u [admin]:[password]
    http://[node address]:8091/pools/default/buckets/[source_bucket]/stats/
    replications%2F[remote_UUID]%2F[source_bucket]%2F[destination_bucket]%2Fdocs_written</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example"><a class="anchor" href="#example"></a>Example</h3>
<div class="paragraph">
<p>To get the number of documents written:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -u Administrator:password \
    http://10.5.2.54:8091/pools/default/buckets/default/stats/ \
    replications%2F8ba6870d88cd72b3f1db113fc8aee675%2Fdefault%2Fdefault%2Fdocs_written</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response"><a class="anchor" href="#response"></a>Response</h3>
<div class="paragraph">
<p>The above command produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"samplesCount":60,"isPersistent":true,"lastTStamp":1371685106753,"interval":1000,
"timestamp":[1371685048753,1371685049754,1371685050753,1371685051753,1371685052753,1371685053753,1371685054753,
1371685055753,1371685056753,1371685057753,1371685058752,1371685059753,1371685060753,1371685061753,1371685062753,
1371685063753,1371685064753,1371685065753,1371685066753,1371685067753,1371685068753,1371685069753,1371685070753,
1371685071753,1371685072753,1371685073753,1371685074753,1371685075753,1371685076753,1371685077753,1371685078753,
1371685079753,1371685080753,1371685081753,1371685082753,1371685083753,1371685084753,1371685085753,1371685086753,
1371685087753,1371685088753,1371685089753,1371685090753,1371685091754,1371685092753,1371685093753,1371685094753,
1371685095753,1371685096753,1371685097753,1371685098753,1371685099753,1371685100753,1371685101753,1371685102753,
1371685103753,1371685104753,1371685105753,1371685106753],
"nodeStats":{"127.0.0.1:8091":[1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,
1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,
1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,
1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,1000000,
1000000,1000000,1000000,1000000,1000000,1000000,1000000]}}</pre>
</div>
</div>
<div class="paragraph">
<p>The output shows that <code>60</code> samples were taken.
A sample was taken every <code>1000</code> milliseconds, and each sample is represented by its <code>timestamp</code>.
1 million documents are shown already to have been written when the first sample was taken; and this number is shown to have remained consistent at the time of each successive sample.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-xdcr-stats-ratereplication"><a class="anchor" href="#rest-xdcr-stats-ratereplication"></a>Retrieving <code>rate_replicated</code> stats</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="http-method-and-uri-3"><a class="anchor" href="#http-method-and-uri-3"></a>HTTP method and URI</h3>
<div class="listingblock">
<div class="content">
<pre>GET /pools/default/buckets/[source_bucket]/stats/[destination_endpoint]</pre>
</div>
</div>
<div class="paragraph">
<p>Where the [destination_endpoint] is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>replications/[remote_UUID]/[source_bucket]/[destination_bucket]/rate_replicated</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-2"><a class="anchor" href="#syntax-2"></a>Syntax</h3>
<div class="paragraph">
<p>Curl request syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -u [admin]:[password]
    http://[node address]:8091/pools/default/buckets/[source_bucket]/stats/
    replications%2F[remote_UUID]%2F[source_bucket]%2F[destination_bucket]%2Frate_replicated</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-2"><a class="anchor" href="#example-2"></a>Example</h3>
<div class="paragraph">
<p>Curl request example to get the rate of replication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -u Administrator:password \
    http://10.5.2.54:8091/pools/default/buckets/default/stats/ \
    replications%2F8ba6870d88cd72b3f1db113fc8aee675%2Fdefault%2Fdefault%2Frate_replicated</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response-2"><a class="anchor" href="#response-2"></a>Response</h3>
<div class="paragraph">
<p>This produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"samplesCount":60,"isPersistent":true,"lastTStamp":1371685006753,"interval":1000,
"timestamp":[1371684948753,1371684949753,1371684950753,1371684951753,1371684952753,1371684953753,1371684954753,
1371684955754,1371684956753,1371684957753,1371684958753,1371684959753,1371684960753,1371684961753,1371684962753,
1371684963753,1371684964753,1371684965753,1371684966753,1371684967753,1371684968752,1371684969753,1371684970753,
1371684971753,1371684972753,1371684973753,1371684974753,1371684975753,1371684976753,1371684977753,1371684978753,
1371684979753,1371684980753,1371684981753,1371684982753,1371684983753,1371684984753,1371684985754,1371684986753,
1371684987754,1371684988753,1371684989753,1371684990753,1371684991753,1371684992753,1371684993753,1371684994753,
1371684995753,1371684996753,1371684997753,1371684998776,1371684999753,1371685000753,1371685001753,1371685002753,
1371685003753,1371685004753,1371685005753,1371685006753],
"nodeStats":{"127.0.0.1:8091":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-xdcr-stats-docsoptrepd"><a class="anchor" href="#rest-xdcr-stats-docsoptrepd"></a>Retrieving <code>docs_opt_repd</code> stats</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="http-method-and-uri-4"><a class="anchor" href="#http-method-and-uri-4"></a>HTTP method and URI</h3>
<div class="listingblock">
<div class="content">
<pre>GET /pools/default/buckets/[source_bucket]/stats/[destination_endpoint]</pre>
</div>
</div>
<div class="paragraph">
<p>Where the [destination_endpoint] is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>replications/[remote_UUID]/[source_bucket]/[destination_bucket]/docs_opt_repd</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-get-replication-id"><a class="anchor" href="#syntax-get-replication-id"></a>Syntax: get replication id</h3>
<div class="listingblock">
<div class="content">
<pre>curl -s -u admin:password \
    http://[node address]:8091/pools/default/tasks</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-get-replication-id"><a class="anchor" href="#example-get-replication-id"></a>Example: get replication id</h3>
<div class="paragraph">
<p>To get <code>docs_opt_repd</code>, get the replication id for a source and destination bucket via a list of the active tasks for a cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -s -u Administrator:password \
    http://10.5.2.54:8091/pools/default/tasks</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response-3"><a class="anchor" href="#response-3"></a>Response</h3>
<div class="paragraph">
<p>This results in output as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>....
    "id": "def03dbf5e968a47309194ebe052ed21\/bucket_source\/bucket_destination",
    "source": "bucket_source",
    "target":"\/remoteClusters\/def03dbf5e968a47309194ebe052ed21\/buckets\/bucket_name",
    "continuous": true,
    "type": "xdcr",
    ....</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-get-docs_opt_repd-stats"><a class="anchor" href="#example-get-docs_opt_repd-stats"></a>Example: get docs_opt_repd stats</h3>
<div class="paragraph">
<p>With this replication id, retrieve a sampling of stats for <code>docs_opt_repd</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -s -u Administrator:password \
http://10.3.121.119:8091/pools/default/buckets/default/stats/ \
replications%2fdef03dbf5e968a47309194ebe052ed21%2fdefault%2fdefault%2fdocs_opt_repd</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response-4"><a class="anchor" href="#response-4"></a>Response</h3>
<div class="paragraph">
<p>This results in output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
       "samplesCount":60,
       "isPersistent":true,
       "lastTStamp":1378398438975,
       "interval":1000,
       "timestamp":[
          1378398380976,
          1378398381976,
          ....</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-xdcr-stats-operations"><a class="anchor" href="#rest-xdcr-stats-operations"></a>Retrieving incoming write operations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="http-method-and-uri-5"><a class="anchor" href="#http-method-and-uri-5"></a>HTTP method and URI</h3>
<div class="listingblock">
<div class="content">
<pre>GET /pools/default/buckets/[bucket_name]/stats</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-3"><a class="anchor" href="#syntax-3"></a>Syntax</h3>
<div class="paragraph">
<p>To retrieve the incoming write operations that occur on a destination cluster due to replication, make the request on your destination cluster.</p>
</div>
<div class="paragraph">
<p>Curl request syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -u [admin]:[password] -X GET
    http://[Destination_IP]:8091/pools/default/buckets/[destination bucket]/stats</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-3"><a class="anchor" href="#example-3"></a>Example</h3>
<div class="paragraph">
<p>Curl request example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -u Administrator:password -X GET \
    http://10.5.2.117:8091/pools/default/buckets/testbucket2/stats</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response-5"><a class="anchor" href="#response-5"></a>Response</h3>
<div class="paragraph">
<p>This returns results for all stats.
Within the JSON response, find the array <code>xdc_ops</code>.
The value for this attribute is the last sampling of write operations on an XDCR destination cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
.................
"xdc_ops":[0.0,0.0,0.0,0.0,633.3666333666333,1687.6876876876877, \
2610.3896103896104,3254.254254254254,3861.138861138861,4420.420420420421, \
................
}</pre>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
