<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Migrating from SDK API 2 to SDK API 3 | Couchbase Docs (Staging)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-9218/python-sdk/current/project-docs/migrating-sdk-code-to-3.n.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="The SDK API 3 (used in Python SDK 3.x and 4.x) introduces breaking changes to the previous SDK API 2 APIs (used in Python SDK 2.x) in order to provide a number of improvements. Collections and Scopes are introduced.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="python-sdk">
<meta name="dcterms.identifier" content="4.0">
<meta name="page-url" content="/python-sdk/current/project-docs/migrating-sdk-code-to-3.n.html">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-9218/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-9218/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
<div class="components">
  <div class="components_group-title">
    <a href="../../../home/sdk.html">SDKs</a>
  </div>
  <ul class="components_list">
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">.NET SDK</span>
        <select class="version_list" data-component="dotnet-sdk">
          <option value="3.3" data-url="../../../dotnet-sdk/current/hello-world/overview.html" selected>3.3</option>
        </select>
      </div>
      <div class="version_items hide" data-version="3.3">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/hello-world/start-using-sdk.html">Start Using the .NET SDK</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/hello-world/platform-help.html">Platform Introduction</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/hello-world/sample-application.html">Sample Application</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Working with Data</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/kv-operations.html">Key Value Operations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/subdocument-operations.html">Sub-Document Operations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/n1ql-queries-with-sdk.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/analytics-using-sdk.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/full-text-searching-with-sdk.html">Search</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/view-queries-with-sdk.html">MapReduce Views</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Advanced Data Operations</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/concurrent-async-apis.html">Async &amp; React APIs</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/concurrent-document-mutations.html">Concurrent Document Mutations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/distributed-acid-transactions-from-the-sdk.html">Distributed ACID Transactions</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/encrypting-using-sdk.html">Encrypting Your Data</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/transcoders-nonjson.html">Transcoders &amp; Non-JSON</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/working-with-collections.html">Working with Collections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Managing Couchbase</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/managing-connections.html">Managing Connections</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/sdk-authentication.html">Authentication</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/troubleshooting-cloud-connections.html">Troubleshooting Cloud Connections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/provisioning-cluster-resources.html">Provisioning Cluster Resources</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/sdk-user-management-example.html">User Management</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Errors &amp; Diagnostics</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/error-handling.html">Handling Errors</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/collecting-information-and-logging.html">Logging</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/howtos/slow-operations-logging.html">Slow Operations Logging</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Learn</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/concepts.html">Overview</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/buckets-and-clusters.html">Buckets &amp; Clusters</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/collections.html">Collections &amp; Scope</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/compression.html">Compression</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/data-model.html">Data Model</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/documents.html">Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/nonjson.html">Non-json Docs</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/subdocument-operations.html">Sub-Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/xattr.html">XATTR &amp; Virtual XATTR</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/errors.html">Errors and Diagnostics</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/health-check.html">Health Check</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/response-time-observability.html">Tracing</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/durability-replication-failure-considerations.html">Failure Considerations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/encryption.html">Field Level Encryption</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/data-services.html">Service Selection</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/analytics-for-sdk-users.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/understanding-views.html">Map Reduce Views</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/n1ql-query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/full-text-search-overview.html">Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/sdk-user-management-overview.html">User Management</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/certificate-based-authentication.html">Cert Auth</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/concept-docs/rbac.html">RBAC</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">References</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/sdk-api/couchbase-net-client">.NET API Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/sdk-api/couchbase-transactions-dotnet/">Txns API Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/ref/client-settings.html">Client Settings</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/ref/error-codes.html">Error Messages</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/ref/glossary.html">Glossary</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/ref/travel-app-data-model.html">Travel Sample Data Model</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Project Docs</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/sdk-release-notes.html">Release Notes</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/distributed-transactions-dotnet-release-notes.html">Transactions Release Notes</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/compatibility.html">Compatibility</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/migrating-sdk-code-to-3.n.html">Migrating to SDK 3 API</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/sdk-full-installation.html">Full Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/sdk-licenses.html">Licenses</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/get-involved.html">Get involved</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../dotnet-sdk/current/project-docs/metadoc-about-these-sdk-docs.html">About These Docs</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Java SDK</span>
        <select class="version_list" data-component="java-sdk">
          <option value="3.3" data-url="../../../java-sdk/current/hello-world/overview.html" selected>3.3</option>
        </select>
      </div>
      <div class="version_items hide" data-version="3.3">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/hello-world/start-using-sdk.html">Start Using the Java SDK</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/hello-world/sample-application.html">Sample Application</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/hello-world/spring-data-sample-application.html">Spring Data Sample Application</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Working with Data</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/kv-operations.html">Key Value Operations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/json.html">JSON</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/subdocument-operations.html">Sub-Document Operations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/n1ql-queries-with-sdk.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/analytics-using-sdk.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/full-text-searching-with-sdk.html">Full Text Search</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/view-queries-with-sdk.html">MapReduce Views</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Advanced Data Operations</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/concurrent-async-apis.html">Async &amp; Reactive APIs</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/concurrent-document-mutations.html">Concurrent Document Mutations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/distributed-acid-transactions-from-the-sdk.html">Distributed ACID Transactions</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/encrypting-using-sdk.html">Encrypting Your Data</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/transcoders-nonjson.html">Transcoders &amp; Non-JSON</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/working-with-collections.html">Working with Collections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Managing Couchbase</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/managing-connections.html">Managing Connections</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/sdk-authentication.html">Authentication</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/troubleshooting-cloud-connections.html">Troubleshooting Cloud Connections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/provisioning-cluster-resources.html">Provisioning Cluster Resources</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/sdk-user-management-example.html">User Management</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Errors &amp; Diagnostics</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/error-handling.html">Handling Errors</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/collecting-information-and-logging.html">Logging</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/health-check.html">Health Check</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Observability</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/slow-operations-logging.html">Slow Operations Logging</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/observability-metrics.html">Metrics Reporting</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/observability-orphan-logger.html">Orphan Requests Logging</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/howtos/observability-tracing.html">Request Tracing</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Learn</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/concepts.html">Overview</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/buckets-and-clusters.html">Buckets &amp; Clusters</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/collections.html">Collections &amp; Scope</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/compression.html">Compression</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/data-model.html">Data Model</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/documents.html">Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/nonjson.html">Non-json Docs</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/subdocument-operations.html">Sub-Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/xattr.html">XATTR &amp; Virtual XATTR</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/errors.html">Errors and Diagnostics</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/health-check.html">Health Check</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/response-time-observability.html">Tracing</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/durability-replication-failure-considerations.html">Failure Considerations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/encryption.html">Field Level Encryption</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/data-services.html">Service Selection</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/analytics-for-sdk-users.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/understanding-views.html">Map Reduce Views</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/n1ql-query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/full-text-search-overview.html">Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/sdk-user-management-overview.html">User Management</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/certificate-based-authentication.html">Cert Auth</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/concept-docs/rbac.html">RBAC</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">References</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/sdk-api/couchbase-java-client">API Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/sdk-api/couchbase-core-io/">JVM Core IO API</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/sdk-api/couchbase-transactions-java/index.html?overview-summary.html">Txns API Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/ref/client-settings.html">Client Settings</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/ref/error-codes.html">Error Messages</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/ref/glossary.html">Glossary</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/ref/travel-app-data-model.html">Travel Sample Data Model</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Project Docs</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/sdk-release-notes.html">SDK Release Notes</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/compatibility.html">Compatibility</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/migrating-sdk-code-to-3.n.html">Migrating to SDK 3 API</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/distributed-acid-transactions-migration-guide.html">Transactions Migration Guide</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/third-party-integrations.html">3rd Party Integrations</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/sdk-full-installation.html">Full Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/sdk-licenses.html">Licenses</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/get-involved.html">Get involved</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../java-sdk/current/project-docs/metadoc-about-these-sdk-docs.html">About These Docs</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Node.js SDK</span>
        <select class="version_list" data-component="nodejs-sdk">
          <option value="4.1" data-url="../../../nodejs-sdk/current/hello-world/overview.html" selected>4.1</option>
        </select>
      </div>
      <div class="version_items hide" data-version="4.1">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/hello-world/start-using-sdk.html">Start Using the Node.js SDK</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/hello-world/start-using-ottoman.html">The Ottoman ODM</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/hello-world/sample-application.html">Sample Application</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Working with Data</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/kv-operations.html">Key Value Operations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/subdocument-operations.html">Sub-Document Operations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/n1ql-queries-with-sdk.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/analytics-using-sdk.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/full-text-searching-with-sdk.html">Search</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/view-queries-with-sdk.html">MapReduce Views</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Advanced Data Operations</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/concurrent-async-apis.html">Choosing an API</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/concurrent-document-mutations.html">Concurrent Document Mutations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/distributed-acid-transactions-from-the-sdk.html">Distributed ACID Transactions</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/encrypting-using-sdk.html">Encrypting Your Data</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/transcoders-nonjson.html">Transcoders &amp; Non-JSON</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/working-with-collections.html">Working with Collections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Managing Couchbase</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/managing-connections.html">Managing Connections</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/sdk-authentication.html">Authentication</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/troubleshooting-cloud-connections.html">Troubleshooting Cloud Connections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/provisioning-cluster-resources.html">Provisioning Cluster Resources</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/sdk-user-management-example.html">User Management</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Errors &amp; Diagnostics</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/error-handling.html">Handling Errors</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/collecting-information-and-logging.html">Logging</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/howtos/slow-operations-logging.html">Slow Operations Logging</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Learn</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/concepts.html">Overview</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/buckets-and-clusters.html">Buckets &amp; Clusters</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/collections.html">Collections &amp; Scope</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/compression.html">Compression</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/data-model.html">Data Model</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/documents.html">Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/nonjson.html">Non-json Docs</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/subdocument-operations.html">Sub-Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/xattr.html">XATTR &amp; Virtual XATTR</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/errors.html">Errors and Diagnostics</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/health-check.html">Health Check</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/response-time-observability.html">Tracing</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/durability-replication-failure-considerations.html">Failure Considerations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/encryption.html">Field Level Encryption</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/data-services.html">Service Selection</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/analytics-for-sdk-users.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/understanding-views.html">Map Reduce Views</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/n1ql-query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/full-text-search-overview.html">Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/sdk-user-management-overview.html">User Management</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/certificate-based-authentication.html">Cert Auth</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/concept-docs/rbac.html">RBAC</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">References</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/sdk-api/couchbase-node-client/index.html">API Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/ref/client-settings.html">Client Settings</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/ref/error-codes.html">Error Messages</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/ref/glossary.html">Glossary</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/ref/travel-app-data-model.html">Travel Sample Data Model</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Project Docs</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/sdk-release-notes.html">Release Notes</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/ottoman-release-notes.html">Ottoman Release Notes</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/compatibility.html">Compatibility</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/migrating-sdk-code-to-3.n.html">Migrating to SDK 3 API</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/sdk-full-installation.html">Full Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/sdk-licenses.html">Licenses</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/get-involved.html">Get involved</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../nodejs-sdk/current/project-docs/metadoc-about-these-sdk-docs.html">About These Docs</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Python SDK</span>
        <select class="version_list" data-component="python-sdk">
          <option value="4.0" data-url="../hello-world/overview.html" selected>4.0</option>
        </select>
      </div>
      <div class="version_items hide" data-version="4.0">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Getting Started</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../hello-world/start-using-sdk.html">Start Using the Python SDK</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../hello-world/sample-application.html">Sample Application</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Working with Data</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../howtos/kv-operations.html">Key Value Operations</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/caching-example.html">Caching Example</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/subdocument-operations.html">Sub-Document Operations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/n1ql-queries-with-sdk.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/analytics-using-sdk.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/full-text-searching-with-sdk.html">Full Text Search</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/view-queries-with-sdk.html">MapReduce Views</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Advanced Data Operations</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/concurrent-async-apis.html">Async APIs</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/concurrent-document-mutations.html">Concurrent Document Mutations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/distributed-acid-transactions-from-the-sdk.html">Distributed ACID Transactions</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/encrypting-using-sdk.html">Encrypting Your Data</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/transcoders-nonjson.html">Transcoders &amp; Non-JSON</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/working-with-collections.html">Working with Collections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Managing Couchbase</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../howtos/managing-connections.html">Managing Connections</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/sdk-authentication.html">Authentication</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/troubleshooting-cloud-connections.html">Troubleshooting Cloud Connections</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../howtos/provisioning-cluster-resources.html">Provisioning Cluster Resources</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/sdk-user-management-example.html">User Management</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Errors &amp; Diagnostics</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/error-handling.html">Error Handling</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/collecting-information-and-logging.html">Logging</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/health-check.html">Health Check</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Observability</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/slow-operations-logging.html">Slow Operations Logging</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../howtos/observability-orphan-logger.html">Orphan Requests Logging</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Learn</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/concepts.html">Overview</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/buckets-and-clusters.html">Buckets &amp; Clusters</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/collections.html">Collections &amp; Scope</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/compression.html">Compression</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../concept-docs/data-model.html">Data Model</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/documents.html">Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/nonjson.html">Non-json Docs</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/subdocument-operations.html">Sub-Documents</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/xattr.html">XATTR &amp; Virtual XATTR</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../concept-docs/errors.html">Errors and Diagnostics</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/health-check.html">Health Check</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/response-time-observability.html">Tracing</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/durability-replication-failure-considerations.html">Failure Considerations</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/encryption.html">Field Level Encryption</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../concept-docs/data-services.html">Service Selection</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/analytics-for-sdk-users.html">Analytics</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/understanding-views.html">Map Reduce Views</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/n1ql-query.html">Query</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/full-text-search-overview.html">Search</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../concept-docs/sdk-user-management-overview.html">User Management</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/certificate-based-authentication.html">Cert Auth</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concept-docs/rbac.html">RBAC</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Reference</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/sdk-api/couchbase-python-client">Python API Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../ref/client-settings.html">Client Settings</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../ref/error-codes.html">Error Messages</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../ref/glossary.html">Glossary</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../ref/travel-app-data-model.html">Travel Sample Data Model</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Project Docs</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="sdk-release-notes.html">Release Notes</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="compatibility.html">Compatibility</a>
  </span>
<ul class="menu_row">
<li class="menu_list is-current-page" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="migrating-sdk-code-to-3.n.html">Migrating to SDK 3 API</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="sdk-full-installation.html">Full Installation</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="sdk-licenses.html">Licenses</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="get-involved.html">Get involved</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="metadoc-about-these-sdk-docs.html">About These Docs</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Tableau Connector</span>
        <select class="version_list" data-component="tableau-connector">
          <option value="1.0" data-url="../../../tableau-connector/current/index.html" selected>1.0</option>
        </select>
      </div>
      <div class="version_items hide" data-version="1.0">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../tableau-connector/current/index.html">Tableau Connector</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../tableau-connector/current/download-tableau.html">Download Tableau</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../tableau-connector/current/enable-analytics.html">Enable Couchbase Analytics Service</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../../tableau-connector/current/setup-tableau-connector.html">Set up the Couchbase Tableau Connector</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../tableau-connector/current/setup-tableau-desktop.html">Install on Tableau Desktop</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../tableau-connector/current/setup-tableau-server.html">Install on Tableau Server</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../tableau-connector/current/tabular-views.html">Tabular Views</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../tableau-connector/current/using-couchbase-tableau-connector.html">Using Tableau with the Couchbase Tableau Connector</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">SDK Extension Libraries</span>
      </div>
      <div class="version_items hide" data-version="master">
<ul class="menu_row">
<li class="menu_list" data-depth="0">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../sdk-extensions/index.html">SDK Extension Libraries</a>
  </span>
</li>
<li class="menu_list" data-depth="0">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../sdk-extensions/distributed-acid-transactions.html">Distributed ACID Transactions</a>
  </span>
</li>
<li class="menu_list" data-depth="0">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../sdk-extensions/field-level-encryption.html">Field Level Encryption</a>
  </span>
</li>
<li class="menu_list" data-depth="0">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../sdk-extensions/response-time-observability.html">Response Time Observability</a>
  </span>
</li>
<li class="menu_list" data-depth="0">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../../sdk-extensions/spring-data-couchbase.html">Spring Data</a>
  </span>
</li>
</ul>
      </div>
    </li>
  </ul>
</div>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-python/edit/release/4.0/modules/project-docs/pages/migrating-sdk-code-to-3.n.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../hello-world/overview.html">Python SDK</a></li>
<li class="crumb">Project Docs</li>
<li class="crumb"><a href="compatibility.html">Compatibility</a></li>
<li class="crumb"><a href="migrating-sdk-code-to-3.n.html">Migrating to SDK 3 API</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Migrating from SDK API 2 to SDK API 3</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The SDK API 3 (used in Python SDK 3.x and 4.x) introduces breaking changes to the previous SDK API 2 APIs (used in Python SDK 2.x) in order to provide a number of improvements. Collections and Scopes are introduced.
The Document class and structure has been completely removed from the API, and the returned value is now <code>Result</code>.
Retry behaviour is more proactive, and lazy bootstrapping moves all error handling to a single place.
Individual behaviour changes across services are explained here.
</blockquote>
</div>
<div class="paragraph">
<p>The current Python SDK 4.0 is also based on the <a href="compatibility.html#sdk3.3" class="page">SDK API 3.3 specification</a>, and offers an entirely new backend (Couchbase++) with better support for new features like Distributed ACID Transactions.
We have increased the major version to reflect the importance of this implementation change as per <a href="https://semver.org/">semantic versioning</a>.</p>
</div>
<div class="paragraph">
<p>Couchbase Python SDK 4.0, like the 3.2, 3.1, and 3.0 versions, conforms to the Couchbase 3.x SDK API.
Couchbase Python SDK 4.0 is built upon Couchbase++, whereas 3.x releases were built upon LCB (libcouchbase)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the most part, migration from SDK API 2.<em>x</em> versions remains the same.
The few 4.0-specific changes can be found at the end of this document.
If you are an existing Python SDK 3.<em>x</em> user considering migrating to SDK 4.0,
you may wish to skip to the <a href="#sdk4-specifics">SDK 4.0 specifics</a> below.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-version"><a class="anchor" href="#api-version"></a>API Version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release of the SDK is written to version 3.3 of the SDK API specification (and matching the features available in Couchbase 7.1 and earlier).
For most developers, just using the latest version will be all that matters, and few will need to look at another of our SDKs.
Just for those few that do, the table below shows each Couchbase SDK release version that matches the API version.</p>
</div>
<div class="paragraph">
<p>Whilst these two numbers match for the C, .NET, Java, and Ruby SDKs, this is not the case for the others, as version numbers for individual SDKs are bumped up in line with <a href="https://semver.org/">Semantic Versioning</a>&#8201;&#8212;&#8201;check the <a href="#sdk-release-notes">release notes</a> of each SDK for individual details.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. SDK API Versions</caption>
<colgroup>
<col style="width: 27.5862%;">
<col style="width: 13.7931%;">
<col style="width: 13.7931%;">
<col style="width: 13.7931%;">
<col style="width: 17.2413%;">
<col style="width: 13.7932%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">API 2.7</th>
<th class="tableblock halign-left valign-top">API 3.0</th>
<th class="tableblock halign-left valign-top">API 3.1</th>
<th class="tableblock halign-left valign-top">API 3.2</th>
<th class="tableblock halign-left valign-top">API 3.3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C (libcouchbase)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.NET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5 &amp; 1.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0 &amp; 2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.3 &amp; 2.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kotlin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node.js</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2 &amp; 4.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PHP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ruby</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scala</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>SDK API 3.3</strong>: Introduced alongside Couchbase Server 7.1, adds Management API for Eventing and Index Management for Scopes &amp; Collections; extends Bucket Management API to support Custom Conflict Resolution and Storage Options; adds new platform support for Linux Alpine OS, Apple M1, and AWS Graviton2; provides improved error messages for better error handling. and an upgraded Spark Connector that runs on Spark 3.0 &amp; 3.1 Platform.</p>
</div>
<div class="paragraph">
<p><strong>SDK API 3.2</strong>: Introduced alongside Couchbase Server 7.0, provides features in support of Scopes and Collections, extends capabilities around Open Telemetry API to instrument telemetry data, enhanced client side field level encryption to add an additional layer of security to protect sensitive data, adds new platform support such as Ubuntu 20.04 LTS.</p>
</div>
<div class="paragraph">
<p><strong>SDK API 3.1</strong>: Introduced alongside Couchbase Server 6.6,  focuses on Bucket Management API, adds capabilities around Full Text Search features such-as  Geo-Polygon support, Flex Index, and Scoring.</p>
</div>
<div class="paragraph">
<p><strong>SDK API 3.0</strong>: Introduced alongside Couchbase Server 6.5,  is a major overhaul from its predecessor, has simplified surface area, removed long-standing bugs and deprecated/removed old API, introduces new programming languages Scala and Ruby, written in anticipation to support Scopes and Collections.</p>
</div>
<div class="paragraph">
<p><strong>SDK API 2.7</strong>: Introduced alongside Couchbase Server 6.0, with support for its new features such as the Analytics Service, improvements to Full Text Search, and support for more complex network configurations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fundamentals"><a class="anchor" href="#fundamentals"></a>Fundamentals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before this guide dives into the language-specific technical component of the migration, it is important to understand the high level changes first.
As a migration guide, this document assumes you are familiar with the previous generation of the SDK and does not re-introduce SDK API 2 concepts.
We recommend familiarizing yourself with the new SDK first by reading at least the <a href="../hello-world/start-using-sdk.html" class="page">getting started guide</a>, and browsing through the other chapters a little.</p>
</div>
<div class="sect2">
<h3 id="terminology"><a class="anchor" href="#terminology"></a>Terminology</h3>
<div class="paragraph">
<p>The concept of a <code>Cluster</code> and a <code>Bucket</code> remain the same, but a fundamental new layer is introduced into the API: <code>Collections</code> and their <code>Scopes</code>.
Collections are logical data containers inside a Couchbase bucket that let you group similar data just like a <em>Table</em> does in a relational database&#8201;&#8212;&#8201;although documents inside a collection do not need to have the same structure.
Scopes allow the grouping of collections into a namespace, which is very usfeul when you have multilpe tenants acessing the same bucket.
Couchbase Server includes support for collections as a <a href="#6.5@server:developer-preview:preview-mode.adoc" class="page unresolved">developer preview</a> in version 6.5, and as a first class concept of the programming model from <a href="../../../server/current/learn/data/scopes-and-collections.html" class="page">version 7.0.</a></p>
</div>
<div class="paragraph">
<p>Note that the SDKs include the feature from SDK 3.0, to allow easier migration.</p>
</div>
<div class="paragraph">
<p>In the previous SDK generation, particularly with the <code>KeyValue</code> API, the focus has been on the codified concept of a <code>Document</code>.
Documents were read and written and had a certain structure, including the <code>id</code>/<code>key</code>, content, expiry (<code>ttl</code>), and so forth.
While the server still operates on the logical concept of documents, we found that this model in practice didn&#8217;t work so well for client code in certain edge cases.
As a result we have removed the <code>Document</code> class/structure completely from the API.
The new API follows a clear scheme: each command takes required arguments explicitly, and an option block for all optional values.
The returned value is always of type <code>Result</code>.
This avoids method overloading bloat in certain languages, and has the added benefit of making it easy to grasp APIs evenly across services.</p>
</div>
<div class="paragraph">
<p>As an example here is a KeyValue document fetch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from datetime import timedelta
from couchbase.cluster import Cluster
from couchbase.collection import GetOptions
cluster=Cluster("couchbases://10.192.1.104")
collection=cluster.default_collection()
get_result = collection.get("key", GetOptions(timeout=timedelta(seconds=3)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Compare this to a N1QL query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">query_result = cluster.query("select 1=1", QueryOptions(timeout=timedelta(seconds=3)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since documents also fundamentally handled the serialization aspects of content, two new concepts are introduced: the <code>Serializer</code> and the <code>Transcoder</code>.
Out of the box the SDKs ship with a JSON serializer which handles the encoding and decoding of JSON.
You&#8217;ll find the serializer exposes the options for methods like N1QL queries and KeyValue subdocument operations,.</p>
</div>
<div class="paragraph">
<p>The KV API extends the concept of the serializer to the <code>Transcoder</code>.
Since you can also store non-JSON data inside a document, the <code>Transcoder</code> allows the writing of binary data as well.
It handles the object/entity encoding and decoding, and if it happens to deal with JSON makes uses of the configured <code>Serializer</code> internally.
See the <em>Serialization and Transcoding</em> section below for details.</p>
</div>
</div>
<div class="sect2">
<h3 id="what-to-look-out-for"><a class="anchor" href="#what-to-look-out-for"></a>What to look out for</h3>
<div class="paragraph">
<p>The SDKs are more proactive in retrying with certain errors and in certain situations, within the timeout budget given by the user&#8201;&#8212;&#8201;as an example, temporary failures or locked documents are now being retried by default&#8201;&#8212;&#8201;making it even easier to program against certain error cases.
This behavior is customizable in a <code>RetryStrategy</code>, which can be overridden on a per operation basis for maximum flexibility if you need it.</p>
</div>
<div class="paragraph">
<p>Note, most of the bootstrap sequence is now lazy (happening behind the scenes).
For example, opening a bucket is not raising an error anymore, but it will only show up once you perform an actual operation.
The reason behind this is to spare the application developer the work of having to do error handling in more places than needed.
A bucket can go down 2ms after you opened it, so you have to handle request failures anyway.
By delaying the error into the operation result itself, there is only one place to do the error handling.
There will still be situations why you want to check if the resource you are accessing is available before continuing the bootstrap;
for this, we have the diagnostics and ping commands at each level which allow you to perform those checks eagerly.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="language-specifics"><a class="anchor" href="#language-specifics"></a>Language Specifics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you are familiar with the general theme of the migration, the next sections dive deep into the specifics.
First, installation and configuration are covered, then we talk about exception handling, and then each service (i.e. Key/Value, Query,&#8230;&#8203;) is covered separately.</p>
</div>
<div class="sect2">
<h3 id="installation-and-configuration"><a class="anchor" href="#installation-and-configuration"></a>Installation and Configuration</h3>
<div class="paragraph">
<p>The primary source of artifacts is <a href="#installation.adoc" class="page unresolved">the installation page</a>,
where we publish links to pre-built binaries, as well as to source tarballs.
Builds can be found on PyPi.
Please see the <a href="sdk-release-notes.html" class="page">Release Notes</a> for up-to-date information.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Python SDK 3.x and 4.x have a minimum required Python version of 3.5, although we recommend running the latest fully supported version (i.e. at the time of writing Python 3.10) with the highest patch version available.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that the transitive dependency list has changed.
As a refresher, Python SDK API 2 depended on the following packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>typing</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>SDK API 3 depends on the following ones instead:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>typing</strong> (on Python&lt;3.7)</p>
</li>
<li>
<p><strong>typing-extensions</strong> (on Python&lt;3.8)</p>
</li>
<li>
<p><strong>boltons</strong></p>
</li>
<li>
<p><strong>pyrsistent</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally these are supported optionally in SDK API 2 and SDK API 3.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Twisted</strong></p>
</li>
<li>
<p><strong>gevent</strong></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you are pulling in the SDK through a package manager (recommended), all mandatory dependencies will be resolved for you automatically.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuring-collections"><a class="anchor" href="#configuring-collections"></a>Configuring Collections</h3>
<div class="paragraph">
<p>The fundamental semantics of the <code>Bucket</code> from SDK API 2 are analogous to that of the <code>Collection</code> in SDK API 3.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python"># SDK API 2 custom KV timeout
bucket = Bucket("couchbases://127.0.0.1/default")
bucket.timeout=5</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L8-L11"># SDK 3 equivalent
cluster=Cluster("couchbases://10.192.1.104")
collection=cluster.bucket("default").default_collection()
collection.timeout=5</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default settings can still be customized through either the connection string or <a href="../ref/client-settings.html" class="page">system properties</a>.
The SDK has elaborate reflection logic in place to parse "flat" string values and apply them to the builder, which means that you can now configure more properties than in SDK API 2.
Note that the property paths have changed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L46-L53"># Will set the compression type to inout
Cluster.connect(
    "couchbases://127.0.0.1?compression=inout",ClusterOptions(PasswordAuthenticator(
    "user",
    "pass")))

# This is equivalent to
collection.compression = COMPRESS_INOUT</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="../ref/client-settings.html" class="page">configuration section</a> for full specifics.</p>
</div>
<div class="paragraph">
<p>At the end of this guide you&#8217;ll find a <a href="#configurations-options-reference">reference</a> that describes the SDK API 2 environment options and their SDK 3 equivalents where applicable.</p>
</div>
</div>
<div class="sect2">
<h3 id="authentication"><a class="anchor" href="#authentication"></a>Authentication</h3>
<div class="paragraph">
<p>Since SDK API 2 supports Couchbase Server clusters older than 5.0, it had to support both Role-Based Access Control (RBAC) as well as bucket-level passwords.
The minimum cluster version supported by SDK API 3 is Server 5.0, which means that only RBAC is supported.
This is why you can set the username and password when directly connecting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L57-L58"># add convenience overload when available
Cluster.connect("couchbases://127.0.0.1", ClusterOptions(PasswordAuthenticator("username", "password")))</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is just a shorthand for:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L62-L64">Cluster.connect(
    "couchbases://127.0.0.1",
    ClusterOptions(PasswordAuthenticator("username", "password")))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason why you can pass in a specific authenticator is that you can also use the same approach to configure certificate-based authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L70-L76">cert_dir=os.path.join(os.path.curdir,"cert_dir")

Cluster.connect("couchbases://127.0.0.1", ClusterOptions(
    CertAuthenticator(cert_path="cert.pem",
                      key_path="key.crt",
                      trust_store_path="trust_store.pem"
)))</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connection-lifecycle"><a class="anchor" href="#connection-lifecycle"></a>Connection Lifecycle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From a high-level perspective, bootstrapping and shutdown is very similar to SDK API 2.</p>
</div>
<div class="paragraph">
<p><code>Collections</code> will be generally available with an upcoming Couchbase Server release, but the SDK already encodes it in its API to be future-proof.
If you are using a Couchbase Server version which does not support <code>Collections</code>, always use the <code>default_collection()</code> method to access the KV API; it will map to the full bucket.</p>
</div>
<div class="paragraph">
<p>Also note, you will now find Query, Search, and Analytics at the <code>Cluster</code> level.
This is where they logically belong.
If you are using Couchbase Server 6.5 or later, you will be able to perform cluster-level queries even if no bucket is open.
If you are using an earlier version of the cluster you must open at least one bucket, otherwise cluster-level queries will fail.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exception-handling"><a class="anchor" href="#exception-handling"></a>Exception Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>How to <em>handle</em> exceptions is unchanged from SDK API 2.
You should still use <code>try/catch</code> on the blocking APIs and the corresponding async methods on the other APIs.
There have been changes made in the following areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Exception hierarchy and naming.</p>
</li>
<li>
<p>Proactive retry where possible.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="exception-hierarchy"><a class="anchor" href="#exception-hierarchy"></a>Exception Hierarchy</h3>
<div class="paragraph">
<p>The exception hierarchy is now unified under a <code>CouchbaseException</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="key-value"><a class="anchor" href="#key-value"></a>Key Value</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Key/Value (KV) API is now located under the <code>Collection</code> interface, so even if you do not use collections, the <code>default_collection()</code> call needs to be opened in order to access it.</p>
</div>
<div class="paragraph">
<p>The following table describes the mappings from SDK API 2 KV to those of SDK API 3:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. KV Changes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SDK API 2</th>
<th class="tableblock halign-left valign-top">SDK API 3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.upsert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.upsert</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.get</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.exists</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.exists</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.get_from_replica</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.get_any_replica</code> and <code>collection_get_all_replicas</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.get_and_lock</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.get_and_lock</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.get_and_touch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.get_and_touch</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.insert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.insert</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.upsert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.upsert</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.replace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.replace</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.remove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.remove</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.unlock</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.unlock</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.touch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.touch</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.lookup_in</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.lookup_in</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.mutate_in</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.mutate_in</code>
////
////</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition, the datastructure APIs have been renamed and moved:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Datastructure API Changes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SDK API 2</th>
<th class="tableblock halign-left valign-top">SDK API 3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.map_add</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.map_add</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.map_get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.map_get</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.map_remove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.map_remove</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.map_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.map_size</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.list_get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.list_get</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.list_append</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.list_append</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.list_remove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.list_remove</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.list_prepend</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.list_prepend</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.list_set</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.list_set</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.list_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.list_size</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.set_add</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.set_add</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.set_contains</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.set_contains</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.set_remove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.set_remove</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.set_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.set_size</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.queue_push</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.queue_push</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bucket.queue_pop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Collection.queue_pop</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>There are two important API changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On the request side, overloads have been reduced and moved under a <code>Options</code> block</p>
</li>
<li>
<p>On the response side, the return types have been unified.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The signatures now look very similar.</p>
</div>
<div class="paragraph">
<p>In SDK API 3, the <code>get</code> method returns a <code>GetResult</code>, and the <code>upsert</code> returns <code>MutationResult</code>.</p>
</div>
<div class="paragraph">
<p>Each of those results only contains the fields that the specific method can actually return, making it impossible to accidentally try to access the <code>expiry</code> on the <code>Result</code> after a mutation, for example.</p>
</div>
<div class="paragraph">
<p>Optional parameters are now accessible via <code>couchbase.options.OptionBlock</code> derivatives, or via named parameters (with the latter overriding
the former).</p>
</div>
<div class="paragraph">
<p>All required params are still part of the method signature, making it clear what is required and what is not (or has default values applied if not overridden).</p>
</div>
<div class="paragraph">
<p>The timeout can be overridden on every operation and now takes a <code>datetime.timedelta</code> object from the Python standard library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L128-L134"># SDK 3 custom timeout
get_result = collection.get(
    "mydoc-id",
    GetOptions(timeout=timedelta(seconds=5)))
self.assertEquals("fish",get_result.content_as[str])</code></pre>
</div>
</div>
<div class="paragraph">
<p>In SDK API 2, the <code>get_from_replica</code> method had a <code>ReplicaMode</code> argument which allowed to customize its behavior on how many replicas should be reached.
We have identified this as a potential source of confusion and as a result split it up in two methods that simplify usage significantly.
There is now a <code>get_all_replicas</code> method and a <code>get_any_replica</code> method.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get_all_replicas</code> asks the active node and all available replicas and returns the results as a stream.</p>
</li>
<li>
<p><code>get_any_replica</code> uses <code>get_all_replicas</code>, and returns the first result obtained.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unless you want to build some kind of consensus bet(ween the different replica responses, we recommend <code>get_any_replica</code> for a fallback to a regular <code>get</code> when the active node times out.</p>
</div>
<div class="sect2">
<h3 id="query"><a class="anchor" href="#query"></a>Query</h3>
<div class="paragraph">
<p>N1QL querying is now available at the <code>Cluster</code> level instead of the bucket level, because you can also write N1QL queries that span multiple buckets. Compare a simple N1QL query from SDK 2 with its SDK 3 equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L140-L143"># SDK 2 simple query
query_result = bucket.query("select * from `travel-sample` limit 10")
for row in query_result:
    value = row.value</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L147-L151"># SDK 3 simple query
query_result = cluster.query("select * from `travel-sample` limit 10")
for value in query_result:
    #...
    pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following shows how to do named and positional parameters in SDK API 2, and their SDK API 3 counterparts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L157-L165"># SDK 2 named parameters
bucket.query(
    "select * from bucket where type = $type",
    type="airport")

# SDK 2 positional parameters
bucket.query(
    "select * from bucket where type = $1",
    "airport")</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L170-L179"># SDK 3 named parameters
from couchbase.cluster import QueryOptions
cluster.query(
    "select * from bucket where type = $type",
    QueryOptions(named_parameters={"type": "airport"}))

# SDK 3 positional parameters
cluster.query(
    "select * from bucket where type = $1",
    QueryOptions(positional_parameters=["airport"]))</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="analytics"><a class="anchor" href="#analytics"></a>Analytics</h4>
<div class="paragraph">
<p>Analytics querying, like N1QL, is also moved to the <code>Cluster</code> level: it is now accessible through the <code>Cluster.analytics_query</code> method.
As with the Query service, parameters for the Analytics queries have moved into the <code>AnalyticsOptions</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L183-L187"># SDK 3 simple analytics query
analytics_result = cluster.analytics_query("select * from dataset")
for value in analytics_result:
    #...
    pass</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/b939317347f7f3f112960ef52df12cf6884b707b/modules/project-docs/examples/migrating.py#L191-L200">from couchbase.cluster import AnalyticsOptions
# SDK 3 named parameters for analytics
cluster.analytics_query(
        "select * from dataset where type = $type",
        AnalyticsOptions(named_parameters={"type": 'airport'}))

# SDK 3 positional parameters for analytics
cluster.analytics_query(
    "select * from dataset where type = $1",
    AnalyticsOptions(positional_parameters=["airport"]))</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="management-apis"><a class="anchor" href="#management-apis"></a>Management APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In SDK API 2, the management APIs were centralized in the <code>Admin</code> class at the cluster level and the <code>BucketManager</code> class at the bucket level.
Since SDK API 3 provides more management APIs, they have been split up in their respective domains.
So for example when in SDK API 2 you needed to remove a bucket you would call <code>Admin.bucket_remove</code> you will now find it under <code>BucketManager.drop_bucket</code>.
Also, creating a N1QL index now lives in the <code>QueryIndexManager</code>, which is accessible through the <code>Cluster</code>.</p>
</div>
<div class="paragraph">
<p>The following table provides a mapping from the SDK API 2 management APIs to those of SDK API 3:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. <code>ClusterManager</code> changes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SDK API 2</th>
<th class="tableblock halign-left valign-top">SDK API 3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.bucket_create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.create_bucket</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.bucket_remove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.drop_bucket</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.bucket_update</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.update_bucket</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.buckets_list</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.get_all_buckets</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.bucket_info</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.get_bucket</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.user_get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UserManager.get_user</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.user_remove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UserManager.drop_user</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.user_upsert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UserManager.upsert_user</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Admin.users_get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UserManager.get_all_users</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. <code>BucketManager</code> changes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SDK API 2</th>
<th class="tableblock halign-left valign-top">SDK API 3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.design_create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ViewIndexManager.upsert_design_document</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.design_delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ViewIndexManager.drop_design_document</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.design_get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ViewIndexManager.get_design_document</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.design_list</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ViewIndexManager.get_all_design_documents</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.design_publish</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ViewIndexManager.publish_design_document</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.n1ql_index_build_deferred</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryIndexManager.build_deferred_indexes</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.n1ql_index_create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryIndexManager.create_index</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.n1ql_index_create_primary</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryIndexManager.create_primary_index</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.n1ql_index_drop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryIndexManager.drop_index</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.n1ql_index_drop_primary</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryIndexManager.drop_primary_index</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.n1ql_index_list</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryIndexManager.get_all_indexes</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketManager.n1ql_index_watch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryIndexManager.watch_indexes</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sdk4-specifics"><a class="anchor" href="#sdk4-specifics"></a>SDK 4.x specifics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Python SDK 4.0 implements the SDK API 3 spec, so all the steps above also apply to a migration from a Python SDK 2.x directly to Python SDK 4.0.</p>
</div>
<div class="paragraph">
<p>Importantly, the Python SDK 4.0 has been substantially reworked to use a new backend (Couchbase++ instead of libcouchbase.)
Though the API surfaces are intended to be compatible, any code that relies on undocumented or uncommitted internal details is not guaranteed to work.
Key areas that have been reworked:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>couchbase_core</code> package has been removed.
The 4.0 SDK provides appropriate import paths within the <code>couchbase</code> package (or possibly the <code>acouchbase</code>/<code>txcouchbase</code> packages if using one of the async APIs) for anything that is needed with respect to the APIs provided by the SDK.</p>
</li>
<li>
<p>As there is a new backend, the previous <code>_libcouchbase</code> c-extension has been removed</p>
</li>
<li>
<p>Remnants of the 2.x API in previous Python 3.x SDK versions have been removed or deprecated</p>
<div class="ulist">
<ul>
<li>
<p>Key items that have been <strong>removed</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>ClassicAuthenticator</code> class</p>
</li>
<li>
<p>Key-value operations are no longer available with a <code>bucket</code> instance.
Use a <code>collection</code> instance for key-value operations.</p>
</li>
<li>
<p>A <code>cluster</code> and <code>bucket</code> instance do not inherit from the same base class</p>
</li>
<li>
<p>The <code>Client</code> class has been removed</p>
</li>
<li>
<p><code>Items</code> API</p>
</li>
<li>
<p><code>Admin</code> cluster</p>
</li>
</ul>
</div>
</li>
<li>
<p>Key items that have been <strong>deprecated</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Datastructure methods provided by the <code>collection</code> instance have been deprecated and replaced with their respective APIs (i.e. <code>CouchbaseList</code>, <code>CouchbaseMap</code>, <code>CouchbaseQueue</code> and <code>CouchbaseSet</code>)</p>
</li>
<li>
<p><code>OperationResult</code> (deprecated, still available from <code>couchbase.result</code>)</p>
</li>
<li>
<p><code>ValueResult</code> (deprecated, still available from <code>couchbase.result</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Import paths have been reorganized to follow consistent patterns.  While the import paths that existed in 3.x SDK are mostly available (see previous points on removal of <code>couchbase_core</code> package), some paths are deprecated and will be removed in a future release.</p>
<div class="ulist">
<ul>
<li>
<p>All authenticators should be imported from <code>couchbase.auth</code></p>
</li>
<li>
<p>All constants should be imported from <code>couchbase.constants</code></p>
</li>
<li>
<p>All options should be imported from <code>couchbase.options</code></p>
</li>
<li>
<p>All management options should be imported from <code>couchbase.management.options</code></p>
</li>
<li>
<p>All results should be imported from <code>couchbase.result</code></p>
</li>
<li>
<p>All exceptions should be imported from <code>couchbase.exceptions</code></p>
</li>
<li>
<p>Enumerations and Classes related to operations should be imported from that operation&#8217;s path.  For example, <code>QueryScanConsistency</code> should be imported from <code>couchbase.n1ql</code> (i.e. <code>from couchbase.n1ql import QueryScanConsistency</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>If using the <code>txcouchbase</code> API, the reactor that should be installed is the <code>asyncioreactor</code>.  Therefore, the <code>txcouchbase</code> package <em>needs</em> to be imported prior to importing the <code>reactor</code>.  See example import below.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">import txcouchbase

from twisted.internet import reactor</code></pre>
</div>
</div>
<div class="paragraph">
<p>The new backend enables the capabilities required for many upcoming features.
Key new features include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../howtos/distributed-acid-transactions-from-the-sdk.html" class="page">multi-document ACID transactions</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following features are unsupported in 4.0.
They are available in 3.2, and will be available in a later 4.x release.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../concept-docs/response-time-observability.html" class="page">Response Time Availability</a></p>
</li>
<li>
<p><a href="../concept-docs/durability-replication-failure-considerations.html#older-server-versions" class="page">Legacy durability</a></p>
</li>
<li>
<p>Log forwarding</p>
</li>
<li>
<p>Replica reads</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get</code> requests on locked documents now retry rather than fast-fail.</p>
</li>
<li>
<p>The changes to <a href="../howtos/managing-connections.html#connection-strings" class="page">Connection Strings</a> are not currently documented.</p>
</li>
<li>
<p>The <a href="../howtos/collecting-information-and-logging.html" class="page">Logging</a> changes are not fully documented.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
