<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Release Notes | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4464/c-sdk/2.10/start-using-sdk.html">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="c-sdk">
    <meta name="dcterms.identifier" content="2.5">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4464">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../server/6.0/introduction/intro.html">Server</a></li>
                  <li><a href="../../server/6.0/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../server/6.0/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../server/6.0/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../server/6.0/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="../../operator/1.2/overview.html">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="../../couchbase-lite/2.5/index.html">Lite</a></li>
                  <li><a href="../../sync-gateway/2.5/index.html">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../server/6.0/sdk/overview.html">SDKs</a></li>
                  <li><a href="../../c-sdk/2.10/start-using-sdk.html">C</a></li>
                  <li><a href="../../dotnet-sdk/2.7/start-using-sdk.html">.NET</a></li>
                  <li><a href="../../go-sdk/1.5/start-using-sdk.html">Go</a></li>
                  <li><a href="../../java-sdk/2.7/start-using-sdk.html">Java</a></li>
                  <li><a href="../../nodejs-sdk/2.6/start-using-sdk.html">Node.js</a></li>
                  <li><a href="../../php-sdk/2.6/start-using-sdk.html">PHP</a></li>
                  <li><a href="../../python-sdk/2.5/start-using-sdk.html">Python</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../server/6.0/connectors/intro.html">Connectors</a></li>
                  <li><a href="../../elasticsearch-connector/4.0/index.html">Elasticsearch</a></li>
                  <li><a href="../../server/6.0/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="../../kafka-connector/3.4/index.html">Kafka</a></li>
                  <li><a href="../../spark-connector/2.2/index.html">Spark</a></li>
                  <li><a href="../../talend-connector/index.html">Talend</a></li>
                  <li><a href="../../server/6.0/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="c-intro.html"><span class="title">C SDK</span> <span class="version">2.5</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../2.10/start-using-sdk.html">C SDK 2.10</a></li>
                  <li><a class="navbar-item" href="../2.9/start-using-sdk.html">C SDK 2.9</a></li>
                  <li><a class="navbar-item" href="../2.8/start-using-sdk.html">C SDK 2.8</a></li>
                  <li><a class="navbar-item" href="../2.7/start-using-sdk.html">C SDK 2.7</a></li>
                  <li><a class="navbar-item" href="../2.6/start-using-sdk.html">C SDK 2.6</a></li>
                </ul>
                <ul class="related">
                  <li><a class="navbar-item" href="../../dotnet-sdk/2.7/release-notes.html">.NET SDK</a></li>
                  <li><a class="navbar-item" href="../../go-sdk/1.5/release-notes.html">Go SDK</a></li>
                  <li><a class="navbar-item" href="../../java-sdk/2.7/release-notes.html">Java SDK</a></li>
                  <li><a class="navbar-item" href="../../nodejs-sdk/2.6/release-notes.html">Node.js SDK</a></li>
                  <li><a class="navbar-item" href="../../php-sdk/2.6/release-notes.html">PHP SDK</a></li>
                  <li><a class="navbar-item" href="../../python-sdk/2.5/release-notes.html">Python SDK</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-current-path is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="c-intro.html">C SDK 2.4/2.5</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="overview.html">Couchbase C Client Library</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="download-install.html">Installation and API Reference</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="download-list.html">Downloads</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="getting-started.html">Getting started</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-connections.html">Managing server connections</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="documents.html">Working with documents</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="storing.html">Creating documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="retrieving.html">Retrieving documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="updating.html">Updating documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="deleting.html">Deleting documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="bulk-operations.html">Bulk operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="atomic-operations.html">Atomic operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="durability.html">Durability requirements for mutations</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="querying.html">Querying buckets</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="view-queries.html">Working with view queries</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-queries.html">Working with N1QL queries</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="handling-errors.html">Handling errors</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="preempting-errors.html">Preempting errors from bad servers</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="logging.html">Setting up logging</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="tuning.html">Tuning and configuring</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="common-settings.html">Common client settings</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="blocking-and-nonblocking.html">Blocking and non-blocking I/O</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="external-eventloop.html">Using external event loops</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="resources.html">Resources</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="options.html">Connection string reference</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="collecting-diagnostics.html">Collecting diagnostic information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="cli-tools.html">Client command-line tools</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="common-usage.html">Common usage</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="tools.html">List of tools</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="release-notes.html">Release Notes</a>
    </span>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-banner">
    <p>A newer version of this documentation is available.</p>
    <a class="btn" href="../2.10/start-using-sdk.html">View Latest</a>
  </div>
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="c-intro.html">C SDK</a></li>
    <li class="crumb"><a href="c-intro.html">C SDK 2.4/2.5</a></li>
    <li class="crumb"><a href="release-notes.html">Release Notes</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-c/edit/release/2.5/modules/ROOT/pages/release-notes.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">Release Notes</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
C SDK
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-6-0-may-17-2016"><a class="anchor" href="#2-6-0-may-17-2016"></a>2.6.0 (May 17 2016)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Improve index management API and implementation.
The <code>rawjson</code> field was being ignored and the <code>condition</code> field was missing as well.</p>
</li>
<li>
<p>Add pillowfight support for subdoc.
At the simplest level you can simply invoke pillowfight as <code>cbc-pillowfight --subdoc --json &lt;other args&gt;</code>.
Refer to the pillowfight documentation for more details.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-8-april-19-2016"><a class="anchor" href="#2-5-8-april-19-2016"></a>2.5.8 (April 19, 2016)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Fix SSL connectivity errors with views and HTTP bootstrapping.
This would cause network connectivity issues when attempting to bootstrap via <code>https://</code> or using views (<code>lcb_view_query()</code>).
The fix is a workaround to not advertise older SSL encryption methods.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-688" target="_blank" rel="noopener">CCBC-688</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Do not abort when receiving a memcached EINVAL response.
While the client should never end up in a situation where it receives an <code>EINVAL</code> from the server, it should nevertheless not terminate the execution of the current process.
This bug was introduced in 2.5.6</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-689" target="_blank" rel="noopener">CCBC-689</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix memory leak when using N1QL prepared statements.
Prepared statements would never be freed, even when the client handle was destroyed (<code>lcb_destroy()</code>) causing a slight memory leak.</p>
</li>
<li>
<p>Append CRLF header after host header.
This would sometimes result in odd HTTP headers being sent out.</p>
<div class="ulist">
<ul>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-694" target="_blank" rel="noopener">CCBC-694</a></p>
</li>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Experimental CBFT (Full-Text search API) This version adds a new fulltext api.
The API is a row-based API similar to N1QL and MapReduce.
See the <code>&lt;libcouchbase/cbft.h&gt;</code> header for more details.
The API is experimental and subject to change.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-638" target="_blank" rel="noopener">CCBC-638</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow additional client identifier for HELLO command.
The SDK sends a version string to the server when doing initial negotiation.
The server then uses this string in the context of any logging messages pertaining to that connection.
In this version, a new setting has been added to allow 'user-defined' version strings to be appended to the logs.
Note that this feature is intended only for use with wrapping SDKs such as Python, node.js, and PHP so that their versions can be present in the log messages as well.
This setting is exposed as a string control (in the connection string, or <code>lcb_cntl_string()</code> with the name of <code>client_string</code>).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-693" target="_blank" rel="noopener">CCBC-693</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>vBucket retry logic changes.
The client will now retry at constant 100ms rate when receiving not-my-vbucket error replies from the server (adjustable using <code>retry_nmv_interval</code>).
It will also only use fast-forward map to determine the new location for the vbucket, and will not use extended hueristics.</p>
<div class="paragraph">
<p>The most noteworthy user-visible change is the 100ms retry interval which will significantly decrease the network traffic used by the SDK during a rebalance.</p>
</div>
<div class="paragraph">
<p>To restore the pre-2.5.8 behavior (i.e.
use extended heuristics and and  exponential retry rate), specify <code>vb_noguess=false</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-660" target="_blank" rel="noopener">CCBC-660</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add interface for multi-bucket authentication.
A new API has been added to modify and add additional bucket/password pairs in the library.
This is done using <code>lcb_cntl</code> and the <code>LCB_CNTL_BUCKET_CRED</code> setting.
Note that this functionality is not yet used in N1QL queries due to <a href="https://issues.couchbase.com/browse/MB-16964" target="_blank" rel="noopener">MB-16964</a></p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-661" target="_blank" rel="noopener">CCBC-661</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-7-march-22-2016"><a class="anchor" href="#2-5-7-march-22-2016"></a>2.5.7 (March 22, 2016)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>High-level index management operations.
A volatile API for high level index management operations has been added to assist in common N1QL index operations such as creating the primary index and removing indexes.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-662" target="_blank" rel="noopener">CCBC-662</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix N1QL mutation token queries.
This fixes some bugs in the previous implementation of the way mutation tokens were handled with <code>lcb_N1QLPARAMS</code>.
The bugs and fixes only affect consumers of that API.
Couchbase SDKs do not consume this API</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-658" target="_blank" rel="noopener">CCBC-658</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Throttle config request retries on empty NMVB responses.
This changes the previous behavior where a new configuration would be retrieved <em>immediately</em> upon a not-my-vbucket reply if a configuration  was not included within the error reply itself.
The new behavior is to request a delayed retry (i.e.
subject to the default throttle settings) if the current configuration originated from the CCCP (Memcached) provider.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-681" target="_blank" rel="noopener">CCBC-681</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Rename <code>LCB_CLIENT_ETMPFAIL</code> to <code>LCB_CLIENT_ENOCONF</code>.
This error code is returned only when there is no current client configuration.
This error condition is <em>not</em> temporary and is actually fatal; a result of  an initial bootstrapping failure.
Note that the older name is still valid  in older code for compatibility purposes.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-679" target="_blank" rel="noopener">CCBC-679</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Include PID in log messages on OS X.
This makes the library logs (via <code>LCB_LOGLEVEL</code> etc.) easier to read on a  mac.
Previously this used to display only the thread ID, which was identical for multiple processes.
Now the display reads as <em>pid/tid</em>, making it easier  to read the logs in a multi-process environment.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-677" target="_blank" rel="noopener">CCBC-677</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-6-february-18-2016"><a class="anchor" href="#2-5-6-february-18-2016"></a>2.5.6 (February 18, 2016)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Sub-Document API ( <em>experimental</em>).</p>
<div class="paragraph">
<p>The client-side sub-document API has been implemented.
Sub-document is a feature which vastly reduces network usage when operating on parts of documents.
The API as it appears in this version is highly experimental and may (and likely will) change.
Look for the examples in the <code>examples/subdoc</code> directory.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
</ul>
</div>
</li>
<li>
<p>Make <code>lcb_sched_enter</code> and <code>lcb_sched_leave</code> optional.
When scheduling an operation (e.g.
<code>lcb_get3()</code>), the scheduling function will implicitly create a scheduling context and submit the operation if none exists already.
A scheduling context is explicitly created by calling <code>lcb_sched_enter()</code> and finished by calling <code>lcb_sched_leave()</code> or <code>lcb_sched_fail()</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-664" target="_blank" rel="noopener">CCBC-664</a></p>
</li>
<li>
<p>Priority: Major</p>
</li>
</ul>
</div>
</li>
<li>
<p>API3 is now stable.
The scheduling based API, introduced in version 2.4.0 and known as 'api3', is now stable and considered the API for use with the library.
The previous API (i.e.
'api2') is considered deprecated.</p>
<div class="paragraph">
<p>While API3 has been promoted to stable in this version, it has been available in its current form (and in a mostly compatible manner, <em>except</em> the implicit scheduling feature - CCBC-664) since 2.4.0.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Storing an item in API2</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>lcb_get_store_t cmd = { 0 }, *cmd_p = &amp;cmd;
cmd.v.v0.key = "key";
cmd.v.v0.nkey = 3;
cmd.v.v0.bytes = "value";
cmd.v.v0.nbytes = 5;
cmd.v.v0.operation = LCB_SET;
lcb_store(instance, NULL, 1, &amp;cmd_p);</pre>
</div>
</div>
<div class="paragraph">
<p>+
.Storing an item in API3</p>
</div>
<div class="listingblock">
<div class="content">
<pre>lcb_CMDSTORE cmd = { 0 };
LCB_CMD_SET_KEY(&amp;cmd, "key", 3);
LCB_CMD_SET_VALUE(&amp;cmd, "value", 5);
cmd.operation - LCB_SET;
lcb_store3(instance, NULL, &amp;cmd);</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <code>libcouchbase/</code> string to version identification to Memcached.
Connections to memcached will now be identified as <code>libcouchbase/version</code> rather than <code>version</code>.
This increases readability for server logs.</p>
<div class="ulist">
<ul>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-656" target="_blank" rel="noopener">CCBC-656</a></p>
</li>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Hide <code>mutation_token</code> field from API3 mutation respones.
The <code>mutation_token</code> field has never been part of the API itself (it was previously present when api3 was marked as "experimental").
The mutation token for any operation must now be retrieved using the <code>lcb_resp_get_mutation_token()</code> to retrieve the actual mutation token.</p>
<div class="ulist">
<ul>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-671" target="_blank" rel="noopener">CCBC-671</a></p>
</li>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Server&#8217;s <code>PROTOCOL_BINARY_RESPONSE_EINTERNAL</code> is no longer mapped to <code>LCB_EINTERNAL</code>.
<code>LCB_UNKNOWN_MEMCACHED_ERROR</code> will be returned instead</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow get-and-touch with an expiry of 0.
Clearing a document&#8217;s expiry with <code>get</code> is now possible, using the new <code>LCB_CMDGET_F_CLEAREXP</code> in <code>lcb_CMDGET::cmdflags</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-667" target="_blank" rel="noopener">CCBC-667</a></p>
</li>
<li>
<p>Priority: Major</p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow multiple buckets when using sequence number consistency with N1QL This uses the new internal <code>scan_vector</code> protocol supporting multiple buckets, each providing their own <code>lcb_MUTATION_TOKEN</code> objects.</p>
<div class="ulist">
<ul>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-658" target="_blank" rel="noopener">CCBC-658</a></p>
</li>
<li>
<p>Priority: Major</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-5-january-12-2016"><a class="anchor" href="#2-5-5-january-12-2016"></a>2.5.5 (January 12, 2016)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Add <code>retry_interval</code> string option to adjust retry interval.
This allows the setting to be modified via <code>lcb_cntl_string()</code> and specified in the connection string.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-654" target="_blank" rel="noopener">CCBC-654</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Handle backslashes in view row ID fields.
This would previously not be handled correctly as the backslashes would not be removed.
For example, an ID of <code>has_a_"quote</code> would appear in the API as <code>has_a_\"quote</code>.
This has been fixed, and document IDs are now properly processed as JSON.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-649" target="_blank" rel="noopener">CCBC-649</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow 'file-only' configuration mode.
This allows applications to make the library instance exclusively configured from a file on the local filesystem rather than through network bootstrap.
This feature is undocumented and unsupported but may still be useful in some cases.
It may be enabled using the <code>bootstrap_on=file_only</code> connection string directive.u</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-652" target="_blank" rel="noopener">CCBC-652</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Log when squashing network errors.
This will make the library log the original error whenever a network error is translated from a more detailed description into <code>LCB_NETWORK_ERROR</code> (in case <code>detailed_errcodes</code> is not enabled), or if an OS-level error is found which cannot be translated into a more specific library error.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix memcached/ketama hashing.
This fixes a bug in the ketama hashing code, which caused a key to be mapped to an effectively arbitrary server for the library instance.
In practice, the node a key was mapped to depended on the order in which the hosts were specified in the connection string.
This was always fixed to use hashing based on the lexical sort order of each server node.
It is highly recommended that applications upgrade to this version (2.5.5) for proper memcached (cache) bucket functionality.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Critical</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-653" target="_blank" rel="noopener">CCBC-653</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add <code>cbc-touch</code> subcommand.
This now allows the simple "touching", or modifying expiration time via the <code>cbc</code> command-line client.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-651" target="_blank" rel="noopener">CCBC-651</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-4-november-2015"><a class="anchor" href="#2-5-4-november-2015"></a>2.5.4 (November , 2015)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Validate vBucket master nodes for bounds when receiving new configuration.
This ensures that invalid configurations (addressing nodes which do not exist) do not make their way to KV routing operations.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-643" target="_blank" rel="noopener">CCBC-643</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add <code>lcb_strcbtype</code> to print the name of the callback type.
This small convenience function is added to pretty-print the type of callback being invoked.
The second argument to the callback can be passed to this function.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Disallow using <code>certpath</code> connection string option without the explicit SSL ( <code>couchbases://</code>) scheme.
Since the SSL and non-SSL schemes are similar, a typo can let a user mistakenly think that SSL is being used.
This is fixed by disallowing the other SSL option ( <code>certpath</code>) when SSL is not enabled.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-644" target="_blank" rel="noopener">CCBC-644</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add convenience function to retrieve hostname for the key.
This is an alternative to retrieving the vBucket configuration (via <code>lcb_cntl()</code>) and mapping the key to an index, and mapping the index to a node.
Note that hostnames are sufficient for most but not all configurations.
Those running multiple server instances on the same host (for example, <code>cluster_run</code>) will still need to use the full set of steps as this function does not return a port.
This function is provided both as a vBucket API ( <code>lcbvb_get_hostname()</code>) which retrieves the hostname for an index as well as a top-level instance ( <code>lcb_t</code>) function ( <code>lcb_get_keynode()</code>) which accepts a key buffer and length.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ensure embedded jsoncpp does not throw exceptions.
This caused some build issues with other build systems.
This has been fixed by replacing any exception throwing the code with <code>abort()</code> and <code>assert()</code> statements.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-634" target="_blank" rel="noopener">CCBC-634</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Log vBucket configuration parsing failures.
This logs vBucket configuration parsing failures when a given config received could not be parsed.
Parsing failures include both JSON syntax errors as well as improper fields or values within the config itself.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-647" target="_blank" rel="noopener">CCBC-647</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow per-request N1QL timeouts to exceed global timeouts.
This scans the <code>"timeout"</code> property of the N1QL request and if set, will make the value of this property the timeout value for the request.
A small parser was implemented which converted the N1QL timeout values ( <code>s</code>, <code>h</code>, etc.) into microseconds.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-660" target="_blank" rel="noopener">CCBC-660</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Request configuration refreshes when HTTP API redirects are received.
Redirects in Couchbase Server are sent when a node is about to exit the cluster.
We should take this as a sign to refresh the config since it indicates a node is about to be removed.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-646" target="_blank" rel="noopener">CCBC-646</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-3-august-27-2015"><a class="anchor" href="#2-5-3-august-27-2015"></a>2.5.3 (August 27 2015)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Add N1QL timeout feature.
This allows an independent timeout setting for N1QL.
Previously this would use the views timeout.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-631" target="_blank" rel="noopener">CCBC-631</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add N1QL prepared statements.
This allows prepared statements to be used with N1QL.
The library will maintain an internal <em>prepared statement cache</em> which contains cached responses for internal <code>PREPARE</code> requests.
To use a prepared statement, an application can simply set the <code>LCB_CMDN1QL_F_PREPCACHE</code> bit in the <code>cmdflags</code> field within the <code>lcb_CMDN1QL</code> structure.
All the rest is handled internally within the library.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-633" target="_blank" rel="noopener">CCBC-633</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-2-july-23-2015"><a class="anchor" href="#2-5-2-july-23-2015"></a>2.5.2 (July 23 2015)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Fix off-by-one error when populating documents with pillowfight.
Previously pillowfight would only populate <em>N</em>-1 documents where <em>N</em> is the ( <code>-I</code>, <code>--num-items</code>) option.
This has been fixed.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Don&#8217;t generate negative keys for pillowfight.
For certain option configurations, pillowfight would generate negative keys (some keys were in the format of -nnnnnn).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow in-progress N1QL requests to be cancelled.
This allows in-progress N1QL requests to be canceled by adding a new API, <code>lcb_n1ql_cancel()</code>.
Invoking this function on an <code>lcb_N1QLHANDLE</code> handle (obtained via an <em>out</em> parameter in the command structure) will effectively stop the request and stop delivering callbacks to the user.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-619" target="_blank" rel="noopener">CCBC-619</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Rename <code>lcb_SYNCTOKEN</code> to <code>lcb_MUTATION_TOKEN</code>.
This experimental (volatile) API has been renamed to "Mutation Token" to better reflect naming conventions found in other client libraries.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Implement histogram/timings information for N1QL queries via <code>cbc-n1qlback</code>.
This adds support for the ( <code>-T</code>, <code>--timings</code>) option in the <code>cbc-n1qlback</code> benchmark/stress-test utility.
These timings reflect the latency between issuing the query and the receipt of the first row of the result set.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-624" target="_blank" rel="noopener">CCBC-624</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add ( <code>-M</code>, <code>--mode</code>) option to <code>cbc-create</code> to allow for upsert, insert, etc.
This allows <code>cbc-create</code> to use the full gamut of storage options available via the SDK by allowing an insert/upsert/replace mode as an argument to the new <code>--mode</code> option.
<code>append</code> and <code>prepend</code> are now also provided as options, though not documented.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-625" target="_blank" rel="noopener">CCBC-625</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Support <code>CBC_CONFIG</code> environment variable for command line tools.
This variable specifies a path to an alternate <code>cbcrc</code> file which may be used to provide cluster/bucket settings.
This new option allows multiple configurations to coexist, without forcing any one of them to be inside the user&#8217;s home directory.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="https://issues.couchbase.com/browse/CCBC-626" target="_blank" rel="noopener">CCBC-626</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-1-june-17-2015"><a class="anchor" href="#2-5-1-june-17-2015"></a>2.5.1 (June 17 2015)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bug fixes and improvements in 2.5.1</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fix hanging in durability operations if node is not present and constraints include failed node.
This condition may be triggered when only a single node remains in the broadcast probe and a command sent to it could not be scheduled.
A symptom of this bug was durability operations 'hanging'</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-607" target="_blank" rel="noopener">CCBC-607</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Improved handling of topology changes when non-data (N1QL, Index) nodes are part of the cluster.
This fixes some issues (mainly crashes) when non-data nodes are found inside the cluster during a topology change.
While the library since version 2.4.8 was able to handle initial bootstrapping with non-data nodes, it would still crash when such nodes were encountered during configuration changes.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-609" target="_blank" rel="noopener">CCBC-609</a>, <a href="http://issues.couchbase.com/browse/CCBC-612" target="_blank" rel="noopener">CCBC-612</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Improved random host selection algorithm for REST services This new algorithm ensures that the distribution is even among all <em>eligible</em> nodes for a given service.
The old algorithm would only distribute evenly when the assumption that all nodes contained the same services were true.
However this assumption is no longer necessarily true with Couchbase 4.0.
In this case the algorithm ensures that the random selection inspects only the pool of nodes which are known to have a given service enabled.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-611" target="_blank" rel="noopener">CCBC-611</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Ensure ketama/Memcached-bucket hashing works correctly when non-data nodes are part of the cluster.
In previous versions, ketama hashing would incorrectly consider all nodes as candidates for keys, which would result in some items being routed to non-data nodes, resulting in odd errors and inaccessible data.
This is only an issue for the still-unreleased Couchbase 4.0.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-613" target="_blank" rel="noopener">CCBC-613</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Set <code>TCP_NODELAY</code> as a server side option, if it&#8217;s enabled on the client.
This uses the <code>HELLO</code> protocol functionality to enable this feature, if  this feature is also enabled on the client (enabled by default).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>New features in 2.5.1</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <code>cmake/configure</code> option for enabling the embedding of the libevent  plugin.
This option, named <code>--enable-embedded-libevent-plugin</code>, will cause  the plugin to be linked in with the core library ( <em>libcouchbase</em>) rather  than built as its own object</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Add new combined "Store-with-durability" operation.
This new API, called <code>lcb_storedur3()</code> allows specifying the storage input options as well as the associated durability options in a single command.
Likewise, the status of the operation (including durability) is returned in the operation&#8217;s callback.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-616" target="_blank" rel="noopener">CCBC-616</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-5-0-may-12-2015"><a class="anchor" href="#2-5-0-may-12-2015"></a>2.5.0 (May 12 2015)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This change in the major version number signals the addition of new features for Couchbase Server 4.0; most of the actual new functionality for Couchbase 4.0 has already been included (incrementally) in prior 2.4.x versions.
The new 2.5 version is built on the 2.4.x codebase.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <code>cbc-n1qlback</code> - a simple benchmark for N1QL queries.
This functions by executing a line-delimited file containing query bodies using multiple threads if possible.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-604" target="_blank" rel="noopener">CCBC-604</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>TCP_NODELAY</code> functionality has now been placed into effect.
This functionality was nominally present in prior versions, but would not work because of a typo.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Add 'tick' or 'pump' mode for I/O As an alternative to <code>lcb_wait()</code>, applications may call <code>lcb_tick_nowait()</code> to incrementally perform (non-blocking) I/O.
This may provide a performance boost when batching/scheduling many operations.
<code>lcb_wait()</code> itself must be called to guarantee completion of all operations, and the <code>lcb_tick_nowait()</code> functionality is only available on some I/O plugins.
See the API docs for more information.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-598" target="_blank" rel="noopener">CCBC-598</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow "console logger" to log to a file  As a convenience, it is now possible to direct the library to write to  a log file rather than standard error.
This is possible using the <code>LCB_CNTL_CONLOGGER_FP</code> (to programmatically set a <code>FILE*</code> value via <code>lcb_cntl()</code>) or <code>console_log_file</code> to set the path of the file (which  will be overwritten) via <code>lcb_cntl_string()</code> or the connection string.</p>
</li>
<li>
<p>Make <code>lcb_N1QLPARAMS</code> repeatable/debuggable  This allows the <code>lcb_n1p_mkcmd()</code> call to be invoked multiple times without  actually modifying internal state.
Previously calling this function twice  would result in corruption of the internal parameter state.
In this version,  a new function, <code>lcb_n1p_encode()</code> has been added (which <code>lcb_n1p_mkcmd()</code>  wraps) which may be used to inspect the encoded form of the query.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-9-april-14-2015"><a class="anchor" href="#2-4-9-april-14-2015"></a>2.4.9 (April 14 2015)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Disable HTTP provider when any CCCP config is received.
This makes the assumption that CCCP will always be available if even a single node provides an HTTP configuration.
This change may break some corner-case upgrade scenarios from version 2.2 to 2.5 where a newly added 2.5 node is subsequently removed.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-526" target="_blank" rel="noopener">CCBC-526</a>, <a href="http://issues.couchbase.com/browse/CCBC-589" target="_blank" rel="noopener">CCBC-589</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix additional missing defines for UV&#8217;s <code>EAI_*</code> symbols This was not entirely fixed in 2.4.8, since some undefined macros still remained.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-596" target="_blank" rel="noopener">CCBC-596</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Make connection string timeout parameters (e.g.
<code>operation_timeout</code>) always specify seconds; this will no longer require the decimal point to be used, but will break any prior usages of this value for microseconds.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-597" target="_blank" rel="noopener">CCBC-597</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add <code>cbc n1ql</code> subcommand, which executes N1QL queries.
This subcommand is still a bit rough around the edges, mainly because of server-side support for "pretty=false" (which makes the rows display rather weirdly).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-595" target="_blank" rel="noopener">CCBC-595</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow usage of <code>-D</code> option in <code>cbc</code> and <code>cbc-pillowfight</code> tools.
This flag allows specifying connection string options in a more concise form on the commandline.
The <code>-D</code> option may be specified multiple times in the form of <code>-Doption=value</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Interpret <code>couchbase://host:8091</code> connection string as <code>couchbase://host</code> Previously the library would treat <code>8091</code> as a memcached port.
While technically correct according to the connection string semantics, would often be a source of confusion for users migrating from older versions of the library (or other SDKs) when using the form <code>http://host:8091</code>.
A special provision is thus made for such a cas.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-599" target="_blank" rel="noopener">CCBC-599</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Implement enhanced durability using sequence numbers.
This feature is available in Couchbase 4.0, and uses sequence numbers (optionally specified in the response packet of each mutation).
sequence-based durability constraints help resolve some ambiguity in the case of checking the durability of items which have since been mutated, or in the case of a cluster failover.
Using this functionality requires the <code>LCB_CNTL_FETCH_SYNCTOKENS</code> (or <code>fetch_synctokens</code>) and the <code>LCB_CNTL_DURABILITY_SYNCTOKENS</code> (or <code>dur_synctokens</code>) settings to be enabled (using <code>lcb_cntl()</code> or <code>lcb_cntl_string()</code>, or in the connection string).
Enabling <code>LCB_CNTL_FETCH_SYNCTOKENS</code> will cause mutation response packets from the server to return an additional 16 bytes of sequence data, and enabling <code>LCB_CNTL_DURABILITY_SYNCTOKENS</code> will cause <code>lcb_durability_poll()</code> to transparently use this information (rather than the CAS) to check for persistence/replication.
<strong>Only available in Couchbase 4.0</strong>.
As a result of this feature, much of the durability subsystem itself has been rewritten, making durability overall more performant, even for CAS-based durability.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-569" target="_blank" rel="noopener">CCBC-569</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add <code>lcb_version_g</code> extern symbol as alternative to <code>lcb_get_version()</code>.
This symbol is an extern global which allows simple runtime checking of the library version.
This is more convenient than <code>lcb_get_version()</code> as it avoids the requirement to create a temporary variable on the stack ( <code>lcb_get_version()</code> returns a string, and requires an <code>lcb_U32</code> pointer as its first argument to get the actual numeric version).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-8-mar-8-2015"><a class="anchor" href="#2-4-8-mar-8-2015"></a>2.4.8 (Mar. 8 2015)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Retry next nodes on initial bootstrap, even if first node says bucket does not exist (or auth error), as this might be a recently removed node</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-577" target="_blank" rel="noopener">CCBC-577</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>The <code>cbc</code> and <code>cbc-pillowfight</code> binaries on Windows are now distributed in both <em>release</em> and <em>debug</em> variants.
Previously they would be clobbered by one or the other depending on the build host.
This fixes some issues in performance and dependency resolution when using these libraries.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-581" target="_blank" rel="noopener">CCBC-581</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Provide Read-Only config cache mode.
In this mode the configuration cache file is read but never updated.
Additionally, a missing file in this mode results in a hard error.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-584" target="_blank" rel="noopener">CCBC-584</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Keep vBucket heuristic guesses for limited periods of time.
This will allow previously-learned vBucket master locations to persist over a configuration change, providing these changes were discovered recently.
This allows the reduction of not-my-vbucket responses while allowing new configs to overwrite our heuristic info, if the heuristic is too old.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix potential crashes in get-with-replica ( <code>lcb_rget3</code>, <code>lcb_get_replica</code>) when there are no replicas available, or if there is an error in retrieving from one of the replicas.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-586" target="_blank" rel="noopener">CCBC-586</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Do not wait between not-my-vbucket retries This behavior restores the pre 2.4.0 behavior of retrying not-my-vbucket responses, with a more intelligent retry/rotation algorithm (see the release note about "vbucket map heuristics").
Previously a wait-time was introduced because of potential busy loops in retrying to the same node.
The <code>LCB_CNTL_RETRY_NMV_IMM</code> setting can be used to disable this functionality (by disabling it, i.e.
setting it to 0).
This may also be disabled in the connection string via <code>retry_nmv_imm=0</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-588" target="_blank" rel="noopener">CCBC-588</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix compilation error with UV when <code>EAI_BADHINTS</code> is not defined in the system.
This is primarily an issue with newer UV versions and some versions of Linux</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-590" target="_blank" rel="noopener">CCBC-590</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow means to disable C behavior on public library structures, allowing them to be initialized via C-style static initializers.
This allows the zeroing of structures such as `lcb_get_cmd_t cmd = { 0 }`, which would ordinarily fail under C compilation because of that structure having a defined C++ constructor.
Applications can take advantage of this feature by defining the <code>LCB_NO_DEPR_CXX_CTORS</code> preprocessor macro when compiling.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-591" target="_blank" rel="noopener">CCBC-591</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix some bugs in timing behavior ( <code>lcb_enable_timings</code>).
Timings between 1000-2000ms are now reported accurately.
Additionally for more common handling, second timing ranges (between 1-9s) are reported in ms range (i.e.
timings of 4 seconds are reported as 3000-4000ms ).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-582" target="_blank" rel="noopener">CCBC-582</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-7-feb-17-2015"><a class="anchor" href="#2-4-7-feb-17-2015"></a>2.4.7 (Feb. 17 2015)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Fix SSL connection failures with <code>SSL_UNDEFINED_CONST_FUNCTION</code>.
This would sometimes cause failures during early connection/negotiation stages.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-571" target="_blank" rel="noopener">CCBC-571</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add <em>experimental</em> support for N1QL queries.
This adds support for contacting N1QL endpoints and retrieving their result sets.
The support at both the client and server components is still a work in progress.
The API is similar to the view api (see <code>lcb_view_query()</code>) added in version 2.4.6.
See details in <code>&lt;libcouchbase/n1ql.h&gt;</code></p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-572" target="_blank" rel="noopener">CCBC-572</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add <em>experimental</em> support for geospatial view queries.
GeoSpatial views are available as an experimental feature in the current releases of the server.
This will soon be offered as a stable feature in future releases.
Applications may now use the <code>lcb_RESPVIEWQUERY::geometry</code> field and the <code>LCB_CMDVIEWQUERY_F_SPATIAL</code> to utilize geospatial views.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-573" target="_blank" rel="noopener">CCBC-573</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix memory leak for retried commands.
In cases where a given command needs to be retried more than once, a memory leak was fixed in which the previous instance of the pacekt was not properly freed.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-574" target="_blank" rel="noopener">CCBC-574</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-6-january-20-2015"><a class="anchor" href="#2-4-6-january-20-2015"></a>2.4.6 (January 20 2015)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Fix floating point exception on OS X.
A floating point exception would sometimes be thrown on OS X sytems due  to bad time structure initialization.
The installation provided with  homebrew for 2.4.5 fixed this issue.
This is completely fixed in 2.4.6  Priority: Major</p>
</li>
<li>
<p>Improve warning messages when using deprecated options in <code>cbc</code>.
This provides less ambiguous help messages when using deprecated options, showing a full and complete example for proper usage (when possible).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-562" target="_blank" rel="noopener">CCBC-562</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add patch/micro version to DLL information on Windows.
This lets the user see the exact version of the library on windows (via right clicking on the DLL and inspecting the details).
Previously this information contained only the major and minor versions.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-563" target="_blank" rel="noopener">CCBC-563</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Provide <em>pkgconfig</em> ( <code>.pc</code>) file with installation.
This may help third party applications and libraries link against libcouchbase  in some environments.</p>
</li>
<li>
<p>Provide one-off <code>unsafe_optimize</code> option for connection string/ <code>lcb_cntl</code>.
This provides a shorter way to enable some potentially unsafe optimizations which may make the client perform better in some scenarios.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow prompting for password in <code>cbc</code>.
The <code>cbc</code> and <code>cbc-pillowfight</code> utilities will now securely prompt for the password if the password specified on the commandline is a hyphen ( <code>-</code>).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-565" target="_blank" rel="noopener">CCBC-565</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix timeouts in some durability when not all replicas are online.
The library will now fail the operation with <code>LCB_DURABILITY_ETOOMANY</code> rather than allowing the operation to timeout.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-560" target="_blank" rel="noopener">CCBC-560</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add high level row-based view functionality.
This adds a new API (currently considered <em>volatile</em>) which allows intelligently querying views.
This builds atop the basic HTTP interface, and exposes a row-based callback API based upon streaming JSON parsing.
The new API is defined in <code>&lt;libcouchbase/views.h&gt;</code>.
This API will become more stable over time.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://issues.couchbase.com/browse/CCBC-100" target="_blank" rel="noopener">CCBC-100</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Parse configuration service locations for experimental services  This exposes the N1QL and indexing services via the <em>lcbvb</em> API.
See <code>libcouchbase/vbucket.h</code> for more information.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-5-december-17-2014"><a class="anchor" href="#2-4-5-december-17-2014"></a>2.4.5 (December 17 2014)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Fix <code>pillowfight</code> ignoring <code>set-ratio</code> values above 50 The program would ignore these values and act as if 100 was specified, thus never issuing any GET operations</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-550" target="_blank" rel="noopener">CCBC-550</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Building with autotools is no longer supported.
If building the library from source, you <em>must</em> use <a href="http://cmake.org/download" target="_blank" rel="noopener">CMake</a> version 2.8.9 or greater.
If unfamiliar with CMake, the README describes the process.
Included also is a top-level script called <code>configure.pl</code> which functions with an autoconf-like interface.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix customized IOPS crashes in some usage cases This fixes scenarios where applications assume that the built-in IOPS version is 0, and attempt to "Subclass" the IOPS structure.
The internal version of the library structure is now 3, with some extra heuristics in place to ensure that the older code will still function.
This issue was most visible in the Python SDK when using the gevent or Twisted plugins.
This issue was first introduced with version 2.4.4</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Critical</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-557" target="_blank" rel="noopener">CCBC-557</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow raw <code>certpath</code> to be passed without need for percent-encoding (in most cases)  This allows for a common pattern fo passing <code>certpath</code> in the connection string as  a raw, unencoded path.
This allows a user to do <code>couchbases://host/bucket?certpath=/foo/bar/baz</code>.</p>
</li>
<li>
<p>Fix missing installation UV plugin headers and source In 2.4.4 this was accidentally left out, and would only be installed if the plugin itself was built and installed.
This affected building the Node.JS SDK using an existing libcouchbase install.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-558" target="_blank" rel="noopener">CCBC-558</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-4-nov-19-2014"><a class="anchor" href="#2-4-4-nov-19-2014"></a>2.4.4 (Nov. 19 2014)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Detect disconnected pooled sockets This allows the connection pool to detect dead sockets which were closed by a server when they were idle.
Sometimes servers will close connections to open idle sockets to save resources, or because of bugs in their implementations.
This will fix some issues experienced with views where queries would randomly fail with <code>LCB_NETWORK_ERROR</code> or <code>LCB_ESOCKSHUTDOWN</code>, by first checking if the socket is alive before returning it back to the library&#8217;s core.
Note that the <code>libuv</code> plugin does not implement this functionality yet.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Critical</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-546" target="_blank" rel="noopener">CCBC-546</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix <em>pillowfight</em> <code>--min-size</code> bug This fixes a bug where pillowfight would sometimes compare the <code>min-size</code> option to an uninitialized <code>max-size</code> option and round it down to that value; then would set the <code>max-size</code> option.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-542" target="_blank" rel="noopener">CCBC-542</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Don&#8217;t ignore <code>LCB_CNTL_DURABILITY_INTERVAL</code> Fix a bug where this interval would be ignored, if modified by the user; always reverting to 100ms.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-543" target="_blank" rel="noopener">CCBC-543</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix memory leak with HTTP requests using a request body Requests (such as <code>PUT</code>, <code>POST</code>, etc) which contained a request body would cause a memory leak as the library forgot to free them when the request object was destroyed.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-538" target="_blank" rel="noopener">CCBC-538</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix errneous <code>LCB_SUCCESS</code> return when passed duplicate keys to <code>lcb_durability_poll()</code>.
This would cause applications to mistakenly wait for a callback to arrive, when in fact the command had failed.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-535" target="_blank" rel="noopener">CCBC-536</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add option to preserve vbucket ownership heuristics across config updates This allows the learned configuration settings to persist between configuration updates.
The default behavior (up to, and including this change) is to discard any "learned" configuration in favor of the explicitly new config passed to the server.
This new option allows this information to be persisted when a new configuration update is received.
This behavior is considered experimental, and is primarily intended to reduce the time it takes for the client to relearn the current node (which is typically under 1-2 seconds).</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-530" target="_blank" rel="noopener">CCBC-530</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Relocate memcached packets on topology changes for memcached buckets This enhances the behavior of the client when operating with a memcached bucket during a topology change.
Previously the library would not relocate packets to new servers, resulting in errors for items which were now mapped to wrong nodes.
The new behavior remaps the key to the new server using the updated ketama hashing.
Note that as a current restriction, the remapping will be performed based on the key of the item, not any <code>hashkey</code> parameter being employed.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-331" target="_blank" rel="noopener">CCBC-331</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Return error if ignored/conflicting options are found This changes the behavior of the library to throw an error if a specific option field was filled in which did not make sense for a given command, for example, specifying a <code>cas</code> value using a <code>LCB_ADD</code> operation with <code>lcb_store</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-529" target="_blank" rel="noopener">CCBC-529</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix issue when sending out large <em>OBSERVE</em> command.
This would cause a partial command to be sent out if the size of the output packet was greater than 512 bytes.
This has been fixed by dynamically growing the output buffer for <em>OBSERVE</em></p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-528" target="_blank" rel="noopener">CCBC-528</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix spurious timeouts when using <code>lcb_durability_poll</code> This fixes an issue where sometimes the durability poll operation would prematurely time out.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-527" target="_blank" rel="noopener">CCBC-527</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-3-oct-21-2014"><a class="anchor" href="#2-4-3-oct-21-2014"></a>2.4.3 (Oct. 21 2014)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Disable support for SSLv3 This works around the <em>POODLE</em> SSLv3 vulnerability by disabling support for anything below TLSv1.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Critical</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-523" target="_blank" rel="noopener">CCBC-523</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Pillowfight enhancements Several behavior changes were made to pillowfight in this version.
These are:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>-l</code> or <code>-c -1</code> option is in effect by default.
This means that by default <code>pillowfight</code> will run an infinite number of cycles.
The previous behavior was to default to a single cycle, requiring an explicit <code>--loop</code> to ensure the workload ran for a considerable amount of time.</p>
</li>
<li>
<p>When multiple threads are used, the workload is divided among the threads, thus making it that each thread only operates on a subset of the data.</p>
</li>
<li>
<p>A <code>--sequential</code> option has been added to allow the workload to operate in <em>sequence</em> on the total number of items.
This is useful when wishing to load a bucket with many items.</p>
</li>
<li>
<p>A <code>--start-at</code> option has been added to allow the workload to specify an alternate range of keys; effectively allowing resumption of a previous run.
The <code>--start-at</code> flag allows to specify the lower bound number which will be used to generate keys.
Thus a <code>--num-items=20000</code> and a <code>--start-at=10000</code> will generate keys from 10000 through 30000.</p>
</li>
<li>
<p>The <em>population</em> phase has now been merged with the general workload implementation.
This means that all worker threads will participate in the population phase.
The previous behavior limited the populate phase to a single thread.</p>
</li>
<li>
<p>If <code>stdout</code> is detected to be a terminal, a simple "OPS/SEC" meter will periodically write the estimated throughput to the screen.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix memory leak when using large read buffers In the case where large read buffers are used (and the <code>iovec</code> elements becomes sizable, the library may end up incorrectly caching some memory blocks for future use.
This fix makes the blocks be cached at the allocator level, so that they are properly (re) utilized.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issue/browse/CCBC-519" target="_blank" rel="noopener">CCBC-519</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Use forward map (and other heuristics) to get a next node for an item after a not-my-vbucket reply.
Since the server (see bug attached) does not always guarantee that a given config is the most <em>correct</em>, the client must do some guesswork in order to properly map a node when it gets a not-my-vbucket; especially if the config says that the node is the correct one.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/MB-12268" target="_blank" rel="noopener">MB-12268</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-2-sep-23-2014"><a class="anchor" href="#2-4-2-sep-23-2014"></a>2.4.2 (Sep. 23 2014)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Mark the <code>hashkey</code> fields as being <em>volatile</em>.
Usage of this field is not supported in many cluster systems and is thus not supported functionality.
It exists primarily as a legacy from an older API</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-508" target="_blank" rel="noopener">CCBC-508</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add "key stats" mode to <code>lcb_CMDDSTATS</code>.
This adds an additional key stats mode to the <code>lcb_stats3()</code> API which interprets the <code>key</code> field as being a document ID for which information (such as expiry, status) should be retrieved, rather than a system statistics key.
Similar functionality already exists in the Java client library as <code>getKeyStats()</code>.
In addition to this feature, a <code>cbc stats --keystats</code> option is also provided to employ this functionality from the command line.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-318" target="_blank" rel="noopener">CCBC-318</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add more details about replica nodes in the <code>cbc hash</code> command.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-504" target="_blank" rel="noopener">CCBC-504</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add <code>lcb_cntl()</code> setting to retrieve bucket name.
Previously the library did not have a means by which the bucket name could be retrieved.
Using the <code>LCB_CNTL_BUCKETNAME</code> setting, the bucket name will now be returned.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-502" target="_blank" rel="noopener">CCBC-502</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-1"><a class="anchor" href="#2-4-1"></a>2.4.1</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Implement <code>mcflush</code> subcommand for <code>cbc</code>.
This was removed in the cbc rewrite as the previous <code>flush</code> command.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-486" target="_blank" rel="noopener">CCBC-486</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Requests issued to an invalid replica via <code>lcb_get_replica()</code> should fail with the <code>LCB_NO_MATCHING_SERVER_CODE</code>.
Previously this sometimes went through due to an incorrect bounds checking in the <code>lcbvb_vbreplica()</code> function.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-488" target="_blank" rel="noopener">CCBC-488</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fixed a memory leak in <code>lcb_get_replica()</code> when the operation would fail.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-489" target="_blank" rel="noopener">CCBC-489</a> <a href="http://couchbase.com/issues/browse/CCBC-490" target="_blank" rel="noopener">CCBC-490</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix memory leak in <code>lcb_sched_fail()</code> when extended commands are in the pipeline</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-474" target="_blank" rel="noopener">CCBC-474</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Provide <code>lcb_dump()</code> function call to dump state information about a client handle.
The function call itself is currently marked as volatile and the output format is very much likely to change.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-490" target="_blank" rel="noopener">CCBC-491</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix <code>ratio</code> argument in <code>cbc-pillowfight</code>.
This ensures that the <code>ratio</code> argument will truly determine the ratio of gets to sets.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix crash when HTTP request is retried.
This may take place during topology changes</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-497" target="_blank" rel="noopener">CCBC-497</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Allow simple host-port string in connection string, giving it an implicit <code>http://</code> scheme.
This allows easier backwards compatibility with some application</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Minor</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-500" target="_blank" rel="noopener">CCBC-500</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Update some SSL options to better reflect server 3.0 functionality The old <code>capath</code> option has been renamed to <code>certpath</code> to indicate that the path is not to the signing authority, but to the self-signed server certificate generated by the server itself.
Additionally the <code>no_verify</code> option has been hidden.</p>
<div class="ulist">
<ul>
<li>
<p>Priority: Major</p>
</li>
<li>
<p>Issues: <a href="http://couchbase.com/issues/browse/CCBC-501" target="_blank" rel="noopener">CCBC-501</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-0-ga"><a class="anchor" href="#2-4-0-ga"></a>2.4.0 GA</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] Attempt to retry items that are mapped to a non-existent node in a degraded cluster.
Rather than returning <code>LCB_NO_MATCHING_SERVER</code> the behavior should be to wait for the item to succeed and attempt to fetch a new cluster configuration.
In order to control how such 'orphaned' commands are handled, a new value has been added to the <code>lcb_RETRYMODEOPTS</code> called <code>LCB_RETRY_ON_MISSINGNODE</code> which dictates how commands should be rescheduled if the associated vbucket has no master.
The default is to retry the command until it times out, but by setting this value to <code>0</code> (See <code>LCB_CNTL_RETRYMODE</code>) it may only be attempted once, causing 'fail fast' behavior in such a case.</p>
</li>
<li>
<p>[major] Don&#8217;t throttle config requests based on initial file-based config.
This allows the client to quickly recover from a stale config cache without  waiting for the <code>LCB_CNTL_CONFDELAY_THRESH</code> interval to elapse.
Prior to this  fix, a client would appear to "not recover" if bootstrapping from a stale cache.
In reality the client would eventually recover but was waiting for the delay  threshold to elapse.</p>
</li>
<li>
<p>[major] Ignore <code>NOT_MY_VBUCKET</code> config payloads if CCCP provider is disabled.
This allows the client to circumvent any possible bugs in the CCCP response  payload and rely entirely on the HTTP config.
It also allows 'rewriting'  proxies like confsed to function.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-0-beta"><a class="anchor" href="#2-4-0-beta"></a>2.4.0-beta</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] Better error reporting for SSL failures.
This adds new error codes ( <code>LCB_SSL_ERROR</code>, <code>LCB_SSL_CANTVERIFY</code>)  which are returned on initialization and verification failures  respectively.</p>
</li>
<li>
<p>[minor] Communication via legacy memcached servers is possible  by using the <code>memcached://</code> scheme in the connection string.</p>
</li>
<li>
<p>[minor] Environment variables understood by the library are now  documented in their own section.</p>
</li>
<li>
<p>[major] Add <code>lcb_get_node()</code> function to retrieve addresses for  various nodes in the cluster.
This deprecates the <code>lcb_get_host()</code>, <code>lcb_get_port()</code> and <code>lcb_get_server_list()</code> functions as they are  constrained to only return information about the administrative API.
The new function is configurable to return information about various  ports.</p>
</li>
<li>
<p>[major] The <code>dsn</code> field in the <code>lcb_create_st</code> structure has been  renamed to <code>connstr</code>.</p>
</li>
<li>
<p>[major] An HTTP request which has followed redirects will cause the <code>lcb_wait()</code> function to never return.
This bug was introduced in  2.4.0-DP1 and has now been fixed.</p>
</li>
<li>
<p>[minor] <code>lcb_get_server_list()</code> function now returns updated information  from the current cluster configuration.
Previously this would only return  a node from the list specified during initial creation.</p>
</li>
<li>
<p>[minor] Provide additional error classifiers.
Two error classifiers have been added, they are:</p>
<div class="ulist">
<ul>
<li>
<p><code>LCB_ERRTYPE_SRVLOAD</code> which indicates that the server is likely under high load.</p>
</li>
<li>
<p><code>LCB_ERRTYPE_SRVGEN</code> which indicates that the error is a direct reply from the server.
This code can help distinguish between client and server generated return codes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>[major] Provide HTTP keepalive and connection pooling for HTTP requests.
This allows the client to reuse an HTTP connection for multiple requests rather than creating a new connection and closing it for each operation.
The functionality may be controlled via the <code>LCB_CNTL_HTTP_POOLSIZE</code> setting which limits how many open connections (per server) to maintain inside the client.
Setting this value to <code>0</code> will disable pooling and restore old behavior.</p>
</li>
<li>
<p>[major] Properly schedule next invocations for retry queue.
A bug was introduced  in 2.4.0-dp1 which would cause the next tick callback to be invoked in what is  effectively a busy loop.
This would be reflected in higher CPU load and less  throughput during topology changes.</p>
</li>
<li>
<p>[major] Return error if empty key is passed to an operation.
Empty keys will  cause the server to drop the connection.
The error code returned is the newly added <code>LCB_EMPTY_KEY</code></p>
</li>
<li>
<p>[minor] Provide setting to disable refreshing the configuration when an HTTP  API error is encountered (from one of the HTTP callback functions).
This  adds the <code>LCB_CNTL_HTTP_REFRESH_CONFIG_ON_ERROR</code> setting.</p>
</li>
<li>
<p>[major] Fix bug where the CCCP provider may prematurely fail, activating the  HTTP provider</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-4-0-dp1-2014-06-18"><a class="anchor" href="#2-4-0-dp1-2014-06-18"></a>2.4.0-dp1 (2014-06-18)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Changes affecting older APIs</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>[minor] Make <code>run_event_loop</code> and <code>stop_event_loop</code> private.
These functions may no longer be used from within an application to  start/stop the event loop.
<code>lcb_wait()</code> and <code>lcb_wait3()</code> should be  used instead.</p>
</li>
<li>
<p>[major] Deprecate the <code>lcb_set_XXX</code> functions.
<code>lcb_set_timeout</code>  and some other calls have been deprecated in favor of the <code>lcb_cntl()</code>  interface.
These functions will still work but will cause the compiler  to print a deprecation warning.</p>
</li>
<li>
<p>[minor] <code>lcb_socket_t</code> is typedefed to a <code>DWORD</code> on windows.
In  previous versions this was an <code>int</code>.</p>
</li>
<li>
<p>[minor] Connecting to a standalone memcached instance is currently no longer  supported.</p>
</li>
<li>
<p>[major] <code>lcb_set_error_callback()</code> has been deprecated.
Applications should  use the new <code>lcb_set_bootstrap_callback()</code> and/or operation callbacks  to determine success/failure status.</p>
</li>
<li>
<p>[major] <code>lcb_get_last_error()</code> has been deprecated.
Error information is always  returned in the operation callback</p>
</li>
<li>
<p>[major] Disable the sending of <code>GETQ</code> packets.
The format of this command  is cumbersome to deal with and in most uses cases is actually slightly <em>less</em> efficient on the network.
Note that this does not change the API  of the actual <code>lcb_get()</code> call, but simply changes the format of the  packets sent over the wire.</p>
</li>
<li>
<p>[major] The IOPS API has been changed.
This is considered volatile interface  and may subsequently change in the future as well.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>New APIs added in 2.4.0 extending existing functionality</strong></p>
</div>
<div class="paragraph">
<p>These changes extend existing features with enhanced APIs</p>
</div>
<div class="ulist">
<ul>
<li>
<p>[major] Additional APIs for <code>lcb_cntl()</code>.
These consist of helper functions  to make it easier to use simple types or strings rather than pointers, if  possible.
These functions are <code>lcb_cntl_string()</code>, <code>lcb_cntl_setu32()</code> and <code>lcb_cntl_getu32()</code></p>
</li>
<li>
<p>[minor] Provide extended version of <code>lcb_wait()</code>.
A new function called <code>lcb_wait3()</code> has been added which offers additional  options with respect to running the event loop.
Specifically it offers to  bypass the check for pending operations which <code>lcb_wait()</code> executes.
This  is both more performant and allows us to wait for operations which are  not explicitly scheduled.</p>
</li>
<li>
<p>[major] Provide API to request a configuration refresh.
Sometimes it is necessary to force the client to request a new configuration,  for example in certain failover conditions.
A new API called <code>lcb_config_refresh()</code>  has been added, and should be used in conjunction with <code>lcb_wait3()</code>.</p>
</li>
<li>
<p>[major] Provide bootstrapping notification callback  This provides an explicit <code>lcb_set_bootstrap_callback()</code> to definitively  determine whether the client has received its initial configuration (and  thus may now start performing operations) or whether it failed (and thus  must be reinitialized).
This deprecates the common use case of <code>lcb_set_error_callback()</code>.</p>
</li>
<li>
<p>[major] New vBucket interface/API.
This API is used internally and exposed  as <em>volatile</em> inside the public header files.
It provides extended features,  a more concise API, and is compatible with the upcoming Couchbase 3.0 config  format.
Note that file-based configuration caches written by this version of  the library are incompatible with previous versions, however this version may  read caches generated by previous versions.
This is because this version generates  a stripped-down version of the "terse" configuration style.</p>
</li>
<li>
<p>[major] Extended detailed error codes.
These error codes expose more detail about the <code>NETWORK_ERROR</code> and <code>CONNECT_ERROR</code> codes returned by previous versions of the library.
The extended  codes are not returned by default and must be explicitly enabled in order to  retain backwards compatibility with applications which rely on the older  error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>New Features in 2.4.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>[major] Connection Strings (aka "dsn") feature for instance creation.
This adds a new  version of the <code>lcb_create_st</code> structure which is passed a URI-like string  rather than a semicolon-delimited list of hosts.
This string is used to  provide options and the list of hosts that the library should connect to.
For example, <code>couchbase://default/localhost&amp;compression=off</code></p>
</li>
<li>
<p>[major] SSL transport support for Couchbase 3.0 Enterprise.
Couchbase 3.0 enterprise features the ability to encrypt communications  between the client and the server using the SSL protocol.
SSL protocol  support in <em>libcouchbase</em>.</p>
</li>
<li>
<p>[major] Retry queue for failed operations.
The retry queue is used  as a place to place operations which have failed internally and which  should be retried within a certain amount of time.
This also provides  options on which commands should be retried.</p>
</li>
<li>
<p>[minor] Compression/JSON flag (aka Datatype) support  This adds support for a future feature of Couchbase server which will  feature transparent compression.
This feature also allows the server  to signal to the library if a document is JSON or not.
The compression  feature may be disabled at compile-time, and may also be modified at  runtime by setting <code>compression=off</code> in either the connection string  or via <code>lcb_cntl_setstring(instance, "compression", "off")</code></p>
</li>
<li>
<p>[major] Experimental <em>scheduling</em> API.
This API replaces most of the older operation APIs with a scheduling API.
These APIs are called with one command at a time and insert the resultant packet into a pipeline.
The user may "schedule" the commands or "fail" the pipeline if a certain request has failed to be scheduled.
This API also provides a common ABI header for commands so that they may easily be used via type-punning, or wrapped as a class hierarchy in C++.
This API is currently considered volatile but will be the basis of the upcoming libcouchbase 3.0 API.
The header file is <code>&lt;libcouchbase/api3.h&gt;</code></p>
</li>
<li>
<p>[major] Raw memcached packets may be sent to the library and have a callback  invoked when their responses have been received.
This adds an <code>lcb_pktfwd3()</code> API.
This requires the new scheduling API.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Bug Fixes in 2.4.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>[major] <em>select</em> plugin may endlessly loop in some cases  The plugin may loop if there was a long timeout from the  future .</p>
</li>
<li>
<p>[major] Do not break TCP connections on topology changes unless ejected from  cluster.
This ensures that nodes which are still part of the cluster have their  TCP connections remain in tact despite being shifted in their server index values.
Packets which have been sent to the wrong vBucket are silently ignored and  rescheduled to their appropriate destination.
This decreases load significantly  on the client, network, and cluster during topology changes.</p>
</li>
<li>
<p>[major] Use new-style "Terse" URI format when requesting a configuration over HTTP.
This uses the HTTP configuration format over the new <code>/pools/default/bs/default</code>  rather than the older <code>/pools/default/bucketsStreaming/default</code> form.
The former  form is much more efficient on the cluster side.
If the new URI form is not  supported (i.e.
the server responds with an HTTP 404) the older form will be  used instead.
You may modify this behavior by setting the <code>LCB_CNTL_HTCONFIG_URLTYPE</code>  setting via <code>lcb_cntl()</code>.</p>
</li>
<li>
<p>[minor] The <code>cmake/configure</code> script now accepts the <code>LDFLAGS</code>, <code>CPPFLAGS</code>, <code>CFLAGS</code>, <code>CXXFLAGS</code>, <code>CC</code>, and <code>CXX</code> settings both within the environment <em>and</em> the  commandline, so the forms of <code>CC=clang ./cmake/configure</code> and <code>./cmake/configure CC=clang</code> are equivalent.</p>
</li>
<li>
<p>[minor] The <code>pillowfight</code> tool will now print latencies between 1-10ms in resolutions  of 100us.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Metadata and Packaging Changes in 2.4.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>[major] Use Doxygen for API documentation.
This replaces the <em>manpages</em> for API documentation with Doxygen.
Doxygen  is a free and portable documentation system which may be obtained from your  distribution or at <a href="http://doxygen.org" class="bare" target="_blank" rel="noopener">http://doxygen.org</a>.
To generate the documentation  from the source tree, simply run <code>doxygen</code> from the source root directory.
To generate internal documentation, run <code>./docs/gen_internal_apidoc.sh</code>.</p>
</li>
<li>
<p>[major] Add interface attributes to all API calls  This properly documents all API calls with a certain API stability level  such as <em>committed</em> (for stable APIs), <em>uncomitted</em> for APIs which may, but  are not likely to change, and <em>volatile</em> for APIs which are likely to be  changed or removed.</p>
</li>
<li>
<p>[major] Public header files have been reorganized This changes the layout of the header files from previous versions.
This should not affect applications as applications should only ever include the main <code>&lt;libcouchbase/couchbase.h&gt;</code> file.
the following files have been <em>removed</em> from the <code>&lt;libcouchbase/*&gt;</code> header directory:</p>
<div class="listingblock">
<div class="content">
<pre>* `types.h` - Merged into other header files
* `arguments.h` - now a part of `couchbase.h`
* `callbacks.h` - now a part of `couchbase.h`
* `debug.h` - unused and obsolete
* `durability.h` - now a part of `couchbase.h`
* `behavior.h` - Merged into `deprecated.h`
* `sanitycheck.h` - Merged into `deprecated.h`
* `timings.h` - Part of `couchbase.h`
* `compat.h` - Part of `deprecated.h`</pre>
</div>
</div>
<div class="paragraph">
<p>The following files have been <em>added</em> into the <code>&lt;libcouchbase/*&gt;</code> directory.
Unless otherwise noted, these files are included by <code>&lt;libcouchbase/couchbase.h&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>* `api3.h` - Volatile proposed 3.0 API. **Not included by default**
* `cxxwrap.h` - Contains the implementation for the deprecated C++ wrappers
* `deprecated.h` - Contains deprecated APIs
* `iops.h` - Contains the IO integration APIs
* `pktfwd.h` - Contains the packet forwarding API. **Not included by default**
* `vbucket.h` - Contains the vBucket mapping API. **Not included by default**</pre>
</div>
</div>
</li>
<li>
<p>OpenSSL is now a base dependency for the library.
This may be disabled at configure  time via <code>--enable-ssl=no</code>.
See <code>./configure --help</code>.</p>
</li>
<li>
<p>Snappy compression library is bundled and optionally compiled.
This is left out by  default as the configure script will search for a system installed <code>libsnappy</code>.
Snappy provides the compression feature needed for compressing and inflating data  between client and server.
It may be disabled at compile-time via <code>--enable-snappy=no</code></p>
</li>
<li>
<p>[minor] <em>libvbucket</em> has been fully integrated into libcouchbase from the forked <em>libvbucket</em> package and, lives fully as part of the  library.
The public vBucket API may be found in <code>&lt;libcouchbase/vbucket.h&gt;</code>.</p>
</li>
<li>
<p>[minor] As an alternative to the cross-platform <code>lcb_uintNN_t</code> typedefs, a shorter  (and more standards compliant) alternative <code>lcb_UNN</code> typedefs are provided, thus  instead of <code>lcb_uint32_t</code> you may use <code>lcb_U32</code>.
The full listing of cross platform  typdefs may be found inside <code>&lt;libcouchbase/sysdefs.h&gt;</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-3-1-2014-05-08"><a class="anchor" href="#2-3-1-2014-05-08"></a>2.3.1 (2014-05-08)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-404: Segfault in <code>connmgr_invoke_request</code>  Occasionally a segmentation fault would happen when a connection was being  released as a result of a connection failure.
This was because of invalid  list tracking.</p>
</li>
<li>
<p>[major] CCBC-395: Add <code>lcb_cntl()</code> interface for configuration cache  Configuration cache options may be set after instantiation using <code>lcb_cntl()</code>  with the new <code>LCB_CNTL_CONFIGCACHE</code> operation.
The old-style <code>lcb_create_compat</code>  creation path is deprecated.</p>
</li>
<li>
<p>[major] CCBC-394: Get-with-replica occasionally crashes on Windows and UV  during topology changes.
This was due to not allocating a buffer if one did  not exist.</p>
</li>
<li>
<p>[major] CCBC-392: ABI compatibility broken between 2.x and 2.3 for <code>lcb_create_compat</code>.
This has been fixed by symbol aliasing between versions.
Developers are recommended to use the <code>lcb_cntl()</code> API to set the  configuration cache, as specified in CCBC-395</p>
</li>
<li>
<p>[major] CCBC-385: Failed assertion on get-with-replica when connection fails.
If a connection fails with a <code>CMD_GET_REPLICA</code> command still in the queue an  assertion failure will crash the library.
This has been fixed by handling the  opcode in the <code>failout_single_request</code> function.</p>
</li>
<li>
<p>[major] CCBC-384: Unknown Winsock error codes crash application.
This was fixed  by providing proper handlers for Winsock codes which were not explicitly  converted into their POSIX equivalents.</p>
</li>
<li>
<p>[major] CCBC-376: Fix memory leak in configuration parsing.
A leak was  introduced in version 2.3.0 by not freeing the JSON pool structure.
This has  been fixed in 2.3.1</p>
</li>
<li>
<p>[minor] CCBC-370: <code>lcb_get_host</code> and <code>lcb_get_port</code> may return host-port  combinations from different servers.
If multiple servers are listening on  different ports this may result in yielding an invalid endpoint by combining  the output from those two functions.
This has been fixed in 2.3.1 by returning  the host and port from the first host, in lieu of a currently-connected REST  endpoint.</p>
</li>
<li>
<p>[minor] CCBC-368: Initial bootstrapping failure may mask <code>LCB_BUCKET_ENOENT</code>  calls with <code>LCB_ETIMEDOUT</code>.
This has been fixed by not retrying configuration  retrieval if an explicit HTTP 404 code is received.
Note that when using  bootstrap over memcached, a missing bucket may still be manifest as <code>LCB_AUTH_ERROR</code>.</p>
</li>
<li>
<p>[minor] CCBC-367: Ensure <code>lcb_get_host</code> does not return <code>NULL</code> when the  associated <code>lcb_t</code> is of <code>LCB_TYPE_CLUSTER</code>.
This would cause crashes in some  applications which relied on this function to not return <code>NULL</code>.</p>
</li>
<li>
<p>[major] CCBC-389: Fixed Spurious timeouts being delivered in asynchronous  use cases.
In applications which do not use <code>lcb_wait()</code> the library will potentially  time out commands internally triggering an erroneous configuration refresh.
While this issue would not end up failing operations it will cause unnecessary  network traffic for retrieving configurations.
Applications using <code>lcb_wait()</code>  are not affected as that function resets the timeout handler.</p>
</li>
<li>
<p>[major] CCBC-332, CCBC-364: Compare configuration revision information  for memcached cluster bootstrap.
Previously we would refresh the  configuration upon receipt  of any new configuration update from memcached.
This is fixed in 2.3.1 where  the configuration will only be applied if it is deemed to be newer than the  current configuration.
With memcached bootstrap this is only true if the  configuration&#8217;s <code>rev</code> field is higher than the current one.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-3-0-ga-2014-04-07"><a class="anchor" href="#2-3-0-ga-2014-04-07"></a>2.3.0 GA (2014-04-07)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-152: Provide a master-only observe option.
This adds a new  struct version to the <code>lcb_observe_cmd_t</code> which allows to select only the  master node.
One can use this to efficiently check if the key exists (without  retrieving it).
It also allows one to get the CAS of the item without fetching  it.</p>
</li>
<li>
<p>[major] CCBC-281: Fix partial scheduling during multi operations.
Previously  the library would deliver spurious callbacks  if multiple operations were  scheduled with a single command and one of the operations could not be mapped  to a server.
This fixes this behavior and ensures that callbacks are only  invoked for items if the entire API call succeeded.</p>
</li>
<li>
<p>[major] CCBC-150: Multi-packet commands will no longer deliver spurious  callbacks on failure.
Previously these commands would be relocated to the  same server during a configuration change, resulting in multiple callbacks  for the same command.
In this case the client would think all the commands  had been completed, and when the next response arrived it would incorrectly  map it to a different request.</p>
</li>
<li>
<p>[minor] CCBC-327: Fix assumption of <code>vbucket_compare()</code> only returning if  a diff exists.
This function actually returns a non-NULL pointer always  unless it cannot allocate more memory.
This bug was introduced with the <em>DP1</em> release.</p>
</li>
<li>
<p>[minor] CCBC-326: Memcached buckets should use streaming config.
This was  left unchecked in the <em>DP1</em> release and has now been fixed.</p>
</li>
<li>
<p>[major] CCBC-351: Enhance performance for configuration parsing.
In previous  versions receiving multiple configurations at once would cause CPU spikes on  slower systems.
The configuration parser code has been optimized to alleviate  this issue.</p>
</li>
<li>
<p>[minor] CCBC-350: Provide <code>lcb_cntl()</code> API to retrieve the SCM changeset used  by the currently loaded binary.
This is a more effective way to get the  revision as it does not depend on the specific headers the library was  compiled with.</p>
</li>
<li>
<p>[major] CCBC-340: Correctly parse <code>""</code>, <code>"0"</code> and <code>"1"</code> for environment  variables.
In previous versions having the entry set to an empty string  or <code>0</code> would still be treated by the library as a true value for various  environment variables.
This has been fixed so that clear "False" values  such as the empty string or 0 are treated as such.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-3-0-dp1-2014-02-04"><a class="anchor" href="#2-3-0-dp1-2014-02-04"></a>2.3.0-dp1 (2014-02-04)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-234: Implementation of[Cluster Configuration Carrier Publication][cccp-wiki].
This is the new and more efficient way to bootstrap from a cluster using the native memcached protocol and is quicker than the previous HTTP bootstrap mechanism, dramatically improving startup times and reducing load on the server.
This feature is available in server verions 2.5 and greater.
The existing HTTP configuration is still supported and will be employed as a fallback in the event that <code>CCCP</code> is not supported.
In conjunction with this, a new struct version has been added to the <code>lcb_create_st</code> parameters structure for use with <code>lcb_create</code>.
This allows you to get more control over how the client is initialized:</p>
<div class="listingblock">
<div class="content">
<pre>lcb_t instance;
struct lcb_create_st options;
lcb_config_transport_t enabled_transports = {
    LCB_CONFIG_TRANSPORT_CCCP,
    LCB_CONFIG_TRANSPORT_LIST_END
};</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>memset(&amp;options, 0, sizeof(options));
options.version = 2;
options.v.v2.mchosts = "example.com:11210";
options.v.v2.transports = enabled_transports;</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>lcb_error_t rc = lcb_create(&amp;instance, &amp;options);
if (rc != LCB_SUCCESS) {
    fprintf(stderr, "Failed to create instance: %s\n", lcb_strerror(instance, rc));
}</pre>
</div>
</div>
<div class="paragraph">
<p>The above snippet will configure a client to <em>always</em> use the <code>CCCP</code> protocol and never attempt to fall back on HTTP  The CCCP implementation required a significant rewrite in how sockets were created and re-used.
Particularly, a connection pooling feature was implemented.
Additionally, the <code>cbc</code> command now has an additional <code>-C</code> option which accepts the preferred configuration mechanism to use.</p>
</div>
</li>
<li>
<p>[major] CCBC-305: Implement logging hooks.
This improvements adds various levels of diagnostic logging with the library itself.
It may be utilized via the environment (by setting the <code>LCB_LOGLEVEL</code> environment variable to a positive integer&#8201;&#8212;&#8201;the higher the number the more verbose the logging).
Integrators may also use the logging API specified in <code>&lt;libcouchbase/types.h&gt;</code> to proxy the library&#8217;s logging messages into your own application.
Current events logged include connection initialization, destruction, connection pool management, configuration changes, and timeouts.
By default the library is silent.</p>
</li>
<li>
<p>[major] CCBC-316: Allow per-node bootstrap/config timeouts.
This change allows more finer grained control over how long to wait per-node  to receive updated configuration info.
This setting helps adjust the initial  and subsequent bootstrap processes to help ensure each node gets a slice of  time.</p>
</li>
<li>
<p>[major] CCBC-297: Handle spurious EWOULDBLOCK on UV/Win32  This issue caused odd errors on Windows when large amounts of data  would be received on the socket.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-2-0-2013-10-05"><a class="anchor" href="#2-2-0-2013-10-05"></a>2.2.0 (2013-10-05)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-169 Handle 302 redirects in HTTP (views, administrative  requests).
By default the library will follow up to three redirects.
Once the limit reached the request will be terminated with code <code>LCB_TOO_MANY_REDIRECTS</code>.
Limit is configurable through <code>LCB_CNTL_MAX_REDIRECTS</code>.
If set to -1, it will disable redirect  limit.</p>
<div class="listingblock">
<div class="content">
<pre>  int new_value = 5;
  lcb_cntl(instance, LCB_CNTL_SET, LCB_CNTL_MAX_REDIRECTS, &amp;new_value);</pre>
</div>
</div>
</li>
<li>
<p>[major] CCBC-243 Replace isasl with cbsasl, the latter has implemented both PLAIN and CRAM-MD5 authentication mechanisms.</p>
<div class="ulist">
<ul>
<li>
<p><code>LCB_CNTL_MEMDNODE_INFO</code> command updated to include effective SASL mechanism:</p>
<div class="listingblock">
<div class="content">
<pre>    cb_cntl_server_t node;
    node.version = 1;
    node.v.v1.index = 0; /* first node */
    lcb_cntl(instance, LCB_CNTL_GET, LCB_CNTL_MEMDNODE_INFO, &amp;node);
    if (node.v.v1.sasl_mech) {
        printf("authenticated via SASL '%s'\n",
               node.v.v1.sasl_mech);
    }</pre>
</div>
</div>
</li>
<li>
<p>It is also possible to force specific authentication mechanism for the connection handle using <code>LCB_CNTL_FORCE_SASL_MECH</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>    lcb_cntl(instance, LCB_CNTL_SET, LCB_CNTL_FORCE_SASL_MECH, "PLAIN");</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>[major] CCBC-286 libuv plugin: use same CRT for free/malloc</p>
</li>
<li>
<p>[major] CCBC-288 Fail <code>NOT_MY_VBUCKET</code> responses on timeout</p>
</li>
<li>
<p>[major] CCBC-275 Do a full purge when negotiation times out.
In this  case we must purge the server from all commands and not simply pop  individual items.</p>
</li>
<li>
<p>[major] CCBC-275 Reset the server&#8217;s buffers upon reconnection.
This  fixes a crash experienced when requesting a new read with the  previous buffer still in tact.
This was exposed by calling <code>lcb_failout_server</code> on a timeout error while maintaining the same  server struct.</p>
</li>
<li>
<p>[major] CCBC-282 Make server buffers reentrant-safe.
When purging  implicit commands, we invoke callbacks which may in turn cause other  LCB entry points to be invoked which can shift the contents and/or  positions of the ringbuffers we&#8217;re reading from.</p>
</li>
<li>
<p>[major] CCBC-204, CCBC-205 Stricter/More inspectable behavior for  config cache.
This provides a test and an additional <code>lcb_cntl</code>  operation to check the status of the configuration cache.
Also it  switches off config cache with memcached buckets.</p>
<div class="listingblock">
<div class="content">
<pre>  int is_loaded;
  lcb_cntl(instance, LCB_CNTL_GET, LCB_CNTL_CONFIG_CACHE_LOADED, &amp;is_loaded);
  if (is_loaded) {
      printf("Configuration cache saved us a trip to the config server\n");
  } else {
      printf("We had to contact the configuration server for some reason\n");
  }</pre>
</div>
</div>
</li>
<li>
<p>[major] CCBC-278 Use common config retry mechanism for bad  configcache.
This uses the same error handling mechanism as when a  bad configuration has been received from the network.
New <code>LCB_CONFIG_CACHE_INVALID</code> error code to notify the user of such a  situation</p>
</li>
<li>
<p>[major] CCBC-274 Handle getl/unl when purging the server (thanks  Robert Groenenberg)</p>
</li>
<li>
<p>[major] Don&#8217;t failout all commands on a timeout.
Only fail those  commands which are old enough to have timed out already.</p>
</li>
<li>
<p>[major] CCBC-269 Don&#8217;t record and use TTP/TTR from observe.
Just  poll at a fixed interval, as the responses from the server side can  be unreliable.</p>
</li>
<li>
<p>[minor] Allow hooks for mapping server codes to errors.
This also  helps handle sane behavior if a new error code is introduced, or  allow user-defined logging when a specific error code is received.</p>
<div class="listingblock">
<div class="content">
<pre>  lcb_errmap_callback default_callback;</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>  lcb_error_t user_map_error(lcb_t instance, lcb_uint16_t in)
  {
    if (in == PROTOCOL_BINARY_RESPONSE_ETMPFAIL) {
      fprintf(stderr, "temporary failure on server\n");
    }
    return default_callback(instance, in);
  }</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>  ...</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>  default_callback = lcb_set_errmap_callback(conn, user_map_error);</pre>
</div>
</div>
</li>
<li>
<p>[minor] Add an example of a connection pool.
See <code>example/instancepool</code> directory</p>
</li>
<li>
<p>[minor] CCBC-279 Force <code>lcb_wait</code> return result of wait operation  instead of <code>lcb_get_last_error</code>.
It returns <code>last_error</code> if and only  if the handle is not yet configured</p>
</li>
<li>
<p>[minor] CCBC-284 <code>cbc-pillowfight</code>: compute item size correctly  during set If <code>minSize</code> and <code>maxSize</code> are set to the same value it  can sometimes crash since it may try to read out of memory bounds  from the allocated data buffer.</p>
</li>
<li>
<p>[minor] CCBC-283 Apply key prefix CLI option in cbc-pillowfight</p>
</li>
<li>
<p>[minor] Add <code>--enable-maintainer-mode</code>.
Maintainer mode enables <code>--enable-werror --enable-warnings --enable-debug</code>, forces all  plugins to be installed and forces all tests, tools, and examples to  be built</p>
</li>
<li>
<p>[minor] CCBC-255 Expose <code>LCB_MAX_ERROR</code> to allow user-defined codes</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-1-3-2013-09-10"><a class="anchor" href="#2-1-3-2013-09-10"></a>2.1.3 (2013-09-10)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[minor] Updated gtest to version 1.7.0.
Fixes issue with building  test suite with new XCode 5.0 version being released later this  month.</p>
</li>
<li>
<p>[major] CCBC-265 Do not try to parse config for <code>LCB_TYPE_CLUSTER</code>  handles.
It fixes timouts for management operations (like 'cbc  bucket-create', 'cbc bucket-flush', 'cbc bucket-delete' and 'cbc  admin')</p>
</li>
<li>
<p>[major] CCBC-263 Skip unfinished SASL commands on rebalance.
During  rebalance, it is possible that the newly added server doesn&#8217;t have  chance to finish SASL auth before the cluster will push config  update, in this case packet relocator messing cookies.
Also the  patch makes sure that SASL command/cookie isn&#8217;t mixing with other  commands</p>
</li>
<li>
<p>[major] Use cluster type connection for cbc-bucket-flush.
Although  flush command is accessible for bucket type connections,  cbc-bucket-flush doesn&#8217;t use provided bucket name to connect to,  therefore it will fail if the bucket name isn&#8217;t "default".</p>
</li>
<li>
<p>[major] Allow to make connect order deterministic.
It allows the  user to toggle between deterministic and random connect order for  the supplied nodes list.
By default it will randomize the list.</p>
</li>
<li>
<p>[major] Do not allow to use Administrator account for <code>LCB_TYPE_BUCKET</code></p>
</li>
<li>
<p>[major] CCBC-258 Fig segmentation faults during tests load of  node.js.
Sets <code>inside_handler</code> on <code>socket_connected</code>.
Previously we  were always using SASL auth, and as such, we wouldn&#8217;t flush packets  from the <code>cmd_log</code> using <code>server_send_packets</code> (which calls <code>apply_want</code>).
<code>apply_want</code> shouldn&#8217;t be called more than once per  event loop entry&#8201;&#8212;&#8201;so this sets and unsets the <code>inside_handler</code>  flag.</p>
</li>
<li>
<p>[major] Added support of libuv 0.8</p>
</li>
<li>
<p>[major] Close config connection before trying next node.
It will fix  asserts in case of the config node becomes unresponsive, and the  threshold controlled by <code>LCB_CNTL_CONFERRTHRESH</code> and <code>lcb_cntl(3)</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-1-2-2013-08-27"><a class="anchor" href="#2-1-2-2013-08-27"></a>2.1.2 (2013-08-27)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-253, CCBC-254 Use bucket name in SASL if username  omitted.
Without this fix, you can may encounter a segmentation  faults for buckets, which are not protected by a password.</p>
</li>
<li>
<p>[major] Preserve IO cookie in <code>options_from_info</code> when using v0  plugins with user-provided IO loop instance.
This issue was  introduced in 2.1.0.</p>
</li>
<li>
<p>[minor] Display the effective IO backend in 'cbc-version'.
This is  helpful to quickly detect what is the effective IO plugin on a given  system.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-1-1-2013-08-22"><a class="anchor" href="#2-1-1-2013-08-22"></a>2.1.1 (2013-08-22)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[minor] Use provided credentials for authenticating to the data  nodes.
With this fix, it is no longer possible to use Administrator  credentials with a bucket.
If your configuration does so, you must  change the credentials you use before applying this update.
No  documentation guides use of Administrator credentials, so this  change is not expected to affect few, if any deployments.</p>
</li>
<li>
<p>[major] CCBC-239 Do not use socket after failout.
Fixes segmentation  faults during rebalance.</p>
</li>
<li>
<p>[minor] CCBC-245 Distribute debug information with release binaries  on Windows</p>
</li>
<li>
<p>[minor] CCBC-248 Do not disable config.h on UNIX-like platforms.
It  fixes build issue, when application is trying to include plugins  from the tarball.</p>
</li>
<li>
<p>[major] CCBC-192 Skip misconfigured nodes in the list.
New  lcb_cntl(3couchbase) added to control whether the library will skip  nodes in initial node list, which listen on configuration port (8091  usually) but doesn&#8217;t meet required parameters (invalid  authentication or missing bucket).
By default report this issue and  stop trying nodes from the list, like all previous release.
Read  more at man page lcb_cntl(3couchbase) in section  LCB_CNTL_SKIP_CONFIGURATION_ERRORS_ON_CONNECT</p>
</li>
<li>
<p>[major] CCBC-246 Fallback to 'select' IO plugin if default plugin</p>
<div class="paragraph">
<p>cannot be loaded.
On UNIX-like systems, default IO backend is 'libevent', which uses third-party library might be not available at the run-time.
Read in lcb_cntl(3couchbase) man page in section LCB_CNTL_IOPS_DEFAULT_TYPES about how to determine effective IO plugin, when your code chose to use LCB_IO_OPS_DEFAULT during connection instantiation.
The fallback mode doesn&#8217;t affect application which specify IO backend explicitly.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-1-0-2013-08-17"><a class="anchor" href="#2-1-0-2013-08-17"></a>2.1.0 (2013-08-17)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] New backend <code>select</code>.
This backend is based on the select(2)  system call and its Windows version.
It could be considered the most  portable solution and is available with the libcouchbase core.</p>
</li>
<li>
<p>[major] CCBC-236 New backend <code>libuv</code>.
This backend previously was  part of the <code>couchnode</code> project and is now available as a plugin.
Because libuv doesn&#8217;t ship binary packages there is no binary  package <code>libcouchbase2-libuv</code>.
You can build plugin from the source  distribution, or through the <code>libcouchbase-dev</code> or <code>libcouchbase-devel</code> package on UNIX like systems.</p>
</li>
<li>
<p>[major] New backend <code>iocp</code>.
This is a Windows specific backend,  which uses "I/O Completion Ports".
As a part of the change, a new  version of plugin API was introduced which is more optimized to this  model of asynchronous IO.</p>
</li>
<li>
<p>[major] CCBC-229 Fixed bug when REPLICA_FIRST fails if first try  does not return key</p>
</li>
<li>
<p>[major] CCBC-228 Fixed bug when REPLICA_SELECT didn&#8217;t invoke  callbacks for negative error codes</p>
</li>
<li>
<p>[major] CCBC-145 API for durability operations.
This new API is  based on <code>lcb_observe(3)</code> and allows you to monitor keys more  easily.
See the man pages <code>lcb_durability_poll(3)</code> and <code>lcb_set_durability_callback(3)</code> for more info.</p>
</li>
<li>
<p>[major] New configuration interface lcb_cntl(3) along with new tunable options of the library and connection instances.
In this release the following settings are available.
See the man page for more information and examples.:</p>
<div class="ulist">
<ul>
<li>
<p>LCB_CNTL_OP_TIMEOUT operation timeout (default 2.5 seconds)</p>
</li>
<li>
<p>LCB_CNTL_CONFIGURATION_TIMEOUT time to fetch cluster configuration.
This is similar to a connection timeout (default 5 seconds)</p>
</li>
<li>
<p>LCB_CNTL_VIEW_TIMEOUT timeout for couchbase views (default 75 seconds)</p>
</li>
<li>
<p>LCB_CNTL_HTTP_TIMEOUT timeout for other HTTP operations like RESTful flush, bucket creating etc.
(default 75 seconds)</p>
</li>
<li>
<p>LCB_CNTL_RBUFSIZE size of the internal read buffer (default 32768 bytes)</p>
</li>
<li>
<p>LCB_CNTL_WBUFSIZE size of the internal write buffer (default 32768 bytes)</p>
</li>
<li>
<p>LCB_CNTL_HANDLETYPE type of the <code>lcb\_t</code> handler (readonly)</p>
</li>
<li>
<p>LCB_CNTL_VBCONFIG returns pointer to VBUCKET_CONFIG_HANDLE (readonly)</p>
</li>
<li>
<p>LCB_CNTL_IOPS get the implementation of IO (lcb_io_opt_t)</p>
</li>
<li>
<p>LCB_CNTL_VBMAP get vBucket ID for a given key</p>
</li>
<li>
<p>LCB_CNTL_MEMDNODE_INFO get memcached node info</p>
</li>
<li>
<p>LCB_CNTL_CONFIGNODE_INFO get config node info</p>
</li>
<li>
<p>LCB_CNTL_SYNCMODE control synchronous behaviour (default LCB_ASYNCHRONOUS)</p>
</li>
<li>
<p>LCB_CNTL_IP6POLICY specify IPv4/IPv6 policy (default LCB_IPV6_DISABLED)</p>
</li>
<li>
<p>LCB_CNTL_CONFERRTHRESH control configuration error threshold (default 100)</p>
</li>
<li>
<p>LCB_CNTL_DURABILITY_TIMEOUT durability timeout (default 5 seconds)</p>
</li>
<li>
<p>LCB_CNTL_DURABILITY_INTERVAL durability polling interval (default 100 milliseconds)</p>
</li>
<li>
<p>LCB_CNTL_IOPS_DEFAULT_TYPES get the default IO types</p>
</li>
<li>
<p>LCB_CNTL_IOPS_DLOPEN_DEBUG control verbose printing of dynamic loading of IO plugins.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-7-2013-07-10"><a class="anchor" href="#2-0-7-2013-07-10"></a>2.0.7 (2013-07-10)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-183 Improve <code>lcb_get_replica()</code>.
Now it is possible to choose between three strategies:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>LCB_REPLICA_FIRST</code>: Previously accessible and now the default, the caller will get a reply from the first replica to successfully reply within the timeout for the operation or will receive an error.</p>
</li>
<li>
<p><code>LCB_REPLICA_ALL</code>: Ask all replicas to send documents/items back.</p>
</li>
<li>
<p><code>LCB_REPLICA_SELECT</code>: Select one replica by the index in the configuration starting from zero.
This approach can more quickly receive all possible replies for a given topology, but it can also generate false negatives.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that applications should not assume the order of the replicas indicates more recent data is at a lower index number.
It is up to the application to determine which version of a document/item it may wish to use in the case of retrieving data from a replica.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-6-2013-05-07"><a class="anchor" href="#2-0-6-2013-05-07"></a>2.0.6 (2013-05-07)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-188 Fix segfault when rebalancing  When a (!connected) server is reconnected, the tasks in its  "pending" buffer will be moved into "output" buffer.
If its  connection is broken again immediately, <code>relocate_packets()</code> will go  to wrong path.</p>
</li>
<li>
<p>[major] CCBC-202 Don&#8217;t try to switch to backup nodes when timeout is  reached</p>
</li>
<li>
<p>[major] CCBC-188 Check if SASL struct is valid before disposing</p>
</li>
<li>
<p>[major] Fix compile error with sun studio  "src/event.c", line 172: error: statement not reached ( <code>E_STATEMENT_NOT_REACHED</code>)</p>
</li>
<li>
<p>[major] Don&#8217;t invoke HTTP callbacks after cancellation, because  user code might assume a previously-freed resource is still valid</p>
</li>
<li>
<p>[minor] CCBC-179 Added an example to properly use the bucket  credentials for authentication instead of administrator credentials</p>
</li>
<li>
<p>[minor] example/yajl/couchview.c: pass cookie to the command  Fixes coredump when executing ./examples/yajl/couchview</p>
</li>
<li>
<p>[minor] CCBC-201 Add Host header in http request  http://cbugg.hq.couchbase.com/bug/bug-555 points out that Host is a  required field in HTTP 1.1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-5-2013-04-05"><a class="anchor" href="#2-0-5-2013-04-05"></a>2.0.5 (2013-04-05)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[minor] Try to search the --libdir for modules if dlopen  fails to find the module in the default library path</p>
</li>
<li>
<p>[minor] CCBC-190 New compat mode (experimental) for configuration  caching.
See man <code>lcb_create_compat()</code></p>
</li>
<li>
<p>[minor] Manpage fixes</p>
</li>
<li>
<p>[minor] Fix build on FreeBSD (http://review.couchbase.org/25289)</p>
</li>
<li>
<p>[minor] Fix reconnecting issues on windows (http://review.couchbase.org/25170 and</p>
<div class="paragraph">
<p>http://review.couchbase.org/25155)</p>
</div>
</li>
<li>
<p>[minor] pillowfight example updated to optionally use threads</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-4-2013-03-06"><a class="anchor" href="#2-0-4-2013-03-06"></a>2.0.4 (2013-03-06)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[minor] CCBC-185 The bootstrap URI is not parsed correctly</p>
</li>
<li>
<p>[minor] CCBC-175 Work properly on systems where EWOULDBLOCK != EAGAIN</p>
</li>
<li>
<p>[critical] CCBC-180 Segmentation fault when the hostname resolved  into several addresses and first of them reject couchbase  connections.</p>
</li>
<li>
<p>[major] CCBC-182 The library stops iterating backup nodes list if  the next one isn&#8217;t accessible.</p>
</li>
<li>
<p>[major] CCBC-147 Fixed illegal memory access in win32 plugin</p>
</li>
<li>
<p>[minor] CCBC-178 Build error on solaris/sparc: -Werror=cast-align</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-3-2013-02-06"><a class="anchor" href="#2-0-3-2013-02-06"></a>2.0.3 (2013-02-06)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[minor] bypass SASL LIST MECH</p>
</li>
<li>
<p>[minor] Shrink internal lookup tables (and reduce the size of <code>lcb_t</code>)</p>
</li>
<li>
<p>[minor] Add a new library: <code>libcouchbase_debug.so</code> (see  include/libcouchbase/debug.h) which is a new library that contains  new debug functionality.</p>
</li>
<li>
<p>[minor] Added manual pages for the library</p>
</li>
<li>
<p>[major] CCBC-153 Reset internal state on <code>lcb_connect()</code>.
Allow caller  to use <code>lcb_connect()</code> multiple times to implement reconnecting using  the same <code>lcb_t</code> instance.
Also it sets up the initial-connection  timer for users who don&#8217;t use <code>lcb_wait()</code> and drive IO loop manually.</p>
</li>
<li>
<p>[major] CCBC-171 Invalid read in libevent plugin, when the plugin  compiled in 1.x mode</p>
</li>
<li>
<p>[critical] CCBC-155 Observe malfunctions in the case of multiple  keys and server failure</p>
</li>
<li>
<p>[major] CCBC-156 The ep-engine renders meaningful body for observe  responses only if status code is 0 ( <code>PROTOCOL_BINARY_RESPONSE_SUCCESS</code>).
We shouldn&#8217;t interpret response body in other cases, just decode &amp;  failout request instead.
Also we shouldn&#8217;t retry observe commands on <code>PROTOCOL_BINARY_RESPONSE_NOT_MY_VBUCKET</code>, because it can cause the  client to loop infinitely</p>
</li>
<li>
<p>[major] CCBC-145 KV Durability operation API.
Async APIs added to  allow the checking of the durability (replication and persistence)  status of a key, and to notify the user when a specific criteria has  been satisfied.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-2-2013-01-04"><a class="anchor" href="#2-0-2-2013-01-04"></a>2.0.2 (2013-01-04)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[major] CCBC-150 commands sent to multiple servers fail to detect  the respose if mixed with other commands.</p>
</li>
<li>
<p>[minor] CCBC-143 'cbc version' reports that uses 2.0.0, but really  installed with 2.0.1.
Minor but confusing issue.</p>
</li>
<li>
<p>[major] CCBC-151 Cancellation of the HTTP request might lead to  memory leaks or to segfaults (2e3875c2).</p>
</li>
<li>
<p>[minor] Document <code>LCB_SERVER_BUG</code> and <code>LCB_PLUGIN_VERSION_MISMATCH</code>.
Enhance the the <code>lcb_strerror()</code> test to detect undocumented error  codes.</p>
</li>
<li>
<p>[critical] CCBC-153 Under high load the library could generate <code>LCB_ETIMEDOUT</code> errors without reason owing to internal limitations.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-1-2012-12-11"><a class="anchor" href="#2-0-1-2012-12-11"></a>2.0.1 (2012-12-11)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>50 files changed, 1009 insertions(+), 274 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>libev-plugin: delay all timers while the loop isn&#8217;t active.
It will fix <code>LCB_ETIMEOUT</code> in the following scenario:</p>
<div class="ulist">
<ul>
<li>
<p>connect the instance</p>
</li>
<li>
<p>sleep for time greater than default timeout (e.g.
3 seconds)</p>
</li>
<li>
<p>schedule and execute a command (it will be timed out immediately)</p>
</li>
</ul>
</div>
</li>
<li>
<p>libev-plugin: reset IO event on delete.
We need to reset it,  because it might be re-used later</p>
</li>
<li>
<p>CCBC-136: do not abort when purging SASL commands</p>
</li>
<li>
<p>Make library C89 friendly again</p>
</li>
<li>
<p>CCBC-132, CCBC-133: Ensure HTTP works even when the network may be  unreliable.
This changeset encompasses several issues which had been  found with HTTP requests during network errors and configuration  changes.
Specifically some duplicate code paths were removed, and  the process for delivering an HTTP response back to the user is more  streamlined.</p>
</li>
<li>
<p>CCBC-130: Fix a memory leak on the use of http headers</p>
</li>
<li>
<p>CCBC-131: Compensate for cluster nodes lacking couchApiBase</p>
</li>
<li>
<p>Fix possible SEGFAULT.
Not-periodic timers are destroyed after  calling user&#8217;s callback, after that library performed read from  freed pointer.</p>
</li>
<li>
<p>SystemTap and DTrace integration</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-0-2012-11-27"><a class="anchor" href="#2-0-0-2012-11-27"></a>2.0.0 (2012-11-27)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>12 files changed, 50 insertions(+), 12 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install unlock callback in synchronous mode</p>
</li>
<li>
<p>Add the CAS to the delete callback</p>
</li>
<li>
<p>Minor update of the packaging layout:</p>
<div class="ulist">
<ul>
<li>
<p>libcouchbase-all package comes without version</p>
</li>
<li>
<p>extract debug symbols from libcouchbase-{bin,core} to libcouchbase-dbg package</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-0beta3-2012-11-21"><a class="anchor" href="#2-0-0beta3-2012-11-21"></a>2.0.0beta3 (2012-11-21)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>64 files changed, 3641 insertions(+), 735 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-104 Fix illegal memory access.
Reconnect config listener if the  config connection was gone without proper shutdown.</p>
</li>
<li>
<p>Check for EWOULDBLOCK/EINTR on failed send</p>
</li>
<li>
<p>Allow to use gethrtime() from C++</p>
</li>
<li>
<p>Fix using freed memory (was introduced in 4397181)</p>
</li>
<li>
<p>Use dynamic versioning for plugins</p>
</li>
<li>
<p>Remove libtool version from the plugins</p>
</li>
<li>
<p>Allow to use 'cbc-hash' with files</p>
</li>
<li>
<p>CCBC-120 Purge stale OBSERVE packets</p>
</li>
<li>
<p>CCBC-120 Reformat and refactor <code>lcb_server_purge_implicit_responses</code>:</p>
<div class="ulist">
<ul>
<li>
<p>move packet allocation out of GET handler</p>
</li>
<li>
<p>dropping NOOP command shouldn&#8217;t return error code</p>
</li>
</ul>
</div>
</li>
<li>
<p>CCBC-122 Try to switch another server from backup list on timeout</p>
</li>
<li>
<p>CCBC-119: Allow the user to specify a different hash key.
All of the  data operations contains a hashkey and nhashkey field.
This allows  you to "group" items together in your cluster.
A typical use case  for this is if you&#8217;re storing lets say data for a single user in  multiple objects.
If you want to ensure that either all or none of  the objects are available if a server goes down, it could be a good  idea to locate them on the same server.
Do bear in mind that if you  do try to decide where objects is located, you may end up with an  uneven distribution of the number of items on each node.
This will  again result in some nodes being more busy than others etc.
This is  why some clients doesn&#8217;t allow you to do this, so bear in mind that  by doing so you might not be able to get your objects from other  clients.</p>
</li>
<li>
<p>Create man pages for cbc and cbcrc</p>
</li>
<li>
<p>CCBC-118 <code>lcb_error_t</code> member in the http callbacks shouldn&#8217;t reflect  the HTTP response code.
So the error code will be always <code>LCB_SUCCESS</code>  if the library managed to receive the data successfully.</p>
</li>
<li>
<p>Timer in libev uses double for interval.
Ref: <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_timer_code_relative_and_opti" class="bare" target="_blank" rel="noopener">http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_timer_code_relative_and_opti</a></p>
</li>
<li>
<p>CCBC-115 Return zero from <code>do_read_data()</code> if <code>operations_per_call</code>  reached.
The `operations <em>per</em>call' limit was introduced to prevent  from freezing event loop.
But in the function variable rv could  store two different results and in case of reaching this limit it is  returning number of the processed records, which is wrong.
The  function should return either zero (success) or non-zero (failure).</p>
</li>
<li>
<p>Do not allow admin operations without authentication</p>
</li>
<li>
<p>Fix cbc-bucket-create.
`sasl-password' is misspelled, and it fails  to parse the command line option.</p>
</li>
<li>
<p>CCBC-114 Lookup the plugin symbol also in the current executable  image.</p>
</li>
<li>
<p>CCBC-113 Remove unauthorized asserion (d344037).
The <code>lcb_server_send_packets()</code> function later check if the server object  connected and establish connection if not (with raising possible  errors)</p>
</li>
<li>
<p>Try all known plugins for <code>LCB_IO_OPS_DEFAULT</code> in run time</p>
</li>
<li>
<p>Don&#8217;t use the <code>time_t</code> for win32.
When compiling from php it turns out  that it gets another size of the <code>time_t</code> type, causing the struct  offsets to differ.</p>
</li>
<li>
<p>Add <code>lcb_verify_compiler_setup()</code>.
This function allows the "user" of  the library to verify that the compiler use a compatible struct  packing scheme.</p>
</li>
<li>
<p>CCBC-87: Add documentation about the error codes</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-0beta2-2012-10-12"><a class="anchor" href="#2-0-0beta2-2012-10-12"></a>2.0.0beta2 (2012-10-12)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>81 files changed, 2822 insertions(+), 1353 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Search ev.h also in ${includedir}/libev</p>
</li>
<li>
<p>Fix SEGFAULT if IO struct is allocated not by the <code>lcb_create()</code></p>
</li>
<li>
<p>Allow libcouchbase to connect to an instance without specifying bucket.
It is useful  when the bucket not needed, e.g.
when performing administration  tasks.</p>
</li>
<li>
<p>Fix memory leak after an unsuccessful connection</p>
</li>
<li>
<p>Fix invalid memory access in cbc tool.
Affected command is  cbc-bucket-create</p>
</li>
<li>
<p><code>lcb_create</code>: replace <code>assert()</code> with error code</p>
</li>
<li>
<p>CCBC-105 breakout event loop in default <code>error_callback</code>.
This provides  better default behaviour for users who haven&#8217;t defined global error  callback.</p>
</li>
<li>
<p>Allow users to build the library without dependencies.
For example,  without plugins at all.
This may be useful if the plugin is  implemented by or built into the host application.</p>
</li>
<li>
<p>Allow users to install both libraries (2.x and 1.x) on the same system.</p>
</li>
<li>
<p>Make the content type optional for <code>lcb_make_http_request()</code></p>
</li>
<li>
<p>Fix password memory leak in http.c (7e71493)</p>
</li>
<li>
<p>Add support for raw http requests.
libcouchase already contains all  the bits to execute a raw http request, except for the possibility  to specify a host:port, username and password.</p>
</li>
<li>
<p>Cleanup HTTP callbacks.
Use the same callbacks both for Management  and View commands, and rename them to <code>lcb_http_complete_callback</code> and <code>lcb_http_data_callback</code>.</p>
</li>
<li>
<p>Allow users to use environment variables to pick the event plugin</p>
</li>
<li>
<p>Add a new interface version for creating IO objects via plugins</p>
</li>
<li>
<p>Implement a new libev plugin.
It is compatible with both libev3 and  libev4.</p>
</li>
<li>
<p>CCBC-103: Fix linked event/timer lists for win32</p>
</li>
<li>
<p>Allow to disable CXX targets</p>
</li>
<li>
<p><code>lcb_connect()</code> should honor the syncmode setting.
Automatically call <code>lcb_wait()</code> when in synchronous mode</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-0beta-2012-09-13"><a class="anchor" href="#2-0-0beta-2012-09-13"></a>2.0.0beta (2012-09-13)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>123 files changed, 13753 insertions(+), 8264 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Refactor the API.
This is a full redesign of the current  libcouchbase API that&#8217;ll allow us to extend parts of the API without  breaking binary compatibility.
Also it renames all functions to have <code>lcb_</code> prefix instead of <code>libcouchbase_</code> and <code>LCB</code>/ <code>LIBCOUCHBASE</code> in macros.</p>
</li>
<li>
<p>Added --enable-fat-binary.
Helps to solve issues when linking with  fat binaries on MacOS.</p>
</li>
<li>
<p>Implement getter for number of nodes in the cluster: <code>lcb_get_num_nodes()</code></p>
</li>
<li>
<p>Implement RESTful flush in the cbc toolset</p>
</li>
<li>
<p>Bundle Windows packages as zip archives</p>
</li>
<li>
<p>CCBC-98 Differentiate between TMPFAILs.
This allows a developer  to know if the temporary condition where the request cannot be  handled is due to a constraint on the client or the server.</p>
</li>
<li>
<p>Don&#8217;t try to put the current node last in the backup list.
This may  cause "duplicates" in the list if the REST server returns another  name for the server than you used.
Ex: you specify "localhost" and  the REST response contains 127.0.0.1</p>
</li>
<li>
<p>Fix locking keys in multi-get mode</p>
</li>
<li>
<p>Fix bug where HTTP method is not set</p>
</li>
<li>
<p>CCBC-96 Correct buffer length for POST/PUT headers</p>
</li>
<li>
<p>Add <code>lcb_get_server_list</code></p>
</li>
<li>
<p>Merge <code>lcb_get_locked</code> into <code>lcb_get</code> function</p>
</li>
<li>
<p>Fix Windows build</p>
</li>
<li>
<p>Include sys/uio.h.
Needed by OpenBSD</p>
</li>
<li>
<p>Fix mingw build (c394a1c)</p>
</li>
<li>
<p>CCBC-80: Default to IPv4 only</p>
</li>
<li>
<p>Sync <code>memcached/protocol_binary.h</code>.
Pull extra <code>protocol_binary_datatypes</code> declarations.</p>
</li>
<li>
<p>Deliver HTTP headers via callbacks</p>
</li>
<li>
<p>Unify HTTP interface.
This means massive rename of the symbols</p>
</li>
<li>
<p>CCBC-92 release ringbuffer in <code>lcb_purge_single_server</code></p>
</li>
<li>
<p>CCBC-91 Fix switching to backup node in case of server outage</p>
</li>
<li>
<p>CCBC-91 Reset timer for commands with <code>NOT_MY_VBUCKET</code> response</p>
</li>
<li>
<p>Fix alignment for sparc platforms</p>
</li>
<li>
<p>Fix win32 build (Add strings.h)</p>
</li>
<li>
<p>Fix build with libyajl available</p>
</li>
<li>
<p>Bundle libvbucket</p>
</li>
<li>
<p>Fix a problem with allocating too few slots in the <code>backup_nodes</code>.
Fixes  illegal memory access.</p>
</li>
<li>
<p>CCBC-90 Fix initialization of backup nodes array.
The code switching  nodes relies on NULL terminator rather than <code>nbackup_nodes</code> variable.
Fixes illegal memory access.</p>
</li>
<li>
<p>CCBC-89: Release the memory allocated by the http parser</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-0-6-2012-08-30"><a class="anchor" href="#1-0-6-2012-08-30"></a>1.0.6 (2012-08-30)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>5 files changed, 18 insertions(+), 5 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-92 release ringbuffer in <code>libcouchbase_purge_single_server</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-0-5-2012-08-15"><a class="anchor" href="#1-0-5-2012-08-15"></a>1.0.5 (2012-08-15)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>6 files changed, 23 insertions(+), 15 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-91 Fix switching to backup node in case of server outage</p>
</li>
<li>
<p>CCBC-91 Reset timer for commands with <code>NOT_MY_VBUCKET</code> response</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp9-2012-07-27"><a class="anchor" href="#1-1-0dp9-2012-07-27"></a>1.1.0dp9 (2012-07-27)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>5 files changed, 18 insertions(+), 11 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Render auth credentials for View requests.
<code>libcouchbase_make_http_request()</code> won&#8217;t accept credentials anymore.
It will pick them bucket configuration.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp8-2012-07-27"><a class="anchor" href="#1-1-0dp8-2012-07-27"></a>1.1.0dp8 (2012-07-27)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>36 files changed, 2093 insertions(+), 704 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allow the client to specify the verbosity level on the servers using <code>lcb_set_verbosity()</code> function.</p>
</li>
<li>
<p>Bind timeouts to server sockets instead of commands.
This means that  from this point timeout interval will be started from the latest IO  activity on the socket.
This is a behavior change from the 1.0 series.</p>
</li>
<li>
<p>Allow the user to get the number of replicas using <code>libcouchbase_get_num_replicas()</code></p>
</li>
<li>
<p>Allow a user to breakout from the event loop in callbacks using <code>libcouchbase_breakout()</code></p>
</li>
<li>
<p>Make <code>libcouchbase_wait()</code> re-entrable</p>
</li>
<li>
<p>Let users detect if the event loop running already using <code>libcouchbase_is_waiting()</code> function.</p>
</li>
<li>
<p>CCBC-77 Use separate error code for ENOMEM on the client</p>
</li>
<li>
<p>CCBC-82 Implement read replica</p>
</li>
<li>
<p>CCBC-85 Implement general purpose timers.
It is possible for users  to define their own timers using <code>libcouchbase_timer_create()</code>  function.
(See headers for more info)</p>
</li>
<li>
<p>Implement multiple timers for windows</p>
</li>
<li>
<p>CCBC-15 Add OBSERVE command</p>
</li>
<li>
<p>Allow users to specify content type for HTTP request</p>
</li>
<li>
<p>Fix to handle the case when View base doesn&#8217;t have URI schema</p>
</li>
<li>
<p>Separate HTTP callbacks for couch and management requests</p>
</li>
<li>
<p>Claim that server has data in buffers if there are HTTP requests  pending.
Without this patch the event loop can be stopped  prematurely.</p>
</li>
<li>
<p>Add new cbc commands and options:</p>
<div class="ulist">
<ul>
<li>
<p>cbc-view (remove couchview example)</p>
</li>
<li>
<p>cbc-verbosity</p>
</li>
<li>
<p>cbc-admin</p>
</li>
<li>
<p>cbc-bucket-delete</p>
</li>
<li>
<p>cbc-bucket-create</p>
</li>
<li>
<p>Add -p and -r options to cbc-cp to control persistence (uses OBSERVE internally)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp7-2012-06-19"><a class="anchor" href="#1-1-0dp7-2012-06-19"></a>1.1.0dp7 (2012-06-19)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>18 files changed, 266 insertions(+), 115 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add support for notification callbacks for configuration changes.
Now it is possible to install a hook using function <code>libcouchbase_set_configuration_callback()</code>, and be notified about all  configuration changes.</p>
</li>
<li>
<p>Implement function to execution management requests.
Using <code>libcouchbase_make_management_request()</code> function you can configure  the cluster, add/remove buckets, rebalance etc.
It behaves like <code>libcouchbase_make_couch_request()</code> but works with another endpoint.</p>
</li>
<li>
<p>Extract HTTP client.
Backward incompatible change in Couchbase View  subsystem</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp6-2012-06-13"><a class="anchor" href="#1-1-0dp6-2012-06-13"></a>1.1.0dp6 (2012-06-13)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>20 files changed, 201 insertions(+), 127 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-70 Close dynamic libraries.
Fixes small memory leak</p>
</li>
<li>
<p>CCBC-72 Fix compilation on macosx with gtest from homebrew</p>
</li>
<li>
<p>CCBC-71 Implement 'help' command for cbc tool</p>
</li>
<li>
<p>Undefine NDEBUG to avoid asserts to be optimized out</p>
</li>
<li>
<p>Fix win32 builds:</p>
<div class="ulist">
<ul>
<li>
<p>Add suffix to cbc command implementations</p>
</li>
<li>
<p>Fix guards for socket errno macros</p>
</li>
<li>
<p>Define <code>size_t</code> types to fix MSVC 9 build</p>
</li>
<li>
<p>MSVC 9 isn&#8217;t C99, but has stddef.h, so just include it</p>
</li>
</ul>
</div>
</li>
<li>
<p>CCBC-63 Include types definitions for POSIX systems.
Fixes C++  builds on some systems.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp5-2012-06-06"><a class="anchor" href="#1-1-0dp5-2012-06-06"></a>1.1.0dp5 (2012-06-06)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>7 files changed, 65 insertions(+), 9 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The library doesn&#8217;t depend on pthreads (eliminates package lint  warnings)</p>
</li>
<li>
<p>Implement 'cbc-hash' to match server/vbucket for given key</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp4-2012-06-05"><a class="anchor" href="#1-1-0dp4-2012-06-05"></a>1.1.0dp4 (2012-06-05)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>8 files changed, 54 insertions(+), 7 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cbc: strtoull doesn&#8217;t exist on win32, therefore use C++ equivalent.</p>
</li>
<li>
<p>integration with Travis-CI</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp3-2012-06-03"><a class="anchor" href="#1-1-0dp3-2012-06-03"></a>1.1.0dp3 (2012-06-03)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>54 files changed, 1874 insertions(+), 824 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-68 Implement <code>UNLOCK_KEY</code> ( <code>UNL</code>) command</p>
</li>
<li>
<p>CCBC-68 Implement <code>GET_LOCKED</code> ( <code>GETL</code>) command</p>
</li>
<li>
<p>hashset.c: iterate over whole set on rehashing.
Fixes memory leaks  related to hash collisions (905ef95)</p>
</li>
<li>
<p>Destroy view requests items when server get destroyed</p>
</li>
<li>
<p>Do not call View callbacks for cancelled requests</p>
</li>
<li>
<p>Fix <code>ringbuffer_memcpy()</code> (36afdb2)</p>
</li>
<li>
<p>CCBC-62 A hang could occur in <code>libcouchbase_wait()</code> after the timeout  period.
Check for breakout condition after purging servers</p>
</li>
<li>
<p>CCBC-65 A small memory leak can occur with frequent calls to <code>libcouchbase_create()</code> and <code>libcouchbase_destroy()</code></p>
</li>
<li>
<p>CCBC-64.
Timeouts can occur during topology changes, rather than be  correctly retried.
Send the retry-packet to new server</p>
</li>
<li>
<p><code>vbucket_found_incorrect_master()</code> returns server index</p>
</li>
<li>
<p>Fix <code>ringbuffer_is_continous()</code></p>
</li>
<li>
<p>Pick up cookies from pending buffer unless node connected</p>
</li>
<li>
<p>RCBC-33 A fix for a buffer overflow with the supplied password as  has been integrated.
While it is a buffer overflow issue, this is  not considered to be a possible security issue because the password  to the bucket is not commonly supplied by an untrusted source</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-0-4-2012-06-01"><a class="anchor" href="#1-0-4-2012-06-01"></a>1.0.4 (2012-06-01)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>15 files changed, 330 insertions(+), 76 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-65 A small memory leak can occur with frequent calls to <code>libcouchbase_create()</code> and <code>libcouchbase_destroy()</code></p>
</li>
<li>
<p>CCBC-62 A hang could occur in <code>libcouchbase_wait()</code> after the timeout  period.
Check for breakout condition after purging servers</p>
</li>
<li>
<p>CCBC-64.
Timeouts can occur during topology changes, rather than be  correctly retried.
Send the retry-packet to new server</p>
</li>
<li>
<p>[backport] <code>vbucket_found_incorrect_master()</code> returns server index.
(orig: c32fdae)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-0-3-2012-05-02"><a class="anchor" href="#1-0-3-2012-05-02"></a>1.0.3 (2012-05-02)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>6 files changed, 44 insertions(+), 7 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>[backport] Fix <code>ringbuffer_is_continous()</code> (orig: 9cfda9d)</p>
</li>
<li>
<p>[backport] Pick up cookies from pending buffer unless node connected  (orig: 463958d)</p>
</li>
<li>
<p>RCBC-33 A fix for a buffer overflow with the supplied password as  has been integrated.
While it is a buffer overflow issue, this is  not considered to be a possible security issue because the password  to the bucket is not commonly supplied by an untrusted source</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp2-2012-04-10"><a class="anchor" href="#1-1-0dp2-2012-04-10"></a>1.1.0dp2 (2012-04-10)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>10 files changed, 54 insertions(+), 20 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-59 Don&#8217;t wait for empty buffers.
If called with no operations  queued, <code>libcouchbase_wait()</code> will block forever.
This means that a  single threaded application that calls <code>libcouchbase_wait()</code> at  different times to make sure operations are sent to the server runs  the risk of stalling indefinitely.
This is a very likely scenario.</p>
</li>
<li>
<p>Don&#8217;t define <code>size_t</code> and <code>ssize_t</code> for VS2008</p>
</li>
<li>
<p>Fix segfault while authorizing on protected buckets (211bb04)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-1-0dp-2012-04-05"><a class="anchor" href="#1-1-0dp-2012-04-05"></a>1.1.0dp (2012-04-05)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>59 files changed, 4374 insertions(+), 1205 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This release adds new functionality to directly access Couchbase  Server views using the <code>libcouchbase_make_couch_request()</code> function.
See the associated documentation and header files for more details</p>
</li>
<li>
<p>Check for newer libvbucket</p>
</li>
<li>
<p>MB-4834: Request the tap bytes in a known byte order (adf2b30)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-0-2-2012-03-06"><a class="anchor" href="#1-0-2-2012-03-06"></a>1.0.2 (2012-03-06)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>83 files changed, 4095 insertions(+), 654 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implement VERSION command from binary protocol</p>
</li>
<li>
<p>Allow use of libcouchbase to pure memcached clusters by using <code>libcouchbase_create_compat()</code> function</p>
</li>
<li>
<p>Always sign deb packages and allow to pass PGP key</p>
</li>
<li>
<p>Bundle the protocol definitions for memcached  ( <code>memcached/protocol_binary.h</code> and <code>memcached/vbucket.h</code>) to make it  easier to build</p>
</li>
<li>
<p>Bundle sasl client implementation</p>
</li>
<li>
<p>Fix windows build for MS Visual Studio 9</p>
<div class="ulist">
<ul>
<li>
<p>define <code>E*</code> if missing</p>
</li>
<li>
<p>stdint header</p>
</li>
</ul>
</div>
</li>
<li>
<p>Add support for multiple hosts for the bootstrap URL.
A list of  hosts:port separated by ';' to the administration port of the  couchbase cluster.
(ex: "host1;host2:9000;host3" would try to  connect to host1 on port 8091, if that fails it&#8217;ll connect to host2  on port 9000 etc)</p>
</li>
<li>
<p>Raise error if &lt;stdint.h&gt; missing</p>
</li>
<li>
<p>Add JSON support for cbc-cp command</p>
</li>
<li>
<p>Add option to set timeout for cbc</p>
</li>
<li>
<p>Added support for '-' to cp</p>
</li>
<li>
<p>Added cbc-verify: verify content in cache with files</p>
</li>
<li>
<p>Now cbc supports better usage messages</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-0-1-2012-02-13"><a class="anchor" href="#1-0-1-2012-02-13"></a>1.0.1 (2012-02-13)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>65 files changed, 3275 insertions(+), 1329 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CCBC-38 Use alternate nodes when current is dead.
A fix to allow the  client library to failover automatically to other nodes when the  initial bootstrap node becomes unavailable has been added.
All users  are recommended to upgrade for this fix.</p>
</li>
<li>
<p>Fix connect timeouts.
Timeouts are per-operation and only set if  there is any I/O.
The special exception to this is initial  connections, which do not necessarily have a data stream or write  buffer associated wiht them yet.</p>
</li>
<li>
<p>Update to new MT-safe libvbucket API</p>
</li>
<li>
<p>Add option for embedding libevent IO plugin</p>
</li>
<li>
<p>Fix multi-{get,touch} requests handling when nkeys &gt; 1</p>
</li>
<li>
<p>Allow to build without tools which require C++ compiler</p>
</li>
<li>
<p>Destroy event base if we created it</p>
</li>
<li>
<p>CCBC-51 Check server index before using</p>
</li>
<li>
<p>Handle <code>PROTOCOL_BINARY_RESPONSE_NOT_MY_VBUCKET</code> and retry it until  success or another error, which can be handled by caller</p>
</li>
<li>
<p>Do not attempt SASL when SASL already in progress</p>
</li>
<li>
<p>Finer grained error reporting for basic REST errors:</p>
<div class="ulist">
<ul>
<li>
<p>return <code>LIBCOUCHBASE_AUTH_ERROR</code> on HTTP 401</p>
</li>
<li>
<p>return <code>LIBCOUCHBASE_BUCKET_ENOENT</code> on HTTP 404</p>
</li>
<li>
<p>event loop is stopped (via <code>maybe_breakout</code>) on REST error</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fixed segfaults and memory access errors on libevent1.4</p>
</li>
<li>
<p>Allow for notification on initial vbucket config.
This makes  libcouchbase <code>stop_event_loop</code> and libcouchbase maybe breakout work  properly in cooperative asynchronous event loops.
the wait flag is  set by <code>libcouchbase_wait()</code> and unset by <code>maybe_breakout</code>.
Additionally, <code>breakout_vbucket_state_listener</code> will call <code>maybe_breakout</code> as well, instead of having synchronous behavior  assumed by <code>libcouchbase_wait()</code></p>
</li>
<li>
<p>Fix <code>sasl_list_mech_response_handler()</code>.
<code>sasl_client_start()</code> expects  null-terminated string</p>
</li>
<li>
<p>Refactor: use <code>libcouchbase_xxxx</code> for the datatypes</p>
</li>
<li>
<p>Do not notify user about the same error twice.
Use command callback  when it&#8217;s possible.
(e.g.
where the <code>libcouchbase_server_t</code> is  accessible and we can <code>libcouchbase_failout_server()</code>)</p>
</li>
<li>
<p>Install configuration.h for win32</p>
</li>
<li>
<p>CCBC-20 Implement operation timeouts.
Timeouts applies for all  operations, and the timer starts running from the moment you call  the libcouchbase operation you want.
The timer includes times for  connect/send/ receive, and all of the time our application spend  before letting the event loop call callbacks into libcouchbase.</p>
</li>
<li>
<p>Fix double free() error when reading key from packet in handler.c  (b5d485a)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-0-0-2012-01-22"><a class="anchor" href="#1-0-0-2012-01-22"></a>1.0.0 (2012-01-22)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>170 files changed, 6048 insertions(+), 7553 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allow the user to specify sync mode on an instance</p>
</li>
<li>
<p>Empty string as bucket name should be treated as NULL</p>
</li>
<li>
<p>Bail out if you can&#8217;t find memcached/vbucket.h and  libvbucket/vbucket.h</p>
</li>
<li>
<p>New command cbc.
This command intended as the analog of <code>mem*</code> tools from libmemcached distribution.
Supported commands:</p>
<div class="ulist">
<ul>
<li>
<p>cbc-cat</p>
</li>
<li>
<p>cbc-cp</p>
</li>
<li>
<p>cbc-create</p>
</li>
<li>
<p>cbc-flush</p>
</li>
<li>
<p>cbc-rm</p>
</li>
<li>
<p>cbc-stats</p>
</li>
<li>
<p>cbc-send</p>
</li>
<li>
<p>cbc-receive</p>
</li>
</ul>
</div>
</li>
<li>
<p>CCBC-37 allow config for cbc tool to be read from .cbcrc</p>
</li>
<li>
<p>Convert flags to network byte order</p>
</li>
<li>
<p>Remove &lt;memcached/vbucket.h&gt; dependency</p>
</li>
<li>
<p>Use the error handler instead of printing to stderr</p>
</li>
<li>
<p>Disable Views code</p>
</li>
<li>
<p>Don&#8217;t accept NULL as a valid "callback"</p>
</li>
<li>
<p>Add make targets to build RPM and DEB packages</p>
</li>
<li>
<p>Allow download memcached headers from remote host</p>
</li>
<li>
<p>Added docbook-based manual pages</p>
</li>
<li>
<p>Gracefully update vbucket configuration.
This means that the  connection listener, could reconfigure data sockets on the fly</p>
</li>
<li>
<p>Allow libcouchbase build with libevent 1.x (verified for 1.4.14)</p>
</li>
<li>
<p>Aggregate flush responses</p>
</li>
<li>
<p>Add stats command</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="0-3-0-2011-11-02"><a class="anchor" href="#0-3-0-2011-11-02"></a>0.3.0 (2011-11-02)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>102 files changed, 6188 insertions(+), 1531 deletions(-)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add flush command from binary protocol</p>
</li>
<li>
<p>Remove packet filter</p>
</li>
<li>
<p>Use ringbuffers instead <code>buffer_t</code></p>
</li>
<li>
<p>Win32 build fixes</p>
</li>
<li>
<p>Allow to specify IO framework but using IO plugins</p>
</li>
<li>
<p>CCBC-11 The interface to access views</p>
</li>
<li>
<p>Initial man pages</p>
</li>
<li>
<p>Extend the test suite</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="0-2-0-2011-09-01"><a class="anchor" href="#0-2-0-2011-09-01"></a>0.2.0 (2011-09-01)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>85 files changed, 12144 insertions(+)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Simple bootstapping which builds HTTP packet and listens  /pools/default/buckets/BUCKETNAME directly.
Allowed usage of  defaults (bucket name, password)</p>
</li>
<li>
<p>Support basic set of binary protocol commands:</p>
<div class="ulist">
<ul>
<li>
<p>get (get and touch)</p>
</li>
<li>
<p>set</p>
</li>
<li>
<p>increment/decrement</p>
</li>
<li>
<p>remove</p>
</li>
<li>
<p>touch</p>
</li>
</ul>
</div>
</li>
<li>
<p>MB-3294 Added <code>_by_key</code> functions</p>
</li>
<li>
<p>CCBC-5 Fixed abort in <code>do_read_data</code> (c=0x7b09bf0) at src/event.c:105</p>
</li>
<li>
<p>Added timings API.
It might be possible to turn on timing collection  using <code>libcouchbase_enable_timings()</code>/ <code>libcouchbase_disable_timings()</code>,  and receive the data in timings callback.</p>
</li>
<li>
<p>Basic TAP protocol implementation</p>
</li>
<li>
<p>Initial win32 support</p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/+CouchbaseServer" class="icon">
              <svg width="50px" height="50px" viewBox="36.72 225.573 542.326 343.67"><path d="m209.02 363.05v68.732h93.212c-15.065 44.252-37.662 68.732-93.212 68.732-56.492 0-100.74-46.135-100.74-102.63s44.252-102.63 100.74-102.63c30.129 0 48.96 10.357 66.849 25.422 14.123-14.123 13.182-16.006 48.96-49.902-31.071-28.246-71.557-45.194-115.81-45.194-95.096-0.94-172.3 76.266-172.3 171.36s77.206 172.3 172.3 172.3c142.17 0 177.01-124.28 165.71-206.2-33.896-1e-3 -165.71-1e-3 -165.71-1e-3zm310.71 3.766v-59.317h-42.369v59.317h-61.2v42.369h61.2v61.2h42.369v-61.2h59.317v-42.369h-59.317z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2018 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
