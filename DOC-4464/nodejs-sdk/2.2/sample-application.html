<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Sample Application | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4464/nodejs-sdk/2.6/sample-application.html">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="nodejs-sdk">
    <meta name="dcterms.identifier" content="2.2">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4464">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../server/6.0/introduction/intro.html">Server</a></li>
                  <li><a href="../../server/6.0/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../server/6.0/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../server/6.0/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../server/6.0/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="../../operator/1.2/overview.html">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="../../couchbase-lite/2.5/index.html">Lite</a></li>
                  <li><a href="../../sync-gateway/2.5/index.html">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../server/6.0/sdk/overview.html">SDKs</a></li>
                  <li><a href="../../c-sdk/2.10/start-using-sdk.html">C</a></li>
                  <li><a href="../../dotnet-sdk/2.7/start-using-sdk.html">.NET</a></li>
                  <li><a href="../../go-sdk/1.5/start-using-sdk.html">Go</a></li>
                  <li><a href="../../java-sdk/2.7/start-using-sdk.html">Java</a></li>
                  <li><a href="../../nodejs-sdk/2.6/start-using-sdk.html">Node.js</a></li>
                  <li><a href="../../php-sdk/2.6/start-using-sdk.html">PHP</a></li>
                  <li><a href="../../python-sdk/2.5/start-using-sdk.html">Python</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../server/6.0/connectors/intro.html">Connectors</a></li>
                  <li><a href="../../elasticsearch-connector/4.0/index.html">Elasticsearch</a></li>
                  <li><a href="../../server/6.0/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="../../kafka-connector/3.4/index.html">Kafka</a></li>
                  <li><a href="../../spark-connector/2.2/index.html">Spark</a></li>
                  <li><a href="../../talend-connector/index.html">Talend</a></li>
                  <li><a href="../../server/6.0/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="start-using-sdk.html"><span class="title">Node.js SDK</span> <span class="version">2.2</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../2.6/sample-application.html">Node.js SDK 2.6</a></li>
                  <li><a class="navbar-item" href="../2.5/sample-application.html">Node.js SDK 2.5</a></li>
                  <li><a class="navbar-item" href="../2.4/sample-application.html">Node.js SDK 2.4</a></li>
                  <li><a class="navbar-item" href="../2.3/sample-application.html">Node.js SDK 2.3</a></li>
                  <li><a class="navbar-item" href="../2.1/introduction.html">Node.js SDK 2.1</a></li>
                </ul>
                <ul class="related">
                  <li><a class="navbar-item" href="../../c-sdk/2.10/sample-application.html">C SDK</a></li>
                  <li><a class="navbar-item" href="../../dotnet-sdk/2.7/sample-application.html">.NET SDK</a></li>
                  <li><a class="navbar-item" href="../../go-sdk/1.5/sample-application.html">Go SDK</a></li>
                  <li><a class="navbar-item" href="../../java-sdk/2.7/sample-application.html">Java SDK</a></li>
                  <li><a class="navbar-item" href="../../php-sdk/2.6/sample-application.html">PHP SDK</a></li>
                  <li><a class="navbar-item" href="../../python-sdk/2.5/sample-application.html">Python SDK</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-current-path is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Hello World!</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="start-using-sdk.html">Start Using the SDK</a>
    </span>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="sample-application.html">Sample Application</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="webui-cli-access.html">Browser and CLI Access</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Working with Data</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="core-operations.html">Core Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="document-operations.html">Document Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="subdocument-operations.html">Sub-Document Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-query.html">Querying with N1QL</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-queries-with-sdk.html">N1QL from the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="full-text-search-overview.html">Full Text Search</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="full-text-searching-with-sdk.html">Searching from the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="view-queries-with-sdk.html">MapReduce Views</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="async-programming.html">Asynchronous Programming</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="batching-operations.html">Batching Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="durability.html">Durability</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="concurrent-mutations-cluster.html">Concurrent Document Mutations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="nonjson.html">Non-JSON Documents</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Deployment Environments</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-connections.html">Managing Connections</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-clusters.html">Managing Clusters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="compatibility-versions-features.html">Compatibility</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Settings, Error Handling &amp; Diagnostics</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="client-settings.html">Client Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="handling-error-conditions.html">Handling Errors</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="failure-considerations.html">Failure Considerations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="collecting-information-and-logging.html">Collecting Information</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Project Docs</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="relnotes-nodejs-sdk.html#version-2-2-5-7-december-2016">Release Notes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="compatibility-versions-features.html">Compatibility</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="sdk-licenses.html">Licenses</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="get-involved.html">Get involved</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-banner">
    <p>A newer version of this documentation is available.</p>
    <a class="btn" href="../2.6/sample-application.html">View Latest</a>
  </div>
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="start-using-sdk.html">Node.js SDK</a></li>
    <li class="crumb">Hello World!</li>
    <li class="crumb"><a href="sample-application.html">Sample Application</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-nodejs/edit/release/2.2/modules/ROOT/pages/sample-application.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">Sample Application</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Couchbase Travel is a sample web application that demonstrates how to interact with the Couchbase query service via the SDKs
</blockquote>
</div>
<div class="paragraph">
<p>Each SDK comes with its own implementation of the backend for the application.
You can download the complete source code and then build and run the app.
While the app runs, you can view the log of N1QL queries that it sends.
The documentation for the travel app illustrates the data model and walks through the N1QL queries used to select flights.</p>
</div>
<div class="paragraph">
<p>The travel app front-end is the same in each SDK implementation and incorporates the following frameworks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://expressjs.com" target="_blank" rel="noopener">Express</a></p>
</li>
<li>
<p><a href="https://angularjs.org" target="_blank" rel="noopener">AngularJS</a></p>
</li>
<li>
<p><a href="http://getbootstrap.com" target="_blank" rel="noopener">Bootstrap</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The backend is a REST API, and is available in the following languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/couchbaselabs/try-cb-nodejs" target="_blank" rel="noopener">Node.js</a></p>
</li>
<li>
<p><a href="https://github.com/couchbaselabs/try-cb-java" target="_blank" rel="noopener">Java</a></p>
</li>
<li>
<p><a href="https://github.com/couchbaselabs/try-cb-dotnet" target="_blank" rel="noopener">.NET</a></p>
</li>
<li>
<p><a href="https://github.com/couchbaselabs/try-cb-golang" target="_blank" rel="noopener">Go</a></p>
</li>
<li>
<p><a href="https://github.com/couchbaselabs/try-cb-php" target="_blank" rel="noopener">PHP</a></p>
</li>
<li>
<p><a href="https://github.com/couchbaselabs/try-cb-python" target="_blank" rel="noopener">Python</a></p>
</li>
<li>
<p><a href="https://github.com/open-source-parsers/jsoncpp" target="_blank" rel="noopener">C</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to the travel-app documentation of your SDK of choice for specifics for that particular SDK, like backend dependencies, source-code checkout and running instructions.</p>
</div>
<div class="paragraph">
<p>The application allows users to find flights by entering airports and travel dates.
For the airport entries, the app uses a N1QL query bound to an Angular type ahead directive to suggest airport names based on the first few letters entered.</p>
</div>
<div class="paragraph">
<p>See <a href="#using-travel-app">Using the Travel App</a> below for guidelines on how to use the travel app.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="note-installing"><a class="anchor" href="#note-installing"></a>Generic set up</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your favorite editor or IDE</p>
</li>
<li>
<p>Your SDK of choice and its specific dependencies</p>
</li>
<li>
<p>The sample app source code for your SDK from GitHub</p>
</li>
<li>
<p>A local <code>Couchbase 4.5</code> installation (make sure that the <code>travel-sample</code> bucket has been loaded and that there is, at least, one node with data, query, index and search services in the cluster</p>
</li>
<li>
<p>That&#8217;s it!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To start with, it&#8217;s easiest if you run Couchbase Server and the travel sample app on the same machine.
It&#8217;s not required to run your development environment this way, and advanced "MDS" configurations are supported.
It&#8217;s just easier to start a development environment with components running locally.</p>
</div>
<div class="paragraph">
<p>Download <a href="http://www.couchbase.com/download" target="_blank" rel="noopener">Couchbase Server 4.5</a>and install it.
As you follow the download instructions and setup wizard, make sure you keep all the services (<code>data</code>, <code>query</code>, and <code>index</code>) selected.
Make sure also to install the sample bucket named <code>travel-sample</code> (introduced in CB 4.0) because it contains the data used in this tutorial.</p>
</div>
<div class="paragraph">
<p>If you already have Couchbase Server installed but did not install the <code>travel-sample</code> bucket, open the Couchbase Web Console and select <span class="menuseq"><b class="menu">Settings</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Sample Buckets</b></span>.
Select the <code>travel-sample</code> checkbox, and then click <strong class="ui">Create</strong>.
A notification box in the upper-right corner disappears when the bucket is ready to use.</p>
</div>
<div class="paragraph">
<p>The travel app, as a REST API backend, will run in the terminal window, which you need to keep open.
Please refer to SDK-specific instructions on how to run the application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datamodel"><a class="anchor" href="#datamodel"></a>The Travel App data model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The data model for the travel app uses several distinct document types: airline, route, airport and landmark.</p>
</div>
<div class="paragraph">
<p>The model for each kind of document contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A key that acts as a primary key</p>
</li>
<li>
<p>An <code>id</code> field that identifies the document</p>
</li>
<li>
<p>A <code>type</code> field that identifies the kind of document</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following figure illustrates the relationship between the different kinds of documents.
It shows the primary key, ID, and type fields that each document has, plus a few representative fields in each type of document.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../sdk/4.5/pages/_images/travel-app-data-model.png" alt="travel app data model">
</div>
<div class="title">Figure 1. Documents in the travel app data model</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="airline-documents"><a class="anchor" href="#airline-documents"></a>Airline documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em class="term">Airline documents</em> contain details about airlines such as the name of the airline, International Air Transport Association (IATA) two-character airline designator, International Civil Aviation Organization (ICAO) three-character airline designator, and the airline call sign.</p>
</div>
<div class="paragraph">
<p>For airline documents, the value of the <code>type</code> field is <code>airline</code>.</p>
</div>
<div class="listingblock">
<div class="title">Airline document model</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">airline_24 			   ←This is the key, which also acts as a primary key
{
  "active": "Y",
  "callsign": "AMERICAN",
  "country": "United States",
  "iata": "AA",
  "icao": "AAL",
  "id": "24",
  "name": "American Airlines",
  "type": "airline"              ←This is the type identifier for the document
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="route-documents"><a class="anchor" href="#route-documents"></a>Route documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em class="term">Route documents</em> contain details about flights such as the name of the airline, departure airport, destination airport, number of stops during the flight, type of aircraft, flight number, and flight schedule.</p>
</div>
<div class="paragraph">
<p>Route documents also contain a foreign key identifier, <code>airlineid</code>, that is used to retrieve the document that contains information about the airline that flies the route.
The value of the <code>airlineid</code> field is identical to the key for the corresponding airline document.</p>
</div>
<div class="paragraph">
<p>For route documents, the value of the <code>type</code> field is <code>route</code>.</p>
</div>
<div class="listingblock">
<div class="title">Route document model</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">route_5966                         ←This is the key, which also acts as a primary key
{
  "id": "5966",
  "type": "route",               ←This is the type identifier for the document
  "airline": "AA",
  "airlineid": "airline_24",     ←This is the foreign key identifier to an airline document
  "sourceairport": "MCO",
  "destinationairport": "SEA",
  "stops": "0",
  "equipment": "737",
  "schedule": [
      {"day": 1, "utc": "13:25:00", "flight": "AA788"},
      {"day": 4, "utc": "13:25:00", "flight": "AA419"},
      {"day": 5, "utc": "13:25:00", "flight": "AA519"}
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="airport-documents"><a class="anchor" href="#airport-documents"></a>Airport documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em class="term">Airport documents</em> contain details about airports  such as name, location, time zone, ICAO four-character alphanumeric airport code, and Federal Aviation Administration (FAA) location identifier.</p>
</div>
<div class="paragraph">
<p>For airport documents, the value of the <code>type</code> field is <code>airport</code>.</p>
</div>
<div class="listingblock">
<div class="title">Airport document model</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">airport_3577                       ←This is the key, which also acts as a primary key
{
  "travel-sample": {
      "airportname": "Seattle Tacoma Intl",
      "city": "Seattle",
      "country": "United States",
      "faa": "SEA",
      "geo": {
          "alt": 433,
          "lat": 47.449,
          "lon": -122.309306
      },
      "icao": "KSEA",
      "id": 3577,
      "type": "airport",         ←This is the type identifier for the document
      "tz": "America/Los_Angeles"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="landmark-documents"><a class="anchor" href="#landmark-documents"></a>Landmark documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em class="term">Landmark documents</em> contain details about points of interest such as hotels.
They include information such as name, location, price, contact information, and the kind of activity that the point of interest provides.</p>
</div>
<div class="paragraph">
<p>For landmark documents, the value of the <code>type</code> field is <code>landmark</code>.</p>
</div>
<div class="listingblock">
<div class="title">Landmark document model</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">landmark_21661                     ←This is the key, which also acts as a primary key
{
  "activity": "sleep",
  "address": "12 Rue Boulainvilliers",
  "alt": null,
  "checkin": null,
  "checkout": null,
  "city": null,
  "content": "Small three star hotel (33 rooms).",
  "country": "France",
  "directions": null,
  "email": null,
  "fax": null,
  "geo": {
      "lat": 48.853,
      "lon": 2.27593
  },
  "hours": null,
  "id": 21661,
  "image": null,
  "name": "Hotel Eiffel Kennedy",
  "phone": "+33 1 45 24 45 75",
  "price": "~\u20ac150",
  "state": "Ile-de-France",
  "title": "Paris/16th arrondissement",
  "tollfree": null,
  "type": "landmark",            ←This is the type identifier for the document
  "url": "http://ww.eiffelkennedy.com"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application serves an HTML file named <em class="path">index.html</em> (eg.
from the public path in the Node.js application).
This file contains references to various included script files for front-side JavaScript components such as Bootstrap, jQuery, and AngularJS.
The Angular controller script named <code>script.js</code>, which you can find in the <em class="path">/public/js/</em> directory, controls how the application interacts with the REST API in the server application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../sdk/4.5/pages/_images/architecture-overview.png" alt="architecture overview" width="650px">
</div>
<div class="title">Figure 2. The Application Services</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-api"><a class="anchor" href="#rest-api"></a>REST API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application uses these methods to populate data in the application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="api">$scope.findFlights</code>, which is a REST API call to the <em class="path">/api/flightPath/findAll</em> endpoint</p>
</li>
<li>
<p><code class="api">$scope.findAirports</code>, which is a REST API call to the <em class="path">/api/airport/findAll</em> endpoint</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../sdk/4.5/pages/_images/angular-rest.png" alt="angular rest" width="350px">
</div>
<div class="title">Figure 3. Front End Framework REST calls</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../../sdk/4.5/pages/_images/architecture-airport.png" alt="architecture airport" width="650px">
</div>
<div class="title">Figure 4. REST API for finding airports</div>
</div>
<div class="paragraph">
<p>The application attempts to find an airport based on the codes used for the <code>name</code> (case sensitive), and codes for Federal Aviation Administration (FAA) or International Civil Aviation Organization (ICAO).
The travel app uses the data model and binds the input field for the <code>from</code> airport to an Angular typeahead directive, which is defined in the <em class="path">index.html</em> file as follows:</p>
</div>
<div class="listingblock">
<div class="title">Angular typeahead directive from /public/index.html file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-markup hljs" data-lang="markup">&lt;input type="text"
  placeholder="find airport"
  typeahead="data.airportname for data in findAirports($viewValue)"
  typeahead-min-length="3"
  typeahead-wait-ms="250"
  ng-model="fromName"
  ng-minlength="3"
  class="input-small form-control"
  name="from" required/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the Angular controller script, the <code class="api">findAirports()</code> function is:</p>
</div>
<div class="listingblock">
<div class="title">findAirports() function from /public/js/scripts.js file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">$scope.findAirports=function(val){
  return $http.get("/api/airport/findAll",{
      params:{search:val}
  }).then(function(response){
      return response.data;
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API call to the server application <em class="path">/api/airport/findAll</em> function is defined in the <em class="path">/routes/routes.js</em> file as:</p>
</div>
<div class="listingblock">
<div class="title">/api/airport/findAll function from /routes/routes.js file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">//// ▶▶ airports ◀◀ ////
app.get('/api/airport/findAll',function(req,res) {
if (req.query.search) {
    airport.findAll(req.query.search, function (err, done) {
        if (err) {
            res.status = 400;
            res.send(err);
            return;
        }
        res.status = 202;
        res.send(done);
    });
}else{
    res.status = 400;
    res.send({"airport":"bad request"});
    return;
}
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em class="path">/api/airport/findAll</em> route function in the <em class="path">route.js</em> file points to the corresponding <code class="api">findAll</code> function in the airport module in the <em class="path">/model/airport.js</em> file.
This method allows the user to search by FAA code, ICAO code or airport name.
It then prepares a N1QL query based on the selection criteria and bucket information from the <em class="path">/config.json</em> file.
The query is passed to the Couchbase query service in the <em class="path">/model/db.js</em> module that calls Couchbase.</p>
</div>
<div class="listingblock">
<div class="title">findAll() function from /model/airport.js file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">module.exports.findAll = function (queryStr, done) {
  var queryPrep;
  if (queryStr.length == 3) {
      queryPrep = "SELECT airportname FROM `" + config.couchbase.bucket + "` WHERE faa ='" + queryStr.toUpperCase() + "'";
  } else if (queryStr.length == 4 &amp;&amp; (queryStr==queryStr.toUpperCase()||queryStr==queryStr.toLowerCase())) {
      queryPrep = "SELECT airportname FROM `" + config.couchbase.bucket + "` WHERE icao ='" + queryStr.toUpperCase() + "'";
  } else {
      queryPrep = "SELECT airportname FROM `" + config.couchbase.bucket + "` WHERE airportname LIKE '" + queryStr + "%'";
  }

  db.query(queryPrep, function (err, res) {
      if (err) {
          done(err, null);
          return;
      }
      if (res) {
          done(null, res);
          return;
      }
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the data model, if you enter <code class="in">SEA</code>, <code class="in">KSEA</code>, or <code class="in">Seattle</code>, the typeahead directive gives you the option to select <strong class="ui">Seattle Tacoma Intl.</strong> To see the results of the query, watch the terminal window in which the Node application is running.
The example is showing an output for the N1QL statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>QUERY: SELECT airportname FROM `travel-sample` WHERE faa ='SEA'
QUERY: SELECT airportname FROM `travel-sample` WHERE icao ='KSEA'
QUERY: SELECT airportname FROM `travel-sample` WHERE airportname LIKE 'Seattle%'</pre>
</div>
</div>
<div class="paragraph">
<p>You can enable or disable console logging for N1QL statements by changing the value of the <code>showQuery</code> property in the <em class="path">/config.json</em> file to <code>true</code> or <code>false</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../sdk/4.5/pages/_images/architecture-flight-path.png" alt="architecture flight path" width="650px">
</div>
<div class="title">Figure 5. REST API for finding flight paths</div>
</div>
<div class="paragraph">
<p>After the airports are selected and a leave date is entered, the application tries to find route and schedule information for an airline that services the requested flight path.
The call to the REST API <em class="path">/api/flightPath/findAll</em> on the server is initiated when the user clicks the <strong class="ui">Find Flights</strong> button.
The button is defined within the <code>travelForm</code> form element in the <em class="path">index.html</em> file, as shown in the following code snippets:</p>
</div>
<div class="listingblock">
<div class="title">travelForm form element from /public/index.html file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-markup hljs" data-lang="markup">&lt;form class="form-horizontal" role="form"
     name="travelForm" ng-submit="findFlights()" novalidate&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Find Flights button element from /public/index.html file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-markup hljs" data-lang="markup">&lt;button class="btn btn-primary pull-right btn-sm"
       type="submit" ng-disabled="travelForm.$invalid"&gt;Find Flights&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>travelForm</code> form element contains various Angular validation options that are used with the input directives.
For more information about validation and the input directive see <a href="https://docs.angularjs.org/api/ng/directive/input" class="bare" target="_blank" rel="noopener">https://docs.angularjs.org/api/ng/directive/input</a>.
After validating the input options, the Angular function in the <em class="path">script.js</em> file is called to find flights.</p>
</div>
<div class="listingblock">
<div class="title">findFlights() function from /public/js/scripts.js file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">$scope.findFlights = function () {
  $scope.empty = true;
  $scope.rowCollectionLeave = [];
  $scope.rowCollectionRet = [];
  $http.get("/api/flightPath/findAll", {
      params: {from: this.fromName, to: this.toName, leave: this.leave}
  }).then(function (response) {
      if (response.data.length &gt; 0) {
          $scope.empty = false;
      }
      for (var j = 0; j &lt; response.data.length; j++) {
          $scope.rowCollectionLeave.push(response.data[j]);
      }
  });
  if (this.ret) {
      $http.get("/api/flightPath/findAll", {
          params: {from: this.toName, to: this.fromName, leave: this.ret}
      }).then(function (responseRet) {
          if (responseRet.data.length &gt; 0) {
              $scope.retEmpty = false;
          }
          for (var j = 0; j &lt; responseRet.data.length; j++) {
              $scope.rowCollectionRet.push(responseRet.data[j]);
          }
      });
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>findFlights()</code> function checks the form input to determine whether the return option is enabled or disabled.
It then calls the server REST API <em class="path">/api/flightPath/findAll</em> function either once for a one way flight or twice for a round-trip flight.
When it requests the return flight for a round trip, it uses the reverse <code>to</code> and <code>from</code> sequence.</p>
</div>
<div class="listingblock">
<div class="title">/api/flightPath/findAll function from /routes/routes.js file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">//// ▶▶ flightPath ◀◀ ////
app.get('/api/flightPath/findAll',function(req,res){
  if(req.query.from &amp;&amp; req.query.to &amp;&amp; req.query.leave){
      flightPath.findAll(req.query.from, req.query.to,req.query.leave, function (err, done) {
          if (err) {
              res.status = 400;
              res.send(err);
              return;
          }
          res.status = 202;
          res.send(done);
      });
  }else{
      res.status = 400;
      res.send({"flightPath":"bad request"});
      return;
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>/api/flightPath/findAll</code> route function in the <em class="path">route.js</em> file points to the corresponding <code class="api">findAll</code> function in the <code>flightPath</code> module, found in the <em class="path">/model/flghtPath.js</em> file.
The <code class="api">findAll</code> function performs several important steps for processing the request to find flights:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It determines the FAA identifier for the <code>to</code> and <code>from</code> airports.</p>
</li>
<li>
<p>It searches for routes and schedule information based on the source and destination airports and the requested dates.
The collection of schedule documents is nested in the route document for each route.
They are grouped by day of the week (1-7), and the requested dates are compared to the day of the week to see what flights are available on those particular dates.
It returns a list of flights that includes data for the following fields: airline, flight, departure, from, to, and aircraft.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This method in the <em class="path">flightPath.js</em> module is:</p>
</div>
<div class="listingblock">
<div class="title">findAll function from the /model/flightPath.js file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">module.exports.findAll = function (from, to, leave,done) {
  var queryPrep = "SELECT faa as fromAirport FROM `" + config.couchbase.bucket + "` WHERE airportname = '" + from +
      "' UNION SELECT faa as toAirport FROM `" + config.couchbase.bucket + "` WHERE airportname = '" + to + "'";
  db.query(queryPrep, function (err, res) {
      if (err) {
          done(err, null);
          return;
      }
      if (res) {
          var queryTo;
          var queryFrom;
          for(i=0;i&lt;res.length;i++){
              if(res[i].toAirport){
                  queryTo=res[i].toAirport;
              }
              if(res[i].fromAirport){
                  queryFrom=res[i].fromAirport;
              }
          }
          queryPrep="SELECT a.name, s.flight, s.utc, r.sourceairport, r.destinationairport, r.equipment FROM `" + config.couchbase.bucket + "` r UNNEST r.schedule s JOIN `" + config.couchbase.bucket + "` a ON KEYS r.airlineid WHERE r.sourceairport='" + queryFrom + "' AND r.destinationairport='" + queryTo + "' AND s.day=" + convDate(leave) + " ORDER BY a.name";
          db.query(queryPrep,function (err, flightPaths) {
                       if (err) {
                           done(err, null);
                           return;
                       }
                       if (flightPaths) {
                           done(null, flightPaths);
                           return;
                       }
                   }
          );
      }
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Query can be seen in the terminal window that is running the backend application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>QUERY:
SELECT a.name, s.flight, s.utc, r.sourceairport, r.destinationairport, r.equipment
FROM `travel-sample` r
UNNEST r.schedule s
JOIN `travel-sample` a
ON KEYS r.airlineid
WHERE r.sourceairport='SEA' AND r.destinationairport='MCO' AND s.day=6
ORDER BY a.name</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="n1ql-query-anatomy"><a class="anchor" href="#n1ql-query-anatomy"></a>N1QL query anatomy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Couchbase Query API is a powerful tool for efficient retrieval of information from a document data store.
In each SDK-specific travel application, queries about flights are created by a dedicated module (for example in Node.js, the <em class="path">flightPath.js</em> module).
Here&#8217;s an example of a query that finds flights between Seattle-Tacoma International Airport (SEA) and Orlando International Airport (MCO), followed by a description of what&#8217;s happening in the query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">SELECT a.name, s.flight, s.utc, r.sourceairport, r.destinationairport, r.equipment
FROM `travel-sample` r
UNNEST r.schedule s
JOIN `travel-sample` a ON KEYS r.airlineid
WHERE r.sourceairport='SEA' AND r.destinationairport='MCO' AND s.day=6
ORDER BY a.name</code></pre>
</div>
</div>
<div class="paragraph">
<p>N1QL provides JOIN functionality, something previously not possible in a document database.
For two documents to be joined in the result of a SELECT statement, one of them must contain a field whose value is equal to the Couchbase key of the other document.
The following example shows two documents that demonstrate that requirement and a SELECT statement that joins them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"keyA" is the Couchbase KV key for Doc A.
Doc A: { some fields }

Doc B: { some fields "joinField": "keyA" }

SELECT * FROM default b JOIN default a ON KEYS b.joinField</pre>
</div>
</div>
<div class="paragraph">
<p>The data model for the travel application includes an <code>airlineid</code> field in each <code>route</code> document.
That <code>airlineid</code> field is used as a foreign key identifier and corresponds to the key for an <code>airline</code> document.
To select the airline name <code>a.name</code>, the query uses the following clause: <code>JOIN `travel-sample` a ON KEYS r.airlineid</code>.</p>
</div>
<div class="paragraph">
<p>One of the most powerful features available in the Couchbase Query API is the ability to <code>UNNEST</code> or flatten,the results returned in the <code>SELECT</code> statement.
In the data model for the travel application, each route document contains a nested collection of schedule documents.
To alleviate a complicated JSON parsing code pattern for the return results, you can <code>UNNEST</code> the schedule documents, so they become the root-level fields in the returned results.</p>
</div>
<div class="paragraph">
<p>Standard SQL syntax is used in the <code>WHERE</code> clause for the <code>SELECT</code> statement.
The result set is ordered by the <code>a.name</code> field, which contains the airline name.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-travel-app"><a class="anchor" href="#using-travel-app"></a>Using the Travel App</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a browser and navigate to the login URL that was displayed when you started the app.</p>
</li>
<li>
<p>Sign in to Couchbase Travel by providing your credentials:</p>
<div class="imageblock">
<div class="content">
<img src="../../sdk/4.5/pages/_images/travel-app-login.png" alt="travel app login" width="650px">
</div>
</div>
</li>
<li>
<p>Find a flight:</p>
<div class="imageblock">
<div class="content">
<img src="../../sdk/4.5/pages/_images/travel-app-screen.png" alt="travel app screen" width="650px">
</div>
</div>
<div class="paragraph">
<p>In the <strong class="ui">Airport or City</strong> section, enter an airport code or city name in the <strong class="ui">From</strong> and <strong class="ui">To</strong> fields.</p>
</div>
</li>
<li>
<p>In the <strong class="ui">Travel Dates</strong> section, select <strong class="ui">Leave</strong> and <strong class="ui">Return</strong> dates by using the date picker that pops up when you click the date fields.</p>
</li>
<li>
<p>Click <strong class="ui">Find Flights</strong>.</p>
<div class="paragraph">
<p>The app displays the available flights for the outbound and return legs of the trip.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/+CouchbaseServer" class="icon">
              <svg width="50px" height="50px" viewBox="36.72 225.573 542.326 343.67"><path d="m209.02 363.05v68.732h93.212c-15.065 44.252-37.662 68.732-93.212 68.732-56.492 0-100.74-46.135-100.74-102.63s44.252-102.63 100.74-102.63c30.129 0 48.96 10.357 66.849 25.422 14.123-14.123 13.182-16.006 48.96-49.902-31.071-28.246-71.557-45.194-115.81-45.194-95.096-0.94-172.3 76.266-172.3 171.36s77.206 172.3 172.3 172.3c142.17 0 177.01-124.28 165.71-206.2-33.896-1e-3 -165.71-1e-3 -165.71-1e-3zm310.71 3.766v-59.317h-42.369v59.317h-61.2v42.369h61.2v61.2h42.369v-61.2h59.317v-42.369h-59.317z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2018 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
