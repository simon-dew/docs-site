<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Group By and Aggregate Performance | Couchbase Docs (Staging)</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.0">
<meta name="generator" content="Antora 2.3.0">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">

              <a class="navbar-brand" href="https://www.couchbase.com">
                <img src="../../../../_/img/couchbase-documentation-logo.svg" alt="Couchbase" />
              </a>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-7458/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
<div class="left-sidebar-menu">
<div class="version-control-box">
<div class="component-frame has-dropdown">
<div class="frame-icon">
<img src="../../../../_/img/server-icon.png" alt="">
</div>
<div class="frame-body">
<h4 class="title">
<span class="">
server
</span>
<div class="frame-link-dropdowns">
<a class="frame-link component" href="../../introduction/intro.html"><span class="version">7.0 DRAFT</span> <i class="fas fa-chevron-down"></i></a>
<div class="frame-dropdown versions">
<div class="column">
<ul class="frame-dropdown-list">
<li><a class="frame-item" href="../../../6.6/index.html">6.6</a></li>
<li><a class="frame-item" href="../../../6.5/index.html">6.5</a></li>
<li><a class="frame-item" href="../../../6.0/index.html">6.0</a></li>
<li><a class="frame-item" href="../../../5.5/index.html">5.5</a></li>
</ul>
</div>
</div>
</div>
</h4>

</div>
</div>
</div>
<div class="nav-menu">
<ul class="nav-list">
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<a class="nav-link" href="../../introduction/intro.html">Introduction</a>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../introduction/why-couchbase.html">Why Couchbase?</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../introduction/whats-new.html">What&#8217;s New?</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Get Started</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../getting-started/start-here.html">Start Here!</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../getting-started/do-a-quick-install.html">Do a Quick Install</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../getting-started/look-at-the-results.html">Explore the Server Configuration</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../getting-started/try-a-query.html">Run Your First N1QL Query</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../getting-started/choose-your-next-steps.html">Choose Your Next Steps</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Learn</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../learn/architecture-overview.html">Overview</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/glossary.html">Glossary</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/architecture-diagrams.html">List of Architecture Diagrams</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../learn/data/data.html">Data</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/data/document-data-model.html">Data Model</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/data/n1ql-versus-sql.html">N1QL versus SQL</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/data/extended-attributes-fundamentals.html">Extended Attributes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/data/scopes-and-collections.html">Scopes and Collections</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/data/durability.html">Durability</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/data/transactions.html">Transactions</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../learn/buckets-memory-and-storage/buckets-memory-and-storage.html">Buckets, Memory, and Storage</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/buckets-memory-and-storage/buckets.html">Buckets</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/buckets-memory-and-storage/vbuckets.html">vBuckets</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/buckets-memory-and-storage/compression.html">Compression</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/buckets-memory-and-storage/expiration.html">Expiration</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/buckets-memory-and-storage/memory-and-storage.html">Memory and Storage</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/buckets-memory-and-storage/memory.html">Memory</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/buckets-memory-and-storage/storage.html">Storage</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../learn/services-and-indexes/services-and-indexes.html">Services and Indexes</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/services-and-indexes/services/services.html">Services</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/services-and-indexes/services/data-service.html">Data Service</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/services-and-indexes/services/query-service.html">Query Service</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/services-and-indexes/services/index-service.html">Index Service</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/services-and-indexes/services/search-service.html">Search Service</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/services-and-indexes/services/analytics-service.html">Analytics Service</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/services-and-indexes/services/eventing-service.html">Eventing Service</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/services-and-indexes/services/backup-service.html">Backup Service</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/services-and-indexes/indexes/indexes.html">Indexes</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../learn/services-and-indexes/indexes/global-secondary-indexes.html">Global Secondary Indexes</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/services-and-indexes/indexes/index-replication.html">Availability and Performance</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/services-and-indexes/indexes/indexing-and-query-perf.html">Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/services-and-indexes/indexes/index-scans.html">Scans</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/services-and-indexes/indexes/index_pushdowns.html">Pushdowns</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/services-and-indexes/indexes/storage-modes.html">Storage Settings</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../learn/views/views-intro.html">Views</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="../../learn/views/views-basics.html">View Concepts</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../learn/views/views-streaming.html">Stream-based Views</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../learn/views/views-operation.html">View Operations</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../learn/views/views-store-data.html">Views and Stored Data</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../learn/views/views-development.html">Development Views</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../learn/views/views-production.html">Production Views</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="../../learn/views/views-mapreduce-intro.html">MapReduce Views</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<span class="in-toggle" data-depth="5"></span>
<a class="nav-link" href="../../learn/views/views-writing.html">Writing MapReduce Views</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-views.html">Views Best Practices</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-map.html">Map Function</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-reduce.html">Reduce Function</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-utility.html">Built-in Utility Functions</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-count.html">Built-in _count Function</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-sum.html">Built-in _sum Function</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-stats.html">Built-in _stats Function</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-rewriting.html">Re-writing Built-in Reduce Functions</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-custom-reduce.html">Custom Reduce Functions</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-rereduce.html">Re-reduce Argument</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-writing-nonjson.html">Views for Non-JSON Objects</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-trans-sql.html">Translating SQL to MapReduce</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-schemaless.html">Views in a Schema-less Database</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<span class="in-toggle" data-depth="5"></span>
<a class="nav-link" href="../../learn/views/views-querying.html">Querying MapReduce Views</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../learn/views/views-query-samples.html">View and Query Examples</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../learn/clusters-and-availability/clusters-and-availability.html">Clusters and Availability</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/clusters-and-availability/cluster-manager.html">Cluster Manager</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/clusters-and-availability/connectivity.html">Connectivity</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/clusters-and-availability/size-limitations.html">Size Limits</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/clusters-and-availability/nodes.html">Nodes</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/clusters-and-availability/rebalance.html">Rebalance</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/clusters-and-availability/removal.html">Removal</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../learn/clusters-and-availability/failover.html">Failover</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/clusters-and-availability/graceful-failover.html">Graceful</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/clusters-and-availability/hard-failover.html">Hard</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/clusters-and-availability/automatic-failover.html">Automatic</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/clusters-and-availability/recovery.html">Recovery</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/clusters-and-availability/node-to-node-encryption.html">Node-to-Node Encryption</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/clusters-and-availability/replication-architecture.html">Availability</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/clusters-and-availability/intra-cluster-replication.html">Intra-Cluster Replication</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../learn/clusters-and-availability/xdcr-overview.html">Cross Data Center Replication (XDCR)</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/clusters-and-availability/xdcr-filtering.html">XDCR Advanced Filtering</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/clusters-and-availability/xdcr-conflict-resolution.html">XDCR Conflict Resolution</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../learn/clusters-and-availability/xdcr-cloud-deployment.html">XDCR Cloud Deployment</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/clusters-and-availability/groups.html">Server Group Awareness</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../learn/security/security-overview.html">Security</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/security/authentication.html">Authentication</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/security/authentication-overview.html">Understanding Authentication</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/security/usernames-and-passwords.html">Usernames and Passwords</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/security/authentication-domains.html">Authentication Domains</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/security/certificates.html">Certificates</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../learn/security/authorization-overview.html">Authorization</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/security/roles.html">Roles</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/security/resources-under-access-control.html">Resources Under Access Control</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../learn/security/upgrading-to-rbac.html">Upgrading to RBAC</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/security/auditing.html">Auditing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../learn/security/encryption-overview.html">Encryption</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Manage</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/management-overview.html">Overview</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-ui/manage-ui.html">Couchbase Web Console</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/manage-nodes/node-management-overview.html">Manage Nodes and Clusters</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/initialize-node.html">Initialize a Node</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/create-cluster.html">Create a Cluster</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/add-node-and-rebalance.html">Add a Node and Rebalance</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/join-cluster-and-rebalance.html">Join a Cluster and Rebalance</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/list-cluster-nodes.html">List Cluster Nodes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/remove-node-and-rebalance.html">Remove a Node and Rebalance</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../manage/manage-nodes/fail-nodes-over.html">Fail a Node Over and Rebalance</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../manage/manage-nodes/failover-graceful.html">Graceful</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../manage/manage-nodes/failover-hard.html">Hard</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/recover-nodes.html">Recover a Node and Rebalance</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/apply-node-to-node-encryption.html">Manage Node-to-Node Encryption</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-nodes/manage-address-families.html">Manage Address Families</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/manage-buckets/bucket-management-overview.html">Manage Buckets</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-buckets/create-bucket.html">Create a Bucket</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-buckets/edit-bucket.html">Edit a Bucket</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-buckets/flush-bucket.html">Flush a Bucket</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-buckets/delete-bucket.html">Delete a Bucket</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../manage/manage-scopes-and-collections/manage-scopes-and-collections.html">Manage Scopes and Collections</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../manage/manage-logging/manage-logging.html">Manage Logging</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/manage-settings/manage-settings.html">Manage Settings</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-settings/general-settings.html">General</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-settings/configure-compact-settings.html">Auto-Compaction</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-settings/configure-alerts.html">Email Alerts</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-settings/install-sample-buckets.html">Sample Buckets</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../manage/manage-groups/manage-groups.html">Manage Server Groups</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/manage-xdcr/xdcr-management-overview.html">Manage XDCR</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/prepare-for-xdcr.html">Prepare for XDCR</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/create-xdcr-reference.html">Create a Reference</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/create-xdcr-replication.html">Create a Replication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/pause-xdcr-replication.html">Pause a Replication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/resume-xdcr-replication.html">Resume a Replication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/delete-xdcr-replication.html">Delete a Replication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/delete-xdcr-reference.html">Delete a Reference</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../manage/manage-xdcr/secure-xdcr-replication.html">Secure a Replication</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../manage/manage-xdcr/enable-half-secure-replication.html">Half-Secure</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../manage/manage-xdcr/enable-full-secure-replication.html">Fully Secure</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/filter-xdcr-replication.html">Filter a Replication</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/replicate-using-scopes-and-collections.html">Replicate Using Scopes and Collections</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/recover-data-with-xdcr.html">Recover Data with XDCR</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-xdcr/monitor-xdcr-replication.html">Monitor a Replication</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/manage-security/security-management-overview.html">Manage Security</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-security-settings.html">Manage Security Settings</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-users-and-roles.html">Manage Users, Groups, and Roles</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../manage/manage-security/manage-authentication.html">Manage Authentication</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../manage/manage-security/configure-ldap.html">Configure LDAP</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../manage/manage-security/configure-saslauthd.html">Configure saslauthd</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../manage/manage-security/configure-pam.html">Configure PAM</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../manage/manage-security/manage-certificates.html">Manage Certificates</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../manage/manage-security/configure-server-certificates.html">Configure Server Certificates</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../manage/manage-security/configure-client-certificates.html">Configure Client Certificates</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../manage/manage-security/enable-client-certificate-handling.html">Enable Client-Certificate Handling</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../manage/manage-security/rotate-server-certificates.html">Certificate Rotation</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../manage/manage-security/handle-certificate-errors.html">Certificate Error Handling</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-tls.html">Manage TLS</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-auditing.html">Manage Auditing</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-sessions.html">Manage Sessions</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-console-access.html">Manage Console Access</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-system-secrets.html">Manage System Secrets</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/manage-security/manage-connections-and-disks.html">Manage Connections and Disks</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../manage/manage-statistics/manage-statistics.html">Manage Statistics</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../manage/manage-indexes/manage-indexes.html">Manage Indexes</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../manage/import-documents/import-documents.html">Import Documents</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/manage-backup-and-restore/manage-backup-and-restore.html">Manage Backup and Restore</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../backup-restore/enterprise-backup-restore.html">cbbackupmgr</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#backup-restore:cbbackupmgr-strategies.adoc">Strategies</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#backup-restore:cbbackupmgr-tutorial.adoc">Tutorial</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#backup-restore:cbbackupmgr-cloud.adoc">Cloud Backup</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#backup-restore:cbbackupmgr-archivelayout.adoc">Archive Layout</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/monitor/monitor-intro.html">Monitor</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/monitor/monitoring-stats-configuration.html">Manage Monitoring Options</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/monitor/ui-monitoring-statistics.html">Monitor with the UI</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/monitor/monitoring-cli.html">Monitor with cbstats</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/monitor/monitoring-rest.html">Monitor with REST</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/monitor/xdcr-monitor-timestamp-conflict-resolution.html">Monitor XDCR Timestamp-based Conflict Resolution</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/monitor/monitoring-n1ql-query.html">Monitor Queries</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/monitor/monitoring-indexes.html">Monitor Indexes</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../manage/troubleshoot/troubleshoot.html">Troubleshoot</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/troubleshoot/common-errors.html">Common Errors</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../manage/troubleshoot/core-files.html">Core Files</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Develop</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../sdk/development-intro.html">Developer&#8217;s Intro</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../sdk/overview.html">SDKs</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../getting-started/starter-kits.html">Starter Kits</a>
</span>
</li>
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../query.html">Query</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../n1ql-intro/index.html">Running Queries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../n1ql-intro/queriesandresults.html">N1QL Queries and Results</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../n1ql-intro/sysinfo.html">Getting System Information</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="n1ql-error-codes.html">N1QL Error Codes</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../tutorial.html">Tutorials</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../tools/tools-ref.html">Query Tools</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../tools/cbq-shell.html">cbq: The Command Line Shell for N1QL</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../tools/query-workbench.html">Query Workbench</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../tools/query-monitoring.html">Query Monitoring</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="n1ql-auditing.html">N1QL Auditing</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="backfill.html">Backfill Support for N1QL</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../settings/query-settings.html">Settings and Parameters</a>
</span>
</li>
<li class="nav-item is-current-path is-active is-active-depth-2  " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../advanced.html">Advanced Features</a>
</span>
<ul class="nav-list">
<li class="nav-item is-current-page is-active is-active-depth-2  " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="groupby-aggregate-performance.html">Group By and Aggregate Performance</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="covering-indexes.html">Covering Indexes</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="flex-indexes.html">Flex Indexes</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="cost-based-optimizer.html">Cost-Based Optimizer</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="index.html">N1QL Language Reference</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="conventions.html">Conventions</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="reservedwords.html">Reserved Words</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="datatypes.html">Data Types</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="literals.html">Literals</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="identifiers.html">Identifiers</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="operators.html">Operators</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="arithmetic.html">Arithmetic Operators</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="collectionops.html">Collection Operators</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="comparisonops.html">Comparison Operators</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="conditionalops.html">Conditional Operators</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="constructionops.html">Construction Operators</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="logicalops.html">Logical Operators</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="nestedops.html">Nested Operators and Expressions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="stringops.html">String Operators</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="functions.html">Functions</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="aggregatefun.html">Aggregate Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="arrayfun.html">Array Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="bitwisefun.html">Bitwise Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="comparisonfun.html">Comparison Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="condfununknown.html">Conditional Functions for Unknowns</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="condfunnum.html">Conditional Functions for Numbers</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="datefun.html">Date Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="jsonfun.html">JSON Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="metafun.html">Miscellaneous Utility Functions</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="advisor.html">ADVISOR Function</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="curl.html">CURL Function</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="numericfun.html">Number Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="objectfun.html">Object Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="patternmatchingfun.html">Pattern-Matching Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="searchfun.html">Search Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="stringfun.html">String Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="tokenfun.html">Token Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="typefun.html">Type Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="userfun.html">User-Defined Functions</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="windowfun.html">Window Functions</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="window.html">OVER clause</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="subqueries.html">Subqueries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="correlated-subqueries.html">Correlated Subqueries</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="subquery-examples.html">Examples</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="booleanlogic.html">Boolean Logic</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<span class="nav-text ">Statements</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="advise.html">ADVISE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="alterindex.html">ALTER INDEX</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="build-index.html">BUILD INDEX</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="createcollection.html">CREATE COLLECTION</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="createfunction.html">CREATE FUNCTION</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="createindex.html">CREATE INDEX</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="indexing-arrays.html">Array Indexing</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="adaptive-indexing.html">Adaptive Index</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="indexing-meta-info.html">Indexing Metadata Information</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="index-partitioning.html">Index Partitioning</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="createprimaryindex.html">CREATE PRIMARY INDEX</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="createscope.html">CREATE SCOPE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="delete.html">DELETE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="dropcollection.html">DROP COLLECTION</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="dropfunction.html">DROP FUNCTION</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="dropindex.html">DROP INDEX</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="dropprimaryindex.html">DROP PRIMARY INDEX</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="dropscope.html">DROP SCOPE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="execute.html">EXECUTE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="execfunction.html">EXECUTE FUNCTION</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="explain.html">EXPLAIN</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="grant.html">GRANT</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="infer.html">INFER</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="insert.html">INSERT</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="merge.html">MERGE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="prepare.html">PREPARE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="revoke.html">REVOKE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="selectintro.html">SELECT</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="select-syntax.html">SELECT Syntax</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="selectclause.html">SELECT Clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="with.html">WITH clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="from.html">FROM clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="hints.html">USE clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="join.html">JOIN clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="nest.html">NEST clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="unnest.html">UNNEST clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="let.html">LET clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="where.html">WHERE clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="groupby.html">GROUP BY clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="union.html">UNION, INTERSECT, and EXCEPT</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="orderby.html">ORDER BY clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="limit.html">LIMIT clause</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="offset.html">OFFSET clause</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="update.html">UPDATE</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="updatestatistics.html">UPDATE STATISTICS</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="upsert.html">UPSERT</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../fts/full-text-intro.html">Search</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../fts/fts-performing-searches.html">Performing Searches</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../fts/fts-searching-from-the-ui.html">Searching from the UI</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../fts/fts-searching-with-the-rest-api.html">Searching with the REST API</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../fts/fts-demonstration-indexes.html">Demonstration Indexes</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../fts/fts-creating-indexes.html">Creating Indexes</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../fts/fts-using-analyzers.html">Understanding Analyzers</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../fts/fts-queries.html">Understanding Queries</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../fts/fts-query-types.html">Query Types</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../fts/query-string-queries.html">Query String Queries</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../fts/fts-geospatial-queries.html">Geospatial Queries</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../fts/fts-sorting.html">Sorting Query Results</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../fts/fts-response-object-schema.html">Handling Response Objects</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../fts/fts-troubleshooting.html">Troubleshooting and FAQs</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../eventing/eventing-overview.html">Eventing</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../eventing/eventing-Terminologies.html">Terminology</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../eventing/eventing-language-constructs.html">Language Constructs</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-timers.html">Timers</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-curl-spec.html">cURL</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../eventing/eventing-lifecycle.html">Eventing Lifecycle</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../eventing/eventing-examples.html">Examples: Using the Eventing Service</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-example-data-enrichment.html">Data Enrichment</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-cascade-delete.html">Cascade Delete</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-docexpiry.html">Document Expiry</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-delete-v-expiry.html">Delete v Expiry</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-docarchive.html">Document Archival</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-cancel-overwrite-timer.html">Cancel or Overwrite Timer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-recurring-timer.html">Recurring Timer</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-rest-via-curl-get.html">External REST via cURL GET</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-examples-high-risk.html">Risk Assessment</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../eventing/eventing-examples.html#examples-scriptlets">Examples: Terse Scriptlets</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-basicBucketOps.html">basicBucketOps</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-curl-get.html">basicCurlGet</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-curl-post.html">basicCurlPost</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-redactSharedData.html">redactSharedData</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-simpleFlatten.html">simpleFlatten</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-fixEmailDomains.html">fixEmailDomains</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-keepLastN.html">keepLastN</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-docControlledSelfExpiry.html">docControlledSelfExpiry</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-shippingNotifier.html">shippingNotifier</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-basicN1qlSelectStmt.html">basicN1qlSelectStmt</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-basicN1qlPreparedSelectStmt.html">basicN1qlPreparedSelectStmt</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-dateToEpochConversion.html">dateToEpochConversion</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-deepCloneAndModify.html">deepCloneAndModify</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-removeNullsAndEmptys.html">removeNullsAndEmptys</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-genericRename.html">genericRename</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-genericFlatten.html">genericFlatten</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-handler-fasterToLocalString.html">fasterToLocalString</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../eventing/eventing-debugging-and-diagnosability.html">Debugging and Diagnosability</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../eventing/eventing-statistics.html">Statistics</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../eventing/troubleshooting-best-practices.html">Troubleshooting and Best Practices</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../eventing/eventing-faq.html">Frequently Asked Questions</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Analytics</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../analytics/introduction.html">Introduction</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Using Analytics</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/run-query.html">Running Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/monitor.html">Monitoring Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/rest-analytics.html">Analytics REST API</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/rest-links.html">Links REST API</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/config.html">Configuration Parameters</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/query-params.html">Query Parameters</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/query-responses.html">Query Responses</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/error-codes.html">Error Codes</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../analytics/primer-beer.html">Tutorial</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">N1QL for Analytics Language Reference</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/1_intro.html">What&#8217;s N1QL for Analytics?</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/2_expr.html">Expressions</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/3_query.html">Queries</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/4_error.html">Errors</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/5_ddl.html">Data Definition Language (DDL)</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/6_n1ql.html">N1QL for Analytics vs. N1QL for Query</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/7_using_index.html">Using Indexes</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/8_builtin.html">Builtin Functions</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/9_data_type.html">Data Types</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/appendix_1_keywords.html">Appendix 1: Reserved Keywords</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/appendix_2_parameters.html">Appendix 2: Performance Tuning</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../analytics/appendix_3_resolution.html">Appendix 3: Variable Bindings and Name Resolution</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Install &amp; Upgrade</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../install/get-started.html">Deployment Options</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../install/plan-for-production.html">System Requirements</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-platforms.html">Supported Operating Systems</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/pre-install.html">System Resource Requirements</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-environments.html">Additional Requirements</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-ports.html">Network and Firewall Requirements</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../install/install-production-deployment.html">Deployment Guidelines</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/sizing-general.html">Sizing Guidelines</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/synchronize-clocks-using-ntp.html">Clock Synchronization Requirements</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/thp-disable.html">Disable THP</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-swap-space.html">Configure Kernel Swappiness</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-client-server.html">Client Deployment Strategies</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-security-bp.html">Security Considerations</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/server-processes.html">Couchbase Server Process List</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/best-practices-vm.html">VM and Container Guidelines</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/deployment-considerations-lt-3nodes.html">About Clusters with Fewer Than 3 Nodes</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../install/install-intro.html">Installation</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../install/install-linux.html">Install on Linux</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/rhel-suse-install-intro.html">Red Hat &amp; CentOS</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/ubuntu-debian-install.html">Ubuntu &amp; Debian</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/install_suse.html">SUSE Enterprise</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/install-oracle.html">Oracle Enterprise</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/amazon-linux2-install.html">Amazon Linux 2</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/non-root.html">Non-Root Install and Upgrade</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/rhel-multiple-instances.html">Install Multiple Instances</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-package-windows.html">Install on Windows</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/macos-install.html">Install on macOS</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/testing.html">Verify the Installation</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/startup-shutdown.html">Startup and Shutdown</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/install-uninstalling.html">Uninstall</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../cloud/couchbase-cloud-deployment.html">Cloud and Container Deployment</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">AWS</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cloud/couchbase-aws-marketplace.html">Deploy with AWS Marketplace</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cloud/aws-terraform.html">Deploy with Terraform</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Azure</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cloud/couchbase-azure-marketplace.html">Deploy with Azure Marketplace</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">GCP</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cloud/couchbase-gcp-cloud-launcher.html">Deploy with GCP Marketplace</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Kubernetes &amp; OpenShift</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#operator:ROOT:overview.adoc">Deploy with Autonomous Operator</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<span class="nav-text ">Docker</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../install/getting-started-docker.html">Install with Docker</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../install/upgrade.html">Upgrading Couchbase Server</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/upgrade-strategies.html">Upgrade Options</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/upgrade-online.html">Performing the Rolling Online Upgrade</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/upgrade-offline.html">Performing the Offline Upgrade</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/upgrade-individual-nodes.html">Performing the Single Node Upgrade</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/upgrade-to-ipv6.html">Upgrading IPv6 Clusters</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/upgrade-strategy-for-features.html">Upgrading to Couchbase Server 6.6</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<span class="nav-text ">Migrating</span>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/migration.html">Enabling Timestamp-based Conflict Resolution for Migrated Data</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/migrate-couchdb.html">Migrating from Apache CouchDB</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../install/migrate-mysql.html">Migrating from Relational Databases</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Integrate</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../connectors/intro.html">Connector Guides</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="#elasticsearch-connector::index.adoc">Elasticsearch Plug-in</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="#kafka-connector::index.adoc">Kafka Connector</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="#spark-connector::index.adoc">Spark Connector</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../connectors/odbc-jdbc-drivers.html">Couchbase ODBC and JDBC Drivers</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Reference</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../cli/cli-intro.html">CLI Reference</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../cli/cbanalyze-core-tool.html">cbanalyze-core</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="#cli:cbtools/cbbackup.adoc">cbbackup</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#cli:cbtools/guides/cbbackup-guide.adoc">Guide</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#cli:cbtools/cbbackupwrapper.adoc">cbbackupwrapper</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../cli/cbcollect-info-tool.html">cbcollect_info</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../cli/cbdocloader-tool.html">cbdocloader</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../cli/cbepctl-intro.html">cbepctl</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbepctl/set-checkpoint_param.html">set checkpoint_param</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbepctl/set-flush_param.html">set flush_param</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbepctl/set-tap_param.html">set tap_param</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../cli/cbft-bleve.html">cbft-bleve</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbft-bleve-moss.html">cbft-bleve: Moss Indexes</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbft-bleve-scorch.html">cbft-bleve: Scorch Indexes</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbft-bleve-zap.html">cbft-bleve: Zap Files</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#cli:cbcli/cblogredaction.adoc">cblogredaction</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../cli/cbq-tool.html">cbq</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#cli:cbtools/cbrecovery.adoc">cbrecovery</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="#cli:cbtools/cbrestore.adoc">cbrestore</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#cli:cbtools/guides/cbrestore-guide.adoc">Guide</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="#cli:cbtools/guides/cbrestore-rehash1-guide.adoc">rehash=1</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#cli:cbtools/cbrestorewrapper.adoc">cbrestorewrapper</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../cli/cbstats-intro.html">cbstats</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-all.html">all</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-allocator.html">allocator</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-checkpoint.html">checkpoint</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-collections.html">collections</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-collections-details.html">collections-details</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-config.html">config</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-dcp.html">dcp</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-dcpagg.html">dcpagg</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-dcp-vbtakeover.html">dcp-vbtakeover</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-diskinfo.html">diskinfo</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-dispatcher-job.html">dispatcher</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-durability-monitor.html">durability-monitor</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-failovers.html">failovers</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-hash.html">hash</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-items.html">items</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-key.html">key</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-kvstore.html">kvstore</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-kvtimings.html">kvtimings</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-memory.html">memory</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-prev-vbucket.html">prev-vbucket</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-raw.html">raw</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-reset.html">reset</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-responses.html">responses</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-runtimes.html">runtimes</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-scheduler.html">scheduler</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-scopes.html">scopes</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-scopes-details.html">scopes-details</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-slabs.html">slabs</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-tap-vbtakeover.html">tap-vbtakeover</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-tasks.html">tasks</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-timing.html">timings</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-uuid.html">uuid</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-vbucket.html">vbucket</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-vbucket-details.html">vbucket-details</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-vbucket-seqno.html">vbucket-seqno</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-vkey.html">vkey</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-warmup.html">warmup</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../cli/cbstats/cbstats-workload.html">workload</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#cli:cbtools/cbtransfer.adoc">cbtransfer</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="#cli:cbtools/cbworkloadgen.adoc">cbworkloadgen</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../cli/couchbase-server.html">couchbase-server</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../cli/mctimings.html">mctimings</a>
</span>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../rest-api/rest-intro.html">REST API Reference</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../rest-api/rest-endpoints-all.html">REST API endpoint list</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-cluster-intro.html">Cluster API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-provisioning.html">Creating a new cluster</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-get.html">Retrieving Cluster Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-details.html">Viewing Cluster Details</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-identify-orchestrator.html">Identifying the Orchestrator Node</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-addnodes.html">Adding Nodes to Clusters</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-joinnode.html">Joining Nodes into Clusters</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-removenode.html">Removing Nodes from Clusters</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="../../rest-api/rest-rebalance-overview.html">Rebalance API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-cluster-rebalance.html">Rebalancing the Cluster</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-get-rebalance-progress.html">Getting Rebalance Progress</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-configure-rebalance-retry.html">Configuring Rebalance Retries</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-get-rebalance-retry.html">Getting Rebalance-Retry Status</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-cancel-rebalance-retry.html">Canceling Rebalance Retries</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-limit-rebalance-moves.html">Limiting Concurrent vBucket Moves</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-get-internal-setting.html">Viewing Internal Settings</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-get-cluster-tasks.html">Getting Cluster Tasks</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="../../rest-api/rest-cluster-autofailover-intro.html">Managing Auto-Failover</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-cluster-autofailover-settings.html">Retrieving Auto-Failover Settings</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-cluster-autofailover-enable.html">Enabling and Disabling Auto-Failover</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-cluster-autofailover-reset.html">Resetting Auto-Failover</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-disable-query.html">Disabling Consistent View Query Results on Rebalance</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-email-notifications.html">Setting Email Notifications</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-cluster-query-settings.html">Cluster Query Settings API</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-server-nodes.html">Server Nodes API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-get-info.html">Getting Server Node Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-services.html">Enabling Couchbase Server Services</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-failover.html">Performing Hard Failover</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-recovery-incremental.html">Setting Recovery Type</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-failover-graceful.html">Performing Graceful Failover</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-hostname.html">Setting Hostnames</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-set-username.html">Setting Usernames and Passwords</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-memory-quota.html">Setting Memory Quota</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-reader-writer-thread-config.html">Setting Thread Allocations</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-node-index-path.html">Setting Storage Paths</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-getting-storage-information.html">Getting Storage Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-list-node-services.html">Listing Node Services</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-set-up-alternate-address.html">Managing Alternate Addresses</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-rza.html">Server Groups API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-servergroup-get.html">Getting Group Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-servergroup-post-create.html">Creating Groups</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-servergroup-post-add.html">Adding Nodes to Groups</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-servergroup-put.html">Renaming Groups</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-servergroup-put-membership.html">Updating Group Membership</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-servergroup-delete.html">Deleting Groups</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-bucket-intro.html">Buckets API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-bucket-create.html">Creating and Editing Buckets</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-buckets-summary.html">Getting all Bucket Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-bucket-info.html">Getting Single Bucket Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-retrieve-bucket-nodes.html">Listing Nodes by Bucket</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-bucket-stats.html">Getting Bucket Statistics</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-buckets-streamingURI.html">Getting Bucket Streaming URI</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-bucket-delete.html">Deleting Buckets</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-bucket-flush.html">Flushing Buckets</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-sample-buckets.html">Managing Sample Buckets</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/scopes-and-collections-api.html">Scopes and Collections API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/creating-a-scope.html">Creating a Scope</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/creating-a-collection.html">Creating a Collection</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/listing-scopes-and-collections.html">Listing Scopes and Collections</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/dropping-a-collection.html">Dropping a Collection</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/dropping-a-scope.html">Dropping a Scope</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/compaction-rest-api.html">Compaction API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-compact-post.html">Performing Compaction Manually</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-autocompact-global.html">Auto-Compaction: Global</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-autocompact-per-bucket.html">Auto-Compaction: Per Bucket</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../n1ql-rest-api/index.html">Query Service API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="../n1ql-rest-api/examplesrest.html">Examples</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exsuccessful.html">Successful request</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/expositional.html">Request with positional parameters</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exnamed.html">Request with Named Parameters</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/extimeout.html">Request Timeout</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exrequesterror.html">Request error</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exserviceerror.html">Service error</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exn1qlerror.html">N1QL error</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exunsupportedhttp.html">Unsupported HTTP method</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exauthhttp.html">Request with authentication - HTTP header</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../n1ql-rest-api/exauthrequest.html">Request with authentication - request parameter</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../n1ql-rest-api/admin.html">Admin REST API</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../n1ql-rest-api/functions.html">Functions REST API</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-index-service.html">Index Service API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/get-settings-indexes.html">Retrieve GSI Settings</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/post-settings-indexes.html">Set GSI Settings</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-index-stats.html">Index Statistics API</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/backup-rest-api.html">Backup Service API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-create-and-edit-plans.html">Create and Edit Plans</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-create-repository.html">Create a Repository</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-get-repository-info.html">Get Information on Repositories</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-get-plan-info.html">Get Information on Plans</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-get-task-info.html">Get Information on Tasks</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-pause-and-resume-tasks.html">Pause and Resume Tasks</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-examine-data.html">Examine Backed-Up Data</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-trigger-backup.html">Perform an Immediate Backup</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-trigger-merge.html">Perform an Immediate Merge</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-restore-data.html">Restore Data</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-delete-backups.html">Delete a Backup</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-archive-a-repository.html">Archive a Repository</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-import-repository.html">Import a Repository</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-delete-repository.html">Delete a Repository</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-delete-plan.html">Delete a Plan</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-get-cluster-info.html">Get Information on the Cluster</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/backup-manage-config.html">Manage Backup Configuration</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-fts.html">Search Service API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-fts-node.html">Node Configuration</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-fts-indexing.html">Indexes</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-fts-advanced.html">Advanced</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-fts-statistics.html">Getting Search Statistics</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../eventing/eventing-api.html">Eventing Service API</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../analytics/rest-analytics.html">Analytics Service API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="#analytics:rest-service.adoc">Analytics Service REST API</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="#analytics:rest-admin.adoc">Analytics Admin REST API</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="#analytics:rest-config.adoc">Analytics Config REST API</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../analytics/rest-links.html">Analytics Links REST API</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-views-intro.html">Views API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-ddocs-get.html">Getting Design Doc Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-ddocs-create.html">Creating Design Documents</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-ddocs-delete.html">Deleting Design Documents</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-views-get.html">Getting Views Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-views-requests.html">Limiting Views Requests</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-xdcr-intro.html">XDCR API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-create-replication.html">Creating XDCR Replications</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-get-ref.html">Getting a Destination Cluster Reference</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-create-ref.html">Setting Destination Cluster References</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-delete-ref.html">Deleting a Destination Cluster Reference</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-data-encrypt.html">Managing XDCR Data Encryption</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-delete-replication.html">Deleting XDCR Replications</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-adv-settings.html">Managing Advanced XDCR Settings</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-pause-resume.html">Pausing XDCR Replication Streams</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-xdcr-statistics.html">Getting XDCR Stats</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/logs-rest-api.html">Logs API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-logs-get.html">Retrieving Log Information</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-client-logs.html">Creating Client Logs</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<span class="in-toggle" data-depth="3"></span>
<a class="nav-link" href="../../rest-api/rest-security.html">Security API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-whoami.html">Who Am I?</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-auditing.html">Configure Auditing</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="../../rest-api/rest-authentication.html">Authentication API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-configure-ldap.html">Configure LDAP</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-configure-saslauthd.html">Configure saslauthd</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rest-set-password-policy.html">Set Password Policy</a>
</span>
</li>
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<span class="in-toggle" data-depth="5"></span>
<a class="nav-link" href="../../rest-api/rest-certificate-management.html">Certificate Management API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../rest-api/upload-retrieve-root-cert.html">Upload and Retrieve the Root Certificate</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../rest-api/upload-retrieve-node-cert.html">Upload and Retrieve a Node Certificate</a>
</span>
</li>
<li class="nav-item " data-depth="6">

<span class="nav-line "  data-depth="6">
<a class="nav-link" href="../../rest-api/rest-regenerate-all-certs.html">Regenerate All Certificates</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<span class="in-toggle" data-depth="4"></span>
<a class="nav-link" href="../../rest-api/rest-authorization.html">Authorization API</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="5">

<span class="nav-line "  data-depth="5">
<a class="nav-link" href="../../rest-api/rbac.html">Role-Based Access Control (RBAC)</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-setting-security.html">Manage Encryption Settings</a>
</span>
</li>
<li class="nav-item " data-depth="4">

<span class="nav-line "  data-depth="4">
<a class="nav-link" href="../../rest-api/rest-secret-mgmt.html">Secret Management API</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<span class="in-toggle" data-depth="1"></span>
<a class="nav-link" href="../../xdcr-reference/xdcr-reference-intro.html">XDCR Reference</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<a class="nav-link" href="../../xdcr-reference/xdcr-advanced-settings.html">Advanced Settings</a>
</span>
</li>
<li class="nav-item " data-depth="2">

<span class="nav-line "  data-depth="2">
<span class="in-toggle" data-depth="2"></span>
<a class="nav-link" href="../../xdcr-reference/xdcr-filtering-reference-intro.html">Filtering</a>
</span>
<ul class="nav-list">
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../xdcr-reference/xdcr-regular-expressions.html">Regular Expressions</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../xdcr-reference/xdcr-filtering-expressions.html">Filtering Expressions</a>
</span>
</li>
<li class="nav-item " data-depth="3">

<span class="nav-line "  data-depth="3">
<a class="nav-link" href="../../xdcr-reference/xdcr-filtering-data-type-conversion.html">Data-Type Conversion</a>
</span>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../audit-event-reference/audit-event-reference.html">Audit Event Reference</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../rebalance-reference/rebalance-reference.html">Rebalance Reference</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Release Notes &amp; Licenses</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../release-notes/relnotes.html">Release Notes</a>
</span>
</li>
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../third-party-licenses.html">Licenses for Third-Party Components</a>
</span>
</li>
</ul>
</li>
<li class="nav-item " data-depth="0">

<span class="nav-line "  data-depth="0">
<span class="in-toggle" data-depth="0"></span>
<span class="nav-text ">Contribute</span>
</span>
<ul class="nav-list">
<li class="nav-item  is-inactive " data-depth="1">

<span class="nav-line "  data-depth="1">
<a class="nav-link" href="../../../../home/contribute/index.html">Contribute to the Documentation</a>
</span>
</li>
</ul>
</li>
</ul>
</div>
<a href="#" class="menu-expand-toggle"> <span>Navigation</span> <i class="fas fa-times-circle"></i> <i class="fas fa-chevron-circle-left"></i></a>
</div></nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/n1ql/pages/n1ql-language-reference/groupby-aggregate-performance.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-banner">
<i class="fas fa-file-alt"></i> <p>You are viewing the documentation for a prerelease version.</p>
</div>
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">server</a></li>
<li class="crumb">Develop</li>
<li class="crumb"><a href="../query.html">Query</a></li>
<li class="crumb"><a href="../advanced.html">Advanced Features</a></li>
<li class="crumb"><a href="groupby-aggregate-performance.html">Group By and Aggregate Performance</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Group By and Aggregate Performance</h1>
<div class="labels">
<ul>
<li class="edition"><a href="https://www.couchbase.com/products/editions">enterprise edition</a></li>
</ul>
</div>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
N1QL Pushdowns optimize the performance of N1QL queries by supporting GROUP BY and Aggregate expressions.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Overview"><a class="anchor" href="#Overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This features improves performance of N1QL queries with aggregations and GROUP BY execution.</p>
</div>
<div class="paragraph">
<p>After the optimizer selects an index for a query block, it attempts the two optimizations below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pagination optimization, by pushing the OFFSET and LIMIT parameters to the index scan.</p>
</li>
<li>
<p>Grouping and aggregation pushdown to the indexer (introduced in Couchbase 5.5).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Prior to Couchbase 5.5, even when a query with aggregate and/or GROUP BY is covered by an index, the query fetched all relevant data from the indexer and group the data within the query engine.
With this enhancement, the query intelligently requests the indexer to perform grouping and aggregation in addition to range scan.
The Indexer has been enhanced to perform grouping, COUNT(), SUM(), MIN(), MAX(), AVG(), and related operations.</p>
</div>
<div class="paragraph">
<p>This requires no changes to the user query, but a good index design to cover the query and order the keys is required.
Not every query will benefit from this optimization, and not every index can accelerate every grouping and aggregation.
Understanding the right patterns will help you to design your indexes and queries.
Aggregate Pushdown to the global secondary index is supported on both storage engines: Standard GSI and Memory Optimized GSI (MOI).</p>
</div>
<div class="paragraph">
<p>This reduction step of performing the GROUP BY and Aggregation on the indexer reduces the amount of data transfer and disk I/O, resulting in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Improved query response time</p>
</li>
<li>
<p>Improved resource utilization</p>
</li>
<li>
<p>Low latency</p>
</li>
<li>
<p>High scalability</p>
</li>
<li>
<p>Low TCO</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, let&#8217;s compare the previous vs.
current performance of using GROUP BY and examine the EXPLAIN plan of the following query that is defined in the Couchbase <code>travel-sample</code> index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX `def_type` ON `travel-sample`(`type`)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consider the query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT type, COUNT(type)
FROM `travel-sample`
WHERE type IS NOT MISSING
GROUP BY type;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before Couchbase version 5.5, this query engine fetched relevant data from the indexer and group the data within the query engine and then aggregate.
This simple query takes about 250 ms.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_Ex0_QP_before55.png" alt="GBAP Ex0 QP before55">
</div>
</div>
<div class="paragraph">
<p>Now, in Couchbase version 5.5, this query use the same <code>def_type</code> index, but executes in under 70 ms.
In the explain below, you can see fewer steps and the lack of the grouping step after the index scan because the index scan step does the grouping and aggregation as well.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_Ex0_QP_after55.png" alt="GBAP Ex0 QP after55">
</div>
</div>
<div class="paragraph">
<p>As the data and query complexity grows, the performance benefit (both latency and throughput) will grow as well.</p>
</div>
<div class="paragraph">
<p>For example, consider the query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT type, COUNT(type)
FROM `travel-sample`
WHERE type IS NOT MISSING
GROUP BY type;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The text explain plan shows the accelerated aggregation details.
For details, see <a href="#section_bpf_wjf_ycb">Appx 1 - Query Plan Fields</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">...
        "index_group_aggs": {
          "aggregates": [
            {
              "aggregate": "COUNT",
              "expr": "1",
              "id": 2,
              "keypos": -1
            }
          ],
          "depends": [
            0
          ],
          "group": [
            {
              "depends": [
                0
              ],
              "expr": "cover ((`travel-sample`.`type`))",
              "id": 0,
              "keypos": 0
            }
          ]
        },
        "index_id": "c5bbb792c69c1704",
        "index_projection": {
          "entry_keys": [
            0,
            2
          ]
        },
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here’s is how this query executes when the indexer executes the GROUP BY and aggregation.
The query engine does not fetch any data from the data service (KV service), as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_55execution.png" alt="GBAP 55execution" width="700">
</div>
</div>
<div class="paragraph">
<p>For your reference, this is how the same query executed before 5.5.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_pre55execution.png" alt="GBAP pre55execution" width="700">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples-for-indexer-group-by-and-aggregation"><a class="anchor" href="#examples-for-indexer-group-by-and-aggregation"></a>Examples for Indexer GROUP BY and Aggregation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let’s consider a composite index to explore some scenarios:</p>
</div>
<div class="listingblock">
<div class="title">Example A</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_a ON `travel-sample` (geo.alt, geo.lat, geo.lon, id) WHERE type = "airport"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let’s consider sample queries that can benefit from this optimization and the queries that cannot.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Positive Case examples of queries that use indexing grouping and aggregation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>SELECT COUNT(*) FROM `travel-sample` WHERE geo.alt &gt; 10 AND type="airport";</code></p>
</li>
<li>
<p><code>SELECT COUNT(geo.alt) FROM `travel-sample` WHERE geo.alt BETWEEN 10 AND 30 AND type = "airport";</code></p>
</li>
<li>
<p><code>SELECT COUNT(geo.lat) FROM `travel-sample` WHERE geo.alt BETWEEN 10 AND 30 AND geo.lat = 40 AND type = "airport";</code></p>
</li>
<li>
<p><code>SELECT geo.alt, AVG(id), SUM(id), COUNT(geo.alt), MIN (geo.lon), MAX(ABS(geo.lon)) FROM `travel-sample` WHERE geo.alt &gt; 100 AND type = "airport" GROUP BY geo.alt;</code></p>
</li>
<li>
<p><code>SELECT lat_count, SUM(id) FROM `travel-sample` WHERE geo.alt &gt; 100 AND type = "airport" GROUP BY geo.alt LETTING lat_count = COUNT(geo.lat) HAVING lat_count &gt; 1;</code></p>
</li>
<li>
<p><code>SELECT AVG(DISTINCT geo.lat) FROM `travel-sample` WHERE geo.alt &gt; 100 AND type = "airport" GROUP BY geo.alt;</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Negative Case examples</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>SELECT COUNT(*) FROM `travel-sample` WHERE geo.lat &gt; 20 AND type = "airport";</code></p>
<div class="paragraph">
<p>This query has no predicate on the leading key <code>geo.alt</code>.
The index <code>idx_a</code> cannot be used.</p>
</div>
</li>
<li>
<p><code>SELECT COUNT(*) FROM `travel-sample`;</code></p>
<div class="paragraph">
<p>This query has no predicate at all.</p>
</div>
</li>
<li>
<p><code>SELECT COUNT(v1) FROM `travel-sample` LET v1 = ROUND(geo.lat) WHERE geo.lat &gt; 10 AND type = "airport";</code></p>
<div class="paragraph">
<p>The aggregate depends on <code>LET</code> variable.</p>
</div>
</li>
<li>
<p><code>SELECT ARRAY_AGG(geo.alt) FROM `travel-sample` WHERE geo.alt &gt; 10 AND type = "airport";</code></p>
<div class="paragraph">
<p><code>ARRAY_AGG</code> is not supported.</p>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="positive-query-examples-with-group-by-on-leading-index-keys"><a class="anchor" href="#positive-query-examples-with-group-by-on-leading-index-keys"></a>Positive query examples with GROUP BY on leading index keys</h3>
<div class="paragraph">
<p>Consider the following index:</p>
</div>
<div class="listingblock">
<div class="title">Example B</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_b ON `travel-sample`(geo.alt, geo.lat, geo.lon, id)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the following query, the GROUP BY keys <code>(geo.alt, geo.lat)</code> are the leading keys of the index, so the index is naturally ordered and grouped by the order of the index key definition.
Therefore, the query below is suitable for indexer to handle grouping and aggregation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT geo.alt, geo.lat, SUM(geo.lon), AVG(id), COUNT(DISTINCT geo.lon)
FROM `travel-sample`
WHERE geo.alt BETWEEN 10 AND 30
AND type = "airport"
GROUP BY geo.alt, geo.lat
HAVING SUM(geo.lon) &gt; 1000;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s the executed query plan showing that index scan handled grouping and aggregation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_ExB_Plan.png" alt="GBAP ExB Plan" width="70%">
</div>
</div>
</div>
<div class="sect2">
<h3 id="positive-query-examples-with-group-by-on-non-leading-index-keys"><a class="anchor" href="#positive-query-examples-with-group-by-on-non-leading-index-keys"></a>Positive query examples with GROUP BY on non-leading index keys</h3>
<div class="paragraph">
<p>Consider the following index and query:</p>
</div>
<div class="listingblock">
<div class="title">Example C</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_c ON `travel-sample`(geo.alt, geo.lat, geo.lon, id)
 WHERE type = "airport"

SELECT geo.lat, id, SUM(geo.lon)
FROM `travel-sample`
WHERE geo.alt BETWEEN 10 AND 30
AND type = "airport"
GROUP BY geo.lat, id
HAVING SUM(geo.lon) &gt; 1000;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is a bottom-up rendering of the execution plan for easier viewing.
In this case, the indexer sends partial group aggregation, which the query merges to create the final group and aggregation.
In this scenario (when the grouping is on non-leading keys), any query with aggregation and DISTINCT modifier cannot be accelerated by the indexer, such as <code>COUNT(DISTINCT id)</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_ExC_Plan.png" alt="GBAP ExC Plan" width="50%">
</div>
</div>
</div>
<div class="sect2">
<h3 id="positive-query-examples-on-array-indexes-with-group-by-on-leading-index-keys"><a class="anchor" href="#positive-query-examples-on-array-indexes-with-group-by-on-leading-index-keys"></a>Positive query examples on array indexes with GROUP BY on leading index keys</h3>
<div class="paragraph">
<p>Consider the following index and query:</p>
</div>
<div class="listingblock">
<div class="title">Example D</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_d ON `travel-sample` (geo.lat, geo.lon, DISTINCT public_likes, id) WHERE type = "hotel"

SELECT geo.lat, geo.lon, SUM(id), AVG(id)
FROM `travel-sample`
WHERE geo.lat BETWEEN 10 AND 30
 AND geo.lon &gt; 50
 AND type = "hotel"
 AND ANY v IN public_likes SATISFIES  v = “%a%” END
GROUP BY geo.lat, geo.lon
HAVING SUM(id) &gt; 100;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the predicates are on the leading keys up to and including the array key.
Therefore, indexer can efficiently do the grouping as seen by the optimal plan below.
It’s important to note the array index key is created with a <code>DISTINCT</code> modifier (not the <code>ALL</code> modifier) to get this optimization and that the <code>SATISFIES</code> clause in the <code>ANY</code> predicate must be that of equality (that is, <code>v = “%a%”</code>).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_ExD_Plan.png" alt="GBAP ExD Plan" width="70%">
</div>
</div>
<div class="paragraph">
<p>On the other hand, if there’s a predicate missing on <code>geo.lon</code>&#8201;&#8212;&#8201;which is prior to the array key&#8201;&#8212;&#8201;while using the same <code>idx_d</code> index as above, then the grouping is done by the old method:</p>
</div>
<div class="listingblock">
<div class="title">Example D2</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT geo.lat, geo.lon, SUM(id), AVG(id)
FROM `travel-sample`
WHERE geo.lat BETWEEN 10 AND 30
 AND type = "hotel"
 AND ANY v IN public_likes SATISFIES  v = “%a%” END
GROUP BY geo.lat, geo.lon
HAVING SUM(id) &gt; 100;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_ExD2_Plan.png" alt="GBAP ExD2 Plan">
</div>
</div>
<div class="paragraph">
<p>Consider the index and query:</p>
</div>
<div class="listingblock">
<div class="title">Example E</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_e ON `travel-sample` (ALL public_likes, geo.lat, geo.lon, id) WHERE type = "hotel"

SELECT un, t.geo.lat, COUNT(un), AVG(t.geo.lat)
FROM `travel-sample` AS t
 UNNEST t.public_likes AS un
WHERE un &gt; "J"
AND t.type = "hotel"
GROUP BY un, t.geo.lat;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the <code>UNNEST</code> operation can use the index because the leading <code>ALL</code> array key is the array being unwound.
Note, the unwound operation repeats the parent document (<code>travel-sample</code>) and the <code>t.geo.lat</code> reference would have duplicates compared to the original <code>travel-sample</code> documents.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_ExE_Plan.png" alt="GBAP ExE Plan" width="50%">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="query-qualification-and-pushdown"><a class="anchor" href="#query-qualification-and-pushdown"></a>Query Qualification and Pushdown</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Not every GROUP BY and aggregate query can be handled by the indexer.
Following are some simple rules that will help you to write the proper queries and design the required indexes to get the most of this feature.</p>
</div>
<div class="paragraph">
<p>The following are necessary in order for an indexer to execute GROUP BY and aggregates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All the query predicates are able to convert into ranges and able to push to indexer.</p>
</li>
<li>
<p>The whole query must be covered by an index.</p>
<div class="ulist">
<ul>
<li>
<p>For a query to be covered by an index, every attribute referenced in the query should be in one index.</p>
</li>
<li>
<p>Query should not have operations such as joins, subquery, or derived table queries.</p>
</li>
</ul>
</div>
</li>
<li>
<p>GROUP BY keys and Aggregate expressions must be one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>Index keys or document key</p>
</li>
<li>
<p>An expression based on index keys or document key</p>
</li>
</ul>
</div>
</li>
<li>
<p>GROUP BY and aggregate expressions must be simple.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scenarios-for-group-by-and-aggregation"><a class="anchor" href="#scenarios-for-group-by-and-aggregation"></a>Scenarios for Group By and Aggregation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Like any feature in a query language, there are subtle variations between each query and index that affects this optimization.
We use the <code>travel-sample</code> dataset to illustrate both positive and negative use cases.</p>
</div>
<div class="paragraph">
<p>The following table lists the scenarios and requirements for queries to request the indexer to do the grouping and acceleration.
When the requirements are unmet, the query will fetch the relevant data and then do the grouping and acceleration as usual.
No application changes are necessary.
The query plan generated reflects this decision.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">GROUP BY Scenarios</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#group-by-on-leading-keys">GROUP BY on leading keys</a></p>
</li>
<li>
<p><a href="#group-by-on-non-leading-keys">GROUP BY on non-leading keys</a></p>
</li>
<li>
<p><a href="#group-by-keys-in-different-order">GROUP BY keys in different CREATE INDEX order</a></p>
</li>
<li>
<p><a href="#group-by-on-expression">GROUP BY on expression</a></p>
</li>
<li>
<p><a href="#heterogeneous-data-types">Heterogeneous data types for GROUP BY key</a></p>
</li>
<li>
<p><a href="#group-by-meta-id">GROUP BY META().ID Primary Index</a></p>
</li>
<li>
<p><a href="#limit-with-group-by">LIMIT with GROUP BY on leading keys</a></p>
</li>
<li>
<p><a href="#offset-with-group-by">OFFSET with GROUP BY on leading keys</a></p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Aggregate Scenarios</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#aggregate-without-group-by">Aggregate without GROUP BY key</a></p>
</li>
<li>
<p><a href="#expression-in-aggregate-function">Expression in Aggregate function</a></p>
</li>
<li>
<p><a href="#sum-count-min-max-avg">SUM, COUNT, MIN, MAX, or AVG Aggregate functions</a></p>
</li>
<li>
<p><a href="#distinct-aggregates">DISTINCT aggregates</a></p>
</li>
<li>
<p><a href="#having-with-aggregate-function">HAVING with an aggregate function inside</a></p>
</li>
<li>
<p><a href="#letting-with-aggregate-function">LETTING with an aggregate function inside</a></p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="group-by-on-leading-keys"><a class="anchor" href="#group-by-on-leading-keys"></a>GROUP BY on leading keys</h3>
<div class="paragraph">
<p>One of the common cases is to have both predicates and GROUP BY on leading keys of the index.
First create the index so that the query is covered by the index.
You can then think about the order of the keys.</p>
</div>
<div class="paragraph">
<p>The query requires a predicate on leading keys to consider an index.
The simplest predicate is <code>IS NOT MISSING</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON Keyspace_ref (a, b, c);

SELECT a, b, Aggregate_Function(c)  <i class="conum" data-value="1"></i><b>(1)</b>
FROM Keyspace_ref
WHERE a IS NOT MISSING <i class="conum" data-value="2"></i><b>(2)</b>
GROUP BY a, b;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Where <code>Aggregate_Function(c)</code> is <code>MIN(c)</code>, <code>MAX(c)</code>, <code>COUNT(c)</code>, or <code>SUM(c)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>1st index field must be in a WHERE clause</td>
</tr>
</table>
</div>
<div id="ex1" class="exampleblock">
<div class="title">Example 1. List the cities with the landmarks with the highest latitude</div>
<div class="content">
<div class="paragraph">
<p>Use the <code>MAX()</code> aggregate to find the highest landmark latitude in each state, group the results by <code>country</code> and <code>state</code>, and then sort in reverse order by the highest latitudes per <code>state</code>.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx1 ON `travel-sample`(country, state, geo.lat)
WHERE type="landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT country, state, MAX(ROUND(geo.lat)) AS Max_Latitude
FROM `travel-sample`
WHERE country IS NOT MISSING
AND type = "landmark"
GROUP BY country, state
ORDER BY Max_Latitude DESC;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this query, we need to give the predicate <code>country IS NOT MISSING</code> (or any WHERE clause) to ensure this index is selected for the query.
Without a matching predicate, the query will use the primary index.</p>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Max_Latitude": 60,
    "country": "United Kingdom",
    "state": null
  },
  {
    "Max_Latitude": 51,
    "country": "United Kingdom",
    "state": "England"
  },
  {
    "Max_Latitude": 50,
    "country": "France",
    "state": "Picardie"
  },
...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Explain Plan</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "plan": {
    "#operator": "Sequence",
    "~children": [
      {
        "#operator": "Sequence",
        "~children": [
          {
            "#operator": "IndexScan3",
            "covers": [
              "cover ((`travel-sample`.`country`))",
              "cover ((`travel-sample`.`state`))",
              "cover (((`travel-sample`.`geo`).`lat`))",
              "cover ((meta(`travel-sample`).`id`))",
              "cover (count(cover ((`travel-sample`.`country`))))",
              "cover (min(round(cover (((`travel-sample`.`geo`).`lat`)))))"
            ],
            "filter_covers": {
              "cover ((`travel-sample`.`type`))": "landmark"
            },
            "index": "idx1",
            "index_group_aggs": {
              "aggregates": [
                {
                  "aggregate": "MAX",
                  "depends": [
                    2
                  ],
                  "expr": "round(cover (((`travel-sample`.`geo`).`lat`)))",
                  "id": 4,
                  "keypos": -1
                }
              ],
              "depends": [
                0,
                1,
                2
              ],
              "group": [
                {
                  "depends": [
                    0
                  ],
                  "expr": "cover ((`travel-sample`.`country`))",
                  "id": 0,
                  "keypos": 0
                },
                {
                  "depends": [
                    1
                  ],
                  "expr": "cover ((`travel-sample`.`state`))",
                  "id": 1,
                  "keypos": 1
                }
              ]
            },
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The EXPLAIN Plan shows that <code>GROUP BY</code> is executed by the indexer.
This is detailed in <a href="#table_bw2_nrf_ycb">Table 2</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="group-by-on-non-leading-keys"><a class="anchor" href="#group-by-on-non-leading-keys"></a>GROUP BY on non-leading keys</h3>
<div class="paragraph">
<p>When using GROUP BY on a non-leading key:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The indexer will return <em>pre-aggregated</em> results.</p>
</li>
<li>
<p>Results can have duplicate or out-of-order groups.
The N1QL indexer will do 2nd level of aggregation and compute the final result.</p>
</li>
<li>
<p>The N1QL indexer can pushdown only if the leading key has a predicate.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use Aggregate Pushdown, use the following syntax for the index and query statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON Keyspace_ref (a, b, c);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Syntax A</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT Aggregate_Function(a), b, Aggregate_Function(c)
FROM Keyspace_ref
WHERE a IS NOT MISSING
GROUP BY b;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Syntax B</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT Aggregate_Function(a), Aggregate_Function(b), c
FROM Keyspace_ref
WHERE a IS NOT MISSING
GROUP BY c;</code></pre>
</div>
</div>
<div id="ex2-a" class="exampleblock">
<div class="title">Example 2. List the states with their total number of landmarks and the lowest latitude of any landmark</div>
<div class="content">
<div class="paragraph">
<p>Use the <code>COUNT()</code> operator to find the total number of landmarks and use the <code>MIN()</code> operator to find the lowest landmark latitude in each state, group the results by <code>state</code>, and then sort in order by the lowest latitudes per <code>state</code>.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx2 ON `travel-sample`(country, state, ROUND(geo.lat))
WHERE type="landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(country) AS Total_landmarks, state, MIN(ROUND(geo.lat)) AS Min_Latitude
FROM `travel-sample`
WHERE country IN ["France", "United States", "United Kingdom"]
AND type = "landmark"
GROUP BY state
ORDER BY Min_Latitude;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Explain Plan</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "plan": {
    "#operator": "Sequence",
    "~children": [
      {
        "#operator": "Sequence",
        "~children": [
          {
            "#operator": "IndexScan3",
            "covers": [
              "cover ((`travel-sample`.`country`))",
              "cover ((`travel-sample`.`state`))",
              "cover (((`travel-sample`.`geo`).`lat`))",
              "cover ((meta(`travel-sample`).`id`))",
              "cover (count(cover ((`travel-sample`.`country`))))",
              "cover (min(round(cover (((`travel-sample`.`geo`).`lat`)))))"
            ],
            "filter_covers": {
              "cover ((`travel-sample`.`type`))": "landmark"
            },
            "index": "idx2",
            "index_group_aggs": {
              "aggregates": [
                {
                  "aggregate": "COUNT",
                  "depends": [
                    0
                  ],
                  "expr": "cover ((`travel-sample`.`country`))",
                  "id": 4,
                  "keypos": 0
                },
                {
                  "aggregate": "MIN",
                  "depends": [
                    2
                  ],
                  "expr": "round(cover (((`travel-sample`.`geo`).`lat`)))",
                  "id": 5,
                  "keypos": -1
                }
              ],
              "depends": [
                0,
                1,
                2
              ],
              "group": [
                {
                  "depends": [
                    1
                  ],
                  "expr": "cover ((`travel-sample`.`state`))",
                  "id": 1,
                  "keypos": 1
                }
              ],
              "partial": true <i class="conum" data-value="1"></i><b>(1)</b>
            },
...</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_Ex2A_EP.png" alt="GBAP Ex2A EP">
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Min_Latitude": 33,
    "Total_landmarks": 1900,
    "state": "California"
  },
  {
    "Min_Latitude": 41,
    "Total_landmarks": 8,
    "state": "Corse"
  },
  {
    "Min_Latitude": 43,
    "Total_landmarks": 6,
    "state": "Languedoc-Roussillon"
  },
...</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>"partial": true</code> line means it was pre-aggregated.</td>
</tr>
</table>
</div>
<div id="ex2-b" class="exampleblock">
<div class="title">Example 3. List the number of landmarks by latitude and the state it&#8217;s in</div>
<div class="content">
<div class="paragraph">
<p>Use <code>COUNT(country)</code> for the total number of landmarks at each latitude.
At a particular latitude, the <code>state</code> will be the same; but an aggregate function on it is needed, so <code>MIN()</code> or <code>MAX()</code> is used to return the original value.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(country) Num_Landmarks, MIN(state) State_Name, ROUND(geo.lat) Latitude
FROM `travel-sample`
WHERE country IS NOT MISSING
AND type = "landmark"
GROUP BY ROUND(geo.lat)
ORDER BY ROUND(geo.lat);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Latitude": 33,
    "Num_Landmarks": 227,
    "State_Name": "California"
  },
  {
    "Latitude": 34,
    "Num_Landmarks": 608,
    "State_Name": "California"
  },
  {
    "Latitude": 35,
    "Num_Landmarks": 27,
    "State_Name": "California"
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="group-by-keys-in-different-order"><a class="anchor" href="#group-by-keys-in-different-order"></a>GROUP BY keys in different CREATE INDEX order</h3>
<div class="paragraph">
<p>When using GROUP BY on keys in a different order than they appear in the CREATE INDEX statement, use the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON Keyspace_ref(a, b, c);

SELECT Aggregate_Function(c)
FROM Keyspace_ref
WHERE a IS NOT MISSING
GROUP BY b, a;</code></pre>
</div>
</div>
<div id="ex3" class="exampleblock">
<div class="title">Example 4. List the landmarks with the lowest longitude</div>
<div class="content">
<div class="paragraph">
<p>Like <a href="#ex1">Example 1</a> with the GROUP BY fields swapped.</p>
</div>
<div class="paragraph">
<p>Use the <code>MIN()</code> operator to find the lowest landmark longitude in each city, group the results by <code>activity</code> and <code>city</code>, and then sort in reverse order by the lowest longitudes per <code>activity</code>.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx3 ON `travel-sample`(activity, city, geo.lon)
WHERE type="landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT activity, city, MIN(ROUND(geo.lon)) AS Max_Longitude
FROM `travel-sample`
WHERE country IS NOT MISSING
AND type = "landmark"
GROUP BY activity, city
ORDER BY Min_Longitude;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Min_Longitude": -124,
    "activity": "buy",
    "city": "Eureka"
  },
  {
    "Min_Longitude": -123,
    "activity": "drink",
    "city": "Glen Ellen"
  },
  {
    "Min_Longitude": -123,
    "activity": "do",
    "city": "Santa Rosa"
  },
  {
    "Min_Longitude": -123,
    "activity": "eat",
    "city": "Moss Beach"
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="group-by-on-expression"><a class="anchor" href="#group-by-on-expression"></a>GROUP BY on expression</h3>
<div class="paragraph">
<p>When grouping on an expression or operation, the indexer will return pre-aggregated results whenever the GROUP BY and leading index keys are not an exact match.</p>
</div>
<div class="paragraph">
<p>To use Aggregate Pushdown and avoid pre-aggregated results, use one of the two following syntaxes for the index and query statements:</p>
</div>
<div class="listingblock">
<div class="title">Syntax A: Field with an expression&#8201;&#8212;&#8201;GROUP BY and Index keys match</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON Keyspace_ref(a+b, b, c);

SELECT Aggregate_Function(c)
FROM Keyspace_ref
WHERE a IS NOT MISSING
GROUP BY a+b;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Syntax B: Operation on a field&#8201;&#8212;&#8201;GROUP BY and Index keys match</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_operation ON Keyspace_ref (LOWER(a), b, c);

SELECT Aggregate_Function(c)
FROM Keyspace_ref
WHERE a IS NOT MISSING
GROUP BY LOWER(a);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For comparison, the below index and query combination will yield pre-aggregated results.</p>
</div>
<div class="listingblock">
<div class="title">Pre-aggregated Syntax&#8201;&#8212;&#8201;the GROUP BY and Index keys don&#8217;t match</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_operation ON Keyspace_ref (a, b, c);

SELECT Aggregate_Function(c)
FROM Keyspace_ref
WHERE a IS NOT MISSING
GROUP BY UPPER(a);</code></pre>
</div>
</div>
<div id="ex4-a" class="exampleblock">
<div class="title">Example 5. A field with an expression</div>
<div class="content">
<div class="paragraph">
<p>Let&#8217;s say the distance of a flight feels like "nothing" when it&#8217;s direct, but feels like the true distance when there is one layover.
Then we can list and group by flight distances by calculating the distance multiplied by the stops it makes.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx4_expr
ON `travel-sample`(ROUND(distance*stops), ROUND(distance), sourceairport)
WHERE type="route";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT ROUND(distance*stops) AS Distance_Feels_Like,
       MAX(ROUND(distance)) AS Distance_True,
       COUNT(sourceairport) Number_of_Airports
FROM `travel-sample`
WHERE ROUND(distance*stops) IS NOT MISSING
AND type = "route"
GROUP BY ROUND(distance*stops);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Explain Plan</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">...
        "index_group_aggs": {
          "aggregates": [
            {
              "aggregate": "COUNT",
              "depends": [
                2
              ],
              "expr": "cover ((`travel-sample`.`sourceairport`))",
              "id": 4,
              "keypos": 2
            },
            {
              "aggregate": "MAX",
              "depends": [
                1
              ],
              "expr": "cover (round((`travel-sample`.`distance`)))",
              "id": 5,
              "keypos": 1
            }
          ],
          "depends": [
            0,
            1,
            2
          ],
          "group": [
            {
              "depends": [
                0
              ],
              "expr": "cover (round(((`travel-sample`.`distance`) * (`travel-sample`.`stops`))))",
              "id": 0,
              "keypos": 0
            }
          ]
...</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_Ex4A_VP.png" alt="GBAP Ex4A VP" width="50%">
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Distance_Feels_Like": 1055,
    "Distance_True": 1055,
    "Number_of_Airports": 1
  },
  {
    "Distance_Feels_Like": 1806,
    "Distance_True": 1806,
    "Number_of_Airports": 2
  },
  {
    "Distance_Feels_Like": 0,
    "Distance_True": 13808,
    "Number_of_Airports": 24018
  },
...</code></pre>
</div>
</div>
</div>
</div>
<div id="ex4-b" class="exampleblock">
<div class="title">Example 6. An operation on a field</div>
<div class="content">
<div class="paragraph">
<p>Let&#8217;s say the distance of a flight feels like "nothing" when it&#8217;s direct, but feels like the true distance when there is one layover.
Then we can list and group by the uppercase of the airport codes and listing the flight distances by calculating the distance multiplied by the stops it makes along with the total distance.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx4_oper
ON `travel-sample`(sourceairport, ROUND(distance*stops), distance)
WHERE type="route";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT UPPER(sourceairport) AS Airport_Code,
       MIN(ROUND(distance*stops)) AS Distance_Feels_Like,
       SUM(ROUND(distance)) AS Total_Distance
FROM `travel-sample`
WHERE sourceairport IS NOT MISSING
AND type = "route"
GROUP BY UPPER(sourceairport);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Airport_Code": "ESU",
    "Distance_Feels_Like": 0,
    "Total_Distance": 6223
  },
  {
    "Airport_Code": "QSF",
    "Distance_Feels_Like": 0,
    "Total_Distance": 3285
  },
  {
    "Airport_Code": "LHW",
    "Distance_Feels_Like": 0,
    "Total_Distance": 13837
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="heterogeneous-data-types"><a class="anchor" href="#heterogeneous-data-types"></a>Heterogeneous data types for GROUP BY key</h3>
<div class="paragraph">
<p>When a field has a mix of data types for the GROUP BY key:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NULLS</code> and <code>MISSING</code> are two separate groups.</p>
</li>
</ul>
</div>
<div id="ex5" class="exampleblock">
<div class="title">Example 7. Heterogeneous data types</div>
<div class="content">
<div class="paragraph">
<p>To see a separate grouping of <code>MISSING</code> and <code>NULL</code>, we need to <code>GROUP BY</code> a field we know exists in one document but not in another document while both documents have another field in common.</p>
</div>
<div class="listingblock">
<div class="title">Create Documents</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">INSERT INTO `travel-sample` VALUES("01",{"type":1, "email":"abc","xx":3});
INSERT INTO `travel-sample` VALUES("01",{"type":1, "email":"abc","xx":null});
INSERT INTO `travel-sample` VALUES("02",{"type":1, "email":"abcd"});</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT type, xx, MIN(email) AS Min_Email
FROM `travel-sample`
WHERE type IS NOT NULL
GROUP BY type, xx;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Min_Email": "abc",
    "type": 1,
    "xx": 3
  },
  {
    "Min_Email": "abc",
    "type": 1,
    "xx": null
  },
  {
    "Min_Email": "abcd",
    "type": 1 <i class="conum" data-value="1"></i><b>(1)</b>
  },
  {
    "Min_Email": null,
    "type": "airline"
  },
...</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is a separate result since field <code>xx</code> is MISSING</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="group-by-meta-id"><a class="anchor" href="#group-by-meta-id"></a>GROUP BY META().ID Primary Index</h3>
<div class="paragraph">
<p>If there is no filter, then pushdown is supported for an expression on the Document ID <code>META().id</code> in the <code>GROUP BY</code> clause.</p>
</div>
<div class="paragraph">
<p>To use Aggregate Pushdown, use the following syntax for the index and query statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE PRIMARY INDEX idx_expr ON named_keyspace_ref;

SELECT COUNT(1)
FROM named_keyspace_ref
GROUP BY SUBSTR(META().id, 0, 10);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If there is a filter on the Document ID, then the primary index can be used as a secondary scan.
</td>
</tr>
</table>
</div>
<div id="ex6" class="exampleblock">
<div class="title">Example 8. List the number of countries that are in each decile of the <code>META().id</code> field</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE PRIMARY INDEX idx6 ON `travel-sample`;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(1) AS Cnt, SUBSTR(META().id,0,9) AS Meta_Group
FROM `travel-sample`
GROUP BY SUBSTR(META().id,0,9);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Meta_Group": "airport_9",
    "Number_of_Country": 121
  },
  {
    "Meta_Group": "airport_1",
    "Number_of_Country": 187
  },
  {
    "Meta_Group": "airport_3",
    "Number_of_Country": 482
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="limit-with-group-by"><a class="anchor" href="#limit-with-group-by"></a>LIMIT with GROUP BY on leading keys</h3>
<div class="paragraph">
<p>To use Aggregate Pushdown when there is a LIMIT clause and a GROUP BY clause on one or more leading keys, use the following example of the index and query statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (k0, k1);

SELECT k0, COUNT(k1)
FROM named_keyspace_ref
WHERE k0 IS NOT MISSING
GROUP BY k0
LIMIT n;</code></pre>
</div>
</div>
<div id="ex7" class="exampleblock">
<div class="title">Example 9. LIMIT with GROUP BY on the leading key</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx7 ON `travel-sample` (city, name)
WHERE type = "landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT city AS City, COUNT(DISTINCT name) AS Landmark_Count
FROM `travel-sample`
WHERE city IS NOT MISSING
AND type = "landmark"
GROUP BY city
LIMIT 4;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Explain Plan</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "plan": {
    "#operator": "Sequence",
    "~children": [
      {
        "#operator": "Sequence",
        "~children": [
          {
            "#operator": "IndexScan3",
            "covers": [
              "cover ((`travel-sample`.`city`))",
              "cover ((`travel-sample`.`name`))",
              "cover ((meta(`travel-sample`).`id`))",
              "cover (count(distinct cover ((`travel-sample`.`name`))))"
            ],
            "filter_covers": {
              "cover ((`travel-sample`.`type`))": "landmark"
            },
            "index": "idx7",
            "index_group_aggs": {
              "aggregates": [
                {
                  "aggregate": "COUNT",
                  "depends": [
                    1
                  ],
                  "distinct": true,
                  "expr": "cover ((`travel-sample`.`name`))",
                  "id": 3,
                  "keypos": 1
                }
              ],
              "depends": [
                0,
                1
              ],
              "group": [
                {
                  "depends": [
                    0
                  ],
                  "expr": "cover ((`travel-sample`.`city`))",
                  "id": 0,
                  "keypos": 0
                }
              ]
            },
            "index_id": "7852b5e2c07281f3",
            "index_projection": {
              "entry_keys": [
                0,
                3
              ]
            },
            "keyspace": "travel-sample",
            "limit": "4", <i class="conum" data-value="1"></i><b>(1)</b>
            "namespace": "default",
...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "City": null,
    "Landmark_Count": 15
  },
  {
    "City": "Abbeville",
    "Landmark_Count": 1
  },
  {
    "City": "Abbots Langley",
    "Landmark_Count": 19
  },
  {
    "City": "Aberdeenshire",
    "Landmark_Count": 6
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>limit</code> is pushed to the indexer because the GROUP BY key matched with the leading index key.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="offset-with-group-by"><a class="anchor" href="#offset-with-group-by"></a>OFFSET with GROUP BY on leading keys</h3>
<div class="paragraph">
<p>To use Aggregate Pushdown when there is an OFFSET clause and a GROUP BY clause on one or more leading keys, use the following example of the index and query statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (k0, k1);

SELECT k0, COUNT(k1)
FROM named_keyspace_ref
WHERE k0 IS NOT MISSING
GROUP BY k0
OFFSET n;</code></pre>
</div>
</div>
<div id="ex8" class="exampleblock">
<div class="title">Example 10. OFFSET with GROUP BY on a leading key</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx8 ON `travel-sample` (city, name)
WHERE type = "landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT city AS City, COUNT(DISTINCT name) AS Landmark_Count
FROM `travel-sample`
WHERE city IS NOT MISSING
AND type = "landmark"
GROUP BY city
OFFSET 4;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Explain Plan</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "plan": {
    "#operator": "Sequence",
    "~children": [
      {
        "#operator": "Sequence",
        "~children": [
          {
            "#operator": "IndexScan3",
            "covers": [
              "cover ((`travel-sample`.`city`))",
              "cover ((`travel-sample`.`name`))",
              "cover ((meta(`travel-sample`).`id`))",
              "cover (count(distinct cover ((`travel-sample`.`name`))))"
            ],
            "filter_covers": {
              "cover ((`travel-sample`.`type`))": "landmark"
            },
            "index": "idx7",
            "index_group_aggs": {
              "aggregates": [
                {
                  "aggregate": "COUNT",
                  "depends": [
                    1
                  ],
                  "distinct": true,
                  "expr": "cover ((`travel-sample`.`name`))",
                  "id": 3,
                  "keypos": 1
                }
              ],
              "depends": [
                0,
                1
              ],
              "group": [
                {
                  "depends": [
                    0
                  ],
                  "expr": "cover ((`travel-sample`.`city`))",
                  "id": 0,
                  "keypos": 0
                }
              ]
            },
            "index_id": "7852b5e2c07281f3",
            "index_projection": {
              "entry_keys": [
                0,
                3
              ]
            },
            "keyspace": "travel-sample",
            "namespace": "default",
            "offset": "4", <i class="conum" data-value="1"></i><b>(1)</b>
            "spans": [
...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "City": "Aberdour",
    "Landmark_Count": 4
  },
  {
    "City": "Aberdulais",
    "Landmark_Count": 1
  },
  {
    "City": "Abereiddy",
    "Landmark_Count": 1
  },
  {
    "City": "Aberfeldy",
    "Landmark_Count": 2
  },
...</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>offset</code> is pushed to the indexer because the GROUP BY key matched with the leading index key.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="aggregate-without-group-by"><a class="anchor" href="#aggregate-without-group-by"></a>Aggregate without GROUP BY key</h3>
<div class="paragraph">
<p>This is a case of aggregation over a range without groups.
If the index can be used for computing the aggregate, the indexer will return a single aggregate value.
To use Aggregate Pushdown, use the following syntax for index and queries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (a, b, c);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Q1</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT Aggregate_Function(c)
FROM named_keyspace_ref
WHERE a IS NOT MISSING;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Q2</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(a)
FROM named_keyspace_ref
WHERE a IS NOT MISSING;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Q3</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(a), COUNT(a), MIN(a)
FROM named_keyspace_ref
WHERE a IS NOT MISSING;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Q4</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(a), COUNT(b), MIN(c)
FROM named_keyspace_ref
WHERE a IS NOT MISSING;</code></pre>
</div>
</div>
<div id="ex9-q1" class="exampleblock">
<div class="title">Example 11. Multiple Aggregate without GROUP BY key&#8201;&#8212;&#8201;Q1</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx9
ON `travel-sample`(ROUND(distance), stops, sourceairport)
WHERE type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(ROUND(distance)) AS Total_Distance,
       SUM(stops) AS Total_Stops,
       COUNT(sourceairport) AS Total_Airports
FROM `travel-sample`
WHERE distance IS NOT MISSING
AND type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Total_Airports": 24024,
    "Total_Distance": 53538071,
    "Total_Stops": 6
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex9-q2" class="exampleblock">
<div class="title">Example 12. Aggregate without GROUP BY key&#8201;&#8212;&#8201;Q2</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(ROUND(distance)) AS Total_Distance
FROM `travel-sample`;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Total_Distance": 53538071
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex9-q3" class="exampleblock">
<div class="title">Example 13. Multiple Aggregate without GROUP BY key&#8201;&#8212;&#8201;Q3</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(ROUND(distance)) AS Total_Distance,
       COUNT(ROUND(distance)) AS Count_of_Distance,
       MIN(ROUND(distance)) AS Min_of_Distance
FROM `travel-sample`
WHERE distance IS NOT MISSING;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Count_of_Distance": 24024,
    "Min_of_Distance": 3,
    "Total_Distance": 53538071
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex9-q4" class="exampleblock">
<div class="title">Example 14. Multiple Aggregate without GROUP BY key&#8201;&#8212;&#8201;Q4</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(ROUND(distance)) AS Total_Distance,
       COUNT(stops) AS Count_of_Stops,
       MIN(sourceairport) AS Min_of_Airport
FROM `travel-sample`
WHERE distance IS NOT MISSING;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Count_of_Stops": 24024,
    "Min_of_Airport": "AAE",
    "Total_Distance": 53538071
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="expression-in-aggregate-function"><a class="anchor" href="#expression-in-aggregate-function"></a>Expression in Aggregate function</h3>
<div class="paragraph">
<p>Aggregations with scalar expressions can be speeded up even if the index key does not have the matching expression on the key.
To use Aggregate Pushdown, use the following syntax for the index and query statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (a,b,c);

SELECT Aggregate_Function1(Expression(c))
FROM named_keyspace_ref
WHERE a IS NOT MISSING
GROUP BY a,b;</code></pre>
</div>
</div>
<div id="ex10" class="exampleblock">
<div class="title">Example 15. List the landmarks with the highest latitude</div>
<div class="content">
<div class="paragraph">
<p>Use the <code>MAX()</code> operator to find the highest landmark latitude in each state, group the results by <code>country</code> and <code>state</code>, and then sort in reverse order by the highest latitudes.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx10 ON `travel-sample`(country, state, ABS(ROUND(geo.lat)))
WHERE type="landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT country, state, SUM(ABS(ROUND(geo.lat))) AS SumAbs_Latitude
FROM `travel-sample`
WHERE country IS NOT MISSING
AND type = "landmark"
GROUP BY country, state
ORDER BY SumAbs_Latitude DESC;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Explain Plan</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "plan": {
    "#operator": "Sequence",
    "~children": [
      {
        "#operator": "Sequence",
        "~children": [
          {
            "#operator": "IndexScan3",
            "covers": [
              "cover ((`travel-sample`.`country`))",
              "cover ((`travel-sample`.`state`))",
              "cover (abs(round(((`travel-sample`.`geo`).`lat`))))",
              "cover ((meta(`travel-sample`).`id`))",
              "cover (sum(cover (abs(round(((`travel-sample`.`geo`).`lat`))))))"
            ],
            "filter_covers": {
              "cover ((`travel-sample`.`type`))": "landmark"
            },
            "index": "idx10",
            "index_group_aggs": {
              "aggregates": [
                {
                  "aggregate": "SUM",
                  "depends": [
                    2
                  ],
                  "expr": "cover (abs(round(((`travel-sample`.`geo`).`lat`))))",
                  "id": 4,
                  "keypos": 2
                }
              ],
              "depends": [
                0,
                1,
                2
              ],
              "group": [
                {
                  "depends": [
                    0
                  ],
                  "expr": "cover ((`travel-sample`.`country`))",
                  "id": 0,
                  "keypos": 0
                },
                {
                  "depends": [
                    1
                  ],
                  "expr": "cover ((`travel-sample`.`state`))",
                  "id": 1,
                  "keypos": 1
                }
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Explain Plan shows that Aggregates are executed by the indexer.
This is detailed in <a href="#docs-internal-guid-facfdbc0-bb3d-b00f-2ec0-6bee4921dabc">Table 3</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/GBAP_Ex10_VP.png" alt="GBAP Ex10 VP" width="70%">
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "SumAbs_Latitude": 117513,
    "country": "United Kingdom",
    "state": null
  },
  {
    "SumAbs_Latitude": 68503,
    "country": "United States",
    "state": "California"
  },
  {
    "SumAbs_Latitude": 10333,
    "country": "France",
    "state": "Île-de-France"
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sum-count-min-max-avg"><a class="anchor" href="#sum-count-min-max-avg"></a>SUM, COUNT, MIN, MAX, or AVG Aggregate functions</h3>
<div class="paragraph">
<p>Currently, the only aggregate functions that are supported are SUM(), COUNT(), MIN(), MAX(), and AVG() with or without the DISTINCT modifier.</p>
</div>
<div class="paragraph">
<p>To use Aggregate Pushdown, use the below syntax for the index and query statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (a,b,c,d);

SELECT Aggregate_Function(a), Aggregate_Function(b),
       Aggregate_Function(c), Aggregate_Function(d)
FROM named_keyspace_ref
WHERE a IS NOT MISSING
GROUP BY a;</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 16. Aggregate functions</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx11 ON `travel-sample`(ROUND(geo.lat), geo.alt, city, ROUND(geo.lon))
       WHERE type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT MIN(ROUND(geo.lat)) AS Min_Lat,
       SUM(geo.alt) AS Sum_Alt,
       COUNT(city) AS Count_City,
       MAX(ROUND(geo.lon)) AS Max_Lon
FROM `travel-sample`
WHERE geo.lat IS NOT MISSING
AND type = "airport"
GROUP BY (ROUND(geo.lat))
ORDER BY (ROUND(geo.lat)) DESC;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Count_City": 1,
    "Max_Lon": 43,
    "Min_Lat": 72,
    "Sum_Alt": 149
  },
  {
    "Count_City": 3,
    "Max_Lon": -157,
    "Min_Lat": 71,
    "Sum_Alt": 120
  },
  {
    "Count_City": 6,
    "Max_Lon": -144,
    "Min_Lat": 70,
    "Sum_Alt": 292
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="distinct-aggregates"><a class="anchor" href="#distinct-aggregates"></a>DISTINCT aggregates</h3>
<div class="paragraph">
<p>There are four cases when DISTINCT aggregates can use this feature:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the DISTINCT aggregate is on the leading GROUP BY key(s).</p>
</li>
<li>
<p>If the DISTINCT aggregate is on the leading GROUP By key(s) + 1 (the immediate next key).</p>
</li>
<li>
<p>If the DISTINCT aggregate is on a constant expression (GROUP BY can be on any key).</p>
</li>
<li>
<p>If there is no GROUP BY and the DISTINCT aggregate is on the first key only or in a constant expression.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To use Aggregate Pushdown, use one of the following syntaxes of the index and query statements:</p>
</div>
<div class="sect3">
<h4 id="case-1"><a class="anchor" href="#case-1"></a>Case 1</h4>
<div class="paragraph">
<p>If the DISTINCT aggregate is on the leading GROUP BY key(s).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (a, b, c);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Syntax A</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(DISTINCT a)
FROM named_keyspace_ref
WHERE a IS NOT MISSING
GROUP BY a;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Syntax B</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(DISTINCT a), SUM(DISTINCT b)
FROM named_keyspace_ref
WHERE a IS NOT MISSING
GROUP BY a, b;</code></pre>
</div>
</div>
<div id="ex12-1-a" class="exampleblock">
<div class="title">Example 17. DISTINCT aggregate&#8201;&#8212;&#8201;Case 1, Syntax A</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx12_1 ON `travel-sample`(ROUND(geo.lat), ROUND(geo.lon), country)
WHERE type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(DISTINCT ROUND(geo.lat)) AS Sum_Lat
FROM `travel-sample`
WHERE geo.lat IS NOT MISSING
AND type = "airport"
GROUP BY ROUND(geo.lat);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Sum_Lat": 27
  },
  {
    "Sum_Lat": 36
  },
  {
    "Sum_Lat": 71
  },
...</code></pre>
</div>
</div>
</div>
</div>
<div id="ex12-1-b" class="exampleblock">
<div class="title">Example 18. DISTINCT aggregate&#8201;&#8212;&#8201;Case 1, Syntax B</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(DISTINCT ROUND(geo.lat)) AS Count_Lat,
       SUM(DISTINCT ROUND(geo.lon)) AS Sum_Lon
FROM `travel-sample`
WHERE geo.lat IS NOT MISSING
AND type = "airport"
GROUP BY ROUND(geo.lat), ROUND(geo.lon);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Count_Lat": 1,
    "Sum_Lon": -166
  },
  {
    "Count_Lat": 1,
    "Sum_Lon": -107
  },
  {
    "Count_Lat": 1,
    "Sum_Lon": -159
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="case-2"><a class="anchor" href="#case-2"></a>Case 2</h4>
<div class="paragraph">
<p>If the DISTINCT aggregate is on the leading GROUP BY key(s) + 1 (the next key).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (a, b, c);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Syntax A</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(DISTINCT b)
FROM named_keyspace_ref
WHERE a IS NOT MISSING
GROUP BY a;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Syntax B</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(DISTINCT c)
FROM named_keyspace_ref
WHERE a IS NOT MISSING
GROUP BY a, b;</code></pre>
</div>
</div>
<div id="ex12-2-a" class="exampleblock">
<div class="title">Example 19. DISTINCT aggregate&#8201;&#8212;&#8201;Case 2, Syntax A</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx12_2 ON `travel-sample`(country, ROUND(geo.lat), ROUND(geo.lon))
WHERE type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(DISTINCT country) AS Count_Country,
       SUM(DISTINCT ROUND(geo.lat)) AS Sum_Lat
FROM `travel-sample`
WHERE country IS NOT MISSING
AND type = "airport"
GROUP BY country;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Count_Country": 1,
    "Sum_Lat": 483
  },
  {
    "Count_Country": 1,
    "Sum_Lat": 2290
  },
  {
    "Count_Country": 1,
    "Sum_Lat": 591
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex12-2-b" class="exampleblock">
<div class="title">Example 20. DISTINCT aggregate&#8201;&#8212;&#8201;Case 2, Syntax B</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(DISTINCT country) AS Count_Country,
       SUM(DISTINCT ROUND(geo.lat)) AS Sum_Lat,
       COUNT(DISTINCT ROUND(geo.lon)) AS Count_Lon
FROM `travel-sample`
WHERE country IS NOT MISSING
AND type = "airport"
GROUP BY country, ROUND(geo.lat);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Count_Country": 1,
    "Count_Lon": 16,
    "Sum_Lat": 483
  },
  {
    "Count_Country": 1,
    "Count_Lon": 103,
    "Sum_Lat": 2290
  },
  {
    "Count_Country": 1,
    "Count_Lon": 13,
    "Sum_Lat": 591
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="case-3"><a class="anchor" href="#case-3"></a>Case 3</h4>
<div class="paragraph">
<p>If the DISTINCT aggregate is on a constant expression&#8201;&#8212;&#8201;GROUP BY can be on any key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (a, b, c);

SELECT a, COUNT(DISTINCT 1)
FROM named_keyspace_ref
WHERE a IS NOT MISSING
GROUP BY b;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The results will be pre-aggregated if the <code>GROUP BY</code> key is non-leading, as in this case and example.
</td>
</tr>
</table>
</div>
<div id="ex12-3" class="exampleblock">
<div class="title">Example 21. DISTINCT aggregate&#8201;&#8212;&#8201;Case 3</div>
<div class="content">
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx12_3 ON `travel-sample`(country, geo.lat, geo.lon)
WHERE type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT MIN(country) AS Min_Country,
       COUNT(DISTINCT 1) AS Constant_Value,
       MIN(ROUND(geo.lon)) AS Min_Logitude
FROM `travel-sample`
WHERE country IS NOT MISSING
AND type = "airport"
GROUP BY geo.lat;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Constant_Value": 1,
    "Min_Country": "United States",
    "Min_Longitude": -75
  },
  {
    "Constant_Value": 1,
    "Min_Country": "United States",
    "Min_Longitude": -169
  },
  {
    "Constant_Value": 1,
    "Min_Country": "United States",
    "Min_Longitude": -165
  },
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="case-4"><a class="anchor" href="#case-4"></a>Case 4</h4>
<div class="paragraph">
<p>If the DISTINCT aggregate is on the first key only or in a constant expression, and there is no GROUP BY clause.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (a, b, c);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Q1</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(DISTINCT a)
FROM named_keyspace_ref; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Q2</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(DISTINCT 1)
FROM named_keyspace_ref; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Q3</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(DISTINCT c)
FROM named_keyspace_ref; <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>OK</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>OK</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Not OK</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All other cases of DISTINCT pushdown will return an error.</p>
</div>
<div id="ex12-4-q1" class="exampleblock">
<div class="title">Example 22. DISTINCT aggregate&#8201;&#8212;&#8201;Case 4, Q1</div>
<div class="content">
<div class="paragraph">
<p>A DISTINCT aggregate on the first key only or in a constant expression, where there is no GROUP BY clause.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx12_4 ON `travel-sample`(geo.alt, geo.lat, geo.lon)
WHERE type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(DISTINCT ROUND(geo.alt)) AS Sum_Alt
FROM `travel-sample`
WHERE geo.alt IS NOT MISSING
AND type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Sum_Alt": 1463241
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex12-4-q2" class="exampleblock">
<div class="title">Example 23. DISTINCT aggregate&#8201;&#8212;&#8201;Case 4, Q2</div>
<div class="content">
<div class="paragraph">
<p>Another query with index <code>idx12_4</code>.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT COUNT(DISTINCT 1) AS Const_expr
FROM `travel-sample`
WHERE type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Const_expr": 1
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div id="ex12-4-q3" class="exampleblock">
<div class="title">Example 24. DISTINCT aggregate&#8201;&#8212;&#8201;Case 4, Q3</div>
<div class="content">
<div class="paragraph">
<p>Another query with index <code>idx12_4</code>, which will not push down the aggregate to the indexer.</p>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT SUM(DISTINCT ROUND(geo.lon)) AS Sum_Lon
FROM `travel-sample`
WHERE geo.alt IS NOT MISSING
AND type = "airport";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "Sum_Lon": -11412
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="having-with-aggregate-function"><a class="anchor" href="#having-with-aggregate-function"></a>HAVING with an aggregate function inside</h3>
<div class="paragraph">
<p>To use Aggregate Pushdown when a HAVING clause has an aggregate function inside, use the following syntax of index and query statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (k0, k1);

SELECT k0, COUNT(k1)
FROM named_keyspace_ref
WHERE k0 IS NOT MISSING
GROUP BY k0
HAVING Aggregate_Function(k1);</code></pre>
</div>
</div>
<div id="ex13" class="exampleblock">
<div class="title">Example 25. HAVING with an aggregate function inside</div>
<div class="content">
<div class="paragraph">
<p>List the cities that have more than 180 landmarks.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx13 ON `travel-sample` (city, name)
WHERE type = "landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT city AS City, COUNT(DISTINCT name) AS Landmark_Count
FROM `travel-sample`
WHERE city IS NOT MISSING
AND type = "landmark"
GROUP BY city
HAVING COUNT(DISTINCT name) &gt; 180;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "City": "London",
    "Landmark_Count": 443
  },
  {
    "City": "Los Angeles",
    "Landmark_Count": 284
  },
  {
    "City": "San Diego",
    "Landmark_Count": 197
  },
  {
    "City": "San Francisco",
    "Landmark_Count": 797
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="letting-with-aggregate-function"><a class="anchor" href="#letting-with-aggregate-function"></a>LETTING with an aggregate function inside</h3>
<div class="paragraph">
<p>To use Aggregate Pushdown when a LETTING clause has an aggregate function inside, use the following syntax of the index and query statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx_expr ON named_keyspace_ref (k0, k1);

SELECT k0, COUNT(k1)
FROM named_keyspace_ref
WHERE k0 IS NOT MISSING
GROUP BY k0
LETTING var_expr = Aggregate_Function(k1)
HAVING var_expr;</code></pre>
</div>
</div>
<div id="ex14" class="exampleblock">
<div class="title">Example 26. LETTING with an aggregate function inside</div>
<div class="content">
<div class="paragraph">
<p>List cities that have more than half of all landmarks.</p>
</div>
<div class="listingblock">
<div class="title">Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">CREATE INDEX idx14 ON `travel-sample` (city, name)
WHERE type = "landmark";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">SELECT city AS City, COUNT(DISTINCT name) AS Landmark_Count
FROM `travel-sample`
WHERE city IS NOT MISSING
AND type = "landmark"
GROUP BY city
LETTING MinimumThingsToSee = COUNT(DISTINCT name)
HAVING MinimumThingsToSee &gt; 180;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "City": "London",
    "Landmark_Count": 443
  },
  {
    "City": "Los Angeles",
    "Landmark_Count": 284
  },
  {
    "City": "San Diego",
    "Landmark_Count": 197
  },
  {
    "City": "San Francisco",
    "Landmark_Count": 797
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="limitations"><a class="anchor" href="#limitations"></a>Limitations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are currently not supported and not pushed to the indexer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>HAVING</code> or <code>LETTING</code> clauses, unless there is an aggregate function inside.</p>
</li>
<li>
<p><code>ORDER BY</code> clauses.</p>
</li>
<li>
<p><code>ARRAY_AGG()</code> or any facility to add new Aggregate function, such as Median.</p>
</li>
<li>
<p><code>LIMIT</code> pushdown with <code>GROUP BY</code> on non-leading keys.</p>
</li>
<li>
<p><code>OFFSET</code> pushdown with <code>GROUP BY</code> on non-leading keys.</p>
</li>
<li>
<p>A subquery in a <code>GROUP BY</code> or Aggregate pushdown.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Aggregate Comparison</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Item</th>
<th class="tableblock halign-center valign-top">Aggregate on Non-Array Index Field</th>
<th class="tableblock halign-center valign-top">Aggregate on Array Index Field</th>
<th class="tableblock halign-center valign-top">DISTINCT Aggregate on Non-Array Index Field</th>
<th class="tableblock halign-center valign-top">DISTINCT Aggregate on Array Index Field</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Supports <code>MIN()</code> and <code>MAX()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Supports <code>SUM()</code> and <code>COUNT()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Supports <code>AVG()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>✓</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Supports <code>ARRAY_AGG()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="section_bpf_wjf_ycb"><a class="anchor" href="#section_bpf_wjf_ycb"></a>Appx 1 - Query Plan Fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Consider the example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-n1ql hljs" data-lang="n1ql">EXPLAIN SELECT type, COUNT(type)
FROM `travel-sample`
WHERE type IS NOT MISSING
GROUP BY type;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the query plan:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>plan.`~children`[0.covers]</code> shows that the index covers the query.</p>
</li>
<li>
<p><code>plan.`~children`[0.index_group_aggs]</code> shows the aggregation and groupings done by the indexer.</p>
</li>
<li>
<p><code>index_group_aggs</code> object has details on the aggregate, index key position, expression dependency, and group expressions handled by the indexer.
This object is present in the plan only when the indexer handles the grouping and aggregation.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 41.6666%;">
<col style="width: 41.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Explain Text in This Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aggregates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of Aggregate objects, and each object represents one aggregate function.
The absence of this item means there is no Aggregate function.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aggregates</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... aggregate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate operation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COUNT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of index key positions the GROUP BY expression depends on, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it&#8217;s the 1st item)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... expr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Group expression or an aggregate expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"cover ((`travel-sample`.`type`))"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID given internally and will be used in <code>index_projection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... keypos</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key Position to use the Index expr or the query expr.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A value &gt; -1 means the group key exactly matches the corresponding index keys, where 0 is the 1st index key.</p>
</li>
<li>
<p>A value of -1 means the group key does not match the index key and uses the query expression instead.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it matches the 1st index key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of index key positions the GROUP BY expression depends on, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it&#8217;s the 1st item)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of GROUP BY objects, and each object represents one group key.
The absence of this item means there is no GROUP BY clause.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index key position of a single GROUP BY expression</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it&#8217;s the 1st GROUP BY key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... expr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single GROUP BY expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"cover ((`travel-sample`.`type`))"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID given internally and will be used in <code>index_projection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... keypos</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key Position to use the Index expr or the query expr.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A value &gt; -1 means the group key exactly matches the corresponding index keys, where 0 is the 1st index key.</p>
</li>
<li>
<p>A value of -1 means the group key does not match the index key and uses the query expression instead.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it matches the 1st key in the index expression)</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "plan": {
    "#operator": "Sequence",
    "~children": [
      {
        "#operator": "IndexScan3",
        "covers": [
          "cover ((`travel-sample`.`name`))",
          "cover ((meta(`travel-sample`).`id`))",
          "cover (count(1))"
        ],
        "index": "idx_name",
        "index_group_aggs": { <i class="conum" data-value="1"></i><b>(1)</b>
          "aggregates": [
            {
              "aggregate": "COUNT",
              "expr": "1",
              "id": 2,
              "keypos": -1
            }
          ],
          "depends": [
            0
          ],
          "group": [
            {
              "depends": [
                0
              ],
              "expr": "cover ((`travel-sample`.`name`))",
              "id": 0,
              "keypos": 0
            }
          ]
        },
        "index_id": "5dfe130db88b4ec",
        "index_projection": {
          "entry_keys": [
            0,
            2
          ]
        },
        "keyspace": "travel-sample",
        "namespace": "default",
        "spans": [
          {
            "exact": true,
            "range": [
              {
                "inclusion": 1,
                "low": "null"
              }
            ]
          }
        ],
        "using": "gsi"
      },
      {
        "#operator": "Parallel",
        "~child": {
          "#operator": "Sequence",
          "~children": [
            {
              "#operator": "InitialProject",
              "result_terms": [
                {
                  "expr": "cover ((`travel-sample`.`name`))"
                },
                {
                  "expr": "cover (count(1))"
                }
              ]
            },
            {
              "#operator": "FinalProject"
            }
          ]
        }
      }
    ]
  },
  "text": "select name, count(1)\nfrom `travel-sample` use index (idx_name)\nwhere name is not missing\ngroup by name;"
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>When the <code>index_group_aggs</code> section is present, it means that the query is using Index Aggregations.</td>
</tr>
</table>
</div>
<table id="table_bw2_nrf_ycb" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. GROUP BY Query Plan</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 41.6666%;">
<col style="width: 41.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">EXPLAIN Text in <a href="#ex1">Example 1</a> (GROUP BY)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aggregates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of Aggregate objects, and each object represents one aggregate function.
The absence of this item means there is no Aggregate function.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aggregates</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... aggregate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate operation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MAX</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of index key positions the GROUP BY expression depends on, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p>
<p class="tableblock">(because it&#8217;s the 3rd item)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... expr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Group expression or an aggregate expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>round(cover (((`travel-sample`.
`geo`).`lat`)))</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID given internally and will be used in <code>index_projection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... keypos</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key Position to use the Index expr or the query expr.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A value &gt; -1 means the group key exactly matches the corresponding index keys, where 0 is the 1st index key.</p>
</li>
<li>
<p>A value of -1 means the group key does not match the index key and uses the query expression instead.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-1</code></p>
<p class="tableblock">(because the index has the field <code>geo.lat</code> but the query adds the <code>ROUND()</code> function to <code>geo.lat</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of index key positions the GROUP BY expression depends on, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0, 1, 2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of GROUP BY objects, and each object represents one group key.
The absence of this item means there is no GROUP BY clause.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index key position of a single GROUP BY expression, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it&#8217;s the 1st GROUP BY key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... expr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single GROUP BY expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>`travel-sample`.`country`</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID given internally and will be used in <code>index_projection.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... keypos</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key Position to use the Index expr or the query expr.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A value &gt; -1 means the group key exactly matches the corresponding index keys, where 0 is the 1st index key.</p>
</li>
<li>
<p>A value of -1 means the group key does not match the index key and uses the query expression instead.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it matches the first key in the index expression)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Query Plan sections of an Aggregate pushdown are slightly different than those used in a GROUP BY.</p>
</div>
<table id="docs-internal-guid-facfdbc0-bb3d-b00f-2ec0-6bee4921dabc" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Aggregate Query Plan</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 41.6666%;">
<col style="width: 41.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">EXPLAIN Text in <a href="#ex10">Example 15</a> (Aggregate)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aggregates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of Aggregate objects, and each object represents one aggregate function.
The absence of this item means there is no Aggregate function.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aggregates</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... aggregate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate operation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUM</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of index key positions the GROUP BY expression depends on, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p>
<p class="tableblock">(because it&#8217;s the 3rd item)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... expr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Group expression or an aggregate expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"abs(round(cover (((`travel-sample`.`geo`).`lat`))))"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID given internally and will be used in <code>index_projection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... keypos</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key Position to use the Index expr or the query expr.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A value &gt; -1 means the group key exactly matches the corresponding index keys, where 0 is the 1st index key.</p>
</li>
<li>
<p>A value of -1 means the group key does not match the index key and uses the query expression instead.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p>
<p class="tableblock">(because the query&#8217;s 3rd key exactly matches the index&#8217;s 3rd key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of index key positions the GROUP BY expression depends on, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0, 1, 2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of GROUP BY objects, and each object represents one group key.
The absence of this item means there is no GROUP BY clause.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index key position of a single GROUP BY expression, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it&#8217;s the 1st GROUP BY key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... expr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single GROUP BY expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"cover ((`travel-sample`.`state`))"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID given internally and will be used in <code>index_projection.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... keypos</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key Position to use the Index expr or the query expr.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A value &gt; -1 means the group key exactly matches the corresponding index keys, where 0 is the 1st index key.</p>
</li>
<li>
<p>A value of -1 means the group key does not match the index key and uses the query expression instead.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it matches the 1st  key in the index expression)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... depends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index key position of a single GROUP BY expression, starting with 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p>
<p class="tableblock">(because it&#8217;s the 1st GROUP BY key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... expr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single GROUP BY expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"cover ((`travel-sample`.`state`))"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique ID given internally and will be used in <code>index_projection.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>... keypos</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key Position to use the Index expr or the query expr.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A value &gt; -1 means the group key exactly matches the corresponding index keys, where 0 is the 1st index key.</p>
</li>
<li>
<p>A value of -1 means the group key does not match the index key and uses the query expression instead.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p>
<p class="tableblock">(because it matches the 2nd key in the index expression)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2020 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
