<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Handling Exceptions and Other Errors with the Java SDK in Couchbase | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4463/java-sdk/2.7/handling-error-conditions.html">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="java-sdk">
    <meta name="dcterms.identifier" content="2.3">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4463">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../server/6.0/introduction/intro.html">Server</a></li>
                  <li><a href="../../server/6.0/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../server/6.0/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../server/6.0/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../server/6.0/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="../../operator/1.2/overview.html">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="../../couchbase-lite/2.5/index.html">Lite</a></li>
                  <li><a href="../../sync-gateway/2.5/index.html">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../server/6.0/sdk/overview.html">SDKs</a></li>
                  <li><a href="../../c-sdk/2.10/start-using-sdk.html">C</a></li>
                  <li><a href="../../dotnet-sdk/2.7/start-using-sdk.html">.NET</a></li>
                  <li><a href="../../go-sdk/1.5/start-using-sdk.html">Go</a></li>
                  <li><a href="../../java-sdk/2.7/start-using-sdk.html">Java</a></li>
                  <li><a href="../../nodejs-sdk/2.6/start-using-sdk.html">Node.js</a></li>
                  <li><a href="../../php-sdk/2.6/start-using-sdk.html">PHP</a></li>
                  <li><a href="../../python-sdk/2.5/start-using-sdk.html">Python</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../server/6.0/connectors/intro.html">Connectors</a></li>
                  <li><a href="../../elasticsearch-connector/4.0/index.html">Elasticsearch</a></li>
                  <li><a href="../../server/6.0/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="../../kafka-connector/3.4/index.html">Kafka</a></li>
                  <li><a href="../../spark-connector/2.2/index.html">Spark</a></li>
                  <li><a href="../../talend-connector/index.html">Talend</a></li>
                  <li><a href="../../server/6.0/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="start-using-sdk.html"><span class="title">Java SDK</span> <span class="version">2.3</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../2.7/handling-error-conditions.html">Java SDK 2.7</a></li>
                  <li><a class="navbar-item" href="../2.6/handling-error-conditions.html">Java SDK 2.6</a></li>
                  <li><a class="navbar-item" href="../2.5/handling-error-conditions.html">Java SDK 2.5</a></li>
                  <li><a class="navbar-item" href="../2.4/handling-error-conditions.html">Java SDK 2.4</a></li>
                  <li><a class="navbar-item" href="../2.2/java-intro.html">Java SDK 2.2</a></li>
                  <li><a class="navbar-item" href="../2.1/java-intro.html">Java SDK 2.1</a></li>
                </ul>
                <ul class="related">
                  <li><a class="navbar-item" href="../../c-sdk/2.10/handling-error-conditions.html">C SDK</a></li>
                  <li><a class="navbar-item" href="../../dotnet-sdk/2.7/handling-error-conditions.html">.NET SDK</a></li>
                  <li><a class="navbar-item" href="../../go-sdk/1.5/handling-error-conditions.html">Go SDK</a></li>
                  <li><a class="navbar-item" href="../../nodejs-sdk/2.6/handling-error-conditions.html">Node.js SDK</a></li>
                  <li><a class="navbar-item" href="../../php-sdk/2.6/handling-error-conditions.html">PHP SDK</a></li>
                  <li><a class="navbar-item" href="../../python-sdk/2.5/handling-error-conditions.html">Python SDK</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Hello World!</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="start-using-sdk.html">Start Using the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="sample-application.html">Sample Application</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="webui-cli-access.html">Browser and CLI Access</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Working with Data</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="core-operations.html">Core Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="document-operations.html">Document Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="subdocument-operations.html">Sub-Document Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-query.html">Querying with N1QL</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-queries-with-sdk.html">N1QL from the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="full-text-search-overview.html">Full Text Search</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="full-text-searching-with-sdk.html">Searching from the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="view-queries-with-sdk.html">MapReduce Views</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="async-programming.html">Asynchronous Programming</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="batching-operations.html">Batching Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="durability.html">Durability</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="concurrent-mutations-cluster.html">Concurrent Document Mutations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="nonjson.html">Non-JSON Documents</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Deployment Environments</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-connections.html">Managing Connections</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-clusters.html">Managing Clusters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="compatibility-versions-features.html">Compatibility</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Settings, Error Handling &amp; Diagnostics</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="client-settings.html">Client Settings</a>
    </span>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="handling-error-conditions.html">Handling Errors</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="failure-considerations.html">Failure Considerations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="collecting-information-and-logging.html">Collecting Information</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Project Docs</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="relnotes-java-sdk.html#version-2-3-7-19-january-2017">Release Notes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="compatibility-versions-features.html">Compatibility</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="sdk-licenses.html">Licenses</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="get-involved.html">Get involved</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-banner">
    <p>A newer version of this documentation is available.</p>
    <a class="btn" href="../2.7/handling-error-conditions.html">View Latest</a>
  </div>
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="start-using-sdk.html">Java SDK</a></li>
    <li class="crumb">Settings, Error Handling &amp; Diagnostics</li>
    <li class="crumb"><a href="handling-error-conditions.html">Handling Errors</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-java/edit/release/2.3/modules/ROOT/pages/handling-error-conditions.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">Handling Exceptions and Other Errors with the Java SDK in Couchbase</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
This topic provides information on error handling when using the Couchbase Java SDK.
It describes the general approach to Java exception handling with the SDK and the kinds of error handling you will want to consider during normal operations and in the case that the network or some part of your system infrastructure unexpectedly fails.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general-approach-to-java-exceptions"><a class="anchor" href="#general-approach-to-java-exceptions"></a>General Approach to Java Exceptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All Couchbase specific exceptions are derived from <code class="api">CouchbaseException</code>.
All the other Exception types used are part of the JDK, including <code class="api">IllegalArgumentException</code>, <code class="api">TimeoutException</code> and others.</p>
</div>
<div class="paragraph">
<p>The following sections explain the exception types used by the SDK as well as how to perform proper error handling when they come up.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Javadocs contain a list of possible exceptions for each method called, which allows you to crossreference back and forth between the method called and the possible errors with explanation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that the <code>transient</code> column in the reference tables refers to a short time interval where a retry with backoff makes sense from an application perspective and without the application interfering of some sort.
If you extend the time horizon long enough all errors can be considered transient (like creating a bucket that does not exist or fix a password), but it won&#8217;t be practical to wait in the application for it.</p>
</div>
<div class="paragraph">
<p>The following sections discuss different strategies to mitigate errors that might come up during operations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conceptual-error-types"><a class="anchor" href="#conceptual-error-types"></a>Conceptual Error Types</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="devguide-data-errors"><a class="anchor" href="#devguide-data-errors"></a>Data Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data errors are errors returned by the server because a certain data condition was not met.
Data errors typically have very clear corrective paths.</p>
</div>
<div class="paragraph">
<p><strong>Document Does not Exist</strong></p>
</div>
<div class="paragraph">
<p>If a document is not found, then it has either not yet been created or has since been deleted.
It is received on retrieval (<em>get</em>) operations (get a document), <em>replace</em> operations (replace a document that already exists), and <em>remove</em> operations (delete a document).</p>
</div>
<div class="paragraph">
<p>If this error is received when attempting to retrieve a document, then the item should either be created (if possible) or return an error to the user.</p>
</div>
<div class="paragraph">
<p>If this error is received when replacing a document, then it indicates an issue in the application state (perhaps you can raise an exception up the stack).
If you do not care that the document exists, the <em>upsert</em> method may be used instead which ignores this case.</p>
</div>
<div class="paragraph">
<p>If receiving this error when removing an document, it may safely be ignored: not-found on remove essentially means the item is already removed.</p>
</div>
<div class="paragraph">
<p>The <em>Not Found</em> error is returned by the server.</p>
</div>
<div class="paragraph">
<p><strong>Document Already Exists</strong></p>
</div>
<div class="paragraph">
<p>The <em>insert</em> operation requires that the document does not exist yet; it is intended to create a new unique record (think about inserting a "new user ID").
This error is returned by the server when a document already exists.
Applications at this point should probably return an error up the stack to the user (when applicable); for example indicating that a new account could not be registered with the given user name, since it already exists.</p>
</div>
<div class="paragraph">
<p><strong>CAS Mismatch</strong></p>
</div>
<div class="paragraph">
<p>A <a href="concurrent-mutations-cluster.html" class="page">CAS</a> mismatch error is returned when an operation was executed with a CAS value (supplied by the application) and the CAS value passed differs from the CAS value on the server.
The corrective course of action in this case is for the application to re-try the read-update cycle as explained in detail in the CAS documentation.</p>
</div>
<div class="paragraph">
<p><strong>Document too Big</strong></p>
</div>
<div class="paragraph">
<p>If the maximum content size is larger than 20MB the server responds with an error noting that it can&#8217;t store it since it is too big.
This error is not transient and must be raised up the stack since it likely indicates an application error that creates too large document contents.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devguide-transient-errors"><a class="anchor" href="#devguide-transient-errors"></a>Transient and Resource Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These errors may be received because of resource starvation.</p>
</div>
<div class="paragraph">
<p><strong>Temporary Failure</strong></p>
</div>
<div class="paragraph">
<p>This error is received when the server is temporarily inhibiting an error that doesn&#8217;t allow it to respond successfully.
For example during mutations when the cluster node has run out of memory or is currently warming up.
Its disk and replication queues are full and must wait until items in those queues are stored and replicated before it can begin receiving new operations.</p>
</div>
<div class="paragraph">
<p>While this condition is rare, it may happen under massively concurrent writes from clients and a limited memory allocation on the server.</p>
</div>
<div class="paragraph">
<p>The short-term corrective action for this error is to throttle and slow down the application, giving Couchbase some time for pending operations to complete (or to complete warmup) before issuing new operations.
The long term corrective action is to increase memory capacity on the cluster, either by adding more RAM to each node, or by adding more nodes.
The above example shows (in pseudo-code) how to handle a temporary failure error with a linear backoff.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">MAX_RETRIES = 5
BASE_DELAY = 50 // milliseconds

current_attempts = 1
do {
    try {
        bucket.upsert(id, document)
        break
    } catch (TemporaryFailure error) {
        sleep(BASE_DELAY * current_attempts)
    }
} while (++current_attempts != MAX_RETRIES)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Out Of Memory</strong></p>
</div>
<div class="paragraph">
<p>This error indicates a severe condition on the server side and probably needs to be logged and/or signaled to monitoring systems.
There is not much the application can do there to mitigate the situation other than backing off significantly and waiting until the server side memory shortage is resolved.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generic-error-types"><a class="anchor" href="#generic-error-types"></a>Generic Error Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All couchbase specific exceptions inherit from the <code class="api">CouchbaseException</code>.</p>
</div>
<div class="paragraph">
<p>One exception that you want to plan for is the <code class="api">RequestCancelledException</code>.
It comes up if a request is in-flight but the socket gets closed or the SDK can&#8217;t schedule the request for longer than the maximum configurable lifetime.
In any event, if the operation is idempotent it makes sense to retry with backoff, but if a mutation operation has been canceled extra care needs to be taken to make sure state is not lost.
For example, if a <code class="api">replace</code> operation got canceled it makes sense to check again with a <code class="api">get</code> to see if it took place or not and then react based on the result.
This exception is transient since the underlying socket might be reopened at some point.</p>
</div>
<div class="paragraph">
<p>Finally the <code class="api">BackpressureException</code> raised by the SDK when the sender of requests (your application threads) are overwhelming the consumer (the SDK).
It mostly happens in purely asynchronous environments but can also happen in blocking scenarios.
If you receive such an exception it is always a wise idea to slow down the request rate or bubble up the error in a fail fast manner to the caller.
This exception is almost always transient since once the pressure is reduced the SDK will go back into a stable state where the request completion rate equals or is higher than the incoming request rate.</p>
</div>
<table id="java-errors-generic-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Generic Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CouchbaseException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">depends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Top level Couchbase exception type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RequestCancelledException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request canceled while in-flight on the socket or couldn&#8217;t be scheduled for longer than the max lifetime period.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BackpressureException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the SDK is overwhelmed with the incoming request rate from the application for some reason.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="connection-management-errors"><a class="anchor" href="#connection-management-errors"></a>Connection Management Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are trying to open a <code class="api">Bucket</code> and it does not exist you get a <code class="api">BucketDoesNotExistException</code>.
If it has a different password compared to the supplied one you get a <code class="api">InvalidPasswordException</code> instead.</p>
</div>
<div class="paragraph">
<p>If you are performing operations on a <code class="api">Cluster</code> which does not support it, for example you don&#8217;t have the query service enabled and you perform a N1QL operation, you get a <code class="api">ServiceNotAvailableException</code>.</p>
</div>
<div class="paragraph">
<p>When running into errors during bootstrap when SSL is enabled, you see a <code class="api">SSLException</code> wrapped in a <code class="api">ConfigurationExeption</code>.
The <code class="api">ConfigurationException</code> is a more generic error that reports that something has gone wrong during bootstrap with the configuration.</p>
</div>
<div class="paragraph">
<p>Finally if you are performing an operation on a closed Bucket you get a <code class="api">BucketClosedException</code>.</p>
</div>
<table id="java-errors-connman-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Connection Management Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketDoesNotExistException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the bucket does not exist when trying to remove/open it.
Note that with Server 4.5 and later, the server will also trigger a <code>InvalidPasswordException</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>InvalidPasswordException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the bucket password is different than the one provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ServiceNotAvailableException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a service is not enabled on at least one of the cluster nodes when trying to use it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SSLException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues with SSL/Encryption during bootstrap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ConfigurationExeption</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All kinds of configuration errors during bootstrap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketClosedException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the bucket is already closed when trying to use it.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="bucket-operation-errors"><a class="anchor" href="#bucket-operation-errors"></a>Bucket Operation Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a Document is mutated through the key value API a couple exceptions could be raised depending on the state of that Document on the cluster:</p>
</div>
<table id="java-errors-bucket-mut-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Bucket Operation Mutation Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DocumentAlreadyExistsException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the document with the given ID already exists (i.e.
during an insert).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DocumentDoesNotExistException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the document with the given ID does not exist (i.e.
during a replace).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CASMismatchException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The provided CAS on replace does not match with the server (someone else updated it in the meantime).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RequestTooBigException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The payload is larger than the maximum size (20MB).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If durability requirements (<code>ReplicateTo</code>, <code>PersistTo</code>) are used, in addition the following exceptions can happen:</p>
</div>
<table id="java-errors-bucket-dur-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Bucket Operation Durability Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DurabilityException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">depends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The durability requirement for this operation can&#8217;t be met temporarily or persistently.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DocumentMutationLostException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When MutationTokens enabled, signifies a lost mutation during hard fail over.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DocumentConcurrentlyModifiedException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When MutationTokens disabled, signifies concurrent updates on the observed document.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When a <code>getFromReplica</code> is issued you need to watch out for the following :</p>
</div>
<table id="java-errors-bucket-replr-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Bucket Operation Replica Read Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicaNotAvailableException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica is currently not available (i.e.
after a fail over before rebalance).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ReplicaNotConfiguredException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica is not configured on the bucket itself.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When you are trying to lock a document you may get the following:</p>
</div>
<table id="java-errors-bucket-lock-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. Bucket Operation Lock Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TemporaryLockFailureException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The server reports a temporary failure and it is very likely to be lock-related (like an already locked key or a bad CAS used for unlock).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>During a View request the following exception can happen:</p>
</div>
<table id="java-errors-bucket-view-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. Bucket Operation View Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ViewDoesNotExistException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The view does not exist on the server (or the design document where it should belong) or is not published.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that for Views it is also important to check the <code>isSuccess()</code> method as well as to check the <code>error()</code> method since it is possible that errors during streaming may come up.
See the section on <a href="view-queries-with-sdk.html" class="page">View Queries</a> for detailed information.</p>
</div>
<div class="paragraph">
<p>Similarly, when a N1QL request is issued watch out for the following:</p>
</div>
<table id="java-errors-bucket-n1ql-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 8. Bucket Operation N1QL Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QueryExecutionException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">depends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encloses various specific errors during N1QL query execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NamedPreparedStatementException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error with execution or preparation of a named prepared statement.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that for N1QL it is also important to check the <code>finalSuccess()</code> method as well as to check the <code>errors()</code> method since it is possible that errors during streaming may come up.
See the section on <a href="n1ql-queries-with-sdk.html" class="page">N1QL Queries</a> for detailed information.</p>
</div>
<div class="paragraph">
<p>Finally, the following generic exceptions can happen in general when performing data related operations:</p>
</div>
<table id="java-errors-bucket-genr-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 9. Bucket Operation Generic Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TranscodingException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error while encoding or decoding Document content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CouchbaseOutOfMemoryException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Couchbase Server is currently out of memory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TemporaryFailureException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Couchbase Server reports a temporary failure of some kind.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sub-document-operation-errors"><a class="anchor" href="#sub-document-operation-errors"></a>Sub-Document Operation Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When performing Sub-Document operations there is a different set of exceptions to look out for compared to regular key value based operations.
Most of them affect how the paths inside the Document is used.</p>
</div>
<table id="java-errors-subdoc-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 10. Sub-Document Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultiMutationException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exception denoting that at least one error occurred when applying multiple mutations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PathTooDeepException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path is too deep to parse.
Depth of a path is determined by how many levels it contains.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NumberTooBigException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A number value inside the document is too big.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DocumentNotJsonException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The part of the document to store is not valid JSON.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CannotInsertValueException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The provided value cannot be inserted at the given path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PathInvalidException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The provided path is invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ValueTooDeepException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The proposed value would make the document too deep to parse.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PathNotFoundException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path does not exist in the document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PathExistsException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a path exists but it shouldn&#8217;t, like in the insert case.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DocumentTooDeepException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The document is too deep to parse.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BadDeltaException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The delta on counter operations is invalid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PathMismatchException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path structure conflicts with the document structure.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="bucket-and-index-management-errors"><a class="anchor" href="#bucket-and-index-management-errors"></a>Bucket and Index Management Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you are manipulating buckets (that is, inserting or removing them) you can run into both <code class="api">BucketAlreadyExistsException</code> and <code class="api">BucketDoesNotExistException</code>.
If you perform a flush operation on a bucket but it is disabled on the server side, the SDK raises a <code class="api">FlushDisabledException</code>.</p>
</div>
<div class="paragraph">
<p>While performing operations on N1QL indexes (GSI), similar to bucket management either a <code class="api">IndexDoesNotExistException</code> or a <code class="api">IndexAlreadyExistsException</code> can be raised during manipulation.
In addition if you are waiting on an index a <code class="api">IndexesNotReadyException</code> is raised if the index is not ready yet.</p>
</div>
<div class="paragraph">
<p>During design document manipulation a <code class="api">DesignDocumentAlreadyExistsException</code> is thrown if the design document already exists and one with the same name is inserted.</p>
</div>
<table id="java-errors-idxman-ref" class="tableblock frame-all grid-all spread">
<caption class="title">Table 11. Bucket and Index Management Errors Reference</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Transient</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketAlreadyExistsException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The bucket already exists when trying to create it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketDoesNotExistException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The bucket does not exist when trying to remove/open it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FlushDisabledException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bucket has flush disabled on the server side, but triggered on the SDK.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IndexDoesNotExistException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The N1QL GSI Index does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IndexAlreadyExistsException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The N1QL GSI Index already exists when trying to create it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IndexesNotReadyException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N1QL GSI indexes are watched but take longer to become ready than after the amount of attempts retried.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DesignDocumentAlreadyExistsException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The design document already exists when trying to insert it.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="error-handling-logging"><a class="anchor" href="#error-handling-logging"></a>Error Handling - Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is always important to log errors, but even more so in the case of reactive applications.
Because of the event driven nature, stack traces get harder to look at, and caller context is sometimes lost.</p>
</div>
<div class="paragraph">
<p>It is also recommended to configure your logger to include absolute timestamps.
While this is always a good idea, if combined with good logging throughout the application it makes it easier to debug error cases and see later what was going on inside your reactive application.</p>
</div>
<div class="paragraph">
<p>RxJava provides operators for side effects (additional behavior that doesn&#8217;t change the items flowing through the Observable stream), which should be used to log errors.
Of course, you can also put logging into the error handlers, but readability is increased if the logging is put explicitly as a side effect.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Observable
    .error(new Exception("I'm failing"))
    .doOnError(new Action1&lt;Throwable&gt;() {
        @Override
        public void call(Throwable throwable) {
            // I'm an explicit side effect
            // use a proper logger of your choice here
            LOGGER.warn("Error while doing XYZ", throwable);
        }
})
.subscribe();</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also utilize the various other side-effect operators for general logging (<code>doOnNext</code>, <code>doOnCompleted</code>).
If you don&#8217;t want to have different side effects for the same logging operation, you can use <code>doOnEach</code>.
It will be called for both errors and next events with a Notification object that denotes what kind of event is being processed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="error-handling-failing"><a class="anchor" href="#error-handling-failing"></a>Error Handling - Failing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Failing is the easiest way to handle errors - because you don&#8217;t.
While most of the time you want more sophisticated error handling strategies (as discussed later), sometimes you just need to fail.
It makes no sense for some errors to be retried, either because they are not transient or because you already tried everything to make it work and it still keeps failing.</p>
</div>
<div class="paragraph">
<p>In error-resilient architectures, you want to do everything to keep the error contained.
However, if the containment is not able to handle the error it needs to propagate it to a parent component that (possibly) can.</p>
</div>
<div class="paragraph">
<p>In the asynchronous case, errors are events like every other for your subscribers.
Once an error happens, your <code>Subscriber</code> is notified in the method <code class="api">onError(Throwable)</code>, and you can handle it the way you want to.
Note that by <code>Observable</code> contract, after the <code class="api">onError</code> event, no more <code class="api">onNext</code> events will happen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Observable
    .error(new Exception("I'm failing"))
    .subscribe(new Subscriber&lt;Object&gt;() {
        @Override
        public void onCompleted() {
        }

        @Override
        public void onError(Throwable e) {
            System.err.println("Got Error: " + e);
        }

        @Override
        public void onNext(Object o) {
        }
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is always a good idea to implement error handling.</p>
</div>
<div class="paragraph">
<p>In the synchronous case, every error is converted into an Exception and thrown so that you can use regular <code class="api">try</code>/<code class="api">catch</code> semantics.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">try {
    Object data = Observable.error(new Exception("I'm failing"))
        .toBlocking()
        .single();
} catch(Exception ex) {
    System.err.println("Got Exception: " + ex);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not catch the Exception, it will bubble up:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Exception in thread "main" java.lang.RuntimeException: java.lang.Exception: I'm failing
 at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:482)
 at rx.observables.BlockingObservable.single(BlockingObservable.java:349)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="error-handling-retry"><a class="anchor" href="#error-handling-retry"></a>Error Handling - Retry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Retrying operations is a common technique to ride over transient errors.
It should not be used for non-transient errors because it will only put a load onto the system without the chance to resolve the error.</p>
</div>
<div class="paragraph">
<p>In practice, the following retry strategies can be applied when a transient error is discovered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Retry immediately.</p>
</li>
<li>
<p>Retry with a fixed delay.</p>
</li>
<li>
<p>Retry with a linearly increasing delay.</p>
</li>
<li>
<p>Retry with an exponentially increasing delay.</p>
</li>
<li>
<p>Retry with a random delay.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unless you have a very good reason not to, <em>always</em> apply a maximum number of attempts and then escalate the error.
Systems stuck in infinite retry loops can cause issues that are very hard to debug.
It&#8217;s better to fail and propagate at some point.</p>
</div>
<div class="paragraph">
<p>Also, we recommend that you use asynchronous retry even if you are blocking at the very end.
Retrying in the asynchronous <code>Observables</code> is way more resource efficient and also the only sane way to handle multiple operation steps (and bulk operations) under a single timeout.</p>
</div>
<div class="paragraph">
<p>The Java SDK comes with a <code class="api">RetryBuilder</code>, a utility class to describe retries with a fluent API.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Retry without delay</dt>
<dd>
<p>Let&#8217;s get one thing straight right away: immediately retrying is almost never a good idea.
Instead of resolving the error more quickly, it will put more pressure onto the retried system, and there is a good chance it will make resolving errors harder.</p>
<div class="paragraph">
<p>One good reason to do so is if you have a specific operation with a very short timeout that you want to keep retrying for a small, fixed amount of times and if it still does not work, fail fast.</p>
</div>
<div class="paragraph">
<p>If you have the feeling you need to retry very quickly, you can also apply a very slight increasing delay to, at least, release some pressure from the target system.</p>
</div>
<div class="paragraph">
<p>RxJava provides the <code class="api">retry</code> operator to resubscribe to the source <code>Observable</code> immediately once it fails (an error event happens).
Three flavors are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="api">retry()</code>: Instantly retry as long as the source <code>Observable</code> emits an error.
It is strongly recommend not to use this operator.</p>
</li>
<li>
<p><code class="api">retry(long count)</code>: Instantly retry as long as the source <code>Observable</code> emits an error or the max count is reached.
If the count is reached, the Observable will not be resubscribed, but the error is propagated down the stream.
This operator is recommended for use.</p>
</li>
<li>
<p><code class="api">retry(Func2&lt;Integer, Throwable, Boolean&gt; predicate)</code>: Instantly retry as long as the predicate returns true.
Arguments to the predicate are the number of tries, as well as the exception type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since the <code>predicate</code> method provides the most flexibility, it is recommended to use it.
If you only want to handle a specific exception and retry a maximum of <code>MAX_TRIES</code> times, you can do it like this:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Observable.error(new CASMismatchException())
    .retry(new Func2&lt;Integer, Throwable, Boolean&gt;() {
        @Override public Boolean call(Integer tries, Throwable throwable) {
            return (throwable instanceof CASMismatchException) &amp;&amp; tries &lt; MAX_TRIES;
        }
    })
    .subscribe();</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
Try replacing <code>CASMismatchException</code> with something else and you will see that it does not try to retry, but rather propagates the error downstream.
You can use this technique to handle specific errors differently by adding more retry operators in the pipeline.</p>
</div>
<div class="paragraph">
<p>+
Using the <code>retry</code> with <code>predicate</code> also allows you to log the number of retries for a specific error.
If you use the <code class="api">doOnError</code> for logging, it&#8217;s harder to log the number of retries.</p>
</div>
<div class="paragraph">
<p>+
The synchronous equivalent to the latest code looks like this:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">int tries = 0;
while(true) {
    tries++;
    try {
        pretendWorkThatMaybeThrows(); // does some work and maybe throws break;
    } catch(Throwable throwable) {
        if (!(throwable instanceof CASMismatchException) || tries &gt;= MAX_TRIES) {
            throw throwable; // rethrow exceptions
        }
    }
}</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="retrydelay" class="dlist">
<dl>
<dt class="hdlist1">Retry with delay</dt>
<dd>
<p>When applying a <em class="term">Retry with delay</em>, the main question you need to ask yourself is: how often and how long is it feasible to retry before giving up (and escalate the error).
Using this retry option depends on the type of operation, use case, and SLA that the application requires, but the techniques are the same.</p>
<div class="paragraph">
<p>RxJava provides the <code class="api">retryWhen</code> operator, which allows you more flexibility with the actions performed as well as when the resubscription is happening.
This section covers the different delay approaches based on this operator.</p>
</div>
<div class="paragraph">
<p>Here is the contract for <code class="api">retryWhen</code> that you should always keep in mind:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is called when an error on the source <code>Observable</code> happens.</p>
</li>
<li>
<p>The function provided will be called with an <code>Observable</code> containing this error.</p>
</li>
<li>
<p>If you make this <code>Observable</code> error, it is propagated downstream (without retrying).</p>
</li>
<li>
<p>If you make this <code>Observable</code> complete, it is propagated downstream (without retrying).</p>
</li>
<li>
<p>If you make this <code>Observable</code> call <code class="api">onNext</code>, a retry will happen.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since the version 2.1.0 the Java SDK comes with the <code class="api">RetryBuilder</code>, a helper to describe when and how to retry: only on certain classes of exceptions, max 5 attempts, the exponential delay between attempts, and so on.
The result of this builder (<code class="api">calling build()</code>) can be used with RxJava&#8217;s <code class="api">retryWhen</code> operator directly:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Observable.error(new IllegalStateException())
    .retryWhen(
        RetryBuilder.anyOf(IllegalStateException.class).max(6).delay(Delay.linear(TimeUnit.SECONDS)).build()
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
This code will ultimately fail after 6 additional attempts.
It would fail fast if the source returns an error with something other than an <code class="api">IllegalStateException</code> during retries.
Each attempt will be made with an increasing delay, which grows linearly (1 second, then 2, 3, 4).
If an exception occurs that is not managed by the handler, it is propagated as is, allowing you to chain such handlers.</p>
</div>
<div class="paragraph">
<p>+
If the maximum number of attempts is reached, the last exception that occurred is propagated, wrapped in a <code class="api">CannotRetryException</code>.
This helper allows to write retry semantics more easily, but in this section it is explained how to write them from scratch.</p>
</div>
<div class="paragraph">
<p>+
The easiest approach is the <em class="term">fixed delay</em>.
The source <code>Observable</code> will be resubscribed after a specified amount of time and for a fixed maximum number of times.</p>
</div>
<div class="paragraph">
<p>+
Because the nested logic is a bit harder to understand in the first place, let&#8217;s talk through it step by step and then put it together.</p>
</div>
<div class="paragraph">
<p>+
Our <code class="api">retryWhen</code> function is called every time an error happens on the source <code>Observable</code>.
If we wanted to try forever every second, it could look like this:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">.retryWhen(new Func1&lt;Observable&lt;? extends Throwable&gt;, Observable&lt;?&gt;&gt;() {
    @Override public Observable&lt;?&gt; call(Observable&lt;?extends Throwable&gt; errorNotification) {
        return errorNotification.flatMap(new Func1&lt;Throwable, Observable&lt;?&gt;&gt;() {
            @Override public Observable&lt;?&gt; call(Throwable throwable) {
                return Observable.timer(1, TimeUnit.SECONDS);
            }
        });
    }
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
We <code class="api">flatMap</code> our notification <code>Observable</code> and utilize the <code class="api">Observable#timer</code> to defer emitting a new event for a second.
Since we need to stop at some point, after a given number of tries, we can utilize the <code class="api">Observable#zipWith</code> operator to zip our error stream together with a range where we specify the number of tries we want to allow.
Zipping has the nice side-effect that once one of the <code>Observable</code> is completed, the resulting <code>Observable</code> will also be complete, which triggers our Rule 4 from above.</p>
</div>
<div class="paragraph">
<p>+
The modified version looks like this:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">.retryWhen(new Func1&lt;Observable&lt;? extends Throwable&gt;, Observable&lt;?&gt;&gt;() {
    @Override
    public Observable&lt;?&gt; call(Observable&lt;? extends Throwable&gt; errorNotification) {
        return errorNotification.zipWith(Observable.range(1, 4), new Func2&lt;Throwable, Integer, Integer&gt;() {
            @Override
            public Integer call(Throwable throwable, Integer attempts) {
                return attempts;
            }
    })
        .flatMap(new Func1&lt;Integer, Observable&lt;?&gt;&gt;() {
            @Override
            public Observable&lt;?&gt; call(Integer attempts) {
                return Observable.timer(1, TimeUnit.SECONDS);
            }
        });
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
Technically, we don&#8217;t need the zip function here because we ignore it later on, but it is required for the <code>zipWith</code> operator to work.
We use the <code class="api">Observable#range</code> operator to create an <code>Observable</code> that emits three events and then completes, so we will never end up with more retries.</p>
</div>
<div class="paragraph">
<p>+
There is one more enhancement needed: the code as it stands there will swallow the originating exception when moving on, which is not good because it should be propagated if it can&#8217;t be handled in this code block.</p>
</div>
<div class="paragraph">
<p>+
The following code is modified so that the function of <code>zipWith</code> returns not only the attempted count but also the throwable, so that Couchbase Server has access to it in the <code class="api">flatMap</code> method.
For this, the Java client has a generic <code class="api">Tuple</code> the server can utilize.
In the <code class="api">flatMap</code>, Couchbase Server checks for the number of attempts, and if it is over the threshold, it re-throws the exception.
Keep in mind that you need to change <code class="api">Observable#range</code> call to <code>MAX_ATTEMPTS+1</code>, to give your code a chance to be called again one final time.</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">.retryWhen(new Func1&lt;Observable&lt;? extends Throwable&gt;, Observable&lt;?&gt;&gt;() {
  @Override public Observable&lt;?&gt; call(Observable&lt;? extends Throwable&gt; errorNotification) {
    return errorNotification.zipWith(Observable.range(1, 5), new Func2&lt;Throwable, Integer, Tuple2&gt;Throwable, Integer&gt;&gt;() {
      @Override public Tuple2&lt;Throwable, Integer&gt; call(Throwable throwable, Integer attempts) {
        return Tuple.create(throwable, attempts);
      }
    }).flatMap(new Func1&lt;Tuple2&lt;Throwable, Integer&gt;, Observable&lt;?&gt;&gt;() {
      @Override
      public Observable&lt;?&gt; call(Tuple2&lt;Throwable, Integer&gt; attempt) {
        if (attempt.value2() == 3) {
          return Observable.error(attempt.value1());
        }
        return Observable.timer(1, TimeUnit.SECONDS);
      }
    });
  }
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
If you want to enhance it even further, you can add one more <code class="api">if()</code>clause in the <code class="api">flatMap</code> to see if the throwable that is passed down is actually the one we want to retry.</p>
</div>
<div class="paragraph">
<p>+
Functionality like this is a great candidate to be generic and encapsulated, so that&#8217;s what we did with <code class="api">RetryBuilder</code>.
If you are already using Java 8, the code becomes more condensed as well:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">.retryWhen(notification -&gt; notification.zipWith(Observable.range(1, 5), Tuple::create)
  .flatMap(att -&gt; att.value2() == 3 ? Observable.error(att.value1()) : Observable.timer(1, TimeUnit.SECONDS)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
Here are the variations for linear, exponential and random delays:</p>
</div>
<div class="paragraph">
<p>+
<strong>Linear:</strong></p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Utilizes the number of attempts for the number of seconds to wait
    .retryWhen(notification -&gt; notification
    .zipWith(Observable.range(1, 5), Tuple::create)
    .flatMap(att -&gt; att.value2() == 3 ? Observable.error(att.value1()) : Observable.timer(att.value2(), TimeUnit.SECONDS))
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
<strong>Exponential:</strong></p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Uses the timer with 2^attempts to generate exponential delays
    .retryWhen(notification -&gt; notification
    .zipWith(Observable.range(1, 5), Tuple::create)
    .flatMap(att -&gt; att.value2() == 3 ? Observable.error(att.value1()) : Observable.timer(1 &lt;&lt; att.value2(), TimeUnit.SECONDS))
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
<strong>Random:</strong></p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Random between 0 and 5 seconds to retry per attempt
    .retryWhen(notification -&gt; notification
    .zipWith(Observable.range(1, 5), Tuple::create)
    .flatMap(att -&gt; att.value2() == 3 ? Observable.error(att.value1()) : Observable.timer(new Random().nextInt(5), TimeUnit.SECONDS))
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
With the synchronous code, there are not many options other than using <code class="api">Thread.sleep()</code> to keep the current thread waiting until the loop is allowed to proceed:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Linear Backoff
int tries = 0;
while(true) {
    tries++;
    try {
        pretendWorkThatMaybeThrows(); // does some work and maybe throws
        break;
    } catch(Throwable throwable) {
        if (!(throwable instanceof CASMismatchException) || tries &gt;= MAX_TRIES) {
        throw throwable; // rethrow exceptions
    }
    Thread.sleep(TimeUnit.SECONDS.toMillis(tries));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
You can then use the same approaches as with the asynchronous ones on the <code class="api">Thread.sleep()</code> time to accommodate for a static, linear, exponential or random delay.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="error-handling-fallback"><a class="anchor" href="#error-handling-fallback"></a>Error Handling - Fallback</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of (or in addition to) retrying, another valid option is falling back to either a different <code>Observable</code> or a default value.</p>
</div>
<div class="paragraph">
<p>RxJava provides you with different operators, prefixed with <code class="api">onError*()</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="api">onErrorReturn(Func1&lt;Throwable, T&gt;)</code>: It is called when the source <code>Observable</code> errors and allows to return custom data instead.</p>
</li>
<li>
<p><code class="api">onErrorResumeNext(Observable&lt;?&gt;)</code>: It is called when the source <code>Observable</code> errors and allows to resume transparently with a different Observable.</p>
</li>
<li>
<p><code class="api">onErrorResumeNext(Func1&lt;Throwable, Observable&lt;?&gt;)</code>: It is called when the source <code>Observable</code> errors and allows to transparently resume with an <code>Observable</code> (based on a specific <code>Throwable</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should use the <code class="api">onErrorReturn</code> if you want to fallback to static data quickly.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Observable.&lt;String&gt;error(new Exception("I failed"))
    .onErrorReturn(new Func1&lt;Throwable, String&gt;() {
        @Override
        public String call(Throwable throwable) {
            // You could return data based on the throwable as well
            return "Default";
        }
    })
    .subscribe();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you only want to return default values based on a specific exception or even call another <code>Observable</code> as fallback, <code class="api">onErrorResumeNext</code> is what you&#8217;re looking for.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Observable.&lt;String&gt;error(new TimeoutException("I failed"))
    .onErrorResumeNext(new Func1&lt;Throwable, Observable&lt;? extends String&gt;&gt;() {
        @Override
        public Observable&lt;? extends String&gt; call(Throwable throwable) {
            if (throwable instanceof TimeoutException) {
                return Observable.just("Default");
            }
            // Forward anything other than the TimeoutException
            return Observable.error(throwable);
        }
    })
    .subscribe();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you just want to fallback onto another <code>Observable</code> that you have in scope without caring about the Exception, you can use the other <code class="api">onErrorResumeNext()</code> overload.
For example, this loads data from all replicas if the <code class="api">get()</code> call did not succeed with the Java SDK:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">bucket.async()
    .get("id")
    .onErrorResumeNext(bucket.async().getFromReplica("id", ReplicaMode.ALL))
    .subscribe();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Synchronous fallbacks can be implemented by conditionally setting the default in the <code class="api">catch</code> clause:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String value;
try {
    value = pretendWorkThatMaybeThrows();
} catch(Exception ex) {
    value = "Default";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the gotcha: this synchronous example only works great if the fallback is static.
If you need to fallback into another database call, for example, you quickly get into nested error handling and timeouts are a pain to handle (since they start to accumulate for every synchronous call).
It is recommended to use asynchronous fallbacks and then block at the very end through <code class="api">toBlocking().single()</code> or equivalents.</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/+CouchbaseServer" class="icon">
              <svg width="50px" height="50px" viewBox="36.72 225.573 542.326 343.67"><path d="m209.02 363.05v68.732h93.212c-15.065 44.252-37.662 68.732-93.212 68.732-56.492 0-100.74-46.135-100.74-102.63s44.252-102.63 100.74-102.63c30.129 0 48.96 10.357 66.849 25.422 14.123-14.123 13.182-16.006 48.96-49.902-31.071-28.246-71.557-45.194-115.81-45.194-95.096-0.94-172.3 76.266-172.3 171.36s77.206 172.3 172.3 172.3c142.17 0 177.01-124.28 165.71-206.2-33.896-1e-3 -165.71-1e-3 -165.71-1e-3zm310.71 3.766v-59.317h-42.369v59.317h-61.2v42.369h61.2v61.2h42.369v-61.2h59.317v-42.369h-59.317z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2018 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
