<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>FROM clause | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4471/server/6.0/index.html">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="server">
    <meta name="dcterms.identifier" content="6.5">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4471">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../../../server/6.0/introduction/intro.html">Server</a></li>
                  <li><a href="../../../../server/6.0/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../../../server/6.0/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../../../server/6.0/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../../../server/6.0/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="#">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="#">Lite</a></li>
                  <li><a href="#">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../../../server/6.0/sdk/overview.html">SDKs</a></li>
                  <li><a href="../../../../c-sdk/2.10/start-using-sdk.html">C</a></li>
                  <li><a href="../../../../dotnet-sdk/2.7/start-using-sdk.html">.NET</a></li>
                  <li><a href="../../../../go-sdk/1.5/start-using-sdk.html">Go</a></li>
                  <li><a href="../../../../java-sdk/2.7/start-using-sdk.html">Java</a></li>
                  <li><a href="../../../../nodejs-sdk/2.6/start-using-sdk.html">Node.js</a></li>
                  <li><a href="../../../../php-sdk/2.6/start-using-sdk.html">PHP</a></li>
                  <li><a href="../../../../python-sdk/2.5/start-using-sdk.html">Python</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../../../server/6.0/connectors/intro.html">Connectors</a></li>
                  <li><a href="#">Elasticsearch</a></li>
                  <li><a href="../../../../server/6.0/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="#">Kafka</a></li>
                  <li><a href="#">Spark</a></li>
                  <li><a href="#">Talend</a></li>
                  <li><a href="../../../../server/6.0/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="../../introduction/intro.html"><span class="title">server</span> <span class="version">6.5 DRAFT</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../../../6.0/index.html">server 6.0</a></li>
                  <li><a class="navbar-item" href="../../../5.5/index.html">server 5.5</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Welcome!</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../introduction/intro.html">Why Couchbase?</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../introduction/whats-new.html">What&#8217;s New?</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../introduction/editions.html">Couchbase Server Editions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../introduction/contact-couchbase.html">Contact Couchbase</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Get Started</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../getting-started/start-here.html">Start Here!</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../getting-started/do-a-quick-install.html">Do a Quick Install</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../getting-started/look-at-the-results.html">Explore the Server Configuration</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../getting-started/try-a-query.html">Run Your First N1QL Query</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../getting-started/choose-your-next-steps.html">Choose Your Next Steps</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Learn</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/architecture-overview.html">Overview</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/glossary.html">Glossary</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/architecture-diagrams.html">List of Architecture Diagrams</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/data/data.html">Data</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/data/document-data-model.html">Data Model</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/data/n1ql-versus-sql.html">N1QL versus SQL</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/data/extended-attributes-fundamentals.html">Extended Attributes</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/buckets-memory-and-storage.html">Buckets, Memory, and Storage</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/buckets.html">Buckets</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/vbuckets.html">vBuckets</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/compression.html">Compression</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/expiration.html">Expiration</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/memory-and-storage.html">Memory and Storage</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/memory.html">Memory</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/buckets-memory-and-storage/storage.html">Storage</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/services-and-indexes/services-and-indexes.html">Services and Indexes</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/services-and-indexes/services/services.html">Services</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/services/data-service.html">Data Service</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/services/query-service.html">Query Service</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/services/index-service.html">Index Service</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/services/search-service.html">Search Service</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/services/analytics-service.html">Analytics Service</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/services/eventing-service.html">Eventing Service</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/services-and-indexes/indexes/indexes.html">Indexes</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/services-and-indexes/indexes/global-secondary-indexes.html">Global Secondary Indexes</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/indexes/index-replication.html">Availability and Performance</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/indexes/indexing-and-query-perf.html">Indexing</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/indexes/index-scans.html">Scans</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/indexes/index_pushdowns.html">Pushdowns</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/services-and-indexes/indexes/storage-modes.html">Storage Settings</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/views/views-intro.html">Views</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/views/views-basics.html">View Concepts</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-streaming.html">Stream-based Views</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-operation.html">View Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-store-data.html">Views and Stored Data</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-development.html">Development Views</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-production.html">Production Views</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/views/views-mapreduce-intro.html">MapReduce Views</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/views/views-writing.html">Writing MapReduce Views</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-views.html">Views Best Practices</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-map.html">Map Function</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-reduce.html">Reduce Function</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-utility.html">Built-in Utility Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-count.html">Built-in _count Function</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-sum.html">Built-in _sum Function</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-stats.html">Built-in _stats Function</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-rewriting.html">Re-writing Built-in Reduce Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-custom-reduce.html">Custom Reduce Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-rereduce.html">Re-reduce Argument</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-writing-nonjson.html">Views for Non-JSON Objects</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-trans-sql.html">Translating SQL to MapReduce</a>
    </span>
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-schemaless.html">Views in a Schema-less Database</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/views/views-querying.html">Querying MapReduce Views</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/views-query-samples.html">View and Query Examples</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/views/view-indexes-for-n1ql.html">View Indexes for N1QL</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/clusters-and-availability/clusters-and-availability.html">Clusters and Availability</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/cluster-manager.html">Cluster Manager</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/connectivity.html">Connectivity</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/size-limitations.html">Size Limitations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/clusters-and-availability/nodes.html">Nodes</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/clusters-and-availability/failover.html">Failover</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/graceful-failover.html">Graceful</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/hard-failover.html">Hard</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/automatic-failover.html">Automatic</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/rebalance.html">Rebalance</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/recovery.html">Recovery</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/clusters-and-availability/replication-architecture.html">Availability</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/intra-cluster-replication.html">Intra-Cluster Replication</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/clusters-and-availability/xdcr-overview.html">Cross Data Center Replication (XDCR)</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/xdcr-advanced-settings.html">XDCR Advanced Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/xdcr-conflict-resolution.html">XDCR Conflict Resolution</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/xdcr-filtering.html">XDCR Filtering</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/xdcr-cloud-deployment.html">XDCR Cloud Deployment</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/clusters-and-availability/groups.html">Server Group Awareness</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/security/security-overview.html">Security</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/security/authentication-overview.html">Authentication</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/security/usernames-and-passwords.html">Usernames and Passwords</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/security/certificates.html">Certificates</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../learn/security/authorization-overview.html">Authorization</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/security/roles.html">Roles</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/security/resources-under-access-control.html">Resources Under Access Control</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/security/upgrading-to-rbac.html">Upgrading to RBAC</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../learn/security/auditing.html">Auditing</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Manage</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/management-overview.html">Overview</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/management-tools.html">Management Tools</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-nodes/node-management-overview.html">Manage Nodes and Clusters</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/initialize-node.html">Initialize a Node</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/create-cluster.html">Create a Cluster</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/add-node-and-rebalance.html">Add a Node and Rebalance</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/join-cluster-and-rebalance.html">Join a Cluster and Rebalance</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/list-cluster-nodes.html">List Cluster Nodes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/remove-node-and-rebalance.html">Remove a Node and Rebalance</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-nodes/fail-nodes-over.html">Fail a Node Over and Rebalance</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/failover-graceful.html">Graceful</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/failover-hard.html">Hard</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-nodes/recover-nodes.html">Recover a Node and Rebalance</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-buckets/bucket-management-overview.html">Manage Buckets</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-buckets/create-bucket.html">Create a Bucket</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-buckets/edit-bucket.html">Edit a Bucket</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-buckets/flush-bucket.html">Flush a Bucket</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-buckets/delete-bucket.html">Delete a Bucket</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-logging/manage-logging.html">Manage Logging</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-settings/manage-settings.html">Manage Settings</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-settings/cluster-settings.html">Cluster</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-settings/update-notification.html">Software Updates</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-settings/change-failover-settings.html">Node Availability</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-settings/configure-alerts.html">Email Alerts</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-settings/configure-compact-settings.html">Auto Compaction</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-settings/install-sample-buckets.html">Sample Buckets</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-groups/manage-groups.html">Manage Groups</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-xdcr/xdcr-management-overview.html">Manage XDCR</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/prepare-for-xdcr.html">Prepare for XDCR</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/create-xdcr-reference.html">Create a Reference</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/create-xdcr-replication.html">Create a Replication</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/pause-xdcr-replication.html">Pause a Replication</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/resume-xdcr-replication.html">Resume a Replication</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/delete-xdcr-replication.html">Delete a Replication</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/delete-xdcr-reference.html">Delete a Reference</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-xdcr/secure-xdcr-replication.html">Secure a Replication</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/enable-half-secure-replication.html">Half-Secure</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/enable-full-secure-replication.html">Fully Secure</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/recover-data-with-xdcr.html">Recover Data with XDCR</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-xdcr/monitor-xdcr-replication.html">Monitor a Replication</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-security/security-management-overview.html">Manage Security</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/manage-security-settings.html">Manage Security Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/manage-users-and-roles.html">Manage Users and Roles</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-security/manage-authentication.html">Manage Authentication</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/configure-saslauthd.html">Configure saslauthd</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/configure-pam.html">Configure PAM</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/manage-security/manage-certificates.html">Manage Certificates</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/configure-server-certificates.html">Configure Server Certificates</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/configure-client-certificates.html">Configure Client Certificates</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/enable-client-certificate-handling.html">Enable Client-Certificate Handling</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/rotate-server-certificates.html">Rotate Server Certificates</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/handle-certificate-errors.html">Handle Certificate Errors</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/manage-auditing.html">Manage Auditing</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/manage-sessions.html">Manage Sessions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/manage-console-access.html">Manage Console Access</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/manage-system-secrets.html">Manage System Secrets</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/manage-security/manage-connections-and-disks.html">Manage Connections and Disks</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../backup-restore/backup-restore.html">Manage Backup and Restore</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../backup-restore/enterprise-backup-restore.html">Backup</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="#">backup-restore:cbbackupmgr-strategies.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="#">backup-restore:cbbackupmgr-tutorial.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="#">backup-restore:cbbackupmgr-archivelayout.adoc</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../backup-restore/incremental-backup.html">Incremental Backup and Restore</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/monitor/monitor-intro.html">Monitor</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/monitor/monitoring-stats-configuration.html">Manage Monitoring Options</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/monitor/monitoring-rest.html">Monitor with REST</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/monitor/monitoring-cli.html">Monitor with cbstats</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/monitor/ui-monitoring-statistics.html">Monitor Statistics</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/monitor/xdcr-monitor-timestamp-conflict-resolution.html">Monitor XDCR Timestamp-based Conflict Resolution</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/monitor/monitoring-n1ql-query.html">Monitor Queries</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../manage/troubleshoot/troubleshoot.html">Troubleshoot</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/troubleshoot/common-errors.html">Common Errors</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../manage/troubleshoot/core-files.html">Core Files</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Develop</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../sdk/development-intro.html">Developer&#8217;s Intro</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../sdk/overview.html">SDKs</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">c-sdk::start-using-sdk.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">dotnet-sdk::start-using-sdk.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">go-sdk::start-using-sdk.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">java-sdk::start-using-sdk.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">nodejs-sdk::start-using-sdk.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">php-sdk::start-using-sdk.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">python-sdk::start-using-sdk.adoc</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../getting-started/starter-kits.html">Starter Kits</a>
    </span>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Query</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="index.html">N1QL Language Reference</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-error-codes.html">N1QL Error Codes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-intro/queriesandresults.html">N1QL Queries and Results</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql_application_continuity.html">N1QL Application Continuity</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="groupby-aggregate-performance.html">Group By and Aggregate Performance</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../settings/query-settings.html">Query Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-intro/sysinfo.html">Getting System Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-intro/cbq.html">Running N1QL Queries from a Command Line</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="conventions.html">Conventions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="reservedwords.html">Reserved Words</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="datatypes.html">Data Types</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="literals.html">Literals</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="identifiers.html">Identifiers</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-auditing.html">N1QL Auditing</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="backfill.html">Backfill Support for N1QL</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Operators</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="operators.html">Operators Overview</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="arithmetic.html">Arithmetic Operators</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="collectionops.html">Collection Operators</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="comparisonops.html">Comparison Operators</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="conditionalops.html">Conditional Operators</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="constructionops.html">Construction Operators</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="logicalops.html">Logical Operators</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="nestedops.html">Nested Operators and Expressions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="stringops.html">String Operators</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Functions</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="functions.html">Functions Overview</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="aggregatefun.html">Aggregate Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="arrayfun.html">Array Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="bitwisefun.html">Bitwise Functions in N1QL</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="comparisonfun.html">Comparison Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="condfununknown.html">Conditional Functions for Unknowns</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="condfunnum.html">Conditional Functions for Numbers</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="datefun.html">Date Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="jsonfun.html">JSON Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="metafun.html">Miscellaneous Utility Functions</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="curl.html">CURL Function</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="numericfun.html">Number Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="objectfun.html">Object Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="patternmatchingfun.html">Pattern-matching Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="stringfun.html">String Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="tokenfun.html">Token Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="typefun.html">Type Functions</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="windowfun.html">Window Functions</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="subqueries.html">Subqueries</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="correlated-subqueries.html">Correlated Subqueries</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="subquery-examples.html">Examples</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="booleanlogic.html">Boolean Logic</a>
    </span>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Statements</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="alterindex.html">ALTER INDEX</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="build-index.html">BUILD INDEX</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="createindex.html">CREATE INDEX</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="indexing-arrays.html">Array Indexing</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="covering-indexes.html">Covering Indexes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="adaptive-indexing.html">Adaptive Index</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="indexing-meta-info.html">Indexing Metadata Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="index-partitioning.html">Index Partitioning</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="createprimaryindex.html">CREATE PRIMARY INDEX</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="delete.html">DELETE</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="dropindex.html">DROP INDEX</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="dropprimaryindex.html">DROP PRIMARY INDEX</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="execute.html">EXECUTE</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="explain.html">EXPLAIN</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="grant.html">GRANT</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="infer.html">INFER</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="insert.html">INSERT</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="merge.html">MERGE</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="prepare.html">PREPARE</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="revoke.html">REVOKE</a>
    </span>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">SELECT</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="selectintro.html">Overview</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="select-syntax.html">SELECT Syntax</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="selectclause.html">SELECT Clause</a>
    </span>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="from.html">FROM clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="hints.html">USE INDEX clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="let.html">LET clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="where.html">WHERE clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="groupby.html">GROUP BY clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="union.html">UNION, INTERSECT, and EXCEPT</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="orderby.html">ORDER BY clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="window.html">OVER clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="limit.html">LIMIT clause</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="offset.html">OFFSET clause</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="update.html">UPDATE</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="upsert.html">UPSERT</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../fts/full-text-intro.html">Search</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../fts/fts-performing-searches.html">Performing Searches</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-searching-from-the-ui.html">Searching from the UI</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-searching-with-the-rest-api.html">Searching with the REST API</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-demonstration-indexes.html">Demonstration Indexes</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-creating-indexes.html">Creating Indexes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-using-analyzers.html">Understanding Analyzers</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../fts/fts-queries.html">Understanding Queries</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../fts/fts-query-types.html">Query Types</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-geospatial-queries.html">Geospatial Queries</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-sorting.html">Sorting Query Results</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-response-object-schema.html">Handling Response Objects</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../fts/fts-troubleshooting.html">Troubleshooting and FAQs</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../eventing/eventing-overview.html">Eventing Service</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-Terminologies.html">Terminology</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../eventing/eventing-language-constructs.html">Language Constructs</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-timers.html">Timers</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-adding-function.html">Adding a Couchbase Function</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../eventing/eventing-examples.html">Examples: Using the Eventing Service</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-example-data-enrichment.html">Data Enrichment</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-examples-high-risk.html">Risk Assessment</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-examples-cascade-delete.html">Cascade Delete</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-examples-docexpiry.html">Document Expiry and Archival</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-debugging-and-diagnosability.html">Debugging and Diagnosability</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-statistics.html">Statistics</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/troubleshooting-best-practices.html">Troubleshooting and Best Practices</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-faq.html">Frequently Asked Questions</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Install &amp; Upgrade</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../install/get-started.html">Couchbase Server Deployment Options</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/plan-for-production.html">System Requirements</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-platforms.html">Supported Operating Systems</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/pre-install.html">System Resource Requirements</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-environments.html">Additional Requirements</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-browsers.html">Supported Web Browsers</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/install-ports.html">Network and Firewall Requirements</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../install/ipv6-setup.html">Using IPv6 With Couchbase</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/install-production-deployment.html">Deployment Guidelines</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/sizing-general.html">Sizing Guidelines</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../clustersetup/services-mds.html">Multidimensional Scaling (MDS)</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/synchronize-clocks-using-ntp.html">Clock Sync with NTP</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/thp-disable.html">Disabling Transparent Huge Pages (THP)</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-swap-space.html">Swap Space and Kernel Swappiness</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-client-server.html">Couchbase Client Deployment Strategies</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-security-bp.html">Security Considerations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/best-practices-vm.html">Deployment Considerations for Virtual Machines and Containers</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/deployment-considerations-lt-3nodes.html">About Deploying Clusters With Less Than Three Nodes</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/install-intro.html">Installing the Couchbase Server Cluster</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/install-linux.html">Installing on Linux</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../install/rhel-suse-install-intro.html">Red Hat and CentOS Installation</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../install/ubuntu-debian-install.html">Ubuntu/Debian Installation</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install_suse.html">SUSE Enterprise Linux installation</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-oracle.html">Oracle Enterprise Linux installation</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../install/rhel-multiple-instances.html">Installing Multiple Instances on Linux Platforms</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-package-windows.html">Installing on Windows</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/macos-install.html">Installing on Mac OS X</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/testing.html">Verifying the Couchbase Server Installation</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/init-setup.html">Initializing the Cluster</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/startup-shutdown.html">Couchbase Server Startup and Shutdown</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/install-uninstalling.html">Uninstalling Couchbase Server</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/running-couchbase-in-containers.html">Deploying Couchbase Server in Containers</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/getting-started-docker.html">Running Couchbase Server Using Docker</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cloud/couchbase-cloud-deployment.html">Deploying Couchbase in the Cloud</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cloud/couchbase-aws.html">Amazon Web Services and Couchbase</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cloud/couchbase-aws-best-practices.html">Best Practices on AWS</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cloud/couchbase-aws-marketplace.html">Deploying with the AWS Marketplace</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cloud/aws-terraform.html">Deploying with Terraform on AWS</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cloud/couchbase-azure.html">Microsoft Azure and Couchbase</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cloud/couchbase-azure-best-practices.html">Best Practices on Azure</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cloud/couchbase-azure-marketplace.html">Deploying with the Azure Marketplace</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cloud/couchbase-gcp.html">Google Cloud Platform and Couchbase</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cloud/couchbase-gcp-best-practices.html">Best Practices on GCP</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cloud/couchbase-gcp-cloud-launcher.html">Deploying with the Google Cloud Launcher</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../install/upgrade.html">Upgrading Couchbase Server</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/upgrade-strategies.html">Upgrade Options</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/upgrade-online.html">Performing the Rolling Online Upgrade</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/upgrade-offline.html">Performing the Offline Upgrade</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/upgrade-individual-nodes.html">Performing the Single Node Upgrade</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/upgrade-strategy-for-features.html">Upgrading to Couchbase Server 6.0</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Migrating</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/migration.html">Enabling Timestamp-based Conflict Resolution for Migrated Data</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/migrate-couchdb.html">Migrating from Apache CouchDB</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../install/migrate-mysql.html">Migrating from Relational Databases</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Integrate</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../connectors/intro.html">Connector Guides</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="#">elasticsearch-connector::index.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../connectors/hadoop-1.2/hadoop.html">Hadoop Connector</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="#">kafka-connector::index.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="#">spark-connector::index.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="#">talend-connector::index.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../connectors/odbc-jdbc-drivers.html">Couchbase ODBC and JDBC Drivers</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Reference</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cli/cli-intro.html">CLI Reference</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbanalyze-core-tool.html">cbanalyze-core</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cli/cbbackup-tool.html">cbbackup</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/backup-cbbackup.html">Backing up with cbbackup</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbbackup-wrapper.html">cbbackupwrapper and cbrestorewrapper</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbcollect-info-tool.html">cbcollect_info</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbdocloader-tool.html">cbdocloader</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cli/cbepctl-intro.html">cbepctl</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbepctl/set-checkpoint_param.html">set checkpoint_param</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbepctl/set-flush_param.html">set flush_param</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbepctl/set-tap_param.html">set tap_param</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbft-bleve-dump.html">cbft-bleve-dump</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbft-bleve-query.html">cbft-bleve-query</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="#">cli:cbcli/cblogredaction.adoc</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbq-tool.html">cbq</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbrecovery.html">cbrecovery</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cli/cbrestore-tool.html">cbrestore</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/restore-cbrestore.html">Restoring with cbrestore</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbrestore-tween-opsys.html">rehash=1</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../cli/cbstats-intro.html">cbstats</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-all.html">all</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-allocator.html">allocator</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-checkpoint.html">checkpoint</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-config.html">config</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-dcp.html">dcp</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-dcpagg.html">dcpagg</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-dcp-vbtakeover.html">dcp-vbtakeover</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-diskinfo.html">diskinfo</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-dispatcher-job.html">dispatcher</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-failovers.html">failovers</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-hash.html">hash</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-items.html">items</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-key.html">key</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-kvstore.html">kvstore</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-kvtimings.html">kvtimings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-memory.html">memory</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-prev-vbucket.html">prev-vbucket</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-raw.html">raw</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-reset.html">reset</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-responses.html">responses</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-runtimes.html">runtimes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-scheduler.html">scheduler</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-slabs.html">slabs</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-tap-vbtakeover.html">tap-vbtakeover</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-tasks.html">tasks</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-timing.html">timings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-uuid.html">uuid</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-vbucket.html">vbucket</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-vbucket-details.html">vbucket-details</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-vbucket-seqno.html">vbucket-seqno</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-vkey.html">vkey</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-warmup.html">warmup</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbstats/cbstats-workload.html">workload</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbtransfer-tool.html">cbtransfer</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/cbworkloadgen-tool.html">cbworkloadgen</a>
    </span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../cli/mctimings.html">mctimings</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-intro.html">REST API reference</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-endpoints-all.html">REST API endpoint list</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-cluster-intro.html">Cluster API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-provisioning.html">Creating a new cluster</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-get.html">Retrieving Cluster Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-details.html">Viewing Cluster Details</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-addnodes.html">Adding Nodes to Clusters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-joinnode.html">Joining Nodes into Clusters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-removenode.html">Removing Nodes from Clusters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-rebalance.html">Rebalancing Nodes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-get-internal-setting.html">Viewing Internal Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-cluster-autofailover-intro.html">Managing Auto-Failover</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-autofailover-settings.html">Retrieving Auto-Failover Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-autofailover-enable.html">Enabling and Disabling Auto-Failover</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-autofailover-reset.html">Resetting Auto-Failover</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-disable-query.html">Disabling Consistent View Query Results on Rebalance</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-cluster-email-notifications.html">Setting Email Notifications</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-server-nodes.html">Server Nodes API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-get-info.html">Getting Server Node Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-services.html">Enabling Couchbase Server Services</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-failover.html">Failing over Nodes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-recovery-incremental.html">Setting Recovery Type</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-failover-graceful.html">Setting Graceful Failover</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-hostname.html">Setting Hostnames</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-set-username.html">Setting Usernames and Passwords</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-memory-quota.html">Setting Memory Quota</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-index-path.html">Setting Storage Paths</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-node-retrieve-stats.html">Retrieving Statistics</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-rza.html">Server Groups API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-servergroup-get.html">Getting Server Group Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-servergroup-post-create.html">Creating Server Groups</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-servergroup-post-add.html">Adding Servers to Server Groups</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-servergroup-put.html">Renaming Server Groups</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-servergroup-put-membership.html">Updating Server Group Memberships</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-servergroup-delete.html">Deleting Server Groups</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-bucket-intro.html">Buckets API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-buckets-summary.html">Getting all Bucket Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-info.html">Getting Single Bucket Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-stats.html">Getting Bucket Statistics</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-buckets-streamingURI.html">Getting Bucket Streaming URI</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-create.html">Creating and Editing Buckets</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-set-priority.html">Setting Disk I/O Priority</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-metadata-ejection.html">Setting Metadata Ejection</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-parameters.html">Changing Bucket Parameters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-memory-quota.html">Changing Bucket Memory Quota</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-delete.html">Deleting Buckets</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-bucket-flush.html">Flushing Buckets</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/compaction-rest-api.html">Compaction API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-compact-post.html">Compacting Buckets</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-autocompact-get.html">Getting Auto-Compaction Settings</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-index-service.html">Index Service API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/get-settings-indexes.html">Retrieve GSI Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/post-settings-indexes.html">Set GSI Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/get-status-indexes.html">Retrieve GSI Status</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/get-statement-indexes.html">Retrieve a GSI Statement</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../n1ql-rest-api/index.html">N1QL REST API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../n1ql-rest-api/examplesrest.html">Examples</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exsuccessful.html">Successful request</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/expositional.html">Request with positional parameters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exnamed.html">Request with Named Parameters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/extimeout.html">Request Timeout</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exrequesterror.html">Request error</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exserviceerror.html">Service error</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exn1qlerror.html">N1QL error</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exunsupportedhttp.html">Unsupported HTTP method</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exauthhttp.html">Request with authentication - HTTP header</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../n1ql-rest-api/exauthrequest.html">Request with authentication - request parameter</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-fts.html">Full Text Search API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-fts-node.html">Node Configuration</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-fts-indexing.html">Indexes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-fts-advanced.html">Advanced</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../eventing/eventing-api.html">Functions REST API</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-views-intro.html">Views API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-ddocs-get.html">Getting Design Doc Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-ddocs-create.html">Creating Design Documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-ddocs-delete.html">Deleting Design Documents</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-views-get.html">Getting Views Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-views-requests.html">Limiting Views Requests</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-xdcr-intro.html">XDCR API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-create-replication.html">Creating XDCR Replications</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-get-ref.html">Getting a Destination Cluster Reference</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-create-ref.html">Setting Destination Cluster References</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-delete-ref.html">Deleting a Destination Cluster Reference</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-data-encrypt.html">Managing XDCR Data Encryption</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-delete-replication.html">Deleting XDCR Replications</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-adv-settings.html">Managing Advanced XDCR Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-pause-resume.html">Pausing XDCR Replication Streams</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-xdcr-statistics.html">Getting XDCR Stats</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/logs-rest-api.html">Logs API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-logs-get.html">Retrieving Log Information</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-client-logs.html">Creating Client Logs</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-security.html">Security API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-auditing.html">Auditing API</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../rest-api/rest-authorization.html">Authorization API</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rbac.html">Role Based Admin Access (RBAC)</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-user-create.html">Create a Read-Only Administrator</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-user-getname.html">Retrieve the Read-Only Administrator&#8217;s Name</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-user-password-put.html">Change the Read-Only Administrator&#8217;s Password</a>
    </span>
  </li>
  <li class="nav-item" data-depth="5">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-user-delete.html">Delete the Read-Only Administrator</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/security-encrypted-access.html">Using REST for Encrypted Access</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-encryption.html">Encryption On-the-Wire API</a>
    </span>
  </li>
  <li class="nav-item" data-depth="4">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/rest-secret-mgmt.html">Secret Management API</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="../../rest-api/api-explorer.html">Admin API Explorer</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../tools/tools-ref.html">Couchbase Server Tools</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Query Tools</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../tools/cbq-shell.html">cbq: The Command Line Shell for N1QL</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../tools/query-workbench.html">Query Workbench</a>
    </span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-line">
    <a class="nav-link" href="../../tools/query-monitoring.html">Query Monitoring</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <span class="nav-text">Data Import/Export Tools</span>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Release Notes &amp; Licenses</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../release-notes/relnotes.html">Release Notes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../third-party-licenses.html">Licenses for Third-Party Components</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Contribute</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="../../../../home/contribute/index.html">Contribute to the Documentation</a>
    </span>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-banner">
    <p>You are viewing the documentation for a prerelease version.</p>
    <a class="btn" href="../../../6.0/index.html">View Latest</a>
  </div>
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../introduction/intro.html">Couchbase Server</a></li>
    <li class="crumb">Develop</li>
    <li class="crumb">Query</li>
    <li class="crumb">Statements</li>
    <li class="crumb">SELECT</li>
    <li class="crumb"><a href="from.html">FROM clause</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/n1ql/pages/n1ql-language-reference/from.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">FROM clause</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The <code>FROM</code> clause specifies the keyspaces and JOIN operations on them.
</blockquote>
</div>
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 4.0)</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="purpose"><a class="anchor" href="#purpose"></a>Purpose</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a <code>SELECT</code> query or subquery, the <code>FROM</code> clause specifies one or more of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Keyspaces</p>
</li>
<li>
<p>Subqueries (such as derived tables)</p>
</li>
<li>
<p>JOIN clauses</p>
</li>
<li>
<p>JOIN conditions</p>
</li>
<li>
<p>Expressions (nested collections, <code>CURL()</code>, or other expressions)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For you to select data from keyspace or expression, you must have the <code class="param">query_select</code> privilege on that keyspace.
For more details about user roles, see
<a href="../../learn/security/authorization-overview.html" class="page">Authorization</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syntax"><a class="anchor" href="#syntax"></a>Syntax</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/from-term.png" alt="from term">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>FROM from-keyspace [ [ AS ] alias1 ] [ USE KEYS use-clause ]
                    | "(" SELECT ")" [ [ AS ] alias2 ]
                    | expr [ [ AS ] alias3 ]
                    | from-term ( join-clause | nest-clause | unnest-clause )</pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Arguments</caption>
<colgroup>
<col style="width: 20.4081%;">
<col style="width: 79.5919%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument / Clause</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>from-keyspace</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p> . . . <strong>AS alias</strong></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p> . . . <a href="#use-keys-clause"><strong>USE KEYS use-clause</strong></a></p>
</dd>
</dl>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="identifiers.html" class="page">Identifier</a> that represents the keyspace for the query, such as <code>FROM `travel-sample`</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p>To assign a name to a keyspace or expression.</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p>To specify one or more document keys.</p>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>( select-expr )</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To specify a N1QL SELECT subquery</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>expr</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A N1QL expression generating JSON documents or objects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>from-term</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dt class="hdlist1"></dt>
<dd>
<p> . . . <strong>JOIN join-clause</strong></p>
</dd>
<dt class="hdlist1"></dt>
<dt class="hdlist1"></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p> . . . <strong>NEST nest-clause</strong></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"></dt>
<dt class="hdlist1"></dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p> . . . <strong>UNNEST unnest-clause</strong></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A N1QL expression that defines the input object(s) for the query, which can be either a <a href="#table_vrv_nxx_1db">keyspace identifier</a>, <a href="index.html" class="page">generic expression</a>, or <a href="subqueries.html" class="page">subquery</a> along with one or more JOIN, NEST, or UNNEST clause.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p>Create an input object by combining two or more source objects via <a href="#section_ek1_jnx_1db">ANSI JOIN</a>, <a href="#lookup-join-clause">Lookup JOIN</a>, or <a href="#index-join-clause">Index JOIN</a>.</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p>Create an input object by producing a single result of nesting keyspaces via <a href="#section_tc1_nnx_1db">ANSI NEST</a>, <a href="#nest">Lookup NEST</a>, or <a href="#section_rgr_rnx_1db">Index NEST</a>.</p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p>Create an input object by flattening an array in the parent document.</p>
</dd>
</dl>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec_from-keyspace"><a class="anchor" href="#sec_from-keyspace"></a>from-keyspace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can specify a keyspace to query from, either a specific bucket or a constant expression.
If the <code class="var">from-keyspace</code> clause is used, then there must be a <code class="var">from-keyspace-name</code> specified.</p>
</div>
<div class="paragraph">
<p>The simplest type of from-keyspace clause specifies a single bucket (i.e., <code>SELECT * FROM `travel-sample`</code>).</p>
</div>
<div class="paragraph">
<p>Keyspace identifier is the name or identifier of an independent place for a data source of one or more documents.
Such keyspaces are not dependent on any of the <a href="subqueries.html#section_onz_3tj_mz" class="page">Variable in Scope of a Subquery</a>.</p>
</div>
<div class="paragraph">
<p><strong>from-keyspace Example:</strong> Use a keyspace from a single bucket.</p>
</div>
<div class="paragraph">
<p>Select four unique landmarks from the <code>`travel-sample`</code> bucket.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT DISTINCT name
FROM `travel-sample`
WHERE type = "landmark"
LIMIT 4;</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "name": "Royal Engineers Museum"
  },
  {
    "name": "Hollywood Bowl"
  },
  {
    "name": "Thai Won Mien"
  },
  {
    "name": "Spice Court"
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>N1QL Expressions in a FROM Clause</strong></p>
</div>
<div class="paragraph">
<p>Couchbase Server version 4.6.2 added support for generic <a href="index.html" class="page">expressions</a> in the <code>from-term</code> clause; and this adds huge flexibility by the enabling of various N1QL functions, operators, path expressions, language constructs on constant expressions, variables, and subqueries to create just about any FROM clause imaginable.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When the <code>from-term</code> is an expression, <code>USE KEYS</code> or <code>USE INDEX</code> clauses are not allowed.</p>
</li>
<li>
<p>When using a <code>JOIN</code> clause, <code>NEST</code> clause, or <code>UNNEST</code> clause, the left-side keyspace can be an expression or subquery, but the right-side keyspace must be a keyspace identifier.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>1. Independent Constant Expression</strong></dt>
<dd>
<p>This includes any N1QL expressions of JSON scalar values, static JSON literals, objects, or N1QL functions, for example:</p>
<div class="listingblock">
<div class="content">
<pre>SELECT * FROM [1, 2, "name", { "type" : "airport", "id" : "SFO"}]  AS  ks1;

SELECT CURL("https://maps.googleapis.com/maps/api/geocode/json",
           {"data":"address=Half+Moon+Bay" , "request":"GET"} );</pre>
</div>
</div>
<div class="paragraph">
<p>Note that functions such as <a href="curl.html" class="page">CURL()</a> can independently produce input data objects for the query.
Similarly, other N1QL functions can also be used in the expressions.</p>
</div>
</dd>
<dt class="hdlist1"><strong>2. Variable N1QL Expression</strong></dt>
<dd>
<p>This includes expressions that refer to any <a href="subqueries.html#section_onz_3tj_mz" class="page">variables in scope</a> for the query, for example:</p>
<div class="listingblock">
<div class="content">
<pre>SELECT count(*)
FROM `travel-sample` t
LET x = t.geo
WHERE (SELECT RAW y.alt FROM x y)[0] &gt; 6000;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>FROM x</code> clause is an expression that refers to the outer query.
This is applicable to only subqueries because the outermost level query cannot use any variables in its own <code>FROM</code> clause.
This makes the subquery correlated with outer queries, as explained in the <a href="subqueries.html" class="page">Subqueries</a> section.</p>
</div>
</dd>
<dt class="hdlist1"><strong>3. Subquery and Subquery Expressions</strong></dt>
<dd>
<p><strong>Subquery Example:</strong> For each country, find the number of airports at different altitudes and their corresponding cities.</p>
<div class="paragraph">
<p>In this case, the inner query finds the first level of grouping of different altitudes by country and corresponding number of cities.
Then the outer query builds on the inner query results to count the number of different altitude groups for each country and the total number of cities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT t1.country, num_alts, total_cities
FROM (SELECT country, geo.alt AS alt,
             count(city) AS num_cities
      FROM `travel-sample`
      WHERE type = "airport"
      GROUP BY country, geo.alt) t1
GROUP BY t1.country
LETTING num_alts = count(t1.alt), total_cities = sum(t1.num_cities);</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "country": "United States",
    "num_alts": 946,
    "total_cities": 1560
  },
  {
    "country": "United Kingdom",
    "num_alts": 128,
    "total_cities": 187
  },
  {
    "country": "France",
    "num_alts": 196,
    "total_cities": 221
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to blending the results of the following two queries by country, but the subquery in the <code>from-term</code> above simplified it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT country,count(city) AS num_cities
FROM `travel-sample`
WHERE type = "airport"
GROUP BY country;

SELECT country, count(distinct geo.alt) AS num_alts
FROM `travel-sample`
WHERE type = "airport"
GROUP BY country;</pre>
</div>
</div>
<div class="paragraph">
<p>For more details and examples, see <a href="subqueries.html" class="page">Subqueries</a> and <a href="#select-expr">( select-expr )</a>.</p>
</div>
</dd>
</dl>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_ax5_2nx_1db"><a class="anchor" href="#section_ax5_2nx_1db"></a>AS Alias</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use a shorter or clearer name anywhere in the query, like SQL, N1QL allows renaming fields by using the AS keyword to assign an alias to a keyspace or field in the <code>FROM</code> clause.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>[AS] alias</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Arguments</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>AS</code></dt>
<dd>
<p>[Optional] Reserved word denoting the next word is an alias of the previous term.</p>
</dd>
<dt class="hdlist1">alias</dt>
<dd>
<p>[Required if <code>AS</code> is used] String to assign a name to a keyspace, such as the following equivalent <code>FROM</code> clauses with and without the <code>AS</code> keyword:</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FROM `travel-sample`</code> <code>AS t</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FROM `travel-sample`</code> <code>t</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FROM `travel-sample`</code> <code>AS h</code></p>
<p class="tableblock"><code>INNER JOIN `travel-sample`</code> <code>AS l</code></p>
<p class="tableblock"><code>ON (<code>h</code>.city =</code> <code>l`</code>.city)`</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FROM `travel-sample`</code> <code>h</code></p>
<p class="tableblock"><code>INNER JOIN `travel-sample`</code> <code>l</code></p>
<p class="tableblock"><code>ON (<code>h</code>.city =</code> <code>l`</code>.city)`</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since the original name may lead to referencing wrong data and wrong results, you must use the alias name throughout the query instead of the original keyspace name.</p>
</div>
<div class="paragraph">
<p>In the FROM clause, the renaming appears only in the projection and not the fields themselves.</p>
</div>
<div class="paragraph">
<p>When no alias is used, the keyspace or last field name of an expression is given as the implicit alias.</p>
</div>
<div class="paragraph">
<p>When an alias conflicts with a keyspace or field name in the same scope, the identifier always refers to the alias.
This allows for consistent behavior in scenarios where an identifier only conflicts in some documents.
For more information on aliases, see <a href="identifiers.html" class="page">Identifiers</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-keys-clause"><a class="anchor" href="#use-keys-clause"></a>USE KEYS Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can refer to a document&#8217;s unique document key by using the <code>USE KEYS</code> clause.
Only documents having those document keys will be included as inputs to a query.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/use-keys-clause.png" alt="use keys clause">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>USE [ PRIMARY ] KEYS expr</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Arguments</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">PRIMARY</dt>
<dd>
<p>[Optional] <code>USE KEYS</code> and <code>USE PRIMARY KEYS</code> are synonyms.</p>
</dd>
<dt class="hdlist1">expr</dt>
<dd>
<p>String of a document key or an array of comma-separated document keys.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>USE KEYS Example 1:</strong> Select a single document by its document key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM `travel-sample`
USE KEYS "airport_1254";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "travel-sample": {
      "airportname": "Calais Dunkerque",
      "city": "Calais",
      "country": "France",
      "faa": "CQF",
      "geo": {
        "alt": 12,
        "lat": 50.962097,
        "lon": 1.954764
      },
      "icao": "LFAC",
      "id": 1254,
      "type": "airport",
      "tz": "Europe/Paris"
    }
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>USE KEYS Example 2:</strong> Select multiple documents by their document keys.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM `travel-sample`
USE KEYS ["airport_1254","airport_1255"];</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "travel-sample": {
      "airportname": "Calais Dunkerque",
      "city": "Calais",
      "country": "France",
      "faa": "CQF",
      "geo": {
        "alt": 12,
        "lat": 50.962097,
        "lon": 1.954764
      },
      "icao": "LFAC",
      "id": 1254,
      "type": "airport",
      "tz": "Europe/Paris"
    }
  },
  {
    "travel-sample": {
      "airportname": "Peronne St Quentin",
      "city": "Peronne",
      "country": "France",
      "faa": null,
      "geo": {
        "alt": 295,
        "lat": 49.868547,
        "lon": 3.029578
      },
      "icao": "LFAG",
      "id": 1255,
      "type": "airport",
      "tz": "Europe/Paris"
    }
  }
]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="select-expr"><a class="anchor" href="#select-expr"></a>( select-expr )</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use parenthesis to specify a N1QL <code>SELECT</code> expression of input objects.</p>
</div>
<div class="paragraph">
<p><strong>Arguments</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">select-expr</dt>
<dd>
<p>[Required] The N1QL <code>SELECT</code> query of input objects.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Example 1:</strong> A <code>SELECT</code> clause inside a <code>FROM</code> clause.</p>
</div>
<div class="paragraph">
<p>List all <code>Gillingham</code> landmark names from a subset of all landmark names and addresses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT name, city
FROM (SELECT id, name, address, city
      FROM `travel-sample`
      WHERE type = "landmark") as Landmark_Info
WHERE city = "Gillingham";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "city": "Gillingham",
    "name": "Royal Engineers Museum"
  },
  {
    "city": "Gillingham",
    "name": "Hollywood Bowl"
  },
  {
    "city": "Gillingham",
    "name": "Thai Won Mien"
  },
  {
    "city": "Gillingham",
    "name": "Spice Court"
  },
  {
    "city": "Gillingham",
    "name": "Beijing Inn"
  },
  {
    "city": "Gillingham",
    "name": "Ossie's Fish and Chips"
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p>For more details and examples, see <a href="selectclause.html" class="page">SELECT Clause</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_nkd_3nx_1db"><a class="anchor" href="#section_nkd_3nx_1db"></a>from-term</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The from-term defines the input object(s) for the query, and it can be one of the following types:</p>
</div>
<table id="table_vrv_nxx_1db" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#sec_from-keyspace">keyspace identifier</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>`travel-sample`</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="index.html" class="page">generic expression</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20+10 AS Total</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="subqueries.html" class="page">subquery</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT t1.country, ARRAY_AGG(t1.city), SUM(t1.city_cnt) AS apnum</code></p>
<p class="tableblock"><code>FROM</code> <code>(SELECT city, city_cnt, ARRAY_AGG(airportname) AS apnames, country</code></p>
<p class="tableblock"><code>FROM `travel-sample`</code></p>
<p class="tableblock"><code>WHERE type = "airport"</code></p>
<p class="tableblock"><code>GROUP BY city, country</code></p>
<p class="tableblock"><code>LETTING city_cnt = COUNT(city) ) AS t1</code></p>
<p class="tableblock"><code>WHERE t1.city_cnt &gt; 5;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">previous <a href="#section_ek1_jnx_1db">join</a>, <a href="#section_tc1_nnx_1db">nest</a>, or <a href="#unnest">unnest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` AS rte</code></p>
<p class="tableblock"><code>JOIN</code> <code>`travel-sample` AS aln</code></p>
<p class="tableblock"><code>ON rte.airlineid = META(aln).id</code></p>
<p class="tableblock"><code>NEST</code> <code>`travel-sample` AS lmk</code></p>
<p class="tableblock"><code>ON aln.landmarkid = META(lmk).id;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more details with examples, click the above links.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Couchbase Server version 4.6.2 adds support for <a href="http://docs-build.sc.couchbase.com/server/2059/n1ql/n1ql-language-reference/from.html#concept_rnt_zfk_np__section_fkc_ftt_nz" target="_blank" rel="noopener"><span class="underline">generic expression</span></a> in the from-term.
Prior Couchbase Server versions support only the other two types.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_ek1_jnx_1db"><a class="anchor" href="#section_ek1_jnx_1db"></a>ANSI JOIN Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server Enterprise Edition 5.5)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ANSI JOIN (and <a href="#section_tc1_nnx_1db">ANSI NEST</a>) clauses have much more flexible functionality than their earlier INDEX and LOOKUP equivalents.
Since these are standard compliant and more flexible, we recommend you to use ANSI JOIN (and ANSI NEST) exclusively, where possible.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Purpose</strong></p>
</div>
<div class="paragraph">
<p>To be closer to standard SQL syntax, ANSI JOIN can join arbitrary fields of the documents and can be chained together.</p>
</div>
<div class="paragraph">
<p>The following table lists the JOIN types currently supported.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Join Type</th>
<th class="tableblock halign-left valign-top">Remarks</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[INNER] JOIN ... ON</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">INNER JOIN and LEFT OUTER JOIN can be mixed in any number and/or order.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` r</code></p>
<p class="tableblock"><code>JOIN</code> <code>`travel-sample` a</code></p>
<p class="tableblock"><code>ON</code> <code>r.airlineid = META(a).id</code></p>
<p class="tableblock"><code>WHERE a.country = "France"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LEFT [OUTER] JOIN ... ON</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` r</code></p>
<p class="tableblock"><code>LEFT JOIN</code> <code>`travel-sample` a</code></p>
<p class="tableblock"><code>ON</code> <code>r.airlineid = META(a).id</code></p>
<p class="tableblock"><code>WHERE r.sourceairport = "SFO"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RIGHT [OUTER] JOIN ... ON</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RIGHT OUTER JOIN can only be the first join specified in a FROM clause.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` r</code></p>
<p class="tableblock"><code>RIGHT JOIN</code> <code>`travel-sample` a</code></p>
<p class="tableblock"><code>ON</code> <code>r.airlineid = META(a).id</code></p>
<p class="tableblock"><code>WHERE r.sourceairport = "SFO"</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_ansi-join_RR-clause_5.5.png" alt="FROM ansi join RR clause 5.5" width="70%">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>lhs-expr [join-type] JOIN rhs-expr ON join-clause</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Arguments</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">lhs-expr</dt>
<dd>
<p>[Required] Keyspace reference or expression representing the left-hand side of the join clause.</p>
</dd>
<dt class="hdlist1">join-type</dt>
<dd>
<p>[Optional.
Default is <code>INNER</code>] String representing the type of join.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>INNER</code></dt>
<dd>
<p>[Optional.
Default is <code>INNER</code>]</p>
<div class="paragraph">
<p>For each joined object produced, both the left-hand side and right-hand side source objects of the <code>ON</code> clause must be non-MISSING and non-NULL.</p>
</div>
</dd>
<dt class="hdlist1"><code>LEFT [OUTER]</code></dt>
<dd>
<p>[Optional.
Query Service interprets <code>LEFT</code> as <code>LEFT OUTER</code>]</p>
<div class="paragraph">
<p>For each joined object produced, only the left-hand source objects of the <code>ON</code> clause must be non-MISSING and non-NULL</p>
</div>
</dd>
<dt class="hdlist1"><code>RIGHT [OUTER]</code></dt>
<dd>
<p>[Optional.
Query Service interprets <code>RIGHT</code> as <code>RIGHT OUTER</code>]</p>
<div class="paragraph">
<p>For each joined object produced, only the right-hand source objects of the <code>ON</code> clause must be non-MISSING and non-NULL</p>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>JOIN</code> rhs-expr</dt>
<dd>
<p>[Required] Keyspace reference or expression representing the right-hand side of the join clause.</p>
</dd>
<dt class="hdlist1"><code>ON</code> join-clause</dt>
<dd>
<p>[Required] Boolean expression representing the join condition between the left-hand side expression and the right-hand side expression, which can be fields, constant expressions or any complex N1QL expression.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>ANSI Join Example 1:</strong> Inner Join.</p>
</div>
<div class="paragraph">
<p>List the source airports and airlines that fly into SFO, where only the non-null <code>route</code> documents join with matching <code>airline</code> documents.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT route.airlineid, airline.name, route.sourceairport, route.destinationairport
FROM `travel-sample` route
INNER JOIN `travel-sample` airline
ON route.airlineid = META(airline).id
WHERE route.type = "route"
AND route.destinationairport = "SFO"
ORDER BY route.sourceairport;</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "airlineid": "airline_5209",
    "destinationairport": "SFO",
    "name": "United Airlines",
    "sourceairport": "ABQ"
  },
  {
    "airlineid": "airline_5209",
    "destinationairport": "SFO",
    "name": "United Airlines",
    "sourceairport": "ACV"
  },
  {
    "airlineid": "airline_5209",
    "destinationairport": "SFO",
    "name": "United Airlines",
    "sourceairport": "AKL"
  },
...</pre>
</div>
</div>
<div class="paragraph">
<p><strong>ANSI Join Example 2:</strong> Left Outer Join of U.S.
airports in the same city as a landmark.</p>
</div>
<div class="paragraph">
<p>List the airports and landmarks in the same city, ordered by the airports.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT DISTINCT  MIN(aport.airportname) AS Airport__Name,
                 MIN(lmark.name) AS Landmark_Name,
                 MIN(aport.tz) AS Landmark_Time
FROM `travel-sample` aport
LEFT JOIN `travel-sample` lmark
  ON aport.city = lmark.city
  AND lmark.country = "United States"
  AND lmark.type = "landmark"
WHERE aport.type = "airport"
GROUP BY lmark.name
ORDER BY lmark.name;</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "Airport__Name": "San Francisco Intl",
    "Landmark_Name": "&amp;quot;Hippie Temptation&amp;quot; house",
    "Landmark_Time": "America/Los_Angeles"
  },
  {
    "Airport__Name": "Los Angeles Intl",
    "Landmark_Name": "101 Coffee Shop",
    "Landmark_Time": "America/Los_Angeles"
  },
  {
    "Airport__Name": "San Francisco Intl",
    "Landmark_Name": "1015",
    "Landmark_Time": "America/Los_Angeles"
  },
  {
    "Airport__Name": "San Francisco Intl",
    "Landmark_Name": "1235 Masonic Ave",
    "Landmark_Time": "America/Los_Angeles"
  },
...</pre>
</div>
</div>
<div class="paragraph">
<p><strong>ANSI Join Example 3:</strong> RIGHT OUTER JOIN of Example #2.</p>
</div>
<div class="paragraph">
<p>List the airports and landmarks in the same city, ordered by the landmarks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The LEFT OUTER JOIN will list all left-side results regardless of matching right-side documents; while the RIGHT OUTER JOIN will list all right-side results regardless of matching left-side documents.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT DISTINCT  MIN(aport.airportname) AS Airport_Name,
                 MIN(lmark.name) AS Landmark_Name,
                 MIN(aport.tz) AS Landmark_Time
FROM `travel-sample` aport
RIGHT JOIN `travel-sample` lmark
  ON aport.city = lmark.city
  AND aport.type = "airport"
  AND aport.country = "United States"
WHERE lmark.type = "landmark"
GROUP BY lmark.name
ORDER BY lmark.name;</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "Airport_Name": "San Francisco Intl",
    "Landmark_Name": "&amp;quot;Hippie Temptation&amp;quot; house",
    "Landmark_Time": "America/Los_Angeles"
  },
  {
    "Airport_Name": "London-Corbin Airport-MaGee Field",
    "Landmark_Name": "02 Shepherd's Bush Empire",
    "Landmark_Time": "America/New_York"
  },
  {
    "Airport_Name": "Los Angeles Intl",
    "Landmark_Name": "101 Coffee Shop",
    "Landmark_Time": "America/Los_Angeles"
  },
  {
    "Airport_Name": "San Francisco Intl",
    "Landmark_Name": "1015",
    "Landmark_Time": "America/Los_Angeles"
  },
...</pre>
</div>
</div>
<div class="paragraph">
<p><strong>ANSI Join Example #4:</strong> In the <code>`beer-sample`</code> bucket, use an ANSI JOIN to list the beer names and breweries that are in the state Wisconsin (<code>WI</code>).
First, create an index with <code>beer.brewry_id</code> as the leading key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE INDEX beer_brewery ON `beer-sample` (brewery_id)
WHERE type = "beer"

SELECT META(brewery).id bid, META(beer).id, brewery.name brewery_name,
       beer.name beer_name
FROM `beer-sample` brewery
JOIN `beer-sample` beer
  ON beer.brewery_id = LOWER(REPLACE(brewery.name, " ", "_"))
WHERE beer.type = "beer"
  AND brewery.type = "brewery"
  AND brewery.state = "WI";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "beer_name": "Dank",
    "bid": "oso",
    "brewery_name": "Oso",
    "id": "oso-dank"
  }
  ]</pre>
</div>
</div>
<div class="paragraph">
<p>Visual Explain Plan: <span class="image"><img src="../_images/n1ql-language-reference/FROM_AnsiJoin-Ex4-BeerVisual1.png" alt="FROM AnsiJoin Ex4 BeerVisual1"></span></p>
</div>
<div class="paragraph">
<p>If you add <code>name</code> as the second index key to the <code>beer_brewery</code> index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE INDEX beer_brewery_name ON `beer-sample` (brewery_id, name)
WHERE type = "beer"</pre>
</div>
</div>
<div class="paragraph">
<p>... then you will get covering index scan, as shown in the Visual Explain Plan:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_AnsiJoin-Ex4-BeerVisual2.png" alt="FROM AnsiJoin Ex4 BeerVisual2">
</div>
</div>
<div class="paragraph">
<p><strong>Limitations</strong></p>
</div>
<div class="paragraph">
<p>The following Join types are currently not supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RIGHT OUTER JOIN</code> is only supported when it’s the only join in the query; or in a chain of joins, the <code>RIGHT OUTER JOIN</code> must be the first join in the chain.</p>
</li>
<li>
<p>No mixing of new ANSI Join syntax with Lookup/Index Join syntax in the same FROM clause.</p>
</li>
<li>
<p>The right-hand-side of any join must be a keyspace.
Expressions, subqueries, or other join combinations cannot be on the right-hand-side of a join.</p>
</li>
<li>
<p>A join can only be executed when appropriate index exists on the inner side of the join.</p>
</li>
<li>
<p>Adaptive indexes are not considered when selecting indexes on inner side of the join.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ansi-join-hints-hash-nl"><a class="anchor" href="#ansi-join-hints-hash-nl"></a>ANSI JOIN Hints (HASH &amp; NL)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server Enterprise Edition 5.5)</em></p>
</div>
<div class="paragraph">
<p>Couchbase Server Enterprise Edition supports two join methods for performing ANSI Join: nested-loop join and hash join.
The default join method is nested-loop join.
Two corresponding join hints are introduced: <code>USE HASH</code> and <code>USE NL</code>.</p>
</div>
<div class="paragraph">
<p>Hash join is only considered when the <code>USE HASH</code> hint is specified, and it requires at least one equality predicate between the left-hand side and right-hand side.
In such cases, if a hash join is chosen successfully, then that’ll be the join method used for this join.
If the hash join cannot be generated, then the planner will further consider nested-loop join and will either generate a nested-loop join or return an error for the join.</p>
</div>
<div class="paragraph">
<p>If no join hint is specified or USE NL hint is specified, then nested-loop join is considered.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For Community Edition (CE), any specified <code>USE HASH</code> hint will be silently ignored and only nested-loop join is considered by the planner.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>USE HASH hint</strong></p>
</div>
<div class="paragraph">
<p>The <code>USE HASH</code> hint is similar to the existing <code>USE INDEX</code> o<code>r USE KEYS</code> hint in that the <code>USE HASH</code> hint can be specified after a keyspace reference in an ANSI Join specification.
There are two versions of the <code>USE HASH</code> hint that indicate whether the keyspace is to be used as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The build side of the hash join&#8201;&#8212;&#8201;<code>USE HASH(build)</code></p>
</li>
<li>
<p>The probe side of the hash join&#8201;&#8212;&#8201;<code>USE HASH(probe)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A hash join has two sides: a <code>BUILD</code> and a <code>PROBE</code>.
The <code>BUILD</code> side of the join will be used to create an in-memory hash table.
The <code>PROBE</code> side will use that table to find matches and perform the join.
Typically, this means you want the <code>BUILD</code> side to be used on the smaller of the two sets.
However, you can only supply one hash hint, and only to the right side of the join.
So if you specify <code>BUILD</code> on the right side, then you are implicitly using <code>PROBE</code> on the left side (and vice versa).</p>
</div>
<div class="paragraph">
<p><strong>USE HASH Example 1:</strong> PROBE</p>
</div>
<div class="paragraph">
<p>The keyspace <code>aline</code> is to be joined (with <code>rte</code>) using hash join, and <code>aline</code> is used as the probe side of the hash join.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT COUNT(1) AS Total_Count
FROM `travel-sample` rte
INNER JOIN `travel-sample` aline
USE HASH (PROBE)
ON (rte.airlineid = META(aline).id)
WHERE rte.type = "route";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "Total_Count": 17629
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>USE HASH Example 2:</strong> BUILD</p>
</div>
<div class="paragraph">
<p>This is effectively the same query as the previous example, except the two keyspaces are switched, and here the <code>USE HASH(BUILD)</code> hint is used, indicating the hash join should use <code>rte</code> as the build side.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT COUNT(1) AS Total_Count
FROM `travel-sample` aline
INNER JOIN `travel-sample` rte
USE HASH (BUILD)
ON (rte.airlineid = META(aline).id)
WHERE rte.type = "route";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "Total_Count": 17629
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>USE NL hint</strong></p>
</div>
<div class="paragraph">
<p>This join hint instructs the planner to use nested-loop join (NL join) for the join being considered.
Since nested-loop join is the default path, the <code>USE NL</code> hint is not required.</p>
</div>
<div class="paragraph">
<p>USE NL Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT COUNT(1) AS Total_Count
FROM `travel-sample` rte
INNER JOIN `travel-sample` aline
USE NL
ON (rte.airlineid = META(aline).id)
WHERE rte.type = "route";</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The join hint for the first join should be specified on the 2nd keyspace reference, and the join hint for the second join should be specified on the 3rd keyspace reference, etc.
If a join hint is specified on the first keyspace, an error is returned.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Multiple hints</strong></p>
</div>
<div class="paragraph">
<p>You can use only one join hint (USE HASH or USE NL) together with only one other hint (USE INDEX or USE KEYS) for a total of two hints.
The order of the two hints doesn&#8217;t matter.</p>
</div>
<div class="paragraph">
<p>When multiple hints are being specified, use only one <code>USE</code> keyword with one following the other, as in the following examples.</p>
</div>
<div class="paragraph">
<p><strong>Multiple hint Example 1:</strong> USE INDEX with USE HASH.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT COUNT(1) AS Total_Count
FROM `travel-sample` rte
INNER JOIN `travel-sample` aline
USE INDEX idx1 HASH (PROBE)
ON (rte.airlineid = META(aline).id)
WHERE rte.type = "route";</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Multiple hint Example 2:</strong> USE HASH with USE KEYS.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT COUNT(1) AS Total_Count
FROM `travel-sample` rte
INNER JOIN `travel-sample` aline
USE HASH (PROBE) KEYS ["airline_key1", "airline_key2", "airline_key3"]
ON (rte.airlineid = META(aline).id)
WHERE rte.type = "route";</pre>
</div>
</div>
<div class="paragraph">
<p>When chosen, the hash join will always work; the restrictions are on any USE KEYS hint clause:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Must not depend on any previous keyspaces.</p>
</li>
<li>
<p>The expression must be constants, host variables, etc.</p>
</li>
<li>
<p>Must not contain any subqueries.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the USE KEYS hint contains references to other keyspaces or subqueries, then the USE HASH hint will be ignored and nested-loop join will be used instead.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ansi-join-and-arrays"><a class="anchor" href="#ansi-join-and-arrays"></a>ANSI JOIN and Arrays</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ANSI JOIN provides great flexibility since the <code>ON</code> clause of an ANSI JOIN can be any expression as long as it evaluates to TRUE or FALSE.
Below are different join scenarios involving arrays and ways to handle each scenario.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These buckets and indexes will be used throughout this section&#8217;s array scenarios.
As a convention, when a field name starts with <code>a</code> it is an array, so each bucket has two array fields and two regular fields.
Also, both <code>_idx1</code> indexes index each element of its array, while both <code>_idx2</code> indexes use its entire array as the index key.</p>
</div>
<div class="paragraph">
<p><code>bucket b1 (a11, a12, c11, c12)</code></p>
</div>
<div class="paragraph">
<p><code>bucket b2 (a21, a22, c21, c22)</code></p>
</div>
<div class="paragraph">
<p><code>CREATE INDEX b1_idx1 ON b1 (c11, c12, DISTINCT a11)</code></p>
</div>
<div class="paragraph">
<p><code>CREATE INDEX b1_idx2 ON b1 (a12)</code></p>
</div>
<div class="paragraph">
<p><code>CREATE INDEX b2_idx1 ON b2 (c21, c22, DISTINCT a21)</code></p>
</div>
<div class="paragraph">
<p><code>CREATE INDEX b2_idx2 ON b2 (a22)</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>ANSI JOIN with no arrays</strong></p>
</div>
<div class="paragraph">
<p>In this scenario, there is no involvement of arrays in the join.
These are just straight-forward joins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON b1.c11 = b2.c21
  AND b2.c22 = 100
WHERE b1.c12 = 10;</pre>
</div>
</div>
<div class="paragraph">
<p>Here the joins are using non-array fields of each keyspace.</p>
</div>
<div class="paragraph">
<p>The following case also falls in this scenario:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON b1.c11 = b2.c21
  AND b2.c22 = 100
  AND ANY v IN b2.a21 SATISFIES v = 10 END
WHERE b1.c12 = 10;</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, although there is an ANY predicate on the right-hand side array <code>b2.a21</code>, the ANY predicate does not involve any joins, and thus, as far as the join is concerned, it is still a 1-to-1 join.
Similarly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON b1.c11 = b2.c21
WHERE b1.c11 = 10
  AND b1.c12 = 100
  AND ANY v IN b1.a11 SATISFIES v = 20 END;</pre>
</div>
</div>
<div class="paragraph">
<p>In this case the ANY predicate is on the left-hand side array <code>b1.a11</code>; however, similar to above, the ANY predicate does not involve any joins, and thus the join is still 1-to-1.
We can even have ANY predicates on both sides:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON b1.c11 = b2.c21
  AND b2.c22 = 100
  AND ANY v IN b2.a21 SATISFIES v = 10 END
WHERE b1.c11 = 10
  AND b1.c12 = 100
  AND ANY v IN b1.a11 SATISFIES v = 10 END;</pre>
</div>
</div>
<div class="paragraph">
<p>Again, the ANY predicates do not involve any join, and the join is still 1-to-1.</p>
</div>
<div class="paragraph">
<p><strong>ANSI JOIN with entire array as index key</strong></p>
</div>
<div class="paragraph">
<p>As a special case, it is possible to perform ANSI JOIN on an entire array as a join key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON b1.a21 = b2.a22
WHERE b1.c11 = 10
  AND b1.c12 = 100;</pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the entire array must match each other for the join to work.
For all practical purposes, the array here is treated as a scalar since there is no logic to iterate through elements of an array here.
The entire array is used as an index key (<code>b2_idx2</code>) and as such, an entire array is used as an index span to probe the index.
The join here can also be considered as 1-to-1.</p>
</div>
<div class="paragraph">
<p><strong>ANSI JOIN involving right-hand-side arrays</strong></p>
</div>
<div class="paragraph">
<p>In this scenario, the join involves an array on the right-hand side keyspace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON b2.c21 = 10
  AND b2.c22 = 100
  AND ANY v IN b2.a21 SATISFIES v = b1.c12 END
WHERE b1.c11 = 10;</pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the ANY predicate involves a join, and thus, effectively we are joining <code>b1</code> with elements of the <code>b2.a21</code> array.
This now becomes a 1-to-many join.
Note that we use an ANY clause for this scenario since it’s a natural extension of the existing support for array indexes; the only difference is for index span generation, we now can have a potential join expression.
Array indexes can be used for join in this scenario.</p>
</div>
<div class="paragraph">
<p><strong>ANSI JOIN involving left-hand-side arrays</strong></p>
</div>
<div class="paragraph">
<p>This is a slightly more complex scenario, where the array reference is on the left-hand side of the join, and it’s a many-to-1 join.
There are two alternative ways to handle the scenario where the array appears on the left-hand side of the join.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Alternative #1: use UNNEST</strong></dt>
<dd>
<p>This alternative will flatten the left-hand side array first, before performing the join:</p>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1 UNNEST b1.a12 AS ba1
JOIN b2
  ON ba1 = b2.c22
  AND b2.c21 = 10
WHERE b1.c11 = 10
  AND b1.c12 = 100;</pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="#unnest">UNNEST</a> operation is used to flatten the array, turning one left-hand side document into multiple documents; and then for each one of them, join with the right-hand side.
This way, by the time join is being performed, it is a regular join, since the array is already flattened in the UNNEST step.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Alternative #2: use IN clause</strong></dt>
<dd>
<p>This alternative uses the IN clause to handle the array:</p>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON b2.c22 IN b1.a12 AND b2.c21 = 10
WHERE b1.c11 = 10 AND b1.c12 = 100;</pre>
</div>
</div>
<div class="paragraph">
<p>By using the <a href="indexing-arrays.html" class="page">IN</a> clause, the right-hand side field value can match any of the elements of the left-hand side array.
Conceptually, we are using each element of the left-hand side array to probe the right-hand side index.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Differences between the two alternatives</strong></dt>
<dd>
<p>There is a semantical difference between the two alternatives.
With UNNEST, we are first turning one left-hand side document into multiple documents and then performing the join.
With IN-clause, there is still only one left-hand side document, which can then join with one or more right-hand side documents.
Thus:</p>
<div class="ulist">
<ul>
<li>
<p>If the array contains duplicate values,</p>
<div class="ulist">
<ul>
<li>
<p>the UNNEST method treats each duplicate as an individual value and thus duplicated results will be returned;</p>
</li>
<li>
<p>the IN clause method will not duplicate the result.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If no duplicate values exists and we are performing inner join,</p>
<div class="ulist">
<ul>
<li>
<p>then the two alternatives will likely give the same result.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If outer join is performed, assuming there are N elements in the left-hand side array, and assuming there is at most one matching document from the right-hand side for each element of the array,</p>
<div class="ulist">
<ul>
<li>
<p>the UNNEST method will produce N result documents;</p>
</li>
<li>
<p>the IN clause method may produce &lt; N result documents if some of the array elements do not have matching right-hand side documents.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>ANSI JOIN with arrays on both sides</strong></p>
</div>
<div class="paragraph">
<p>If the join involves arrays on both sides, then we can combine the approaches above, i.e., using ANY clause to handle the right-hand side array and either UNNEST or IN clause to handle the left-hand side array.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
UNNEST b1.a12 AS ba1
  JOIN b2
    ON ANY v IN b2.a21 SATISFIES v = ba1 END
    AND b2.c21 = 10
    AND b2.c22 = 100
WHERE b1.c11 = 10
  AND b1.c12 = 100;</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM b1
JOIN b2
  ON ANY v IN b2.a21 SATISFIES v IN b1.a12 END
  AND b2.c21 = 10
  AND b2.c22 = 100
WHERE b1.c11 = 10
  AND b1.c12 = 100;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lookup-join-clause"><a class="anchor" href="#lookup-join-clause"></a>Lookup JOIN Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 4.0)</em></p>
</div>
<div class="paragraph">
<p>The <code>JOIN</code> clause enables you to create new input objects by combining two or more source objects.</p>
</div>
<div class="paragraph">
<p>Lookup joins allow only left-to-right joins, which means the ON KEYS expression must produce a document key which is then used to retrieve documents from the right-hand side keyspace.
Couchbase Server version 4.1 and earlier supported only lookup joins.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_lookup-join-clause.png" alt="FROM lookup join clause" width="70%">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[ join-type ] JOIN from-path [ [ AS ] alias ] ON KEYS on-keys-clause</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Arguments</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">join-type</dt>
<dd>
<p>[Optional; default is <code>INNER</code>]</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>INNER</code></dt>
<dd>
<p>For each joined object produced, both the left-hand and right-hand source objects must be non-<code>MISSING</code> and non-<code>NULL</code>.</p>
</dd>
<dt class="hdlist1"><code>LEFT OUTER</code></dt>
<dd>
<p>For each joined object produced, only the left-hand source objects must be non-<code>MISSING</code> and non-<code>NULL</code>.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">from-path</dt>
<dd>
<p>[Required] Keyspace reference for right-hand side of lookup join.
For details, see <a href="#concept_rnt_zfk_np/keyspaces">Keyspaces</a>.</p>
</dd>
<dt class="hdlist1">alias (Optionally, <code>AS</code> alias)</dt>
<dd>
<p>[Optional] To assign another name.
For details, see <a href="#concept_rnt_zfk_np/as">AS Keyword</a>.</p>
</dd>
<dt class="hdlist1"><code>ON KEYS</code> on-keys-clause</dt>
<dd>
<p>[Required] String or expression representing the primary keys of the documents for the right-hand side keyspace.</p>
<div class="paragraph">
<p>The <code>ON KEYS</code> expression produces one or more document keys for the right-hand side document.</p>
</div>
<div class="paragraph">
<p>The <code>ON KEYS</code> expression can produce an array of document keys.</p>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Return Values</dt>
<dd>
<p>If <code>LEFT</code> or <code>LEFT OUTER</code> is specified, then a left outer join is performed.</p>
<div class="paragraph">
<p>At least one joined object is produced for each left-hand source object.</p>
</div>
<div class="paragraph">
<p>If the right-hand source object is <code>NULL</code> or <code>MISSING</code>, then the joined object&#8217;s right-hand side value is also <code>NULL</code> or <code>MISSING</code> (omitted), respectively.</p>
</div>
</dd>
<dt class="hdlist1">Limitations</dt>
<dd>
<p>Lookup JOINs can be chained with other lookup joins/nests or index joins/nests, but they cannot be mixed with an ANSI JOIN or ANSI NEST.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Lookup JOIN Example 1:</strong> route JOIN airline ON KEYS route.airlineid.</p>
</div>
<div class="paragraph">
<p>List all airlines and non-stop routes from SFO in the <code>travel-sample</code> keyspace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT DISTINCT airline.name, airline.callsign, route.destinationairport, route.stops, route.airline
FROM `travel-sample` route
  JOIN `travel-sample` airline
  ON KEYS route.airlineid
WHERE route.type = "route"
AND airline.type = "airline"
AND route.sourceairport = "SFO"
AND route.stops = 0
LIMIT 4;</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "airline": "VX",
    "callsign": "REDWOOD",
    "destinationairport": "SAN",
    "name": "Virgin America",
    "stops": 0
  },
  {
    "airline": "VX",
    "callsign": "REDWOOD",
    "destinationairport": "PHL",
    "name": "Virgin America",
    "stops": 0
  },
  {
    "airline": "B6",
    "callsign": "JETBLUE",
    "destinationairport": "FLL",
    "name": "JetBlue Airways",
    "stops": 0
  },
  {
    "airline": "UA",
    "callsign": "UNITED",
    "destinationairport": "IND",
    "name": "United Airlines",
    "stops": 0
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Lookup JOIN Example 2:</strong> route JOIN airline ON KEYS route.airlineid.</p>
</div>
<div class="paragraph">
<p>List the schedule of flights from Boston to San Francisco on JETBLUE in the <code>travel-sample</code> keyspace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT DISTINCT airline.name, route.schedule
FROM `travel-sample` route
  JOIN `travel-sample` airline
  ON KEYS route.airlineid
WHERE route.type = "route"
AND airline.type = "airline"
AND route.sourceairport = "BOS"
AND route.destinationairport = "SFO"
AND airline.callsign = "JETBLUE";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "name": "JetBlue Airways",
    "schedule": [
      {
        "day": 0,
        "flight": "B6076",
        "utc": "10:15:00"
      },
      {
        "day": 0,
        "flight": "B6321",
        "utc": "00:06:00"
      },
      {
        "day": 1,
        "flight": "B6536",
        "utc": "22:45:00"
      },
      {
        "day": 1,
        "flight": "B6194",
        "utc": "00:51:00"
      },
      {
        "day": 2,
        "flight": "B6918",
        "utc": "23:45:00"
      },
      {
        "day": 2,
        "flight": "B6451",
        "utc": "18:09:00"
      },
      {
        "day": 2,
        "flight": "B6868",
        "utc": "22:04:00"
      },
      {
        "day": 2,
        "flight": "B6621",
        "utc": "11:04:00"
      },
      {
        "day": 3,
        "flight": "B6015",
        "utc": "16:59:00"
      },
      {
        "day": 3,
        "flight": "B6668",
        "utc": "07:22:00"
      },
      {
        "day": 3,
        "flight": "B6188",
        "utc": "01:41:00"
      },
      {
        "day": 3,
        "flight": "B6215",
        "utc": "19:35:00"
      },
      {
        "day": 4,
        "flight": "B6371",
        "utc": "21:37:00"
      },
      {
        "day": 4,
        "flight": "B6024",
        "utc": "10:24:00"
      },
      {
        "day": 4,
        "flight": "B6749",
        "utc": "01:12:00"
      },
      {
        "day": 4,
        "flight": "B6170",
        "utc": "01:14:00"
      },
      {
        "day": 5,
        "flight": "B6613",
        "utc": "08:59:00"
      },
      {
        "day": 5,
        "flight": "B6761",
        "utc": "15:24:00"
      },
      {
        "day": 5,
        "flight": "B6162",
        "utc": "02:42:00"
      },
      {
        "day": 5,
        "flight": "B6341",
        "utc": "21:26:00"
      },
      {
        "day": 5,
        "flight": "B6347",
        "utc": "08:43:00"
      },
      {
        "day": 6,
        "flight": "B6481",
        "utc": "22:08:00"
      },
      {
        "day": 6,
        "flight": "B6549",
        "utc": "21:48:00"
      },
      {
        "day": 6,
        "flight": "B6994",
        "utc": "11:30:00"
      },
      {
        "day": 6,
        "flight": "B6892",
        "utc": "13:27:00"
      }
    ]
  }
]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index-join-clause"><a class="anchor" href="#index-join-clause"></a>Index JOIN Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 4.0)</em></p>
</div>
<div class="paragraph">
<p>When Lookup JOINs cannot efficiently join left-hand side documents with right-to-left joins and your situation cannot be flipped because your predicate needs to be on the left-hand side (such as the above Lookup Example #1 where airline documents have no reference to route documents), then Index JOINs can be used efficiently without making a Cartesian product of all route documents.
Index JOINs allow you to flip the direction of your join clause.</p>
</div>
<div class="paragraph">
<p>Consider the below query similar to the above <em>Lookup Example #1</em> with route and airline documents where route.airlineid is the document key of route documents and airline documents have no reference to route documents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT DISTINCT airline.name, airline.callsign, route.destinationairport,
 route.stops, route.airline
FROM `travel-sample` route
  JOIN `travel-sample` airline
  ON KEYS route.airlineid
WHERE route.type = "route"
AND airline.type = "airline"
AND airline.icao = "SEA"
LIMIT 4;</pre>
</div>
</div>
<div class="paragraph">
<p>This query gets a list of Seattle (<code>SEA</code>) flights, but getting <code>SEA</code> flights cannot be efficiently executed without making a Cartesian product of all route documents (LHS) with all airline documents (RHS).</p>
</div>
<div class="paragraph">
<p>This query cannot use any index on airline to directly access SEA flights because airline is on the RHS.</p>
</div>
<div class="paragraph">
<p>Also, you cannot rewrite the query to put the airline document on the LHS (to use any index) and the route document on the RHS because the airline documents (on the LHS) have no primary keys to access the route documents (on the RHS).</p>
</div>
<div class="paragraph">
<p>Using index joins, the same query can be written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Required Index:
  CREATE INDEX route_airlineid ON `travel-sample`(airlineid) WHERE type="route";

Optional index:
  CREATE INDEX airline_icao ON `travel-sample`(icao) WHERE type="airline";

Resulting in:
  SELECT * FROM `travel-sample` airline
    JOIN `travel-sample` route
    ON KEY route.airlineid FOR airline
  WHERE route.type="route"
  AND airline.type="airline"
  AND airline.icao = "SEA";</pre>
</div>
</div>
<div class="paragraph">
<p>If you generalize the same query, it looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE INDEX on-key-for-index-name rhs-expression (lhs-expression-key);

SELECT projection-list
FROM lhs-expression
JOIN rhs-expression
  ON KEY rhs-expression.lhs-expression-key FOR lhs-expression
[ WHERE predicates ] ;</pre>
</div>
</div>
<div class="paragraph">
<p>There are three important changes in the index scan syntax example above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CREATE INDEX</code> on the <code>ON KEY</code> expression <code>route.airlineid</code> to access <code>route</code> documents using <code>airlineid</code> (which are produced on the LHS).</p>
</li>
<li>
<p>The <code>ON KEY route.airlineid FOR airline</code> enables N1QL to use the index <code>route.airlineid</code>.</p>
</li>
<li>
<p>Create any optional index such as <code>route.airline</code> that can be used on airline (LHS).</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For index joins, the syntax uses <code>ON KEY</code> (singular) instead of <code>ON KEYS</code> (plural).
This is because Index JOINs' <code>ON KEY</code> expression must produce a scalar value; whereas Lookup JOINs' <code>ON KEYS</code> expression can produce either a scalar or an array value.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_index-join-clause.png" alt="FROM index join clause" width="80%">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[ join-type ] JOIN from-path [ [ AS ] alias ]  ON KEY FOR on-key-for-clause</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Arguments</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">join-type</dt>
<dd>
<p>[Optional; default is <code>LEFT INNER</code>]</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>LEFT</code> or <code>LEFT INNER</code></dt>
<dd>
<p>For each joined object produced, both the left-hand and right-hand source objects must be non-<code>MISSING</code> and non-<code>NULL</code>.</p>
</dd>
<dt class="hdlist1"><code>LEFT OUTER</code></dt>
<dd>
<p>For each joined object produced, only the left-hand source objects must be non-<code>MISSING</code> and non-<code>NULL</code>.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">from-path</dt>
<dd>
<p>Keyspace reference for right-hand side of an index join.
For details, see <a href="#concept_rnt_zfk_np/keyspaces">Keyspaces</a>.</p>
</dd>
<dt class="hdlist1"><code>AS</code> alias</dt>
<dd>
<p>[Optional] To assign another name.
For details, see <a href="#concept_rnt_zfk_np/as">AS Keyword</a>.</p>
</dd>
<dt class="hdlist1"><code>ON KEY</code> rhs-expression.lhs-expression-key</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">rhs-expression</dt>
<dd>
<p>Keyspace reference for the right-hand side of the index join.</p>
</dd>
<dt class="hdlist1">lhs-expression-key</dt>
<dd>
<p>String or expression representing the attribute in rhs-expression referencing the document key for lhs-expression.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">FOR lhs-expression</dt>
<dd>
<p>Keyspace reference for the left-hand side of the index join.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Index JOIN Example 1:</strong><code>ON KEY ... FOR</code>.</p>
</div>
<div class="paragraph">
<p>The following example counts the number of distinct "AA" airline routes for each airport after creating the following index (if not already created).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE INDEX route_airlineid ON `travel-sample`(airlineid) WHERE type="route";

SELECT Count(DISTINCT route.sourceairport) AS DistinctAirports
FROM `travel-sample` airline
  JOIN `travel-sample` route
  ON KEY route.airlineid FOR airline
WHERE route.type = "route"
AND airline.type = "airline"
AND airline.iata = "AA";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "DistinctAirports": 429
  }
]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="unnest"><a class="anchor" href="#unnest"></a>UNNEST Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a document or object contains a nested array, UNNEST conceptually performs a join of the nested array with its parent object.
Each resulting joined object becomes an output of the query.
Unnests can be chained.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_unnest-clause_4.0_RR.png" alt="FROM unnest clause 4.0 RR" width="80%">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[ join-type ] UNNEST path [ [ AS ] alias ]</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Arguments</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">join-type</dt>
<dd>
<p>[Optional; default is <code>INNER</code>]</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>INNER</code></dt>
<dd>
<p>For each result object produced, the array object in the left-hand side keyspace must be non-empty.</p>
</dd>
<dt class="hdlist1"><code>LEFT</code> or <code>LEFT OUTER</code></dt>
<dd>
<p>A left-outer unnest is performed, and at least one result object is produced for each left source object.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">path</dt>
<dd>
<p>[Required] The first path element after each UNNEST must reference some preceding path.</p>
</dd>
<dt class="hdlist1">alias (optionally, <code>AS</code> alias)</dt>
<dd>
<p>[Required] To assign a name for the unnested item.
For details, see <a href="#concept_rnt_zfk_np/as">AS Keyword</a>.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Return Values</dt>
<dd>
<p>If the right-hand source object is <code>NULL</code>, <code>MISSING</code>, empty, or a non-array value, then the result object&#8217;s right-side value is <code>MISSING</code> (omitted).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>UNNEST Example 1:</strong> UNNEST an array to select an item.</p>
</div>
<div class="paragraph">
<p>In the <code>travel-sample</code> keyspace, flatten the schedule array to get a list of the flights on Monday (<code>1</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT sched
FROM `travel-sample`
UNNEST schedule sched
WHERE  sched.day = 1
LIMIT 3;</pre>
</div>
</div>
<div class="paragraph">
<p>Results :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "sched": {
      "day": 1,
      "flight": "AF356",
      "utc": "12:40:00"
    }
  },
  {
    "sched": {
      "day": 1,
      "flight": "AF480",
      "utc": "08:58:00"
    }
  },
  {
    "sched": {
      "day": 1,
      "flight": "AF250",
      "utc": "12:59:00"
    }
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p>Another way to get similar results is by using a Collection Operator to find array items that meet our criteria:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT ARRAY item FOR item IN schedule WHEN item.day = 1 END AS Monday_flights
FROM `travel-sample`
WHERE type = "route"
AND ANY item IN schedule SATISFIES item.day = 1 END
LIMIT 3;</pre>
</div>
</div>
<div class="paragraph">
<p>However, without the <code>UNNEST</code> clause, the unflattened list results in 3 sets of flights instead of only 3 individual flights:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "Monday_flights": [
      {
        "day": 1,
        "flight": "AF356",
        "utc": "12:40:00"
      },
      {
        "day": 1,
        "flight": "AF480",
        "utc": "08:58:00"
      },
      {
        "day": 1,
        "flight": "AF250",
        "utc": "12:59:00"
      },
      {
        "day": 1,
        "flight": "AF130",
        "utc": "04:45:00"
      }
    ]
  },
  {
    "Monday_flights": [
      {
        "day": 1,
        "flight": "AF517",
        "utc": "13:36:00"
      },
      {
        "day": 1,
        "flight": "AF279",
        "utc": "21:35:00"
      },
      {
        "day": 1,
        "flight": "AF753",
        "utc": "00:54:00"
      },
      {
        "day": 1,
        "flight": "AF079",
        "utc": "15:29:00"
      },
      {
        "day": 1,
        "flight": "AF756",
        "utc": "06:16:00"
      }
    ]
  },
  {
    "Monday_flights": [
      {
        "day": 1,
        "flight": "AF975",
        "utc": "11:23:00"
      },
      {
        "day": 1,
        "flight": "AF225",
        "utc": "16:05:00"
      }
    ]
  }
]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>UNNEST Example 2:</strong> Use <code>UNNEST</code> to collect items from one array to use in another query.</p>
</div>
<div class="paragraph">
<p>In this example, the <code>UNNEST</code> clause iterates over the <code>reviews</code> array and collects the <code>author</code> names of the reviewers who rated the rooms less than a 2 to be contacted for ways to improve.
<code>r</code> is an element of the array generated by the UNNEST operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT RAW r.author
FROM `travel-sample`
UNNEST reviews AS r
WHERE `travel-sample`.type = "hotel"
AND r.ratings.Rooms &lt; 2
LIMIT 4;</pre>
</div>
</div>
<div class="paragraph">
<p>This results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  "Kayli Cronin",
  "Shanelle Streich",
  "Catharine Funk",
  "Tyson Beatty"
]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_tc1_nnx_1db"><a class="anchor" href="#section_tc1_nnx_1db"></a>ANSI NEST Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server Enterprise Edition 5.5)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ANSI NEST (and <a href="#section_ek1_jnx_1db">ANSI JOIN</a>) clauses are much faster and have much more flexible functionality than their earlier INDEX and LOOKUP equivalents, so users are strongly recommended to use ANSI NEST (and ANSI JOIN) exclusively, where possible.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>ANSI NEST supports more nest types than Couchbase Server version 4.0&#8217;s NEST was able.
ANSI NEST can nest arbitrary fields of the documents and can be chained together.</p>
</div>
<div class="paragraph">
<p>The key difference between the currently supported nests and ANSI NEST support is the replacement of the current <code>ON KEYS</code> or <code>ON KEY … FOR</code> clauses with a simple <code>ON</code> clause.
The <code>ON KEYS</code> or <code>ON KEY … FOR</code> clauses dictate that those nests can only be done on a document key (primary key for a document).
The <code>ON</code> clause can contain any expression, and thus it opens up many more nest possibilities that Couchbase did not previously support.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_ansi-nest_RR-clause_5.5.png" alt="FROM ansi nest RR clause 5.5" width="80%">
</div>
</div>
<div class="paragraph">
<p><code>lhs-expr</code> <code>[<code>nest-type</code>] NEST</code> <code>rhs-expr</code> <code>ON</code> <code>nest-clause</code></p>
</div>
<div class="paragraph">
<p><strong>Arguments</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>lhs-expr</strong></dt>
<dd>
<p>[Required] Keyspace reference or expression representing the left-hand side of the nest clause.</p>
</dd>
<dt class="hdlist1"><strong>nest-type</strong></dt>
<dd>
<p>[Optional.
Default is <code>INNER</code>] String representing the type of nest.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>INNER</code></dt>
<dd>
<p>[Optional.
Default is <code>INNER</code>]</p>
<div class="paragraph">
<p>For each nested object produced, both the left-hand and right-hand source objects must be non-MISSING and non-NULL.</p>
</div>
</dd>
<dt class="hdlist1"><code>LEFT [OUTER]</code></dt>
<dd>
<p>[Optional.
Query Service interprets <code>LEFT</code> as <code>LEFT OUTER</code>]</p>
<div class="paragraph">
<p>For each nested object produced, only the left-hand source objects must be non-MISSING and non-NULL.</p>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>NEST</code> <strong>rhs-expr</strong></dt>
<dd>
<p>[Required] Keyspace reference or expression representing the right-hand side of the nest clause.</p>
</dd>
<dt class="hdlist1"><code>ON</code> <strong>nest-clause</strong></dt>
<dd>
<p>[Required] Boolean expression representing the nest condition between the left-hand side expression and the right-hand side expression, which can be fields, constant expressions or any complex N1QL expression.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Limitations</strong></p>
</div>
<div class="paragraph">
<p>The following nest types are currently not supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Full OUTER NEST</p>
</li>
<li>
<p>Cross NEST</p>
</li>
<li>
<p>No mixing of new ANSI NEST syntax with NEST syntax in the same FROM clause.</p>
</li>
<li>
<p>The right-hand-side of any nest must be a keyspace.
Expressions, subqueries, or other join combinations cannot be on the right-hand-side of a nest.</p>
</li>
<li>
<p>A nest can only be executed when appropriate index exists on the inner side of the ANSI NEST (similar to current NEST support).</p>
</li>
<li>
<p>Adaptive indexes are not considered when selecting indexes on inner side of the nest</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>ANSI NEST Example 1:</strong> Inner ANSI NEST</p>
</div>
<div class="paragraph">
<p>List the airlines, their plane model (<code>equipment</code>), and number of stops for flights between San Francisco and Boston.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT r.airline, r.equipment, r.stops
FROM `travel-sample` r
  NEST `travel-sample` a
  ON r.airlineid = META(a).id
WHERE r.sourceairport = "SFO"
AND r.destinationairport = "BOS";</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "airline": "B6",
    "equipment": "320",
    "stops": 0
  },
  {
    "airline": "UA",
    "equipment": "752 753 738 739 319 320",
    "stops": 0
  },
  {
    "airline": "VX",
    "equipment": "320",
    "stops": 0
  }
]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nest"><a class="anchor" href="#nest"></a>Lookup NEST Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 4.0)</em></p>
</div>
<div class="paragraph">
<p>Nesting is conceptually the inverse of unnesting.
Nesting performs a join across two keyspaces.
But instead of producing a cross-product of the left and right inputs, a single result is produced for each left input, while the corresponding right inputs are collected into an array and nested as a single array-valued field in the result object.</p>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_lookup-nest_4.0_RR.png" alt="FROM lookup nest 4.0 RR" width="80%">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[ join-type ] NEST from-path [ [ AS ] alias ] on-keys-clause</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Arguments</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">join-type</dt>
<dd>
<p>[Optional; default is <code>INNER</code>]</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>INNER</code></dt>
<dd>
<p>For each result object produced, both the left-hand and right-hand source objects must be non-<code>MISSING</code> and non-<code>NULL</code>.</p>
</dd>
<dt class="hdlist1"><code>LEFT</code> or <code>LEFT OUTER</code></dt>
<dd>
<p>A left-outer unnest is performed, and at least one result object is produced for each left source object.</p>
<div class="paragraph">
<p>For each joined object produced, only the left-hand source objects must be non-<code>MISSING</code> and non-<code>NULL</code>.</p>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">from-path</dt>
<dd>
<p>[Required] Keyspace reference for right-hand side of lookup nest.
For details, see <a href="#concept_rnt_zfk_np/keyspaces">Keyspaces</a>.</p>
</dd>
<dt class="hdlist1">alias (optionally, <code>AS</code> alias)</dt>
<dd>
<p>[Required] To assign a name for the right-hand side keyspace.
For details, see <a href="#concept_rnt_zfk_np/as">AS Keyword</a>.</p>
</dd>
<dt class="hdlist1">on-keys-clause</dt>
<dd>
<p>[Required] String or expression representing the primary keys of the documents for the second keyspace.</p>
<div class="paragraph">
<p>The <code>ON KEYS</code> expression produces one or more document keys for the right-hand side document.</p>
</div>
<div class="paragraph">
<p>The <code>ON KEYS</code> expression can produce an array of document keys.</p>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Return Values</dt>
<dd>
<p>If the right-hand source object is NULL, MISSING, empty, or a non-array value, then the result object&#8217;s right-side value is MISSING (omitted).</p>
<div class="paragraph">
<p>Nests can be chained with other NEST, JOIN, and UNNEST clauses.
By default, an INNER NEST is performed.
This means that for each result object produced, both the left and right source objects must be non-missing and non-null.
The right-hand side result of NEST is always an array or MISSING.
If there is no matching right source object, then the right source object is as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the <code>ON KEYS</code> expression evaluates to</th>
<th class="tableblock halign-left valign-top">Then the right-side value is</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MISSING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MISSING</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NULL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MISSING</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">an array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an empty array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a non-array value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an empty array</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Lookup NEST Example 1:</strong> Join two keyspaces producing an output for each left input.</p>
</div>
<div class="paragraph">
<p>Show one set of routes for one airline in the <code>travel-sample</code> keyspace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SELECT *
FROM `travel-sample` route
  INNER NEST `travel-sample` airline
  ON KEYS route.airlineid
WHERE route.type = "route"
LIMIT 1;</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "airline": [
      {
        "callsign": "AIRFRANS",
        "country": "France",
        "iata": "AF",
        "icao": "AFR",
        "id": 137,
        "name": "Air France",
        "type": "airline"
      }
    ],
    "route": {
      "airline": "AF",
      "airlineid": "airline_137",
      "destinationairport": "MRS",
      "distance": 2881.617376098415,
      "equipment": "320",
      "id": 10000,
      "schedule": [
        {
          "day": 0,
          "flight": "AF198",
          "utc": "10:13:00"
        },
        {
          "day": 0,
          "flight": "AF547",
          "utc": "19:14:00"
        },
        {
          "day": 0,
          "flight": "AF943",
          "utc": "01:31:00"
        },
        {
          "day": 1,
          "flight": "AF356",
          "utc": "12:40:00"
        },
        {
          "day": 1,
          "flight": "AF480",
          "utc": "08:58:00"
        },
        {
          "day": 1,
          "flight": "AF250",
          "utc": "12:59:00"
        },
        {
          "day": 1,
          "flight": "AF130",
          "utc": "04:45:00"
        },
        {
          "day": 2,
          "flight": "AF997",
          "utc": "00:31:00"
        },
        {
          "day": 2,
          "flight": "AF223",
          "utc": "19:41:00"
        },
        {
          "day": 2,
          "flight": "AF890",
          "utc": "15:14:00"
        },
        {
          "day": 2,
          "flight": "AF399",
          "utc": "00:30:00"
        },
        {
          "day": 2,
          "flight": "AF328",
          "utc": "16:18:00"
        },
        {
          "day": 3,
          "flight": "AF074",
          "utc": "23:50:00"
        },
        {
          "day": 3,
          "flight": "AF556",
          "utc": "11:33:00"
        },
        {
          "day": 4,
          "flight": "AF064",
          "utc": "13:23:00"
        },
        {
          "day": 4,
          "flight": "AF596",
          "utc": "12:09:00"
        },
        {
          "day": 4,
          "flight": "AF818",
          "utc": "08:02:00"
        },
        {
          "day": 5,
          "flight": "AF967",
          "utc": "11:33:00"
        },
        {
          "day": 5,
          "flight": "AF730",
          "utc": "19:42:00"
        },
        {
          "day": 6,
          "flight": "AF882",
          "utc": "17:07:00"
        },
        {
          "day": 6,
          "flight": "AF485",
          "utc": "17:03:00"
        },
        {
          "day": 6,
          "flight": "AF898",
          "utc": "10:01:00"
        },
        {
          "day": 6,
          "flight": "AF496",
          "utc": "07:00:00"
        }
      ],
      "sourceairport": "TLV",
      "stops": 0,
      "type": "route"
    }
  }
]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section_rgr_rnx_1db"><a class="anchor" href="#section_rgr_rnx_1db"></a>Index NEST Clause</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 4.0)</em></p>
</div>
<div class="paragraph">
<p>When Lookup NESTs cannot efficiently nest left-hand side documents with right-to-left nests and your situation cannot be flipped because your predicate needs to be on the left-hand side (such as the above Lookup NEST Example #1 where airline documents have no reference to route documents), then Index NESTs can be used efficiently.
Index NESTs allow you to flip the direction of your nest clause.</p>
</div>
<div class="paragraph">
<p><strong>Index NEST Example 1:</strong> List four</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE INDEX idx_ijoin ON `travel-sample`(airlineid) WHERE type="route";

SELECT *
FROM `travel-sample` rte
  INNER NEST `travel-sample` aline
  ON KEY rte.airlineid
  FOR rte
WHERE rte.type = "route"
LIMIT 4;</pre>
</div>
</div>
<div class="paragraph">
<p>If you generalize the same query, it looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE INDEX on-key-for-index-name rhs-expression (lhs-expression-key);

SELECT projection-list
FROM lhs-expression
  NEST rhs-expression
  ON KEY rhs-expression.lhs-expression-key FOR lhs-expression
[ WHERE predicates ] ;</pre>
</div>
</div>
<div class="paragraph">
<p>There are three important changes in the index scan syntax example above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CREATE INDEX</code> on the <code>ON KEY</code> expression <code>route.airlineid</code> to access <code>route</code> documents using <code>airlineid</code> (which are produced on the LHS).</p>
</li>
<li>
<p>The <code>ON KEY route.airlineid FOR airline</code> enables N1QL to use the index <code>route.airlineid</code>.</p>
</li>
<li>
<p>Create any optional index, such as <code>route.airline</code> that can be used on <code>airline</code> (LHS).</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For index nests, the syntax uses <code>ON KEY</code> (singular) instead of <code>ON KEYS</code> (plural).
This is because Index NESTs' <code>ON KEY</code> expression must produce a scalar value; whereas Lookup NESTs' <code>ON KEYS</code> expression can produce either a scalar or an array value.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Syntax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/n1ql-language-reference/FROM_index-nest_5.1_rr.png" alt="FROM index nest 5.1 rr">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[ nest-type ] NEST from-path [ [ AS ] alias ] ON KEY on-key-clause FOR for-clause</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Arguments</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>nest-type</strong></dt>
<dd>
<p>[Optional; default is <code>LEFT INNER</code>]</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>LEFT</code> or <code>LEFT INNER</code></dt>
<dd>
<p>For each nested object produced, both the left-hand and right-hand source objects must be non-MISSING and non-NULL.</p>
</dd>
<dt class="hdlist1"><code>LEFT OUTER</code></dt>
<dd>
<p>For each nested object produced, only the left-hand source objects must be non-MISSING and non-NULL.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">from-path</dt>
<dd>
<p>Keyspace reference for right-hand side of an index nest.
For details, see <a href="http://docs-build.sc.couchbase.com/server/2059/n1ql/n1ql-language-reference/from.html#concept_rnt_zfk_np__keyspaces" target="_blank" rel="noopener"><span class="underline">Keyspaces</span></a>.</p>
</dd>
<dt class="hdlist1"><code>AS</code> alias</dt>
<dd>
<p>[Optional] To assign another name.
For details, see <a href="http://docs-build.sc.couchbase.com/server/2059/n1ql/n1ql-language-reference/from.html#concept_rnt_zfk_np__as" target="_blank" rel="noopener"><span class="underline">AS Keyword</span></a>.</p>
</dd>
<dt class="hdlist1"><code>ON KEY</code> rhs-expression.lhs-expression-key</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">rhs-expression</dt>
<dd>
<p>Keyspace reference for the right-hand side of the index nest.</p>
</dd>
<dt class="hdlist1">lhs-expression-key</dt>
<dd>
<p>String or expression representing the attribute in <code>rhs-expression</code> referencing the document key for <code>lhs-expression</code>.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>FOR</code> lhs-expression</dt>
<dd>
<p>Keyspace reference for the left-hand side of the index nest.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Index NEST Example 1:</strong> ON KEY ... FOR.</p>
</div>
<div class="paragraph">
<p>This example nests the airline routes for each airline after creating the following index.
(Note that the index will not match if it contains a WHERE clause)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE INDEX route_airline ON `travel-sample`(airlineid);

SELECT *
FROM `travel-sample` aline
  INNER NEST `travel-sample` rte
  ON KEY rte.airlineid
  FOR aline
WHERE aline.type = "airline"
LIMIT 1;</pre>
</div>
</div>
<div class="paragraph">
<p>Results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[
  {
    "aline": {
      "callsign": "MILE-AIR",
      "country": "United States",
      "iata": "Q5",
      "icao": "MLA",
      "id": 10,
      "name": "40-Mile Air",
      "type": "airline"
    },
    "route": [
      {
        "airline": "Q5",
        "airlineid": "airline_10",
        "destinationairport": "HKB",
        "distance": 118.20183585107631,
        "equipment": "CNA",
        "id": 46586,
        "schedule": [
          {
            "day": 0,
            "flight": "Q5188",
            "utc": "12:40:00"
          },
          {
            "day": 0,
            "flight": "Q5630",
            "utc": "21:53:00"
          },
          {
            "day": 0,
            "flight": "Q5530",
            "utc": "07:47:00"
          },
          {
            "day": 0,
            "flight": "Q5132",
            "utc": "01:10:00"
          },
          {
            "day": 0,
            "flight": "Q5746",
            "utc": "20:11:00"
          },
          {
            "day": 1,
            "flight": "Q5413",
            "utc": "08:07:00"
          },
          {
            "day": 2,
            "flight": "Q5263",
            "utc": "17:39:00"
          },
          {
            "day": 2,
            "flight": "Q5564",
            "utc": "01:55:00"
          },
          {
            "day": 2,
            "flight": "Q5970",
            "utc": "00:09:00"
          },
          {
            "day": 2,
            "flight": "Q5295",
            "utc": "21:24:00"
          },
          {
            "day": 2,
            "flight": "Q5051",
            "utc": "04:41:00"
          },
          {
            "day": 3,
            "flight": "Q5023",
            "utc": "00:16:00"
          },
          {
            "day": 3,
            "flight": "Q5554",
            "utc": "11:45:00"
          },
          {
            "day": 3,
            "flight": "Q5619",
            "utc": "22:22:00"
          },
          {
            "day": 4,
            "flight": "Q5279",
            "utc": "23:19:00"
          },
          {
            "day": 4,
            "flight": "Q5652",
            "utc": "13:35:00"
          },
          {
            "day": 4,
            "flight": "Q5631",
            "utc": "17:53:00"
          },
          {
            "day": 4,
            "flight": "Q5105",
            "utc": "21:54:00"
          },
          {
            "day": 5,
            "flight": "Q5559",
            "utc": "01:19:00"
          },
          {
            "day": 5,
            "flight": "Q5600",
            "utc": "17:36:00"
          },
          {
            "day": 6,
            "flight": "Q5854",
            "utc": "22:59:00"
          },
          {
            "day": 6,
            "flight": "Q5217",
            "utc": "11:58:00"
          },
          {
            "day": 6,
            "flight": "Q5756",
            "utc": "06:32:00"
          },
          {
            "day": 6,
            "flight": "Q5151",
            "utc": "15:14:00"
          }
        ],
        "sourceairport": "FAI",
        "stops": 0,
        "type": "route"
      },
      {
        "airline": "Q5",
        "airlineid": "airline_10",
        "destinationairport": "FAI",
        "distance": 118.20183585107631,
        "equipment": "CNA",
        "id": 46587,
        "schedule": [
          {
            "day": 0,
            "flight": "Q5492",
            "utc": "17:00:00"
          },
          {
            "day": 0,
            "flight": "Q5357",
            "utc": "09:44:00"
          },
          {
            "day": 0,
            "flight": "Q5873",
            "utc": "00:01:00"
          },
          {
            "day": 1,
            "flight": "Q5171",
            "utc": "00:59:00"
          },
          {
            "day": 1,
            "flight": "Q5047",
            "utc": "10:57:00"
          },
          {
            "day": 1,
            "flight": "Q5889",
            "utc": "14:51:00"
          },
          {
            "day": 1,
            "flight": "Q5272",
            "utc": "18:36:00"
          },
          {
            "day": 2,
            "flight": "Q5673",
            "utc": "21:30:00"
          },
          {
            "day": 3,
            "flight": "Q5381",
            "utc": "20:01:00"
          },
          {
            "day": 4,
            "flight": "Q5261",
            "utc": "18:37:00"
          },
          {
            "day": 5,
            "flight": "Q5755",
            "utc": "23:43:00"
          },
          {
            "day": 5,
            "flight": "Q5544",
            "utc": "16:04:00"
          },
          {
            "day": 6,
            "flight": "Q5400",
            "utc": "10:46:00"
          },
          {
            "day": 6,
            "flight": "Q5963",
            "utc": "13:53:00"
          },
          {
            "day": 6,
            "flight": "Q5195",
            "utc": "03:03:00"
          },
          {
            "day": 6,
            "flight": "Q5653",
            "utc": "22:58:00"
          }
        ],
        "sourceairport": "HKB",
        "stops": 0,
        "type": "route"
      }
    ]
  }
]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-1-join-types"><a class="anchor" href="#appendix-1-join-types"></a>Appendix 1 - JOIN Types</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Join</th>
<th class="tableblock halign-left valign-top">Left-Hand Side (lhs)</th>
<th class="tableblock halign-left valign-top">Right-Hand Side (rhs)</th>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ANSI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any field or expr that produces a value that will be matched on the right-hand side.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything that can have a proper index on the join expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lhs-expr</code></p>
<p class="tableblock"><code>JOIN rhs-keyspace</code></p>
<p class="tableblock"><code>ON</code> <em>any join condition</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` r</code></p>
<p class="tableblock"><code>JOIN `travel-sample` a</code></p>
<p class="tableblock"><code>ON</code>  <code>r.airlineid = META(a).id</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lookup</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must produce a Document Key for the right-hand side.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must have a Document Key.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lhs-expr</code></p>
<p class="tableblock"><code>JOIN rhs-keyspace</code></p>
<p class="tableblock"><code>ON KEYS</code></p>
<p class="tableblock"><code>lhs-expr.foreign_key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` r</code></p>
<p class="tableblock"><code>JOIN `travel-sample` a</code></p>
<p class="tableblock"><code>ON KEYS</code> <code>r.airlineid</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Index</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must produce a key for the right-hand side&#8217;s index.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must have a proper index on the field or expr that maps to the Document Key of the left-hand side.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lhs-keyspace</code></p>
<p class="tableblock"><code>JOIN rhs-keyspace</code></p>
<p class="tableblock"><code>ON KEY rhs-kspace.idx_key</code></p>
<p class="tableblock"><code>FOR lhs-keyspace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT <strong></code></p>
<p class="tableblock"><code>FROM `travel-sample` a</code></p>
<p class="tableblock"><code>JOIN `travel-sample` r</code></p>
<p class="tableblock"><code>ON KEY</code> <code>r.airlineid</code></p>
<p class="tableblock">*FOR</strong> a</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="as"><a class="anchor" href="#as"></a>Appendix 2 - NEST Types</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">NEST</th>
<th class="tableblock halign-left valign-top">Left-Hand Side (lhs)</th>
<th class="tableblock halign-left valign-top">Right-Hand Side (rhs)</th>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ANSI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any field or expr that produces a value that will be matched on the right-hand side.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything that can have a proper index on the join expression.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lhs-expr</code></p>
<p class="tableblock"><code>NEST rhs-keyspace</code></p>
<p class="tableblock"><code>ON</code> <em>any nest condition</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` r</code></p>
<p class="tableblock"><code>NEST `travel-sample` a</code></p>
<p class="tableblock"><code>ON</code> <code>r.airlineid = META(a).id</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lookup</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must produce a Document Key for the right-hand side.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must have a Document Key.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lhs-expr</code></p>
<p class="tableblock"><code>NEST rhs-keyspace</code></p>
<p class="tableblock"><code>ON KEYS</code></p>
<p class="tableblock"><code>lhs-expr.foreign_key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` r</code></p>
<p class="tableblock"><code>NEST `travel-sample` a</code></p>
<p class="tableblock"><code>ON KEYS</code> <code>r.airlineid</code></p>
<p class="tableblock"><code>WHERE r.type="route"</code></p>
<p class="tableblock"><code>LIMIT 4;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Index</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must produce a key for the right-hand side index.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must have a proper index on the field or expr that maps to the Document Key of the left-hand side.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lhs-keyspace</code></p>
<p class="tableblock"><code>NEST rhs-keyspace</code></p>
<p class="tableblock"><code>ON KEY rhs-kspace.idx_key</code></p>
<p class="tableblock"><code>FOR</code> <code>lhs-keyspace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SELECT *</code></p>
<p class="tableblock"><code>FROM `travel-sample` a</code></p>
<p class="tableblock"><code>NEST `travel-sample` r</code></p>
<p class="tableblock"><code>ON KEY</code> <code>r.airlineid</code></p>
<p class="tableblock"><code>FOR</code> <code>a</code></p>
<p class="tableblock"><code>WHERE a.type="airline"</code></p>
<p class="tableblock"><code>LIMIT 4;</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/+CouchbaseServer" class="icon">
              <svg width="50px" height="50px" viewBox="36.72 225.573 542.326 343.67"><path d="m209.02 363.05v68.732h93.212c-15.065 44.252-37.662 68.732-93.212 68.732-56.492 0-100.74-46.135-100.74-102.63s44.252-102.63 100.74-102.63c30.129 0 48.96 10.357 66.849 25.422 14.123-14.123 13.182-16.006 48.96-49.902-31.071-28.246-71.557-45.194-115.81-45.194-95.096-0.94-172.3 76.266-172.3 171.36s77.206 172.3 172.3 172.3c142.17 0 177.01-124.28 165.71-206.2-33.896-1e-3 -165.71-1e-3 -165.71-1e-3zm310.71 3.766v-59.317h-42.369v59.317h-61.2v42.369h61.2v61.2h42.369v-61.2h59.317v-42.369h-59.317z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2018 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
