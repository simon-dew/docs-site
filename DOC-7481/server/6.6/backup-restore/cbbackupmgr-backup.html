<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>cbbackupmgr backup | Couchbase Docs (Staging)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-7481/server/6.6/backup-restore/cbbackupmgr-backup.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Backs up data from a Couchbase cluster">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="6.6">
<meta name="generator" content="Antora 2.3.0">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-7481/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
</nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/couchbase/backup/docs/modules/backup-restore/pages/cbbackupmgr-backup.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">server</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">cbbackupmgr backup</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Backs up data from a Couchbase cluster</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="synopsis"><a class="anchor" href="#synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content">cbbackupmgr backup [--archive &lt;archive_dir&gt;] [--repo &lt;repo_name&gt;]
                   [--cluster &lt;url&gt;] [--username &lt;username&gt;]
                   [--password &lt;password&gt;] [--resume] [--purge]
                   [--threads &lt;num&gt;] [--cacert &lt;file&gt;] [--no-ssl-verify]
                   [--value-compression &lt;type&gt;] [--no-progress-bar]
                   [--skip-last-compaction] [--consistency-check &lt;window&gt;]
                   [--obj-access-key-id &lt;access_key_id&gt;] [--obj-cacert &lt;cert_path&gt;]
                   [--obj-endpoint &lt;endpoint&gt;] [--obj-no-ssl-verify]
                   [--obj-region &lt;region&gt;] [--obj-staging-dir &lt;staging_dir&gt;]
                   [--obj-secret-access-key &lt;secret_access_key&gt;]
                   [--s3-force-path-style] [--s3-log-level &lt;level&gt;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Backs up a Couchbase cluster into the backup repository specified. Before
running the backup command, a backup repository must be created. See
<a href="cbbackupmgr-config.html" class="page">cbbackupmgr-config</a> for more details on creating a backup
repository. The backup command uses information from the previous backup taken
in order to backup all new data on a Couchbase cluster. If no previous backup
exists then all data on the cluster is backed up. The backup is taken based on
the backup repository&#8217;s backup configuration. Each backup will create a new
folder in the backup repository. This folder will contain all data from the
backup and is named to reflect the time that the backup was started.</p>
</div>
<div class="paragraph">
<p>As the backup runs, it tracks its progress which allows failed backups to be
resumed from the point where they left off. If a backup fails before it is
complete it is considered a partial backup. To attempt to complete the backup
process, the backup may be resumed with the --resume flag. It may also be
deleted and resumed from the previous successful backup with the --purge flag.</p>
</div>
<div class="paragraph">
<p>The backup command is capable of backing up data when there is a cluster
rebalance operation in progress. During a rebalance, the backup command will
track data as it moves around the cluster and complete the backup. However, users
should use caution when running backups during a rebalance since both the
rebalance and backup operations can be resource intensive and may cause
temporary performance degradations in other parts of the cluster. See the
--threads flag for information on how to lower the impact of the backup command
on your Couchbase cluster.</p>
</div>
<div class="paragraph">
<p>The backup command is also capable of backing up data when there are server
failures in the target backup cluster. When a server failure occurs the backup
command will wait for 180 seconds for the failed server to come back online or
for the failed server to be failed over and removed from the cluster. If 180
seconds passes without the failed server coming back online or being failed over
then the backup command will mark the data on that node as failed and attempt to
back up the rest of the data from the cluster. The backup will be marked as a
partial backup in the backup archive and will need to be either resumed or
purged when the backup command is invoked again.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="options"><a class="anchor" href="#options"></a>OPTIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below are a list of required and optional parameters for the backup command.</p>
</div>
<div class="sect2">
<h3 id="required"><a class="anchor" href="#required"></a>Required</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">-a,--archive &lt;archive_dir&gt;</dt>
<dd>
<p>The location of the backup archive directory. When backing up directly to S3
prefix the archive path with <code>s3://${BUCKET_NAME}/</code>.</p>
</dd>
<dt class="hdlist1">-r,--repo &lt;repo_name&gt;</dt>
<dd>
<p>The name of the backup repository to backup data into.</p>
</dd>
<dt class="hdlist1">-c,--cluster &lt;hostname&gt;</dt>
<dd>
<p>The hostname of one of the nodes in the cluster to back up. See the
Host Formats section below for hostname specification details.</p>
</dd>
<dt class="hdlist1">-u,--username &lt;username&gt;</dt>
<dd>
<p>The username for cluster authentication. The user must have the appropriate
privileges to take a backup.</p>
</dd>
<dt class="hdlist1">-p,--password &lt;password&gt;</dt>
<dd>
<p>The password for cluster authentication. The user must have the appropriate
privileges to take a backup. If not password is supplied to this option then
you will be prompted to enter your password.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="optional"><a class="anchor" href="#optional"></a>Optional</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--resume</dt>
<dd>
<p>If the previous backup did not complete successfully it can be resumed from
where it left off by specifying this flag. Note that the resume and purge
flags may not be specified at the same time.</p>
</dd>
<dt class="hdlist1">--purge</dt>
<dd>
<p>If the previous backup did not complete successfully the partial backup will
be removed and restarted from the point of the previous successful backup by
specifying this flag. Note that the purge and resume flags may not be
specified at the same time.</p>
</dd>
<dt class="hdlist1">--no-ssl-verify</dt>
<dd>
<p>Skips the SSL verification phase. Specifying this flag will allow a
connection using SSL encryption, but will not verify the identity of the
server you connect to. You are vulnerable to a man-in-the-middle attack if
you use this flag. Either this flag or the --cacert flag must be specified
when using an SSL encrypted connection.</p>
</dd>
<dt class="hdlist1">--cacert &lt;cert_path&gt;</dt>
<dd>
<p>Specifies a CA certificate that will be used to verify the identity of the
server being connecting to. Either this flag or the --no-ssl-verify flag
must be specified when using an SSL encrypted connection.</p>
</dd>
<dt class="hdlist1">--value-compression &lt;compression_policy&gt;</dt>
<dd>
<p>Specifies a compression policy for backed up values. When Couchbase sends
data to the backup client the data stream may contain all compressed values,
all uncompressed values, or a mix of compressed and uncompressed values. To
backup all data in the same form that the backup client receives it you can
specify "unchanged". If you wish for all values to be uncompressed then you
can specify "uncompressed". This policy will however uncompress any
compressed values received from Couchbase and may increase the backup file
size. To compress all values you can specify "compressed". This will compress
any uncompressed values before writing them to disk. The default value for
this option is "compressed".</p>
</dd>
<dt class="hdlist1">-t,--threads &lt;num&gt;</dt>
<dd>
<p>Specifies the number of concurrent clients to use when taking a backup.
Fewer clients means backups will take longer, but there will be less cluster
resources used to complete the backup. More clients means faster backups,
but at the cost of more cluster resource usage. This parameter defaults to 1
if it is not specified and it is recommended that this parameter is not set
to be higher than the number of CPUs on the machine where the backup is
taking place.</p>
</dd>
<dt class="hdlist1">--no-progress-bar</dt>
<dd>
<p>By default, a progress bar is printed to stdout so that the user can see how
long the backup is expected to take, the amount of data that is being
transferred per second, and the amount of data that has been backed up.
Specifying this flag disables the progress bar and is useful when running
automated jobs.</p>
</dd>
<dt class="hdlist1">--consistency-check &lt;window&gt;</dt>
<dd>
<p>When a window larger than 1 is provided it will enable the
consistency checker. This will show a warning if the backup
consistency window is larger than the one provided in seconds.
This feature is developer preview. See DISCUSSION for more information.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cloud-integration"><a class="anchor" href="#cloud-integration"></a>Cloud integration</h3>
<div class="paragraph">
<p>Backing up directly to object store is only supported for 6.6.0 clusters. It&#8217;s
likely that backing up older clusters will result in significantly higher
memory consumption.</p>
</div>
<div class="sect3">
<h4 id="required-2"><a class="anchor" href="#required-2"></a>Required</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">--obj-staging-dir &lt;staging_dir&gt;</dt>
<dd>
<p>When performing an operation on an archive which is located in the cloud such
as AWS, the staging directory is used to store local meta data files. This
directory can be temporary (it&#8217;s not treated as a persistent store) and is
only used during the backup. NOTE: Do not use <code>/tmp</code> as the <code>obj-staging-dir</code>.
See <code>Disk requirements</code> in <a href="cbbackupmgr-cloud.html" class="page">cbbackupmgr-cloud</a> for more information.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="optional-2"><a class="anchor" href="#optional-2"></a>Optional</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">--obj-access-key-id &lt;access_key_id&gt;</dt>
<dd>
<p>The access key id which has access to your chosen object store. This option
can be omitted when using the shared config functionality provided by your
chosen object store. Can alternatively be provided using the
<code>CB_OBJSTORE_ACCESS_KEY_ID</code> environment variable.</p>
</dd>
<dt class="hdlist1">--obj-cacert &lt;cert_path&gt;</dt>
<dd>
<p>Specifies a CA certificate that will be used to verify the identity of the
object store being connected to.</p>
</dd>
<dt class="hdlist1">--obj-endpoint &lt;endpoint&gt;</dt>
<dd>
<p>The host/address of your object store.</p>
</dd>
<dt class="hdlist1">--obj-no-ssl-verify</dt>
<dd>
<p>Skips the SSL verification phase when connecting to the object store.
Specifying this flag will allow a connection using SSL encryption, but you
are vulnerable to a man-in-the-middle attack.</p>
</dd>
<dt class="hdlist1">--obj-region &lt;region&gt;</dt>
<dd>
<p>The region in which your bucket/container resides. For AWS this option may be
omitted when using the shared config functionality. See the AWS section of
the cloud documentation for more information.</p>
</dd>
<dt class="hdlist1">--obj-secret-access-key &lt;secret_access_key&gt;</dt>
<dd>
<p>The secret access key which has access to you chosen object store. This
option can be omitted when using the shared config functionality provided by
your chosen object store. Can alternatively be provided using the
<code>CB_OBJSTORE_SECRET_ACCESS_KEY</code> environment variable.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="aws-s3-options"><a class="anchor" href="#aws-s3-options"></a>AWS S3 Options</h4>
<div class="sect4">
<h5 id="optional-3"><a class="anchor" href="#optional-3"></a>Optional</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">--s3-force-path-style</dt>
<dd>
<p>By default the updated virtual style paths will be used when interfacing with
AWS S3. This option will force the AWS SDK to use the alternative path style
URLs which are often required by S3 compatible object stores.</p>
</dd>
<dt class="hdlist1">--s3-log-level &lt;level&gt;</dt>
<dd>
<p>  Set the log level for the AWS SDK. By default logging will be disabled. Valid
  options are <code>debug</code>, <code>debug-with-signing</code>, <code>debug-with-body</code>,
  <code>debug-with-request-retries</code>, <code>debug-with-request-errors</code>, and
  <code>debug-with-event-stream-body</code>.
:!include_version_warning:</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="host-formats"><a class="anchor" href="#host-formats"></a>HOST FORMATS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When specifying a host for the couchbase-cli command the following formats are expected:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>couchbase://&lt;addr&gt;</code></p>
</li>
<li>
<p><code>&lt;addr&gt;:&lt;port&gt;</code></p>
</li>
<li>
<p><code>http://&lt;addr&gt;:&lt;port&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is recommended to use the couchbase://&lt;addr&gt; format for standard
installations. The other two formats allow an option to take a port number which
is needed for non-default installations where the admin port has been set up on
a port other that 8091.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples"><a class="anchor" href="#examples"></a>EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following command is used to take a backup of a Couchbase cluster.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr config --archive /data/backups --repo example
$ cbbackupmgr backup -a /data/backups -r example \
 -c couchbase://172.23.10.5 -u Administrator -p password</pre>
</div>
</div>
<div class="paragraph">
<p>Once the backup has finished there will be a new directory in the specified
backup repository containing the backed up data. You can see this new directory
using the <a href="cbbackupmgr-info.html" class="page">cbbackupmgr-info</a> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cbbackupmgr info -a /data/backups --all
Name         | UUID                                 | Size     | # Repos  |
example | 32c97d5f-821a-4284-840b-9ee7cf8733a3 | 55.56MB  | 1        |
*  Name        | Size     | # Backups  |
*  Manchester  | 55.56MB  | 1          |
+    Backup                      | Size     | Type | Source               | Cluster UUID                     | Range | Events  | Aliases  | Complete  |
+    2019-03-15T13_52_27.18301Z  | 55.56MB  | FULL | http://172.23.10.5   | c044f5eeb1dc16d0cd49dac29074b5f9 | N/A   | 0       | 1        | true      |
-      Bucket          | Size     | Items  | Mutations | Tombstones | Views  | FTS  | Indexes  | CBAS  |
-      beer-sample     | 6.85MB   | 7303   | 7303      | 0          | 1      | 0    | 1        | 0     |
-      gamesim-sample  | 2.86MB   | 586    | 586       | 0          | 1      | 0    | 1        | 0     |
-      travel-sample   | 42.72MB  | 31591  | 31591     | 0          | 0      | 0    | 10       | 0     |</pre>
</div>
</div>
<div class="paragraph">
<p>If a backup fails then it is considered a partial backup and the backup client
will not be able to back up any new data until the user decides whether to
resume or purge the partial backup. This decision is made by specifying either
the --resume or the --purge flag on the next invocation of the backup command.
Below is an example of how this process works if the user wants to resume a
backup.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr config -a /data/backups -r example

$ cbbackupmgr backup -a /data/backups -r example \
 -c 172.23.10.5 -u Administrator -p password

Error backing up cluster: Not all data was backed up due to connectivity
issues. Check to make sure there were no server side failures during
backup. See backup logs for more details on what wasn't backed up.

$ cbbackupmgr backup -a /data/backups -r example \
 -c 172.23.10.5 -u Administrator -p password

Error backing up cluster: Partial backup error 2016-02-11T17:00:19.594970735-08:00

$ cbbackupmgr backup -a /data/backups -r example -c 172.23.10.5 \
 -u Administrator -p password --resume

Backup successfully completed</pre>
</div>
</div>
<div class="paragraph">
<p>To backup a cluster with a different amount of concurrent clients and decrease
the backup time you can specify the --threads flag. Remember that specifying a
higher number of concurrent clients increases the amount of resources the
cluster uses to complete the backup. Below is an example of using 16 concurrent
clients.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr config -a /data/backups -r example

$ cbbackupmgr backup -a /data/backups -r example \
 -c 172.23.10.5 -u Administrator -p password -t 16</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="discussion"><a class="anchor" href="#discussion"></a>DISCUSSION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command always backs up data incrementally. By using the vbucket sequence
number that is associated with each item, the backup command is able to examine
previous backups in order to determine where the last backup finished.</p>
</div>
<div class="paragraph">
<p>When backing up a cluster, data for each bucket is backed up in the following
order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Bucket Settings</code></p>
</li>
<li>
<p><code>View Definitions</code></p>
</li>
<li>
<p><code>Global Secondary Index (GSI) Definitions</code></p>
</li>
<li>
<p><code>Full-Text Index Definitions</code></p>
</li>
<li>
<p><code>Key-Value Data</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The backup command will store everything that is persisted to disk on the
Couchbase Server nodes at the time the backup is started. Couchbase server is
consistent at a vBucket level and not across a whole bucket. The tool tries
to provide a strong consistency window by opening all connection to every
node at the same time. Being a distributed system there are times when this is
not possible such as when the cluster is under-resourced or there are network
issues. These may affect the consistency of the backup across
the vBuckets. <code>cbbackupmgr backup</code> provides a developer preview feature that
checks that the backup is inside a consistency window.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="environment-and-configuration-variables"><a class="anchor" href="#environment-and-configuration-variables"></a>ENVIRONMENT AND CONFIGURATION VARIABLES</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">CB_CLUSTER</dt>
<dd>
<p>Specifies the hostname of the Couchbase cluster to connect to. If the
hostname is supplied as a command line argument then this value is
overridden.</p>
</dd>
<dt class="hdlist1">CB_USERNAME</dt>
<dd>
<p>Specifies the username for authentication to a Couchbase cluster. If the
username is supplied as a command line argument then this value is
overridden.</p>
</dd>
<dt class="hdlist1">CB_PASSWORD</dt>
<dd>
<p>Specifies the password for authentication to a Couchbase cluster. If the
password is supplied as a command line argument then this value is
overridden.</p>
</dd>
<dt class="hdlist1">CB_ARCHIVE_PATH</dt>
<dd>
<p>Specifies the path to the backup archive. If the archive path is supplied as
a command line argument then this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_STAGING_DIRECTORY</dt>
<dd>
<p>Specifies the path to the staging directory. If the <code>--obj-staging-dir</code>
argument is provided in the command line then this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_REGION</dt>
<dd>
<p>Specifies the object store region. If the <code>--obj-region</code> argument is provided
in the command line then this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_ACCESS_KEY_ID</dt>
<dd>
<p>Specifies the object store access key id. If the <code>--obj-access-key-id</code>
argument is provided in the command line this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_SECRET_ACCESS_KEY</dt>
<dd>
<p>Specifies the object store secret access key. If the
<code>--obj-secret-access-key</code> argument is provided in the command line this value
is overridden.</p>
</dd>
<dt class="hdlist1">CB_AWS_ENABLE_EC2_METADATA</dt>
<dd>
<p>By default cbbackupmgr will disable fetching EC2 instance metadata. Setting
this environment variable to true will allow the AWS SDK to fetch metadata
from the EC2 instance endpoint.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="files"><a class="anchor" href="#files"></a>FILES</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">restrictions.json</dt>
<dd>
<p>Keeps a list of restrictions used to ensure data is not restored to the
place.</p>
</dd>
<dt class="hdlist1">bucket-config.json</dt>
<dd>
<p>Stores the bucket configuration settings for a bucket.</p>
</dd>
<dt class="hdlist1">views.json</dt>
<dd>
<p>Stores the view definitions for a bucket.</p>
</dd>
<dt class="hdlist1">gsi.json</dt>
<dd>
<p>Stores the global secondary index (GSI) definitions for a bucket.</p>
</dd>
<dt class="hdlist1">full-text.json</dt>
<dd>
<p>Stores the full-text index definitions for a bucket.</p>
</dd>
<dt class="hdlist1">shard-*.fdb</dt>
<dd>
<p>Stores the key-value data for a bucket.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="cbbackupmgr-config.html" class="page">cbbackupmgr-config</a>,
<a href="cbbackupmgr-info.html" class="page">cbbackupmgr-info</a>,
<a href="cbbackupmgr-strategies.html" class="page">cbbackupmgr-strategies</a>,
<a href="cbbackupmgr-cloud.html" class="page">cbbackupmgr-cloud</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbbackupmgr"><a class="anchor" href="#cbbackupmgr"></a>CBBACKUPMGR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href="cbbackupmgr.html" class="page">cbbackupmgr</a> suite</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
