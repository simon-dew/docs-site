<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Release Notes | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4504/kafka-connector/3.4/release-notes.html">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="kafka-connector">
    <meta name="dcterms.identifier" content="3.4">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4504">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../server/6.0/introduction/intro.html">Server</a></li>
                  <li><a href="../../server/6.0/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../server/6.0/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../server/6.0/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../server/6.0/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="../../operator/1.2/overview.html">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="../../couchbase-lite/2.5/index.html">Lite</a></li>
                  <li><a href="../../sync-gateway/2.5/index.html">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../server/6.0/sdk/overview.html">SDKs</a></li>
                  <li><a href="../../c-sdk/2.10/start-using-sdk.html">C</a></li>
                  <li><a href="../../dotnet-sdk/2.7/start-using-sdk.html">.NET</a></li>
                  <li><a href="../../go-sdk/1.5/start-using-sdk.html">Go</a></li>
                  <li><a href="../../java-sdk/2.7/start-using-sdk.html">Java</a></li>
                  <li><a href="../../nodejs-sdk/2.6/start-using-sdk.html">Node.js</a></li>
                  <li><a href="../../php-sdk/2.6/start-using-sdk.html">PHP</a></li>
                  <li><a href="../../python-sdk/2.5/start-using-sdk.html">Python</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../server/6.0/connectors/intro.html">Connectors</a></li>
                  <li><a href="../../elasticsearch-connector/4.0/index.html">Elasticsearch</a></li>
                  <li><a href="../../server/6.0/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="index.html">Kafka</a></li>
                  <li><a href="../../spark-connector/2.2/index.html">Spark</a></li>
                  <li><a href="../../talend-connector/index.html">Talend</a></li>
                  <li><a href="../../server/6.0/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="index.html"><span class="title">Kafka Connector</span> <span class="version">3.4</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../3.3/release-notes.html">Kafka Connector 3.3</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-current-path is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index.html">Kafka Connector</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="quickstart.html">Quickstart</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="source-configuration-options.html">Source Configuration Options</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="sink-configuration-options.html">Sink Configuration Options</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="streams-sample.html">Couchbase Sample with Kafka Streams</a>
    </span>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="release-notes.html">Release Notes</a>
    </span>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Kafka Connector</a></li>
    <li class="crumb"><a href="release-notes.html">Release Notes</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="https://github.com/couchbase/kafka-connect-couchbase/edit/master/docs/modules/ROOT/pages/release-notes.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">Release Notes</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Release notes for the Kafka Connector.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-4-0-2018-10-16"><a class="anchor" href="#couchbase-kafka-connector-3-4-0-2018-10-16"></a>Couchbase Kafka Connector 3.4.0 (2018-10-16)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.4.0/kafka-connect-couchbase-3.4.0.zip">kafka-connect-couchbase-3.4.0.zip</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.4.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="new-features"><a class="anchor" href="#new-features"></a>New features</h3>
<div class="paragraph">
<p>Version 3.4 introduces <a href="https://blog.couchbase.com/rollback-mitigation-kafka-connector-3-4-beta/">rollback mitigation</a> in the form of persistence polling.
Messages are published to Kafka only after the database events have been saved to disk on all Couchbase replicas.
Rollback mitigation is enabled by default.
It may be disabled by setting the persistence polling interval to <code>0</code>.</p>
</div>
<div class="paragraph">
<p>The flow control buffer size is now configurable, with a default size of 128 megabytes.
This is an increase over the previous hard-coded value of 20 megabytes.</p>
</div>
</div>
<div class="sect2">
<h3 id="new-configuration-properties"><a class="anchor" href="#new-configuration-properties"></a>New configuration properties</h3>
<div class="ulist">
<ul>
<li>
<p><code>couchbase.flow_control_buffer=128m</code></p>
</li>
<li>
<p><code>couchbase.persistence_polling_interval=100ms</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="issues-resolved"><a class="anchor" href="#issues-resolved"></a>Issues resolved</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-116">KAFKAC-116</a>: [ENHANCEMENT] Add support for rollback mitigation</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-127">KAFKAC-127</a>: [BUGFIX] Source connector can&#8217;t reconnect to Couchbase hosted on Docker Container</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-124">KAFKAC-124</a>: [BUGFIX] Rollback mitigation causes data loss when opening DCP stream</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-4-0-beta-1-2018-07-06"><a class="anchor" href="#couchbase-kafka-connector-3-4-0-beta-1-2018-07-06"></a>Couchbase Kafka Connector 3.4.0-beta.1 (2018-07-06)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.4.0-beta.1/kafka-connect-couchbase-3.4.0-beta.1.zip">kafka-connect-couchbase-3.4.0-beta.1.zip</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.4.0-beta.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Version 3.4.0-beta.1 has a bug that can cause data loss. When rollback mitigation is enabled, some events might not be published to the Kafka topic.
See <a href="https://issues.couchbase.com/browse/KAFKAC-124">KAFKAC-124</a> for details.
This issue is resolved in the 3.4.0 release.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When database changes are rolled back due to failover of a Couchbase Server node, the connector will now by default prevent the rolled-back changes from being published to the Kafka topic.
This is done by buffering changes until they have been persisted to all replicas in the Couchbase cluster (and are unlikely to be rolled back).
The connector polls the database at a configurable interval to determine which changes have been persisted.
This feature is enabled by default, and may be disabled by setting the polling interval to <code>0</code>.</p>
</div>
<div class="paragraph">
<p>The flow control buffer size is now configurable, with a default size of 128 megabytes.
This is an increase over the previous hard-coded value of 20 megabytes.</p>
</div>
<div class="paragraph">
<p>New configuration properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>couchbase.flow_control_buffer=128m</code></p>
</li>
<li>
<p><code>couchbase.persistence_polling_interval=100ms</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-116">KAFKAC-116</a>: [ENHANCEMENT] Add support for rollback mitigation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-3-2-ga-2018-07-02"><a class="anchor" href="#couchbase-kafka-connector-3-3-2-ga-2018-07-02"></a>Couchbase Kafka Connector 3.3.2 GA (2018-07-02)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.3.2/kafka-connect-couchbase-3.3.2.zip">kafka-connect-couchbase-3.3.2.zip</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.3.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The source connector now resumes streaming after a Couchbase Server rollback.</p>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-72">KAFKAC-72</a>: [BUGFIX] Connector stops streaming after rollback</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-115">KAFKAC-115</a>: [ENHANCEMENT] Upgrade to DCP client 0.18.0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-3-1-ga-2018-06-19"><a class="anchor" href="#couchbase-kafka-connector-3-3-1-ga-2018-06-19"></a>Couchbase Kafka Connector 3.3.1 GA (2018-06-19)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.3.1/kafka-connect-couchbase-3.3.1.zip">kafka-connect-couchbase-3.3.1.zip</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.3.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sink connector can now set expiration times for documents, and can assign document IDs by composing values from multiple fields.</p>
</div>
<div class="paragraph">
<p>The source connector now continues streaming after a graceful failover.</p>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-104">KAFKAC-104</a>: [ENHANCEMENT] Support for setting TTL on items being written to Couchbase</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-106">KAFKAC-106</a>: [ENHANCEMENT] Support assigning document ID from multiple fields</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-109">KAFKAC-109</a>: [ENHANCEMENT] KAFKAC-109 Upgrade to Java client 2.5.9 and DCP client 0.17.0</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/JDCP-85">JDCP-85</a>: [BUGFIX] Client stops receiving some events after failover</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/JDCP-94">JDCP-94</a>: [BUGFIX] Should never pass null ChannelFlowController to event handlers</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-3-0-ga-2018-05-15"><a class="anchor" href="#couchbase-kafka-connector-3-3-0-ga-2018-05-15"></a>Couchbase Kafka Connector 3.3.0 GA (2018-05-15)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.3.0/kafka-connect-couchbase-3.3.0.zip">kafka-connect-couchbase-3.3.0.zip</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.3.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Compression is now enabled by default (requires Couchbase Server 5.5 or later).</p>
</div>
<div class="paragraph">
<p>IPv6 is now enabled by default. To disable IPv6 in a dual-stack environment, set the new <code>couchbase.forceIPv4</code> config property to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Resolved a regression that caused the connector to need a restart after a Couchbase Server restart.</p>
</div>
<div class="paragraph">
<p>Couchbase password and SSL keystore password may be specified using via <code>KAFKA_COUCHBASE_PASSWORD</code> and <code>KAFKA_COUCHBASE_SSL_KEYSTORE_PASSWORD</code> environment variables.</p>
</div>
<div class="paragraph">
<p>The sink connector can now modify documents using the sub-document API (many thanks to community member Didier Caron).</p>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-97">KAFKAC-97</a>: [BUGFIX] Kafka Connector needs a restart after Couchbase Server restart</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-102">KAFKAC-102</a>: [ENHANCEMENT] Enable compression by default</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-100">KAFKAC-100</a>: [ENHANCEMENT] Enable IPv6 by default, add first-class config option</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-96">KAFKAC-96</a>: [ENHANCEMENT] Support setting password via environment variable</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-98">KAFKAC-98</a>: [ENHANCEMENT] Sink: Support sub-document access (Didier Caron)</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-103">KAFKAC-103</a>: [ENHANCEMENT] Upgrade Couchbase dependencies</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-2-3-ga-2018-02-20"><a class="anchor" href="#couchbase-kafka-connector-3-2-3-ga-2018-02-20"></a>Couchbase Kafka Connector 3.2.3 GA (2018-02-20)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Keepalive is now enabled on the Couchbase Server connection.
This prevents the server from dropping idle connections, and enables dead connection detection.
Thanks to community member Patrik Nordebo (patrikn).</p>
</div>
<div class="paragraph">
<p>A new config key "couchbase.log_redaction" controls whether sensitive info in connector log messages is tagged for redaction.
Options are "NONE", "PARTIAL", and "FULL".</p>
</div>
<div class="paragraph">
<p>A new source config key "couchbase.compression" can be used to enable compression when reading from Couchbase Server 4.5 and later.
Options are "DISABLED", "ENABLED", and "FORCED".</p>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-89">KAFKAC-89</a>: [ENHANCEMENT] Enable NOOP for dead connection detection (Patrik Nordebo)</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-82">KAFKAC-82</a>: [FEATURE] Implement log redaction for Kafka Connector</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-90">KAFKAC-90</a>: [FEATURE] Source: Add config settings to enable compression</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.2.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.2.3/kafka-connect-couchbase-3.2.3.zip">kafka-connect-couchbase-3.2.3.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-2-2-ga-19-december-2017"><a class="anchor" href="#couchbase-kafka-connector-3-2-2-ga-19-december-2017"></a>Couchbase Kafka Connector 3.2.2 GA (19 December 2017)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The source connector now does a better job of reporting abnormal termination.
Thanks to community member p_mx (tiny1990).</p>
</div>
<div class="paragraph">
<p>A new config key "couchbase.stream_from" lets you tell the source connector when in Couchbase history to start streaming from.
Options are "BEGINNING", "NOW", "SAVED_OFFSET_OR_BEGINNING", and "SAVED_OFFSET_OR_NOW".</p>
</div>
<div class="paragraph">
<p>When the sink connector receives a Kafka message with a null value, it now deletes the Couchbase document whose ID matches the Kafka message key.
(Previous versions would terminate when a null value was encountered.)</p>
</div>
<div class="paragraph">
<p>You can now specify durability requirements for the sink connector&#8217;s write operations via two new config keys:
"couchbase.durability.persist_to" and "couchbase.durability.replicate_to".</p>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-84">KAFKAC-84</a>: [FEATURE] Sink: Allow setting durability requirements for Couchbase writes</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-85">KAFKAC-85</a>: [FEATURE] Sink: Support deletion</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-86">KAFKAC-86</a>: [FEATURE] Source: Restart from a given state / offset</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.2.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.2.2/kafka-connect-couchbase-3.2.2.zip">kafka-connect-couchbase-3.2.2.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-2-1-ga-8-november-2017"><a class="anchor" href="#couchbase-kafka-connector-3-2-1-ga-8-november-2017"></a>Couchbase Kafka Connector 3.2.1 GA (8 November 2017)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fixes a regression in 3.2.0 that prevented the sink connector from working.</p>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-83">KAFKAC-83</a>: [BUGFIX] Sink connector fails due to UnsupportedOperationException in JsonBinaryTranscoder.newDocument.</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-81">KAFKAC-81</a>: [ENHANCEMENT] Document how to customize source handler</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.2.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.2.1/kafka-connect-couchbase-3.2.1.zip">kafka-connect-couchbase-3.2.1.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-2-0-ga-17-october-2017"><a class="anchor" href="#couchbase-kafka-connector-3-2-0-ga-17-october-2017"></a>Couchbase Kafka Connector 3.2.0 GA (17 October 2017)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The sink connector is now officially supported.</p>
</div>
<div class="paragraph">
<p>Multiple source connector instances reading from the same Couchbase bucket can now manage their state independently.
To enable this feature, assign a unique name to each connector and set the new config property <code>compat.connector_name_in_offsets</code> to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>The source connector has a new, more flexible <code>SourceHandler</code> extension point intended to replace the <code>Converter</code> interface.
By providing a custom <code>SourceHandler</code>, a developer can filter events, route messages to a topic other than the configured default topic, and control the format of the Kafka message.</p>
</div>
<div class="paragraph">
<p>The default Kafka message format now includes <code>bucket</code> and <code>vBucketUuid</code> fields, which may be used along with the <code>partition</code> (vBucketID) and <code>bySeqno</code> fields to construct a Couchbase MutationToken.</p>
</div>
<div class="paragraph">
<p>The sink connector now allows the Couchbase document ID to come from a field of the document.
This feature is controlled by two new config properties, <code>couchbase.document.id</code> and <code>couchbase.remove.document.id</code>.</p>
</div>
<div class="paragraph">
<p>The Couchbase client libraries are upgraded to the latest versions, with performance enhancements and other improvements for Couchbase Server 5.0.</p>
</div>
<div class="paragraph">
<p>The following classes are scheduled for removal in version 4.0.0 of the connector:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.couchbase.connect.kafka.converter.Converter</code> - Deprecated in favor of <code>SourceHandler</code>.</p>
</li>
<li>
<p><code>com.couchbase.connect.kafka.converter.SchemaConverter</code> - Deprecated in favor of <code>DefaultSchemaSourceHandler</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Issues resolved in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-69">KAFKAC-69</a>: [FEATURE] Allow Source connector to split DCP stream and write into separate topics.</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-70">KAFKAC-70</a>: [FEATURE] Allow using connector name in offset storage namespace</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-77">KAFKAC-77</a>: [FEATURE] Allow setting document ID from message field.</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-78">KAFKAC-78</a>: [ENHANCEMENT] Upgrade Couchbase java-client to version 2.5.1, dcp-client to version 0.12.0</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-79">KAFKAC-79</a>: [ENHANCEMENT] Use custom doc transcoder to reduce memory copies.</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-80">KAFKAC-80</a>: [FEATURE] MutationToken Enabled in Kafka Connector to N1QL at plus.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.2.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.2.0/kafka-connect-couchbase-3.2.0.zip">kafka-connect-couchbase-3.2.0.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-1-3-ga-31-may-2017"><a class="anchor" href="#couchbase-kafka-connector-3-1-3-ga-31-may-2017"></a>Couchbase Kafka Connector 3.1.3 GA (31 May 2017)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.1.3 is maintenance release.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-71">KAFKAC-71</a>: Support for RBAC credentials on Couchbase Server 5+.
Java DCP Client updated to 0.10.0.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-connect-couchbase&lt;/artifactId&gt;
    &lt;version&gt;3.1.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.1.3/kafka-connect-couchbase-3.1.3.zip">kafka-connect-couchbase-3.1.3.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-1-2-ga-14-march-2017"><a class="anchor" href="#couchbase-kafka-connector-3-1-2-ga-14-march-2017"></a>Couchbase Kafka Connector 3.1.2 GA (14 March 2017)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.1.2 is maintenance release.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-66">KAFKAC-66</a>: On backfilling from large bucket, it is possible to get OOM when internal queue is not drained quickly enough to relay the data into Kafka.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.1.2/kafka-connect-couchbase-3.1.2.zip">kafka-connect-couchbase-3.1.2.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-1-1-ga-21-february-2017"><a class="anchor" href="#couchbase-kafka-connector-3-1-1-ga-21-february-2017"></a>Couchbase Kafka Connector 3.1.1 GA (21 February 2017)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.1.1 is maintenance release. It contains fixes for resuming DCP streams after restart.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-56">KAFKAC-56</a>: Session state might be left partially initialized, which leads to rolling back to sequence number zero (0) and starting from the beginning (duplicating events in Kafka topic).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.1.1/kafka-connect-couchbase-3.1.1.zip">kafka-connect-couchbase-3.1.1.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-1-0-ga-03-january-2017"><a class="anchor" href="#couchbase-kafka-connector-3-1-0-ga-03-january-2017"></a>Couchbase Kafka Connector 3.1.0 GA (03 January 2017)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.1.0 is GA release.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-55">KAFKAC-55</a>: Sink Connector support</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.1.0/kafka-connect-couchbase-3.1.0.zip">kafka-connect-couchbase-3.1.0.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-0-0-ga-14-december-2016"><a class="anchor" href="#couchbase-kafka-connector-3-0-0-ga-14-december-2016"></a>Couchbase Kafka Connector 3.0.0 GA (14 December 2016)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.0.0 is GA release.
It brings documentation update.</p>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.0.0/kafka-connect-couchbase-3.0.0.zip">kafka-connect-couchbase-3.0.0.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-0-0-beta-22-november-2016"><a class="anchor" href="#couchbase-kafka-connector-3-0-0-beta-22-november-2016"></a>Couchbase Kafka Connector 3.0.0 BETA (22 November 2016)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.0.0-BETA is pre-release version of the 3.0.0.
It brings documentation update, feature enhancements and bug fixes</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-52">KAFKAC-52</a>: Support for SSL connections</p>
</li>
<li>
<p>Update dependencies: dcp-client to 0.7.0, and confluent libraries up to versions shipped with 3.1.1</p>
</li>
<li>
<p>Cleanup various configuration workarounds for platform 3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.0.0-BETA/kafka-connect-couchbase-3.0.0-BETA.zip">kafka-connect-couchbase-3.0.0-BETA.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-0-0-dp4-5-november-2016"><a class="anchor" href="#couchbase-kafka-connector-3-0-0-dp4-5-november-2016"></a>Couchbase Kafka Connector 3.0.0 DP4 (5 November 2016)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.0.0-DP4 is the fourth developer preview of the 3.0.x series.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-54">KAFKAC-54</a>: Create example of using in Kafka Stream to process events from Couchbase</p>
</li>
<li>
<p>Rename internal classes, and make configuration more consistent with other connectors (e.g. instead of timeout_ms, use timeout.ms)</p>
</li>
<li>
<p>Allow to override internal convertor into SourceRecord, and allow to inject Filter class to skip events before writing into Kafka</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.0.0-DP4/kafka-connect-couchbase-3.0.0-DP4.zip">kafka-connect-couchbase-3.0.0-DP4.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-0-0-dp3-20-october-2016"><a class="anchor" href="#couchbase-kafka-connector-3-0-0-dp3-20-october-2016"></a>Couchbase Kafka Connector 3.0.0 DP3 (20 October 2016)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.0.0-DP3 is the third developer preview of the 3.0.x series.
It implements new features and also includes bug fixes to previous release.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-50">KAFKAC-50</a>: Allow to buffer DCP snapshots for consistent writes.</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-51">KAFKAC-51</a>: Specify key for SourceRecord.
Allows to use multiple Kafka partitions.</p>
</li>
<li>
<p><a href="https://issues.couchbase.com/browse/KAFKAC-53">KAFKAC-53</a>: Node-aware distribution of partitions for Tasks.
Reduces amount of resources allocated on the server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.0.0-DP3/kafka-connect-couchbase-3.0.0-DP3.zip">kafka-connect-couchbase-3.0.0-DP3.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-0-0-dp2-24-september-2016"><a class="anchor" href="#couchbase-kafka-connector-3-0-0-dp2-24-september-2016"></a>Couchbase Kafka Connector 3.0.0 DP2 (24 September 2016)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.0.0-DP2 is the second developer preview of the 3.0.x series.
It improves configuration.
And now can maintain replication state, which allow to resume transmission.</p>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.0.0-DP2/kafka-connect-couchbase-3.0.0-DP2.zip">kafka-connect-couchbase-3.0.0-DP2.zip</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="couchbase-kafka-connector-3-0-0-dp1-6-september-2016"><a class="anchor" href="#couchbase-kafka-connector-3-0-0-dp1-6-september-2016"></a>Couchbase Kafka Connector 3.0.0 DP1 (6 September 2016)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Version 3.0.0-DP1 is the first developer preview of the 3.0.x series.</p>
</div>
<div class="paragraph">
<p><a href="http://packages.couchbase.com/clients/kafka/3.0.0-DP1/kafka-connect-couchbase-3.0.0-DP1.zip">kafka-connect-couchbase-3.0.0-DP1.zip</a></p>
</div>
<div class="paragraph">
<p><strong>Parent topic:</strong> <a href="index.html" class="page">Kafka Connector</a></p>
</div>
<div class="paragraph">
<p><strong>Previous topic:</strong> <a href="streams-sample.html" class="page">Couchbase Sample with Kafka Streams</a></p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/+CouchbaseServer" class="icon">
              <svg width="50px" height="50px" viewBox="36.72 225.573 542.326 343.67"><path d="m209.02 363.05v68.732h93.212c-15.065 44.252-37.662 68.732-93.212 68.732-56.492 0-100.74-46.135-100.74-102.63s44.252-102.63 100.74-102.63c30.129 0 48.96 10.357 66.849 25.422 14.123-14.123 13.182-16.006 48.96-49.902-31.071-28.246-71.557-45.194-115.81-45.194-95.096-0.94-172.3 76.266-172.3 171.36s77.206 172.3 172.3 172.3c142.17 0 177.01-124.28 165.71-206.2-33.896-1e-3 -165.71-1e-3 -165.71-1e-3zm310.71 3.766v-59.317h-42.369v59.317h-61.2v42.369h61.2v61.2h42.369v-61.2h59.317v-42.369h-59.317z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2018 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
