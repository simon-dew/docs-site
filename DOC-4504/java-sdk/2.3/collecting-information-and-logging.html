<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Collecting Information and Logging in the Java SDK with Couchbase Server | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4504/java-sdk/2.7/collecting-information-and-logging.html">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="java-sdk">
    <meta name="dcterms.identifier" content="2.3">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4504">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../server/6.0/introduction/intro.html">Server</a></li>
                  <li><a href="../../server/6.0/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../server/6.0/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../server/6.0/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../server/6.0/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="../../operator/1.2/overview.html">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="../../couchbase-lite/2.5/index.html">Lite</a></li>
                  <li><a href="../../sync-gateway/2.5/index.html">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../server/6.0/sdk/overview.html">SDKs</a></li>
                  <li><a href="../../c-sdk/2.10/start-using-sdk.html">C</a></li>
                  <li><a href="../../dotnet-sdk/2.7/start-using-sdk.html">.NET</a></li>
                  <li><a href="../../go-sdk/1.5/start-using-sdk.html">Go</a></li>
                  <li><a href="../../java-sdk/2.7/start-using-sdk.html">Java</a></li>
                  <li><a href="../../nodejs-sdk/2.6/start-using-sdk.html">Node.js</a></li>
                  <li><a href="../../php-sdk/2.6/start-using-sdk.html">PHP</a></li>
                  <li><a href="../../python-sdk/2.5/start-using-sdk.html">Python</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../server/6.0/connectors/intro.html">Connectors</a></li>
                  <li><a href="../../elasticsearch-connector/4.0/index.html">Elasticsearch</a></li>
                  <li><a href="../../server/6.0/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="../../kafka-connector/3.4/index.html">Kafka</a></li>
                  <li><a href="../../spark-connector/2.2/index.html">Spark</a></li>
                  <li><a href="../../talend-connector/index.html">Talend</a></li>
                  <li><a href="../../server/6.0/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="start-using-sdk.html"><span class="title">Java SDK</span> <span class="version">2.3</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../2.7/collecting-information-and-logging.html">Java SDK 2.7</a></li>
                  <li><a class="navbar-item" href="../2.6/collecting-information-and-logging.html">Java SDK 2.6</a></li>
                  <li><a class="navbar-item" href="../2.5/collecting-information-and-logging.html">Java SDK 2.5</a></li>
                  <li><a class="navbar-item" href="../2.4/collecting-information-and-logging.html">Java SDK 2.4</a></li>
                  <li><a class="navbar-item" href="../2.2/java-intro.html">Java SDK 2.2</a></li>
                  <li><a class="navbar-item" href="../2.1/java-intro.html">Java SDK 2.1</a></li>
                </ul>
                <ul class="related">
                  <li><a class="navbar-item" href="../../c-sdk/2.10/collecting-information-and-logging.html">C SDK</a></li>
                  <li><a class="navbar-item" href="../../dotnet-sdk/2.7/collecting-information-and-logging.html">.NET SDK</a></li>
                  <li><a class="navbar-item" href="../../go-sdk/1.5/collecting-information-and-logging.html">Go SDK</a></li>
                  <li><a class="navbar-item" href="../../nodejs-sdk/2.6/collecting-information-and-logging.html">Node.js SDK</a></li>
                  <li><a class="navbar-item" href="../../php-sdk/2.6/collecting-information-and-logging.html">PHP SDK</a></li>
                  <li><a class="navbar-item" href="../../python-sdk/2.5/collecting-information-and-logging.html">Python SDK</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
<div class="nav-menu">
<ul class="nav-list">
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Hello World!</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="start-using-sdk.html">Start Using the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="sample-application.html">Sample Application</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="webui-cli-access.html">Browser and CLI Access</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Working with Data</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="core-operations.html">Core Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="document-operations.html">Document Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="subdocument-operations.html">Sub-Document Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-query.html">Querying with N1QL</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="n1ql-queries-with-sdk.html">N1QL from the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="full-text-search-overview.html">Full Text Search</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="full-text-searching-with-sdk.html">Searching from the SDK</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="view-queries-with-sdk.html">MapReduce Views</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="async-programming.html">Asynchronous Programming</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="batching-operations.html">Batching Operations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="durability.html">Durability</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="concurrent-mutations-cluster.html">Concurrent Document Mutations</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="nonjson.html">Non-JSON Documents</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Deployment Environments</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-connections.html">Managing Connections</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="managing-clusters.html">Managing Clusters</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="compatibility-versions-features.html">Compatibility</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Settings, Error Handling &amp; Diagnostics</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="client-settings.html">Client Settings</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="handling-error-conditions.html">Handling Errors</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="failure-considerations.html">Failure Considerations</a>
    </span>
  </li>
  <li class="nav-item is-current-page is-active" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="collecting-information-and-logging.html">Collecting Information</a>
    </span>
  </li>
</ul>
  </li>
  <li class="nav-item is-active" data-depth="0">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <span class="nav-text">Project Docs</span>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="relnotes-java-sdk.html#version-2-3-7-19-january-2017">Release Notes</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="compatibility-versions-features.html">Compatibility</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <a class="nav-link" href="sdk-licenses.html">Licenses</a>
    </span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-line">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="get-involved.html">Get involved</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-line">
    <a class="nav-link" href="https://docs.couchbase.com/home/contribute/index.html">Improve the Docs</a>
    </span>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
</div>
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-banner">
    <p>A newer version of this documentation is available.</p>
    <a class="btn" href="../2.7/collecting-information-and-logging.html">View Latest</a>
  </div>
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="start-using-sdk.html">Java SDK</a></li>
    <li class="crumb">Settings, Error Handling &amp; Diagnostics</li>
    <li class="crumb"><a href="collecting-information-and-logging.html">Collecting Information</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-java/edit/release/2.3/modules/ROOT/pages/collecting-information-and-logging.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">Collecting Information and Logging in the Java SDK with Couchbase Server</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The Java SDK logs events and also provides an event bus that transmits information about the behavior of your database system, including system and metric events.
It has no hard dependency on a specific logger implementation, but you should add one you are comfortable with.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging"><a class="anchor" href="#logging"></a>Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Couchbase Java SDK has no hard dependency on a specific logger implementation.
It tries to find a logger on the class path and uses that logger if it is supported by the SDK.
If no logger implementation is found, the standard JDK logger is used.</p>
</div>
<div class="paragraph">
<p>The following loggers are supported (and tried in this order):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SLF4J</p>
</li>
<li>
<p>Log4J</p>
</li>
<li>
<p>JDK Logger (java.util.logging)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Configuring SLF4J</strong></p>
</div>
<div class="paragraph">
<p>To enable SLF4J, put it on the class path, as well as one of the support logger implementations (like logback).
If you want to use logback and include logback-classic, it will be pulled in automatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
  &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
  &lt;version&gt;1.1.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the log level for logback is set to DEBUG, but with the addition of a logback configuration this can be configured (for example, as a <em class="path">logback.xml</em> in the resources folder):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;configuration&gt;
  &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
    &lt;/encoder&gt;
  &lt;/appender&gt;

  &lt;root level="info"&gt;
    &lt;appender-ref ref="STDOUT" /&gt;
  &lt;/root&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consult the SLF4J documentation for advanced configuration.</p>
</div>
<div class="paragraph">
<p><strong>Configuring Log4J</strong></p>
</div>
<div class="paragraph">
<p>Log4J is also automatically found when put on the classpath:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j&lt;/artifactId&gt;
  &lt;version&gt;1.2.17&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no configuration is applied, the following message appears:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>log4j:WARN No appenders could be found for logger (com.couchbase.client.core.logging.CouchbaseLoggerFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.</pre>
</div>
</div>
<div class="paragraph">
<p>This <em class="path">log4j.xml</em> sets it to INFO level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;
&lt;log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'&gt;
  &lt;appender name="CA" class="org.apache.log4j.ConsoleAppender"&gt;
    &lt;layout class="org.apache.log4j.PatternLayout"&gt;
      &lt;param name="ConversionPattern" value="%-4r [%t] %-5p %c %x - %m%n" /&gt;
    &lt;/layout&gt;
  &lt;/appender&gt;
  &lt;root&gt;
    &lt;level value="info" /&gt;
    &lt;appender-ref ref="CA" /&gt;
  &lt;/root&gt;
&lt;/log4j:configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can provide a <em class="path">log4j.properties</em> file with similar settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>log4j.rootLogger=INFO, CA
log4j.appender.CA=org.apache.log4j.ConsoleAppender
log4j.appender.CA.layout=org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n</pre>
</div>
</div>
<div class="paragraph">
<p>Consult the Log4J documentation for more information and advanced configuration options.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-jdk-logger"><a class="anchor" href="#configuring-the-jdk-logger"></a>Configuring the JDK Logger</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If no logging library is found on the class path, the JDK logger (also known as JUL from <code>java.util.logging</code>) is used as a fallback.</p>
</div>
<div class="paragraph">
<p>By default it logs INFO level and above.
If you want to set it to DEBUG (or the JUL equivalent: Fine) you can do it like this programmatically before initializing the <code>CouchbaseCluster</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Logger logger = Logger.getLogger("com.couchbase.client");
logger.setLevel(Level.FINE);
for(Handler h : logger.getParent().getHandlers()) {
	if(h instanceof ConsoleHandler){
    	h.setLevel(Level.FINE);
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should not use JUL in production because SLF4J and Log4J provide better configuration options and performance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manual-overriding"><a class="anchor" href="#manual-overriding"></a>Manual Overriding</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If different loggers are on the class path and you want to force a different one (for example Log4J instead of SLF4J) you can set the default one directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CouchbaseLoggerFactory.setDefaultFactory(new Log4JLoggerFactory());</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are a few loggers you may have particular interest in with Couchbase.
These are available at the uncommitted interface level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"># the following forces logging of BucketManager's N1QL index watcher steps
log4j.logger.indexWatch=DEBUG
# the following avoid seeing Node connect/disconnect logs
log4j.logger.com.couchbase.client.core.node.Node=OFF</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-event-bus"><a class="anchor" href="#the-event-bus"></a>The Event Bus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Log files are neither fun to wade through, nor do they have any kind of real-time aspect.
To make them usable, normally their content is piped into systems such as <a href="http://graphite.wikidot.com" target="_blank" rel="noopener">Graphite</a> or <a href="https://www.elastic.co/products/logstash" target="_blank" rel="noopener">Logstash</a>.
Since most setups interleave all different kinds of log messages, it makes it very hard to see whats going on, let alone perform post-disaster analysis.</p>
</div>
<div class="paragraph">
<p>To make the situation better and ultimately improve supportability, the Java SDK provides you with the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An event bus that allows you to receive system and metric events as they are created</p>
</li>
<li>
<p>System and metric events generated by the SDK that allow near real-time insight and consumability</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It may not be visible instantly that this provides a huge leap forward in detecting and reacting to different kinds of situations.
You can subscribe to the event bus, receive and react to events as they are happening; not when someone parses the logs, sends them into another system where an alarm is triggered and eventually a sysadmin will check whats going on.
The time delta between an event happening and reacting to it can be massively decreased.</p>
</div>
<div class="paragraph">
<p>The event bus provides the foundational piece of code through which the SDK publishes events and the user receives them.
Because <code>Observable</code> semantics fit really well here, it is exposed as such through the environment.</p>
</div>
<div class="paragraph">
<p>The following code subscribes to the event bus and prints out all events that are published on it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Create the Environment
CouchbaseEnvironment env = DefaultCouchbaseEnvironment.create();

// Subscribe to the Event Bus and print out all events
env.eventBus().get().subscribe(System.out::println);

// Connect to the cluster, open the bucket and then disconnect to generate events.
Cluster cluster = CouchbaseCluster.create(env, "192.168.56.101");
Bucket bucket = cluster.openBucket("travel-sample");
cluster.disconnect();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Connected to a three-node cluster, this will print the following events (in your IDE probably interleaved with the regular logs):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NodeConnectedEvent{host=vnode1/192.168.56.101}
ConfigUpdatedEvent{bucketNames=[travel-sample],
   clusterNodes=[vnode1/192.168.56.101, vnode2/192.168.56.102, vnode3/192.168.56.103]}
BucketOpenedEvent{name='travel-sample'}
NodeConnectedEvent{host=vnode3/192.168.56.103}
NodeConnectedEvent{host=vnode2/192.168.56.102}
ConfigUpdatedEvent{bucketNames=[], clusterNodes=[]}
BucketClosedEvent{name='travel-sample'}
NodeDisconnectedEvent{host=vnode3/192.168.56.103}
NodeDisconnectedEvent{host=vnode2/192.168.56.102}</pre>
</div>
</div>
<div class="paragraph">
<p>We recommend filtering on the specific events you are interested in, since most of the time only a subset of the published ones will be of use to you.
You can use the <code>Observable#filter</code> method to help with that.
Of course you can subscribe as often as you want if you need to move different events to different downstream systems.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Only care about system events (no metrics)
env.eventBus().get()
    .filter(ev -&gt; ev.type().equals(EventType.SYSTEM))
    .subscribe(System.out::println);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="consumers"><a class="anchor" href="#consumers"></a>Consumers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Printing events is not that fancy, so the SDK comes bundled with a few consumers (with the plan to add more in the future).
They are sample implementations for common use cases and also provide inspiration to write your own.
The only rule to keep in mind is: <strong>do not block in your subscriber without moving it over to a different scheduler.</strong> This is true for RxJava in general, but if you add a subscriber and then use a blocking API to push the data into a remote system, you can probably hold up the whole thing.
So either use non-blocking code all the way down or make sure to move it onto a different scheduler (for example through<code>.observeOn(Schedulers.io())</code>).</p>
</div>
<div class="paragraph">
<p>The SDK ships with the following consumers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>LoggingConsumer</strong>: all events will be logged to a file on the configured log level.
In addition, if not configured otherwise all events will be turned into JSON so it is both human and machine readable.</p>
</li>
<li>
<p><strong>BucketConsumer</strong>: all events will be written into a Couchbase Bucket as JSON documents.
You can use this to demo the event bus or write to a bucket that collects actual log data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using them is easy, just subscribe with the consumer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Log system events
env.eventBus().get()
    .filter(ev -&gt; ev.type().equals(EventType.SYSTEM))
    .subscribe(LoggingConsumer.create());

// Store metric events in a couchbase bucket
env.eventBus().get()
    .filter(ev -&gt; ev.type().equals(EventType.METRIC))
    .subscribe(BucketConsumer.create(metricsBucket));</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are planning on more out-of-the-box consumers (mainly based on user feedback and requests), especially one that exposes the data over MXBeans.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="default-metric-logging-consumer"><a class="anchor" href="#default-metric-logging-consumer"></a>Default metric logging consumer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If we wouldn’t enable them by default in some way, the whole thing would entirely miss the point.
System events are logged anyways, but metric events would never be visible.</p>
</div>
<div class="paragraph">
<p>In order to mitigate that, a logging consumer which listens on the metric events and prints them to the configured logger every hour is run by default.
If you want to tune the intervals, see the next sections on configuration.</p>
</div>
<div class="paragraph">
<p>The logger itself can be tuned (or disabled) on the environment.
The following configuration changes the compact JSON format to something more verbose, but decreases the default log level (INFO) to debug:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .defaultMetricsLoggingConsumer(true, CouchbaseLogLevel.DEBUG, LoggingConsumer.OutputFormat.JSON_PRETTY)
    .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to disable it completely, set the first argument to false (and just set any logging level you want, it won’t be used:)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .defaultMetricsLoggingConsumer(false, CouchbaseLogLevel.INFO)
    .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This default logger is really meant to have something reusable in the application logs.
If you are planning to do something more fancy with metric information anyways, you can disable the default one and then attach your custom consumers (or one that comes with the SDK).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configurations-and-defaults"><a class="anchor" href="#configurations-and-defaults"></a>Configurations and defaults</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, system events will be published as they happen and metric events are published every hour (to not flood the logs in production systems).</p>
</div>
<div class="paragraph">
<p>This section describes the configuration options available, the next sections dig into the actual events and the data you can gather from them.</p>
</div>
<div class="paragraph">
<p>If you need a more recent insight into metric events you can tune them through the environment.
Currently you can tune the settings for the following metric collectors (which emit the events eventually):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RuntimeMetricsCollector</p>
</li>
<li>
<p>NetworkLatencyMetricsCollector</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Configuring the RuntimeMetricsCollector</strong></p>
</div>
<div class="paragraph">
<p>The <code>RuntimeMetricsCollector</code> collects metrics from the JVM runtime and can be configured on the <code>CouchbaseEnvironment</code>.
By default it will emit an event every hour, but you can tune the emit frequency and its timeout very easily.</p>
</div>
<div class="paragraph">
<p>The following code sets it from once per hour to once per minute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .runtimeMetricsCollectorConfig(DefaultMetricsCollectorConfig.create(1, TimeUnit.MINUTES))
    .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also easily disable collection and emission completely:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .runtimeMetricsCollectorConfig(DefaultMetricsCollectorConfig.disabled())
    .build();</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Configuring the NetworkLatencyMetricsCollector</strong></p>
</div>
<div class="paragraph">
<p>The <code>NetworkLatencyMetricsCollector</code> collects operation timings on a very granular basis, so there is a little more you can configure in addition to the emit interval.
If you just want to do that, it is identical to the <code>RuntimeMetricsCollector</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .networkLatencyMetricsCollectorConfig(DefaultLatencyMetricsCollectorConfig.create(1, TimeUnit.MINUTES))
    .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>disabled</code> method for easy disabling of the whole collection process.
In addition to the emit interval, you can tune parameters such as the target percentiles and the target unit.
For this the same builder API is available like on the environment itself.
So if you want to use milliseconds instead of microseconds (the default) and you only care about the 99 percentile (instead of 50.0, 90.0, 95.0, 99.0 and 99.9 as the default), you can configure it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .networkLatencyMetricsCollectorConfig(DefaultLatencyMetricsCollectorConfig.builder()
        .targetUnit(TimeUnit.MILLISECONDS)
        .targetPercentiles(new Double[] { 99.0 })
        .build())
    .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The great thing about this approach is that because the data is aggregated in a histogram, you can pick whatever percentiles and target unit you need for your analysis.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="system-events"><a class="anchor" href="#system-events"></a>System events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System events are emitted as they happen inside the SDK.
They are intended to provide insight into what the "system" is doing.
If you are only interested in system events, you can filter them by their type: <code>EventType.SYSTEM</code>.
Right now, the following events can be emitted, depending on the current state of the client:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Contains</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketOpenedEvent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A bucket has been opened.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The bucket name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BucketClosedEvent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A bucket has been closed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The bucket name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NodeConnectedEvent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A node has been connected.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The InetAddr of the node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NodeDisconnectedEvent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A node has been disconnected.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The InetAddr of the node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ConfigUpdatedEvent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A new configuration has been applied on the client.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All open buckets and all known nodes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Since the bucket events are most of the time triggered by the application itself, they are mainly used for debugging.
Especially the<code>NodeDisconnectedEvent</code> can be helpful to send over to a monitoring system, but keep in mind that even during a planned rebalance out at some point this event will be raised once the node is gone.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metric-events"><a class="anchor" href="#metric-events"></a>Metric events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Metric events (in contrast to system events) are emitted at a fixed frequency that can be tuned by the user.
Right now these metric events are emitted:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RuntimeMetricsEvent</p>
</li>
<li>
<p>NetworkLatencyMetricsEvent</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The RuntimeMetricsEvent</strong></p>
</div>
<div class="paragraph">
<p>Run-time metrics are designed to capture the run-time state at the time of emission.
The metric contains information about GC, Memory and Threads which it collects through the systems MBeans.
It makes use of the internal <code>Diagnostics</code> class which collects the information in a transparent way and then creates the <code>RuntimeMetricsEvent</code> for you to consume.</p>
</div>
<div class="paragraph">
<p>Note that if the collection is disabled on the environment, there is no run-time overhead whatsoever (since the collection is triggered on emission every interval).</p>
</div>
<div class="paragraph">
<p>The following output is from the <code>LoggingConsumer</code>, which turns the message itself into a JSON object so it is nicely formatted.
Of course, you can access all of that through the event object itself.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "heap.used" : {
    "init" : 268435456,
    "used" : 17541192,
    "committed" : 257425408,
    "max" : 3817865216
  },
  "gc.ps marksweep.collectionTime" : 0,
  "gc.ps scavenge.collectionTime" : 23,
  "gc.ps scavenge.collectionCount" : 3,
  "thread.count" : 31,
  "offHeap.used" : {
    "init" : 2555904,
    "used" : 29304560,
    "committed" : 29949952,
    "max" : -1
  },
  "gc.ps marksweep.collectionCount" : 0,
  "heap.pendingFinalize" : 0,
  "thread.peakCount" : 31,
  "event" : {
    "name" : "RuntimeMetrics",
    "type" : "METRIC"
  },
  "thread.startedCount" : 32
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gathering this information over a longer period of time gives you insight in system trends even if you don’t have full blown monitoring on every application server.</p>
</div>
<div class="paragraph">
<p><strong>The NetworkLatencyMetricsEvent</strong></p>
</div>
<div class="paragraph">
<p>The NetworkLatencyMetricsEvent is the most involved event of all when it comes to creation.
Because latency metrics need to be gathered on every request/response and then aggregated on emission, the SDK uses some excellent libraries under the covers (<a href="http://hdrhistogram.github.io/HdrHistogram/" target="_blank" rel="noopener">HdrHistogram</a> and the corresponding <a href="http://latencyutils.github.io/LatencyUtils/" target="_blank" rel="noopener">LatencyUtils</a>) and repackages them so you don’t run into classpath issues.</p>
</div>
<div class="paragraph">
<p>The I/O event loops will track timestamps after encoding and before decoding and then send them into individual histograms located in a central collector.
Note that the collected times still include time in the netty event loops, the JVM and the operating system.
Real network time can only be collected by external parties through tools like <a href="http://www.tcpdump.org/" target="_blank" rel="noopener">tcpdump</a>.
At emission time, the data is taken, aggregated and the event is published onto the event bus.
Note that because the way the underlying histograms work, the data is cleaned on every emission, meaning that if you do 10 second interval emits you exclusively get the data for the last 10 second interval.</p>
</div>
<div class="paragraph">
<p>To provide as much insight as possible into what’s going on in the layer below, the data is collected an formatted in a tree-like structure.
The format always is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Node &gt; Service Type &gt; Request Type &gt; Response &gt; Status</pre>
</div>
</div>
<div class="paragraph">
<p>The components in this format are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Node:</strong> The host name of the target server in the cluster.</p>
</li>
<li>
<p><strong>Service Type:</strong> The service on each node.
Right now there are <code>BINARY</code> (key/value), <code>VIEW</code>, <code>QUERY</code> (N1QL), <code>CONFIG</code> (internal 8091 communication) and <code>DCP</code>.</p>
</li>
<li>
<p><strong>Request Type:</strong> The type of request you are sending, for example <code>GetRequest</code>, or <code>UpsertRequest</code>.</p>
</li>
<li>
<p><strong>Response Status:</strong> The raw response status the server returned, for example <code>SUCCESS</code>, <code>EXISTS</code> or many more types.
You can find all of them on the <code>com.couchbase.client.core.message.ResponseStatus</code> enum.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because metrics are collected at a very low level, some mappings might not feel familiar to you, because the java client maps them into proper exceptions and so forth.
Also, you’ll see requests in the dump which you didn’t command but that are part of the underlying communication, for example a <code>GetBucketConfigurationRequest</code> and so forth.</p>
</div>
<div class="paragraph">
<p>So taking our new knowledge to the test, here is some output from the metrics, collected over a 30 second interval.
What can we gather from it?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "10.142.111.102": {
    "BINARY": {
      "GetRequest": {
        "NOT_EXISTS": {
          "metrics": {
            "percentiles": {
              "50.0": 124,
              "90.0": 199,
              "95.0": 234,
              "99.0": 489,
              "99.9": 3784
            },
            "min": 69,
            "max": 175112,
            "count": 74864,
            "timeUnit": "MICROSECONDS"
          }
        }
      },
      "UpsertRequest": {
        "SUCCESS": {
          "metrics": {
            "percentiles": {
              "50.0": 1269,
              "90.0": 1835,
              "95.0": 2670,
              "99.0": 6160,
              "99.9": 6389
            },
            "min": 561,
            "max": 6389,
            "count": 145,
            "timeUnit": "MICROSECONDS"
          }
        }
      },
      "GetBucketConfigRequest": {
        "SUCCESS": {
          "metrics": {
            "percentiles": {
              "50.0": 741,
              "90.0": 741,
              "95.0": 741,
              "99.0": 741,
              "99.9": 741
            },
            "min": 737,
            "max": 741,
            "count": 1,
            "timeUnit": "MICROSECONDS"
          }
        }
      }
    }
  },
  "10.142.111.101": {
    "BINARY": {
      "GetRequest": {
        "NOT_EXISTS": {
          "metrics": {
            "percentiles": {
              "50.0": 123,
              "90.0": 198,
              "95.0": 236,
              "99.0": 6060,
              "99.9": 40460
            },
            "min": 69,
            "max": 1520430,
            "count": 73996,
            "timeUnit": "MICROSECONDS"
          }
        }
      },
      "GetBucketConfigRequest": {
        "SUCCESS": {
          "metrics": {
            "percentiles": {
              "50.0": 366,
              "90.0": 4489,
              "95.0": 4489,
              "99.0": 4489,
              "99.9": 4489
            },
            "min": 364,
            "max": 4489,
            "count": 2,
            "timeUnit": "MICROSECONDS"
          }
        }
      }
    }
  },
  "event": {
    "name": "NetworkLatencyMetrics",
    "type": "METRIC"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you take a look at the numbers, here is what you can infer from these metrics:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Our get requests are evenly distributed over the 2 nodes, but they are all not finding the document (<code>NOT_EXISTS</code>).
In the Java API, this means returning null on a <code>get</code> operation.</p>
</li>
<li>
<p>We have a very high get to mutation ratio.
In this interval we had over 148900 get requests, but only 145 upsert requests.</p>
</li>
<li>
<p>Get requests on <code>10.142.111.101</code> have significant outliers (check out the max), while on <code>10.142.111.102</code> they don’t.
At this point we might want to start investigate the server side logs and stats and see what&#8217;s going on this specific node.</p>
</li>
<li>
<p>The Upsert operations did all go through well and don’t have latency outliers, but they all seem to be against one node and not two.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Looking at the sample code that produces the metrics, you can see that items 2 and 4 in the previous list are explainable while items 1 and 3 were discovered based on the metrics (and can point to potential issues).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">while(true) {
    for (int i = 0; i &lt; 1024; i++) {
        metricsBucket.get("key" +i); // this doc has never been created

        // once every loop we create the document, but always with the same id
        // so it goes to the same node, naturally.
        if (i == 500) {
            metricsBucket.upsert(JsonDocument.create("mydoc"+i));
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/+CouchbaseServer" class="icon">
              <svg width="50px" height="50px" viewBox="36.72 225.573 542.326 343.67"><path d="m209.02 363.05v68.732h93.212c-15.065 44.252-37.662 68.732-93.212 68.732-56.492 0-100.74-46.135-100.74-102.63s44.252-102.63 100.74-102.63c30.129 0 48.96 10.357 66.849 25.422 14.123-14.123 13.182-16.006 48.96-49.902-31.071-28.246-71.557-45.194-115.81-45.194-95.096-0.94-172.3 76.266-172.3 171.36s77.206 172.3 172.3 172.3c142.17 0 177.01-124.28 165.71-206.2-33.896-1e-3 -165.71-1e-3 -165.71-1e-3zm310.71 3.766v-59.317h-42.369v59.317h-61.2v42.369h61.2v61.2h42.369v-61.2h59.317v-42.369h-59.317z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2018 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
