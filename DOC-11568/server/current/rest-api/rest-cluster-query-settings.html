<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Cluster Query Settings API | Couchbase Docs (Preview)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11568/server/current/rest-api/rest-cluster-query-settings.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/rest-api/rest-cluster-query-settings.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11568/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11568/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/rest-api/pages/rest-cluster-query-settings.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="rest-intro.html">REST API Reference</a></li>
<li class="crumb"><a href="../n1ql/n1ql-rest-api/index.html">Query Service API</a></li>
<li class="crumb"><a href="rest-cluster-query-settings.html">Query Settings API</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Cluster Query Settings API</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Query Settings REST API is provided by the Query service.
This API enables you to view or specify cluster-level Query settings.</p>
</div>
<div class="paragraph">
<p>The API schemes and host URLs are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="http://node:8091/" class="bare">http://node:8091/</a></code></p>
</li>
<li>
<p><code><a href="https://node:18091/" class="bare">https://node:18091/</a></code> (for secure access)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <code>node</code> is the host name or IP address of a node running the Query service.</p>
</div>
<div class="sect2">
<h3 id="version-information"><a class="anchor" href="#version-information"></a>Version information</h3>
<div class="paragraph">
<p><em>Version</em> : 7.2</p>
</div>
</div>
<div class="sect2">
<h3 id="consumes"><a class="anchor" href="#consumes"></a>Consumes</h3>
<div class="ulist">
<ul>
<li>
<p><code>application/x-www-form-urlencoded</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="produces"><a class="anchor" href="#produces"></a>Produces</h3>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_paths"><a class="anchor" href="#_paths"></a>Paths</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Table of Contents</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_get_settings">Retrieve Cluster-Level Query Settings</a></p>
</li>
<li>
<p><a href="#_post_settings">Update Cluster-Level Query Settings</a></p>
</li>
<li>
<p><a href="#_get_access">Retrieve CURL Access List</a></p>
</li>
<li>
<p><a href="#_post_access">Update CURL Access List</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_get_settings"><a class="anchor" href="#_get_settings"></a>Retrieve Cluster-Level Query Settings</h3>
<div class="literalblock">
<div class="content">
<pre>GET /settings/querySettings</pre>
</div>
</div>
<div class="sect3">
<h4 id="description"><a class="anchor" href="#description"></a>Description</h4>
<div class="paragraph">
<p>Returns all cluster-level query settings, including the CURL access settings.</p>
</div>
</div>
<div class="sect3">
<h4 id="responses"><a class="anchor" href="#responses"></a>Responses</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An object giving cluster-level query settings.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_settings">Settings</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="security"><a class="anchor" href="#security"></a>Security</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>basic</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong><a href="#_default">Default</a></strong></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="example-http-request"><a class="anchor" href="#example-http-request"></a>Example HTTP request</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The example below gets the current cluster-level query settings.</p>
</div>
<div class="listingblock">
<div class="title">Curl request</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl -v -u Administrator:password \
http://localhost:8091/settings/querySettings</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-http-response"><a class="anchor" href="#example-http-response"></a>Example HTTP response</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Response 200</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "queryTmpSpaceDir": "/opt/couchbase/var/lib/couchbase/tmp",
  "queryTmpSpaceSize": 5120,
  "queryPipelineBatch": 16,
  "queryPipelineCap": 512,
  "queryScanCap": 512,
  "queryTimeout": 0,
  "queryPreparedLimit": 16384,
  "queryCompletedLimit": 4000,
  "queryCompletedThreshold": 1000,
  "queryLogLevel": "info",
  "queryMaxParallelism": 1,
  "queryN1QLFeatCtrl": 76,
  "queryTxTimeout": "0ms",
  "queryMemoryQuota": 0,
  "queryUseCBO": true,
  "queryCleanupClientAttempts": true,
  "queryCleanupLostAttempts": true,
  "queryCleanupWindow": "60s",
  "queryNumAtrs": 1024,
  "queryCurlWhitelist": {
    "all_access": false,
    "allowed_urls": [],
    "disallowed_urls": []
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_post_settings"><a class="anchor" href="#_post_settings"></a>Update Cluster-Level Query Settings</h3>
<div class="literalblock">
<div class="content">
<pre>POST /settings/querySettings</pre>
</div>
</div>
<div class="sect3">
<h4 id="description-2"><a class="anchor" href="#description-2"></a>Description</h4>
<div class="paragraph">
<p>Updates cluster-level query settings, including the CURL access settings.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Settings</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An object specifying cluster-level query settings.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_settings">Settings</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="responses-2"><a class="anchor" href="#responses-2"></a>Responses</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An object giving cluster-level query settings, including the latest changes.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_settings">Settings</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>400</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Returns an error message if a parameter or value is incorrect.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="security-2"><a class="anchor" href="#security-2"></a>Security</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>basic</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong><a href="#_default">Default</a></strong></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="example-http-request-2"><a class="anchor" href="#example-http-request-2"></a>Example HTTP request</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The example below changes the temp file directory to <code>/tmp</code> and the temp file size to 2048 MB.</p>
</div>
<div class="listingblock">
<div class="title">Curl request</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh" data-source-url="file:///Users/simondew/GitHub/simon-dew/cb-swagger/docs/modules/rest-api/examples/query-settings-post-settings.sh#L4-L7">curl -v -X POST -u Administrator:password \
http://localhost:8091/settings/querySettings \
-d 'queryTmpSpaceDir=/tmp' \
-d 'queryTmpSpaceSize=2048'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-http-response-2"><a class="anchor" href="#example-http-response-2"></a>Example HTTP response</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Response 200</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/simondew/GitHub/simon-dew/cb-swagger/docs/modules/rest-api/examples/query-settings-post-settings.jsonc">{
  "queryTmpSpaceDir": "/tmp",
  "queryTmpSpaceSize": 2048,
  "queryPipelineBatch": 16,
  "queryPipelineCap": 512,
  "queryScanCap": 512,
  "queryTimeout": 0,
  "queryPreparedLimit": 16384,
  "queryCompletedLimit": 4000,
  "queryCompletedThreshold": 1000,
  "queryLogLevel": "info",
  "queryMaxParallelism": 1,
  "queryN1QLFeatCtrl": 76,
  "queryTxTimeout": "0ms",
  "queryMemoryQuota": 0,
  "queryUseCBO": true,
  "queryCleanupClientAttempts": true,
  "queryCleanupLostAttempts": true,
  "queryCleanupWindow": "60s",
  "queryNumAtrs": 1024,
  "queryCurlWhitelist": {
    "all_access": false,
    "allowed_urls": [],
    "disallowed_urls": []
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_get_access"><a class="anchor" href="#_get_access"></a>Retrieve CURL Access List</h3>
<div class="literalblock">
<div class="content">
<pre>GET /settings/querySettings/curlWhitelist</pre>
</div>
</div>
<div class="sect3">
<h4 id="description-3"><a class="anchor" href="#description-3"></a>Description</h4>
<div class="paragraph">
<p>Returns the cluster-level CURL access settings only.</p>
</div>
</div>
<div class="sect3">
<h4 id="responses-3"><a class="anchor" href="#responses-3"></a>Responses</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An object determining which URLs may be accessed by the <code>CURL()</code> function.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_access">Access</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="security-3"><a class="anchor" href="#security-3"></a>Security</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>basic</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong><a href="#_default">Default</a></strong></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="example-http-request-3"><a class="anchor" href="#example-http-request-3"></a>Example HTTP request</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The example below gets the current cluster-level CURL access settings.</p>
</div>
<div class="listingblock">
<div class="title">Curl request</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">curl -v -u Administrator:password \
http://localhost:8091/settings/querySettings/curlWhitelist</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-http-response-3"><a class="anchor" href="#example-http-response-3"></a>Example HTTP response</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Response 200</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "all_access": false,
  "allowed_urls": [],
  "disallowed_urls": []
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_post_access"><a class="anchor" href="#_post_access"></a>Update CURL Access List</h3>
<div class="literalblock">
<div class="content">
<pre>POST /settings/querySettings/curlWhitelist</pre>
</div>
</div>
<div class="sect3">
<h4 id="description-4"><a class="anchor" href="#description-4"></a>Description</h4>
<div class="paragraph">
<p>Updates the cluster-level CURL access settings only.</p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-2"><a class="anchor" href="#parameters-2"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Body</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>Settings</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An object determining which URLs may be accessed by the <code>CURL()</code> function.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_access">Access</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="responses-4"><a class="anchor" href="#responses-4"></a>Responses</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">HTTP Code</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>200</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An object determining which URLs may be accessed by the <code>CURL()</code> function, including the latest changes.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_access">Access</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>400</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Returns an error message if a parameter or value is incorrect.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>object</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="security-4"><a class="anchor" href="#security-4"></a>Security</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Type</th>
<th class="tableblock halign-left valign-middle">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>basic</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong><a href="#_default">Default</a></strong></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="example-http-request-4"><a class="anchor" href="#example-http-request-4"></a>Example HTTP request</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The example below specifies that <code>https://company1.com</code> is allowed, and <code>https://company2.com</code> is disallowed.</p>
</div>
<div class="listingblock">
<div class="title">Curl request</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh" data-source-url="file:///Users/simondew/GitHub/simon-dew/cb-swagger/docs/modules/rest-api/examples/query-settings-post-access.sh#L4-L8">curl -v -X POST -u Administrator:password \
http://localhost:8091/settings/querySettings/curlWhitelist \
-d '{"all_access": false,
     "allowed_urls": ["https://company1.com"],
     "disallowed_urls": ["https://company2.com"]}'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-http-response-4"><a class="anchor" href="#example-http-response-4"></a>Example HTTP response</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Response 200</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/simondew/GitHub/simon-dew/cb-swagger/docs/modules/rest-api/examples/query-settings-post-access.jsonc">{
  "all_access": false,
  "allowed_urls": [
    "https://company1.com"
  ],
  "disallowed_urls": [
    "https://company2.com"
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_definitions"><a class="anchor" href="#_definitions"></a>Definitions</h2>
<div class="sectionbody">
<style type="text/css">
  /* No maximum width for table cells */
  .doc table.spread > tbody > tr > *,
  .doc table.stretch > tbody > tr > * {
    max-width: none !important;
  }

  /* Ignore fixed column widths */
  col{
    width: auto !important;
  }

  /* Do not hyphenate words in the table */
  td.tableblock p,
  p.tableblock{
    hyphens: manual !important;
  }

  /* Vertical alignment */
  td.tableblock{
    vertical-align: top !important;
  }

  /* Hide content of tags section */
  div.sect2 > h3#tags,
  div.sect2 > h3#tags ~ *{
    display: none;
</style>
<div class="paragraph">
<p><strong>Table of Contents</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_settings">Settings</a></p>
</li>
<li>
<p><a href="#_access">Access</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_settings"><a class="anchor" href="#_settings"></a>Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryCleanupClientAttempts</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryCleanupClientAttempts" class="paragraph">
<p>When enabled, the Query service preferentially aims to clean up just transactions that it has created, leaving transactions for the distributed cleanup process only when it is forced to.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#cleanupclientattempts" class="xref page">node-level</a> <code>cleanupclientattempts</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.<br>
<strong>Default</strong> : <code>true</code><br>
<strong>Example</strong> : <code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryCleanupLostAttempts</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryCleanupLostAttempts" class="paragraph">
<p>When enabled, the Query service takes part in the distributed cleanup process, and cleans up expired transactions created by any client.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#cleanuplostattempts" class="xref page">node-level</a> <code>cleanuplostattempts</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.<br>
<strong>Default</strong> : <code>true</code><br>
<strong>Example</strong> : <code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryCleanupWindow</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryCleanupWindow" class="paragraph">
<p>Specifies how frequently the Query service checks its subset of <a href="../learn/data/transactions.html#additional-storage-use" class="xref page">active transaction records</a> for cleanup.
Decreasing this setting causes expiration transactions to be found more swiftly, with the tradeoff of increasing the number of reads per second used for the scanning process.</p>
</div>
<div class="paragraph">
<p>The value for this setting is a string.
Its format includes an amount and a mandatory unit, e.g. <code>10ms</code> (10 milliseconds) or <code>0.5s</code> (half a second).
Valid units are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ns</code> (nanoseconds)</p>
</li>
<li>
<p><code>us</code> (microseconds)</p>
</li>
<li>
<p><code>ms</code> (milliseconds)</p>
</li>
<li>
<p><code>s</code> (seconds)</p>
</li>
<li>
<p><code>m</code> (minutes)</p>
</li>
<li>
<p><code>h</code> (hours)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#cleanupwindow" class="xref page">node-level</a> <code>cleanupwindow</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.<br>
<strong>Default</strong> : <code>"60s"</code><br>
<strong>Example</strong> : <code>"30s"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string (duration)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryCompletedLimit</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryCompletedLimit" class="paragraph">
<p>Sets the number of requests to be logged in the completed requests catalog.
As new completed requests are added, old ones are removed.</p>
</div>
<div class="paragraph">
<p>Increase this when the completed request keyspace is not big enough to track the slow requests, such as when you want a larger sample of slow requests.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="../manage/monitor/monitoring-n1ql-query.html#sys-completed-config" class="xref page">Configure the Completed Requests</a> for more information and examples.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#completed-limit" class="xref page">node-level</a> <code>completed-limit</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.<br>
<strong>Default</strong> : <code>4000</code><br>
<strong>Example</strong> : <code>7000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryCompletedThreshold</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryCompletedThreshold" class="paragraph">
<p>A duration in milliseconds.
All completed queries lasting longer than this threshold are logged in the completed requests catalog.</p>
</div>
<div class="paragraph">
<p>Specify <code>0</code> to track all requests, independent of duration.
Specify any negative number to track none.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="../manage/monitor/monitoring-n1ql-query.html#sys-completed-config" class="xref page">Configure the Completed Requests</a> for more information and examples.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#completed-threshold" class="xref page">node-level</a> <code>completed-threshold</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.<br>
<strong>Default</strong> : <code>1000</code><br>
<strong>Example</strong> : <code>7000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryLogLevel</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryLogLevel" class="paragraph">
<p>Log level used in the logger.</p>
</div>
<div class="paragraph">
<p>All values, in descending order of data:</p>
</div>
<div class="paragraph">
<p><code>DEBUG</code>&#8201;&#8212;&#8201;For developers.
Writes everything.</p>
</div>
<div class="paragraph">
<p><code>TRACE</code>&#8201;&#8212;&#8201;For developers.
Less info than <code>DEBUG</code>.</p>
</div>
<div class="paragraph">
<p><code>INFO</code>&#8201;&#8212;&#8201;For admin &amp; customers.
Lists warnings &amp; errors.</p>
</div>
<div class="paragraph">
<p><code>WARN</code>&#8201;&#8212;&#8201;For admin.
Only abnormal items.</p>
</div>
<div class="paragraph">
<p><code>ERROR</code>&#8201;&#8212;&#8201;For admin.
Only errors to be fixed.</p>
</div>
<div class="paragraph">
<p><code>SEVERE</code>&#8201;&#8212;&#8201;For admin.
Major items, like crashes.</p>
</div>
<div class="paragraph">
<p><code>NONE</code>&#8201;&#8212;&#8201;Doesn’t write anything.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#loglevel" class="xref page">node-level</a> <code>loglevel</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.<br>
<strong>Default</strong> : <code>"INFO"</code><br>
<strong>Example</strong> : <code>"DEBUG"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>enum (DEBUG, TRACE, INFO, WARN, ERROR, SEVERE, NONE)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryMaxParallelism</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryMaxParallelism" class="paragraph">
<p>Specifies the maximum parallelism for queries on all Query nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>If the value is zero or negative, the maximum parallelism is restricted to the number of allowed cores.
Similarly, if the value is greater than the number of allowed cores, the maximum parallelism is restricted to the number of allowed cores.</p>
</div>
<div class="paragraph">
<p>(The number of allowed cores is the same as the number of logical CPUs.
In Community Edition, the number of allowed cores cannot be greater than 4.
In Enterprise Edition, there is no limit to the number of allowed cores.)</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#max-parallelism-srv" class="xref page">node-level</a> <code>max-parallelism</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, there is a <a href="../settings/query-settings.html#max_parallelism_req" class="xref page">request-level</a> <code>max_parallelism</code> parameter.
If a request includes this parameter, it will be capped by the node-level <code>max-parallelism</code> setting.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To enable queries to run in parallel, you must specify the cluster-level <code>queryMaxParallelism</code> parameter, or specify the node-level <code>max-parallelism</code> parameter on all Query nodes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Refer to <a href="../n1ql/n1ql-language-reference/index-partitioning.html#max-parallelism" class="xref page">Max Parallelism</a> for more information.<br>
<strong>Default</strong> : <code>1</code><br>
<strong>Example</strong> : <code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryMemoryQuota</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryMemoryQuota" class="paragraph">
<p>Specifies the maximum amount of memory a request may use on any Query node in the cluster, in MB.</p>
</div>
<div class="paragraph">
<p>This parameter enforces a ceiling on the memory used for the tracked documents required for
processing a request. It does not take into account any other memory that might be used to
process a request, such as the stack, the operators, or some intermediate values.</p>
</div>
<div class="paragraph">
<p>Within a transaction, this setting enforces the memory quota for the transaction by tracking the
delta table and the transaction log (approximately).</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#memory-quota-srv" class="xref page">node-level</a> <code>memory-quota</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, there is a <a href="../settings/query-settings.html#memory_quota_req" class="xref page">request-level</a> <code>memory_quota</code> parameter.
If a request includes this parameter, it will be capped by the node-level <code>memory-quota</code> setting.<br>
<strong>Default</strong> : <code>0</code><br>
<strong>Example</strong> : <code>4</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryN1qlFeatCtrl</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryN1qlFeatCtrl" class="paragraph">
<p>SQL++ feature control.
This setting is provided for technical support only.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#n1ql-feat-ctrl" class="xref page">node-level</a> <code>n1ql-feat-ctrl</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryNumAtrs</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryNumAtrs" class="paragraph">
<p>Specifies the total number of <a href="../learn/data/transactions.html#additional-storage-use" class="xref page">active transaction records</a> for all Query nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#numatrs-srv" class="xref page">node-level</a> <code>numatrs</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, there is a <a href="../settings/query-settings.html#numatrs_req" class="xref page">request-level</a> <code>numatrs</code> parameter.
If a request includes this parameter, it will be capped by the node-level <code>numatrs</code> setting.<br>
<strong>Default</strong> : <code>1024</code><br>
<strong>Minimum value (exclusive)</strong> : <code>0</code><br>
<strong>Example</strong> : <code>512</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryPipelineBatch</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryPipelineBatch" class="paragraph">
<p>Controls the number of items execution operators can batch for Fetch from the KV.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#pipeline-batch-srv" class="xref page">node-level</a> <code>pipeline-batch</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, the <a href="../settings/query-settings.html#pipeline_batch_req" class="xref page">request-level</a> <code>pipeline_batch</code> parameter specifies this property per request.
The minimum of that and the node-level <code>pipeline-batch</code> setting is applied.<br>
<strong>Default</strong> : <code>16</code><br>
<strong>Example</strong> : <code>64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryPipelineCap</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryPipelineCap" class="paragraph">
<p>Maximum number of items each execution operator can buffer between various operators.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#pipeline-cap-srv" class="xref page">node-level</a> <code>pipeline-cap</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, the <a href="../settings/query-settings.html#pipeline_cap_req" class="xref page">request-level</a> <code>pipeline_cap</code> parameter specifies this property per request.
The minimum of that and the node-level <code>pipeline-cap</code> setting is applied.<br>
<strong>Default</strong> : <code>512</code><br>
<strong>Example</strong> : <code>1024</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryPreparedLimit</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryPreparedLimit" class="paragraph">
<p>Maximum number of prepared statements in the cache.
When this cache reaches the limit, the least recently used prepared statements will be discarded as new prepared statements are created.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#prepared-limit" class="xref page">node-level</a> <code>prepared-limit</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.<br>
<strong>Default</strong> : <code>16384</code><br>
<strong>Example</strong> : <code>65536</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryScanCap</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryScanCap" class="paragraph">
<p>Maximum buffered channel size between the indexer client and the query service for index scans.
This parameter controls when to use scan backfill.</p>
</div>
<div class="paragraph">
<p>Use <code>0</code> or a negative number to disable.
Smaller values reduce GC, while larger values reduce indexer backfill.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#scan-cap-srv" class="xref page">node-level</a> <code>scan-cap</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, the <a href="../settings/query-settings.html#scan_cap_req" class="xref page">request-level</a> <code>scan_cap</code> parameter specifies this property per request.
The minimum of that and the node-level <code>scan-cap</code> setting is applied.<br>
<strong>Default</strong> : <code>512</code><br>
<strong>Example</strong> : <code>1024</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryTimeout</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryTimeout" class="paragraph">
<p>Maximum time to spend on the request before timing out (ns).</p>
</div>
<div class="paragraph">
<p>The value for this setting is an integer, representing a duration in nanoseconds.
It must not be delimited by quotes, and must not include a unit.</p>
</div>
<div class="paragraph">
<p>Specify <code>0</code> (the default value) or a negative integer to disable.
When disabled, no timeout is applied and the request runs for however long it takes.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#timeout-srv" class="xref page">node-level</a> <code>timeout</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, the <a href="../settings/query-settings.html#timeout_req" class="xref page">request-level</a> <code>timeout</code> parameter specifies this property per request.
The minimum of that and the node-level <code>timeout</code> setting is applied.<br>
<strong>Default</strong> : <code>0</code><br>
<strong>Example</strong> : <code>500000000</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int64)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryTxTimeout</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryTxTimeout" class="paragraph">
<p>Maximum time to spend on a transaction before timing out.
This setting only applies to requests containing the <code>BEGIN TRANSACTION</code> statement, or to requests where the <a href="../settings/query-settings.html#tximplicit" class="xref page">tximplicit</a> parameter is set.
For all other requests, it is ignored.</p>
</div>
<div class="paragraph">
<p>The value for this setting is a string.
Its format includes an amount and a mandatory unit, e.g. <code>10ms</code> (10 milliseconds) or <code>0.5s</code> (half a second).
Valid units are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ns</code> (nanoseconds)</p>
</li>
<li>
<p><code>us</code> (microseconds)</p>
</li>
<li>
<p><code>ms</code> (milliseconds)</p>
</li>
<li>
<p><code>s</code> (seconds)</p>
</li>
<li>
<p><code>m</code> (minutes)</p>
</li>
<li>
<p><code>h</code> (hours)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Specify <code>0ms</code> (the default value) to disable.
When disabled, no timeout is applied and the transaction runs for however long it takes.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#txtimeout-srv" class="xref page">node-level</a> <code>txtimeout</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, there is a <a href="../settings/query-settings.html#txtimeout_req" class="xref page">request-level</a> <code>txtimeout</code> parameter.
If a request includes this parameter, it will be capped by the node-level <code>txtimeout</code> setting.<br>
<strong>Default</strong> : <code>"0ms"</code><br>
<strong>Example</strong> : <code>"0.5s"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string (duration)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryTmpSpaceDir</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryTmpSpaceDir" class="paragraph">
<p>The path to which the indexer writes temporary backfill files, to store any transient data during query processing.</p>
</div>
<div class="paragraph">
<p>The specified path must already exist.
Only absolute paths are allowed.</p>
</div>
<div class="paragraph">
<p>The default path is <code class="file">var/lib/couchbase/tmp</code> within the Couchbase Server installation directory.<br>
<strong>Example</strong> : <code>"/opt/couchbase/var/lib/couchbase/tmp"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryTmpSpaceSize</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryTmpSpaceSize" class="paragraph">
<p>The maximum size of temporary backfill files (MB).</p>
</div>
<div class="paragraph">
<p>Setting the size to <code>0</code> disables backfill.
Setting the size to <code>-1</code> means the size is unlimited.</p>
</div>
<div class="paragraph">
<p>The maximum size is limited only by the available disk space.<br>
<strong>Default</strong> : <code>5120</code><br>
<strong>Example</strong> : <code>2048</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>integer (int32)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryUseCBO</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryUseCBO" class="paragraph">
<p>Specifies whether the cost-based optimizer is enabled.</p>
</div>
<div class="paragraph">
<p>The <a href="../n1ql/n1ql-rest-api/admin.html#use-cbo-srv" class="xref page">node-level</a> <code>use-cbo</code> setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.</p>
</div>
<div class="paragraph">
<p>In addition, the <a href="../settings/query-settings.html#use_cbo_req" class="xref page">request-level</a> <code>use_cbo</code> parameter specifies this property per request.
If a request does not include this parameter, the node-level setting is used, which defaults to <code>true</code>.<br>
<strong>Default</strong> : <code>true</code><br>
<strong>Example</strong> : <code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>queryCurlWhitelist</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div id="queryCurlWhitelist" class="paragraph">
<p>An object which determines which URLs may be accessed by the <code>CURL()</code> function.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><a href="#_access">Access</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_access"><a class="anchor" href="#_access"></a>Access</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 61.1111%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Name</th>
<th class="tableblock halign-left valign-middle">Description</th>
<th class="tableblock halign-left valign-middle">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>all_access</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Defines whether the user has access to all URLs, or only URLs specified by the access list.</p>
</div>
<div class="paragraph">
<p>This field set must be set to <code>false</code> to enable the <code class="param">allowed_urls</code> and <code class="param">disallowed_urls</code> fields.</p>
</div>
<div class="paragraph">
<p>Setting this field to <code>true</code> enables access to all endpoints.<br>
<strong>Default</strong> : <code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>allowed_urls</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An array of strings, each of which is a URL to which you wish to grant access.
Each URL is a prefix match.
The CURL() function will allow any URL that starts with this value.</p>
</div>
<div class="paragraph">
<p>For example, if you wish to allow access to all Google APIs, add the URL <code>https://maps.googleapis.com</code> to the array.
To allow complete access to <code>localhost</code>, use <code>http://localhost</code>.</p>
</div>
<div class="paragraph">
<p>Note that each URL must include the port, protocol, and all other components of the URL.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><strong>disallowed_urls</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>An array of strings, each of which is a URL that will be restricted for all roles.
Each URL is a prefix match.
The CURL() function will disallow any URL that starts with this value.</p>
</div>
<div class="paragraph">
<p>If both <code class="param">allowed_urls</code> and <code class="param">disallowed_urls</code> fields are populated, the <code class="param">disallowed_urls</code> field takes precedence over <code class="param">allowed_urls</code>.</p>
</div>
<div class="paragraph">
<p>Note that each URL must include the port, protocol, and all other components of the URL.</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>&lt; string &gt; array</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_securityscheme"><a class="anchor" href="#_securityscheme"></a>Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Query Settings REST API supports HTTP basic authentication.
Credentials can be passed via HTTP headers.</p>
</div>
<div class="sect2">
<h3 id="_default"><a class="anchor" href="#_default"></a>Default</h3>
<div class="paragraph">
<p>Users must have one of the following RBAC roles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Full Admin</p>
</li>
<li>
<p>Cluster Admin</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Type</em> : basic</p>
</div>
<div class="paragraph">
<p>Refer to <a href="../learn/security/roles.html" class="xref page">Roles</a> for more details.</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
