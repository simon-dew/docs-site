<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Understanding Authentication | Couchbase Docs (Preview)</title>
<link rel="stylesheet" href="../../../../_/css/site.css">
<script src="../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="To access Couchbase Server, users must be authenticated. &lt;em&gt;Authentication&lt;/em&gt; is a process for identifying who is attempting to access a system.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.6">
<meta name="page-url" content="/server/7.6/learn/security/authentication-overview.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11568/home/index.html">
                    <img src="../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11568/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.6" data-url="authentication-overview.html" selected>7.6 Prerelease</option>
        <option value="7.2" data-url="../../../current/index.html">7.2</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/learn/pages/security/authentication-overview.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-banner">
<i class="fas fa-file-alt"></i> <p>You are viewing the documentation for a prerelease version.</p>
</div>
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../introduction/intro.html">server</a></li>
<li class="crumb">Learn</li>
<li class="crumb"><a href="security-overview.html">Security</a></li>
<li class="crumb"><a href="authentication.html">Authentication</a></li>
<li class="crumb"><a href="authentication-overview.html">Understanding Authentication</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Understanding Authentication</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
To access Couchbase Server, users must be authenticated. <em>Authentication</em> is a process for identifying who is attempting to access a system.
Subsequent to successful authentication, <em>authorization</em> can be performed, whereby the user&#8217;s appropriate access-level is determined.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication-for-administrators"><a class="anchor" href="#authentication-for-administrators"></a>Authentication for Administrators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Administrators log into Couchbase Server Web Console either by providing their username and password to the administrative UI, or by selecting the <em>Single Sign-On</em> option, at <code><a href="https://hostname:18091" class="bare">https://hostname:18091</a></code>.</p>
</div>
<div class="paragraph">
<p>Optionally, the <em>unencrypted</em> port, 8091 can be used: specified as <code><a href="http://hostname:8091" class="bare">http://hostname:8091</a></code>.
Note this is <em>not</em> recommended, as username and password are passed in the clear, from the browser to the console.</p>
</div>
<div class="paragraph">
<p>The best practice for administrator-authentication is to use <em>single sign-on</em>, with a provider that is configured to require <em>Multi-Factor Authentication</em> (MFA).
For more information about securing the network with encryption, see <a href="on-the-wire-security.html" class="xref page">On-the-Wire Security</a>.
For more information about single sign-on, see <a href="authentication-domains.html#saml-authentication" class="xref page">SAML Authentication</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication-for-applications"><a class="anchor" href="#authentication-for-applications"></a>Authentication for Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended method for application-authentication when connecting to Couchbase Server is to use x.509 <em>certificate-based</em> authentication.
This ensures that only approved users, machines, or endpoints are authenticated, and provides what is known as <em>mutual authentication</em>.</p>
</div>
<div class="paragraph">
<p><em>Mutual-TLS</em> (mTLS) certificate-based authentication relies on a <em>Certificate Authority</em> (CA) to validate identities and issue certificates.
When using this method, no sensitive credentials are shared over the network; and all communication between application and server is performed over an <em>encrypted channel</em>, to prevent eavesdropping and impersonation.</p>
</div>
<div class="paragraph">
<p>For a complete overview of Couchbase Server’s certificate-handling mechanisms, see <a href="certificates.html" class="xref page">Certificates</a>.
For practical steps required to set up client and server certificates, see <a href="../../manage/manage-security/manage-certificates.html" class="xref page">Manage Certificates</a>.</p>
</div>
<div class="sect2">
<h3 id="authentication-with-username-and-password"><a class="anchor" href="#authentication-with-username-and-password"></a>Authentication with Username and Password</h3>
<div class="paragraph">
<p>In cases where x.509 certificate-based authentication cannot be used, a <em>username and password</em> combination must be provided in the application, to authenticate to Couchbase Server.
When an application authenticates to the Data Service, one of four mechanisms provided by the Simple Authentication and Security Layer (SASL) framework are used.
All other Couchbase services use <em>HTTP Basic Authentication</em>.</p>
</div>
<div class="paragraph">
<p>It is strongly recommended to always deploy TLS network encryption and use the defined TLS ports when connecting an application to Couchbase Server.</p>
</div>
<div class="sect3">
<h4 id="data-service-username-password-authentication"><a class="anchor" href="#data-service-username-password-authentication"></a>Data-Service Authentication with Username and Password</h4>
<div class="paragraph">
<p>During initial client-server negotiation with the Data Service, when utilizing TLS network encryption, the SASL PLAIN method is always used, with the credentials being secured inside the encrypted network connection.
For cases where TLS network-encryption is not in use, the strongest authentication protocol supported by both Couchbase Server and the client application is selected for authentication. This is either PLAIN or one of the revisions of SCRAM-SHA challenge-response mechanisms for authenticating.  In ascending order of strength, the Couchbase password-authentication mechanisms are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PLAIN: The client sends the password in plaintext-form.</p>
</li>
<li>
<p>SCRAM-SHA1:   160-bit credential.</p>
</li>
<li>
<p>SCRAM-SHA256: 256-bit credential.</p>
</li>
<li>
<p>SCRAM-SHA512:  512-bit credential.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instead of the client sending the password directly to Couchbase Server, SCRAM uses a challenge-response mechanism, to exchange derived cryptographic credentials using a combination of PBKDF2, HMAC and SHA, so that the application-credential is not exposed to eavesdroppers on the network.
Note that other communication-data, including queries and database-values, are <em>not</em> encrypted with the SCRAM mechanism: therefore, the SCRAM mechanism should only be used where TLS network-encryption is not an option.</p>
</div>
</div>
<div class="sect3">
<h4 id="other-service-username-password-authentication"><a class="anchor" href="#other-service-username-password-authentication"></a>Authenticating with Other Services, with Username and Password</h4>
<div class="paragraph">
<p>Application-authentication for all services other than the Data Service uses the HTTP Basic Authentication mechanism, with username and password.
In consequence, it is essential that TLS network encryption <em>always</em> be deployed, so as to avoid credentials being sent over the network insecurely.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="secure-credential-storage"><a class="anchor" href="#secure-credential-storage"></a>Secure Credential Storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Locally managed user-account credentials are stored in Couchbase Server using both the <em>Argon2ID</em> and <em>PBKDF2</em> algorithms.</p>
</div>
<div class="paragraph">
<p><em>Argon2ID</em> is a state of the art password hashing function, designed to be resistant to various password-cracking attacks: including both time-memory trade-off attacks, and side-channel attacks.
<em>PBKDF2</em> is another powerful password hashing function; and is required to allow SCRAM-SHA capabilities.
By default, the PBKDF2 credentials are stored with 5,000 iterations: this can be configured with the <code>POST settings/security/scramShaIterations</code> REST API method and URI, with a higher specified number increasing the security of the credentials, with the trade-off of higher resource requirements when authentication is performed.
Following guidance from NIST, it is recommended to disable SCRAM-SHA1 unless it is absolutely required.</p>
</div>
<div class="paragraph">
<p>The various levels of SCRAM SHA can be disabled with <code>POST /settings/security/scramSha1Enabled</code>,
<code>POST /settings/security/scramSha256Enabled</code> and
<code>POST /settings/security/scramSha512Enabled</code>.
For more information on the using the REST API to configure security settings, see <a href="../../rest-api/rest-setting-security.html" class="xref page">Configure On-the-Wire Security</a>.</p>
</div>
<div class="paragraph">
<p>For cases that do not use SCRAM-SHA, such as those that implement TLS network encryption, it is recommended to <em>disable</em> all variations of SCRAM-SHA; as this will prevent the SCRAM-SHA PBKDF2 hashes from being generated, when Argon2ID provides stronger security for those credentials.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authorization"><a class="anchor" href="#authorization"></a>Authorization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase-Server features &#8212; including data, settings, and statistics &#8212; can be accessed only by users who have been assigned the appropriate <em>privileges</em>.
Privileges include <em>read</em>, <em>read-write</em>, <em>execute</em>, and <em>manage</em>.
Privileges are assigned by <em>Full</em> and <em>Security</em> Administrators, in correspondence with <em>roles</em>.
When a user successfully authenticates, their assigned roles are examined, and access is granted or denied by Couchbase Server.</p>
</div>
<div class="paragraph">
<p>Roles can be assigned to a user in either or both of two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Directly</em>.
The user is associated directly with one or more Couchbase-Server roles.</p>
</li>
<li>
<p><em>By Group</em>.
A Couchbase-Server <em>user-group</em> is defined, and roles are assigned to the user-group.
The user is made a member of the user-group, and thereby inherits all the roles of the group.
A user can be a member of any number of groups.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that by means of <em>LDAP Group Support</em>, the roles assigned to a Couchbase-Server user-group can be inherited by users not defined on Couchbase Server; as described in <a href="authentication-domains.html" class="xref page">Authentication Domains</a>.</p>
</div>
<div class="paragraph">
<p>See
<a href="../../manage/manage-security/manage-users-and-roles.html" class="xref page">Manage Users, Groups, and Roles</a>, for details on creating users and groups, and assigning roles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication-domains"><a class="anchor" href="#authentication-domains"></a>Authentication Domains</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Server assigns each user to one of two <em>authentication domains</em>; which are <em>local</em> and <em>external</em>.
The <em>local</em> domain contains users defined locally, on Couchbase Server.
The <em>external</em> domain contains users defined externally on an LDAP server, a SAML IdP provider, or Linux systems that are accessed by means of <em>PAM</em>.
For a complete overview, see <a href="authentication-domains.html" class="xref page">Authentication Domains</a>.</p>
</div>
<div class="paragraph">
<p>In addition to a username and password requirement, SAML can require <em>Two-Factor Authentication</em> (TFA) such as a one-time code sent via text message or a code generated by an authentication module or app. SAML can also provide <em>Single Sign On</em> (SSO), where a user that has already authenticated with another application is automatically authenticated to use</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
