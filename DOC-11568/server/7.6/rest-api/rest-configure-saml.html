<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Configure SAML | Couchbase Docs (Preview)</title>
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="You can configure Couchbase Server to authenticate a Couchbase Server Web Console user via a SAML Identity Provider.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.6">
<meta name="page-url" content="/server/7.6/rest-api/rest-configure-saml.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11568/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11568/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.6" data-url="rest-configure-saml.html" selected>7.6 Prerelease</option>
        <option value="7.2" data-url="../../current/index.html">7.2</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/rest-api/pages/rest-configure-saml.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-banner">
<i class="fas fa-file-alt"></i> <p>You are viewing the documentation for a prerelease version.</p>
</div>
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="rest-intro.html">REST API Reference</a></li>
<li class="crumb"><a href="rest-security.html">Security API</a></li>
<li class="crumb"><a href="rest-authentication.html">Authentication API</a></li>
<li class="crumb"><a href="rest-configure-saml.html">Configure SAML</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Configure SAML</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
You can configure Couchbase Server to authenticate a Couchbase Server Web Console user via a SAML Identity Provider.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="get-settingssaml"><a class="anchor" href="#get-settingssaml"></a>GET /settings/saml</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Description</strong></p>
</div>
<div class="paragraph">
<p>Returns Couchbase Server&#8217;s <em>Security Assertion Markup Language</em> (SAML) settings as JSON object.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre data-source-url="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/rest-api/examples/get-saml.sh">curl -s -u Administrator:password \
     http://localhost:8091/settings/saml | jq -S

{
    "authnNameIDFormat": "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",
    "enabled": true,
    "groupsAttribute": "groups",
    "groupsAttributeSep": " ,",
    "groupsFilterRE": ".*",
    "idpAuthnBinding": "redirect",
    "idpLogoutBinding": "redirect",
    "idpMetadataConnectAddressFamily": "undefined",
    "idpMetadataHttpTimeoutMs": 5000,
    "idpMetadataOrigin": "https",
    "idpMetadataRefreshIntervalS": 3600,
    "idpMetadataTLSCAs": "-----BEGIN CERTIFICATE-----\n
    . . .
    \n-----END CERTIFICATE-----",
    "idpMetadataTLSExtraOpts": "[]",
    "idpMetadataTLSSNI": "",
    "idpMetadataTLSVerifyPeer": false,
    "idpMetadataURL": "https://exampleco.okta.com/app/abcdef1234/sso/saml/metadata",
    "idpSignsMetadata": false,
    "rolesAttribute": "",
    "rolesAttributeSep": " ,",
    "rolesFilterRE": ".*",
    "singleLogoutEnabled": false,
    "spAssertionDupeCheck": "disabled",
    "spBaseURLScheme": "http",
    "spBaseURLType": "node",
    "spCertificate": "-----BEGIN CERTIFICATE-----\n
    . . .
    \n-----END CERTIFICATE-----\n",
    "spChain": "",
    "spConsumeURL": "https://cb_node.example.com:8091/saml/consume",
    "spContactEmail": "my_name@example.org",
    "spContactName": "SAML Admin",
    "spEntityId": "https://cb_node.example.com:8091/saml/metadata",
    "spKey": "**********",
    "spLogoutURL": "https://cb_node.example.com:8091/saml/logout",
    "spMetadataCacheDuration": "P1M",
    "spMetadataURL": "https://cb_node.example.com:8091/saml/metadata",
    "spOrgDisplayName": "Example Co.",
    "spOrgName": "Example Co., a division of United Samples Ltd.",
    "spOrgURL": " https://example.com",
    "spSessionExpire": "SessionNotOnOrAfter",
    "spSignMetadata": true,
    "spSignRequests": true,
    "spTrustedFingerprints": [],
    "spTrustedFingerprintsUsage": "metadataInitialOnly",
    "spVerifyAssertionEnvelopSig": true,
    "spVerifyAssertionSig": true,
    "spVerifyLogoutReqSig": false,
    "spVerifyRecipient": false
  }</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="post-settingssaml"><a class="anchor" href="#post-settingssaml"></a>POST /settings/saml</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Description</strong></p>
</div>
<div class="paragraph">
<p>Updates Couchbase Server&#8217;s SAML authentication settings. If the update is successful, this call returns the current settings. If it encounters an error, it returns an error message.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre> curl -X POST -u &lt;administrator&gt;:&lt;password&gt;
    http://&lt;host&gt;:&lt;port&gt;/settings/saml
    -d args
    .
    .</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>In following example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The curl command adds the Couchbase Server&#8217;s key and certificate by using the <code>--data-urlencode</code> argument to read them from the files <code>my_key.pem</code> and <code>my_certificate.crt</code>.</p>
</li>
<li>
<p>The <em>Fully Qualified Domain Name</em> (FQDN) where users connect to the Web Console is <code>nodename.example.com</code>. Couchbase Server determines this value based on its own configuration.</p>
</li>
<li>
<p>The IdP&#8217;s metadata URL is <code>https://myidp.com/sso/saml/metadata</code>. In this example, the metadata provides all of the configuration information Couchbase Server needs to interact with the IdP. Therefore, the curl command has no further IdP parameters.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre data-source-url="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/rest-api/examples/post-saml.sh">curl -X POST -u Administrator:password \
http://localhost:8091/settings/saml \
-d enabled=true \
-d idpMetadataTLSVerifyPeer=false \
-d idpMetadataURL=https://myidp.com/sso/saml/metadata \
-d spBaseURLScheme=http  \
-d spBaseURLType=node \
--data-urlencode spCertificate@my_certificate.crt 
--data-urlencode spKey@my_key.pem 
-d idpSignsMetadata=false

{
    "authnNameIDFormat": "urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",
    "enabled": true,
    "groupsAttribute": "",
    "groupsAttributeSep": " ,",
    "groupsFilterRE": ".*",
    "idpAuthnBinding": "post",
    "idpLogoutBinding": "post",
    "idpMetadataConnectAddressFamily": "undefined",
    "idpMetadataHttpTimeoutMs": 5000,
    "idpMetadataOrigin": "http",
    "idpMetadataRefreshIntervalS": 3600,
    "idpMetadataTLSCAs": "",
    "idpMetadataTLSExtraOpts": "[]",
    "idpMetadataTLSSNI": "",
    "idpMetadataTLSVerifyPeer": false,
    "idpMetadataURL": "https://myidp.com/sso/saml/metadata",
    "idpSignsMetadata": false,
    "rolesAttribute": "",
    "rolesAttributeSep": " ,",
    "rolesFilterRE": ".*",
    "singleLogoutEnabled": true,
    "spAssertionDupeCheck": "global",
    "spBaseURLScheme": "http",
    "spBaseURLType": "node",
    "spCertificate": "-----BEGIN CERTIFICATE-----\n
    ...
    \n-----END CERTIFICATE-----\n",
    "spChain": "",
    "spConsumeURL": "http://nodename.example.com:8091/saml/consume",
    "spContactEmail": "",
    "spContactName": "",
    "spEntityId": "",
    "spKey": "**********",
    "spLogoutURL": "http://nodename.example.com:8091/saml/logout",
    "spMetadataCacheDuration": "P1M",
    "spMetadataURL": "http://nodename.example.com:8091/saml/metadata",
    "spOrgDisplayName": "",
    "spOrgName": "",
    "spOrgURL": "",
    "spSessionExpire": "SessionNotOnOrAfter",
    "spSignMetadata": true,
    "spSignRequests": true,
    "spTrustedFingerprints": [],
    "spTrustedFingerprintsUsage": "metadataInitialOnly",
    "spVerifyAssertionEnvelopSig": true,
    "spVerifyAssertionSig": true,
    "spVerifyLogoutReqSig": true,
    "spVerifyRecipient": "consumeURL",
    "usernameAttribute": ""
}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Controller parameters</caption>
<colgroup>
<col style="width: 36.3636%;">
<col style="width: 63.6364%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authnNameIDFormat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The format the SAML message uses to identify its subject (the user who&#8217;s authenticating). See <a href="../manage/manage-security/configure-saml.html#nameid" class="xref page">NameID and User Identity</a> for possible values. Defaults to <code>urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean that enables SAML authentication with an IdP when set to <code>true</code>. Set to <code>false</code> by default, which disables SAML authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">groupsAttribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the SAML attribute from which Couchbase extracts the user&#8217;s groups. Defaults to an empty string which has Couchbase Server use the list of groups defined for users in their Couchbase Server account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">groupsAttributeSep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of characters that separate group names. Set this value if the IdP sends a list of group names in the SAML attribute you have mapped to Couchbase groups. Defaults to &#8220;<code> ,</code>&#8221; which means groups can be separated by a space, a comma, or combinations of the two characters. Couchbase Server allows the string to use multiple characters to separate group names. For example, suppose the SAML attribute contains the string &#8220;<code>group1,group2, group3 group4.subgroup</code>&#8221;. Then when using the default setting, Couchbase Server splits the string into four groups: <code>group1</code>, <code>group2</code>, <code>group3</code> and <code>group4.subgroup</code>.  Only has an effect if <code>groupsAttribute</code> has a value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">groupsFilterRE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A regular expression Couchbase Server uses to filter the group names the IdP sends in a SAML attribute. Couchbase Server assigns the user any groups sent by the IdP whose name match the regular expression. Defaults to <code>.*</code> which accepts all group names.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpAuthnBinding</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls how Couchbase Server sends parameters to the IdP. Can be either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>post</code>: the default value which sends the parameters as part of POST message to te IdP.</p>
</li>
<li>
<p><code>redirect</code>: sends the parameters to the IdP encoded in the URL.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpLogoutBinding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to <code>idpAuthnBinding</code>, but for the logout request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataConnectAddressFamily</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to use IPv4 or IPv6 addresses to retrieve metadata from the IdP. One of three values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>undefined</code>: the default value which automatically determine the address family to use.</p>
</li>
<li>
<p><code>inet</code>: use IPv4 addresses when retrieving the metadata from the IdP.</p>
</li>
<li>
<p><code>inet6</code>: use IPv6 addresses when retrieving the metadata.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataHttpTimeoutMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value containing the number of milliseconds Couchbase Server waits for a successful connection to the IdP when retrieving metadata. It reports an error if this periods elapses before the IdP responds. Defaults to 5000 (5 seconds).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataOrigin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls how Couchbase Server get the IdP&#8217;s metadata. Can have one of three values:</p>
<p class="tableblock">* <code>http</code>: Couchbase Server downloads the IdP&#8217;s metadata from the URL in <code>idpMetadataURL</code> periodically. The <code>idpMetadataRefreshIntervalS</code> setting controls how often Couchbase Server fetches the metadata.
* <code>http_one_time</code>: Couchbase Server downloads the IdP&#8217;s metadata from the URL in  <code>idpMetadataURL</code> once. It does not automatically update the metadata after the initial fetch.
* <code>upload</code>: the user provides a file containing the metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataRefreshIntervalS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value containing the number of seconds Couchbase Server waits before refreshing the IdP&#8217;s metadata. Only has an effect if you have enabled metadata refresh. Defaults to 3600 (1 hour).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataTLSCAs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The certificate or certificate chain Couchbase Server uses when verifying its connection to retrieve metadata from the IdP. Must be in <em>Privacy Enhanced Mail</em> (PEM) format. Only has an effect if the URL in <code>idpMetadataURL</code> has <code>https</code> as its scheme and <code>idpMetadataTLSVerifyPeer</code> is <code>true</code>, in which case <code>idpMetadataTLSCAs</code> is required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataTLSExtraOpts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extra TLS options that Couchbase Server applies when connecting to the IdP to retrieve the metadata. Only use this parameter if asked to by technical support.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataTLSSNI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets a custom <em>Server Name Indication</em> (SNI) for the connection from Couchbase Server to the IdP to retrieve the metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataTLSVerifyPeer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean value that controls whether Couchbase Server verifies the IdP&#8217;s certificate when fetching metadata. Only has an effect if <code>idpMetadataOrigin</code> is <code>http</code> or <code>http_one_time</code>. If set to <code>true</code>, Couchbase Server verifies the certificate. If it cannot verify the certificate, it returns an error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpMetadataURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL from which Couchbase Server retrieves the IdP&#8217;s metadata. Only has an effect if <code>idpMetadataOrigin</code> is <code>http</code> or <code>http_one_time</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idpSignsMetadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean that tells Couchbase Server if the IdP cryptographically signs its metadata. If the IdP signs its metadata, Couchbase Server attempts to verify the signature. It returns an error if this verification fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rolesAttribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a SAML attribute containing the roles that Couchbase Server should apply to the authenticated user. Defaults to an empty string, which has Couchbase Server use its own list of roles from the user&#8217;s Couchbase Server account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rolesAttributeSep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of characters that separate role names. Set this value if the IdP sends a list of role names in the SAML attribute you have mapped to Couchbase roles. Defaults to &#8220;<code> ,</code>&#8221; which means roles can be separated by a space, a comma, or combinations of the two characters. Couchbase Server allows the string to use multiple characters to separate role names. For example, suppose the SAML attribute contains the string &#8220;<code>role1,role2, role3 role4.subrole</code>&#8221;. Then when using the default setting, Couchbase Server splits the string into four roles: <code>role1</code>, <code>role2</code>, <code>role3</code> and <code>role4.subrole</code>.  Only has an effect if <code>rolesAttribute</code> has a value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rolesFilterRE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A regular expression for Couchbase Server to use to filter role names sent in a SAML attribute. Couchbase Server only grants the roles whose names match the regular expression to the user. Defaults to <code>.*</code> which allows all groups in the SAML attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">singleLogoutEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean that controls whether the user is able to log out of both Web Console and their IdP session at once. Defaults to <code>true</code> which logs users out of the IdP session when they log out of the Web Console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spAssertionDupeCheck</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean value that controls whether Couchbase Server lets users reuse authentication credentials. See <a href="../manage/manage-security/configure-saml.html#dupe-check" class="xref page">SP Assertion Dupe Check</a> for a description of this parameter&#8217;s values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spBaseURLScheme</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The scheme that Couchbase Server uses when generating the URLs for <code>spMetadataURL</code>, <code>spConsumeURL</code>, and <code>spLogoutURL</code>. Can be either the default <code>http</code> for unencrypted connections to Couchbase Server or <code>https</code> for encrypted connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spBaseURLType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets how Couchbase Server determines the host name it uses when generating the URLs for <code>spMetadataURL</code>, <code>spConsumeURL</code>, and <code>spLogoutURL</code>. See <a href="../manage/manage-security/configure-saml.html#sp-base-url" class="xref page">SP Base URL Type</a> for a description of this parameter&#8217;s values. Defaults to <code>node</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spCertificate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The public certificate that the IdP uses to verify the authenticity of Couchbase Server&#8217;s requests in PEM format. The public key you supply must correspond to the private key you supply in spKey. You must set this value to enable SAML authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spChain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more certificates in PEM format used to sign the Couchbase Server&#8217;s certificate. Supply this value if Couchbase Server&#8217;s certificate was not directly signed by a well-known signing authority.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spConsumeURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A read-only value for your Couchbase Server&#8217;s SAML ACS endpoint. This is the URL the IdP posts SAML messages to. Couchbase Server automatically generates this value based on the contents of <code>spBaseURLScheme</code>, <code>spBaseURLType</code>, and <code>spCustomBaseURL</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spContactEmail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A contact email address for the administrator responsible for Couchbase Server&#8217;s SAML integration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spContactName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the administrator responsible for Couchbase Server&#8217;s SAML integration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spEntityId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier Couchbase Server uses when exchanging SAML messages with the IdP. It defaults to the URL for Couchbase Server&#8217;s SAML metadata. The actual content of the field is not important as long as the IdP recognizes the identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The private key Couchbase Server uses to sign and encrypt SAML messages in PEM format. You must supply a private key to enable SAML authentication. This parameter is write-only. A GET request only returns a string of asterisks for this value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spLogoutURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read-only value containing the SAML logout endpoint for Couchbase Server. This is the URL the IdP uses to log users out of the Web Console. Couchbase Server sets this value based on  <code>spBaseURLScheme</code>, <code>spCustomBaseURL</code>, and <code>spBaseURLType</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spMetadataCacheDuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets how long the IdP should cache Couchbase Server&#8217;s metadata. This value sets the <code>CacheDuration</code> attribute in Couchbase Server&#8217;s metadata that the IdP can retrieve from the URL in <code>spMetadataURL</code>. This value is in <a href="https://en.wikipedia.org/wiki/ISO_8601#Durations" target="_blank" rel="noopener">ISO8601 duration format</a>. The default value <code>P1M</code> sets this duration to one month.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spMetadataURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read-only value containing the URL for Couchbase Server&#8217;s SAML metadata. This metadata can be used to configure the IdP to exchange SAML messages with Couchbase Server. Couchbase Server sets this value based on  <code>spBaseURLScheme</code>, <code>spCustomBaseURL</code>, and <code>spBaseURLType</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spOrgDisplayName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An alternate name of your organization. The IdP can use this value for various purposes, such as when prompting a user to authenticate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spOrgName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of your organization. The IdP can use this value for various purposes, such as when prompting a user to authenticate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spOrgURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A URL for your organization. This value does not play a role in authentication. The IdP can use this value for various purposes, such as when prompting a user to authenticate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spSessionExpire</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String value that controls whether the Couchbase Server Web Console expires its session when the IdP&#8217;s authorization expires. When set to the default <code>SessionNotOnOrAfter</code> value, the Web Console forces the user to reauthenticate based on the <code>SessionNotOnOrAfter</code> attribute in the SAML assertion&#8217;s <code>AuthStatement</code> element. If set to <code>false</code>, the Web Console does not set its session length to match the IdP&#8217;s authentication expiration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spSignMetadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean value that controls whether Couchbase Server signs its metadata using the key set in spKey. Defaults to <code>true</code>, which enables signing the metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spSignRequests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean value that controls whether Couchbase Server signs its SAML requests to the IdP. Defaults to <code>true</code> which enables signing the requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spTrustedFingerprints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more certificate fingerprints that Couchbase Server can use to verify messages from the IdP. It uses these fingerprints instead of using a certificate embedded in the IdP&#8217;s metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spTrustedFingerprintsUsage</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String value that controls what Couchbase Server verifies using certificate fingerprints. Can be one of three values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>metadataOnly</code>: Couchbase Server always uses the fingerprints to verify the signatures in the IdP&#8217;s metadata every time it updates the metadata.</p>
</li>
<li>
<p><code>metadataInitialOnly</code>: Couchbase Server uses the fingerprints to verify the signatures in the IdP&#8217;s metadata the first time it retrieves the metadata. Afterwards, when updating the metadata Couchbase Server uses the certificate from the previously retrieved copy of the metadata to verify its signature.</p>
</li>
<li>
<p><code>everything</code>: Couchbase Server uses the fingerprints to verify the signatures in all  SAML messages. It never uses the certificate in the IdP&#8217;s metadata.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spVerifyAssertionEnvelopSig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean value. When set to <code>true</code>, Couchbase Server verifies the IdP&#8217;s signature on the entire SAML message envelope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spVerifyAssertionSig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean value. When set to the default <code>true</code> value, Couchbase Server verifies the IdP&#8217;s signature on the assertion portion of SAML messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spVerifyLogoutReqSig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean value. When set to <code>true</code>, Couchbase Server verifies the IdP&#8217;s signature on SAML logout requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spVerifyRecipient</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Controls whether Couchbase Server verifies a SAML message is addressed to it by comparing the SAML recipient with its own recipient name. Its value is one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The string <code>consumeURL</code>: the default value which has Couchbase Server verify that the recipient set in the SAML message matches the value in <code>spConsumeURL</code> (its own consume URL).</p>
</li>
<li>
<p>Boolean <code>false</code>: Couchbase Server does not verify the recipient and just processes the SAML message.</p>
</li>
<li>
<p>The string <code>custom</code>: Couchbase Server compares the recipient set in the SAML message to the value set in <code>spVerifyRecipientValue`</code> to verify the SAML recipient.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spVerifyRecipientValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If spVerifyRecipient is <code>custom</code>, this parameter sets the recipient name that Couchbase Server looks for in SAML messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">usernameAttribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a SAML attribute that Couchbase Server uses as the username of the user who authenticated with the IdP. If you do not supply a value for this parameter, Couchbase Server extracts the username from the nameID in the SAML message.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
