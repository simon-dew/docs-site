<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>cbbackupmgr strategies | Couchbase Docs (Staging)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-8628/server/6.6/backup-restore/cbbackupmgr-strategies.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Recommended backup strategies for cbbackupmgr">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="6.6">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-8628/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a href="https://cloud.couchbase.com/sign-up" class="free-trial-link" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  <i class="fas fa-cloud"></i>
                  Free Trial
                </a>
                <a class="btn btn-primary try-btn"  onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
</nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/couchbase/backup/docs/modules/backup-restore/pages/cbbackupmgr-strategies.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">server</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">cbbackupmgr strategies</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Recommended backup strategies for cbbackupmgr</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Backing up data is an important part of any production database deployment. In
this section we will go through the most common cbbackupmgr backup strategies
and also provide recommendations for how and where to run cbbackupmgr. To
describe each strategy we will assume that users will want to back up their
cluster daily, but all strategies can be easily modified to accommodate
different backup intervals.</p>
</div>
<div class="paragraph">
<p>In the strategies below we will refer to taking a full backup even though
cbbackupmgr is an incremental-only tool. When this term is used we are referring
to the first backup taken in a backup repository.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="periodic-merge"><a class="anchor" href="#periodic-merge"></a>PERIODIC MERGE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended backup strategy for cbbackupmgr is the Periodic Merge strategy.
This backup strategy is intended to have the lowest cluster overhead and will
require the least amount of time. The periodic merge strategy takes full
advantage the fact that cbbackupmgr only takes incremental backups as well as
its ability to merge incremental backup. In a Periodic Merge strategy we would
take an incremental backup each day as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Sunday:    Config Backup Repo    (0 backups in backup repo)
Sunday:    Backup 1              (1 backup in backup repo)
Monday:    Backup 2              (2 backups in backup repo)
Tuesday:   Backup 3              (3 backups in backup repo)
Wednesday: Backup 4              (4 backups in backup repo)
Thursday:  Backup 5              (5 backups in backup repo)
Friday:    Backup 6              (6 backups in backup repo)
Saturday:  Backup 7              (7 backups in backup repo)
Sunday:    Backup 8              (8 backups in backup repo)
Sunday:    Merge 1-7             (2 backups in backup repo)
Monday:    Backup 9              (3 backups in backup repo)
Tuesday:   Backup 10             (4 backups in backup repo)
Wednesday: Backup 11             (5 backups in backup repo)
Thursday:  Backup 12             (6 backups in backup repo)
Friday:    Backup 13             (7 backups in backup repo)
Saturday:  Backup 14             (8 backups in backup repo)
Sunday:    Backup 15             (9 backups in backup repo)
Sunday:    Merge 7-14            (2 backups in backup repo)</pre>
</div>
</div>
<div class="paragraph">
<p>Each day we increase the amount of incremental backups in the backup repository,
but in order to reclaim space we merge the incremental backups from the previous
week on Sundays in order to reclaim space. This strategy is effective because
incremental backups are the quickest way to back up a cluster and when we need
to consolidate the data we can do so without using any cluster resource. This
strategy is useful because as data grows it may become infeasible to back up the
entire cluster in a reasonable amount of time. By always taking incremental
backups and merging at a later time, we can completely avoid full cluster
backups.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fullincremental-approach"><a class="anchor" href="#fullincremental-approach"></a>Full/Incremental Approach</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Full/Incremental Approach is similar to the Periodic Merge strategy, but
has one key difference. Instead of relying on the merge feature to merge backups
together we create a new backup repository periodically and back up the entire
cluster again. We then take incremental backups daily. Below is an example of
what this strategy would look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Sunday:    Config Backup Repo 1  (0 backups in backup repo)
Sunday:    Backup 1              (1 backup in backup repo)
Monday:    Backup 2              (2 backups in backup repo)
Tuesday:   Backup 3              (3 backups in backup repo)
Wednesday: Backup 4              (4 backups in backup repo)
Thursday:  Backup 5              (5 backups in backup repo)
Friday:    Backup 6              (6 backups in backup repo)
Saturday:  Backup 7              (7 backups in backup repo)
Sunday:    Config Backup Repo 2  (0 backup in backup repo)
Sunday:    Backup 8              (1 backups in backup repo)
Monday:    Backup 9              (2 backups in backup repo)
Tuesday:   Backup 10             (3 backups in backup repo)
Wednesday: Backup 11             (4 backups in backup repo)
Thursday:  Backup 12             (5 backups in backup repo)
Friday:    Backup 13             (6 backups in backup repo)
Saturday:  Backup 14             (7 backups in backup repo)
Sunday:    Create Backup Repo 3  (0 backups in backup repo)
Sunday:    Backup 15             (1 backup in backup repo)</pre>
</div>
</div>
<div class="paragraph">
<p>In this strategy we don&#8217;t use the merge command, but instead rely on creating a
new backup repository each week on Sunday. In order to free up space in this
strategy we would delete old backup repositories once they are deemed to be too
old to be useful. This strategy is useful for small to medium sized clusters due
to the requirement to take full backups.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="full-backup-only"><a class="anchor" href="#full-backup-only"></a>Full Backup Only</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this strategy we only take full backups. This strategy is only useful for
small clusters and puts the most strain on the cluster compared to other
strategies. A backup strategy using only full backups would look like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Sunday:    Config Backup Repo 1  (0 backups in backup repo)
Sunday:    Backup 1              (1 backup in backup repo)
Monday:    Config Backup Repo 2  (0 backups in backup repo)
Monday:    Backup 2              (1 backup in backup repo)
Tuesday:   Config Backup Repo 3  (0 backups in backup repo)
Tuesday:   Backup 3              (1 backup in backup repo)
Wednesday: Config Backup Repo 4  (0 backups in backup repo)
Wednesday: Backup 4              (1 backup in backup repo)
Thursday:  Config Backup Repo 5  (0 backups in backup repo)
Thursday:  Backup 5              (1 backup in backup repo)
Friday:    Config Backup Repo 6  (0 backups in backup repo)
Friday:    Backup 6              (1 backup in backup repo)
Saturday:  Config Backup Repo 7  (0 backups in backup repo)
Saturday:  Backup 7              (1 backup in backup repo)
Sunday:    Config Backup Repo 8  (0 backups in backup repo)
Sunday:    Backup 8              (1 backup in backup repo)</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="cbbackupmgr-config.html" class="page">cbbackupmgr-config</a>,
<a href="cbbackupmgr-backup.html" class="page">cbbackupmgr-backup</a>,
<a href="cbbackupmgr-merge.html" class="page">cbbackupmgr-merge</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbbackupmgr"><a class="anchor" href="#cbbackupmgr"></a>CBBACKUPMGR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href="cbbackupmgr.html" class="page">cbbackupmgr</a> suite</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
