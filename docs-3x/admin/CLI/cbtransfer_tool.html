<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>cbtransfer tool — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/admin-intro.html"><span>Administration</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/CLI/cli-overview.html"><span>CLI overview</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbcli-intro.html"><span>couchbase-cli tool</span></a></li><li class="section"><a href="../../admin/CLI/cbanalyze-core_tool.html"><span>cbanalyze-core tool</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbbackup_tool.html"><span>cbbackup tool</span></a></li><li class="section"><a href="../../admin/CLI/cbcollect_info_tool.html"><span>cbcollect_info tool</span></a></li><li class="section"><a href="../../admin/CLI/cbdocloader_tool.html"><span>cbdocloader tool</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbepctl-intro.html"><span>cbepctl tool</span></a></li><li class="section"><a href="../../admin/CLI/cbhealthchecker_tool.html"><span>cbhealthchecker tool</span></a></li><li class="section"><a href="../../admin/CLI/cbreset_password_tool.html"><span>cbreset_password tool</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbrestore_tool.html"><span>cbrestore tool</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbstats-intro.html"><span>cbstats tool</span></a></li><li class="section"><a href="../../admin/CLI/cbtransfer_tool.html" class="current"><span>cbtransfer tool</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../admin/CLI/cbworkloadgen_tool.html"><span>cbworkloadgen tool</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
	<h1 class="title topictitle1" id="ariaid-title1">cbtransfer tool</h1>

	
	<div class="body refbody"><p class="shortdesc">The <samp class="ph codeph">cbtransfer</samp> tool is used to transfer data between clusters and
		to/from files. </p>

		
		<section class="section"><h2 class="title sectiontitle">Description</h2>
			
			<p class="p">In addition to transferring data between clusters and to/from files, the
					<samp class="ph codeph">cbtransfer</samp> tool can also be used to create a copy of data from
				a node that is no longer running. This tool is the underlying, generic data transfer
				tool upon which <samp class="ph codeph">cbbackup</samp> and <samp class="ph codeph">cbrestore</samp> are built.
				It is a lightweight extract-transform-load (ETL) tool that can move data from a
				source to a destination. The source and destination parameters are similar to URLs
				or file paths.</p>

			<div class="note note"><span class="notetitle">Note:</span> The most important way to use this tool is for transferring data from a
				Couchbase node that is no longer running to a cluster that is running. The
					<samp class="ph codeph">cbbackup</samp>, <samp class="ph codeph">cbrestore</samp>, and
					<samp class="ph codeph">cbtransfer</samp> tools do not communicate with external IP addresses
				for server nodes outside of a cluster. Backup, restore, or transfer operations are
				performed on data from a node within a Couchbase cluster. They only communicate with
				nodes from a node list obtained within a cluster. If Couchbase Server is installed
				with a default IP address, an external hostname cannot be used to access it.</div>

			<div class="note note"><span class="notetitle">Note:</span> Couchbase Server does not transfer design documents. To back up a design
				document, use <samp class="ph codeph">cbbackup</samp> to store the information and
					<samp class="ph codeph">cbrestore</samp> to read it back into memory.</div>

			<p class="p">The tool is at the following location:</p>

			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
					<col style="width:50%">
					<col style="width:50%">
					<thead class="thead" style="text-align:left;">
						<tr class="row">
							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33944e72">Operating system</th>

							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33944e75">Location</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e72 ">Linux</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e75 "><span class="ph filepath">/opt/couchbase/bin/</span></td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e72 ">Windows</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e75 "><span class="ph filepath">C:\Program&nbsp;Files\Couchbase\Server\bin\</span></td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e72 ">Mac OS X</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e75 "><span class="ph filepath">/Applications/Couchbase&nbsp;Server.app/Contents/Resources/couchbase-core/bin/</span></td>

						</tr>

					</tbody>

				</table>
</div>

		</section>

		
		<section class="section"><h2 class="title sectiontitle">CLI command and parameters</h2>
			
		<p class="p">Basic syntax for this command:</p>

		<pre class="pre codeblock"><code>cbtransfer [options] source destination</code></pre>

			<p class="p">The following are the command options:</p>

			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="cbtransfer-tool__table_zzg_2cl_ss" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. cbtransfer options</span></caption>
					<col style="width:40%">
					<col style="width:60%">
					<thead class="thead" style="text-align:left;">
						<tr class="row">
							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33944e144">Parameters</th>

							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33944e147">Description</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-h, --help</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Command line HELP.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-b BUCKET_SOURCE</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Single named bucket from a source cluster to transfer.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-B BUCKET_DESTINATION</samp>,
									<samp class="ph codeph">--bucket-destination=BUCKET_DESTINATION</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Single named bucket on the destination cluster that receives the
								transfer. You can transfer to a bucket with a different name than
								your source bucket; if you do not provide a name, it defaults to the
								same name as the bucket-source.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-i ID</samp>, <samp class="ph codeph">--id=ID</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Transfer only items that match the vbucket ID.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-k KEY</samp>, <samp class="ph codeph">--key=KEY</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Transfer only items with keys that match the
									<samp class="ph codeph">regexp</samp>. <sup class="ph sup">1</sup></td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-n</samp>, <samp class="ph codeph">--dry-run</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">No actual transfer occurs, just the validation of parameters,
								files, connectivity, and configurations.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-u USERNAME</samp>,
								<samp class="ph codeph">--username=USERNAME</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">REST username for the source cluster or the server node.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-p PASSWORD</samp>,
								<samp class="ph codeph">--password=PASSWORD</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">REST password for the cluster or the server node.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-t THREADS</samp>,
								<samp class="ph codeph">--threads=THREADS</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Number of concurrent worker threads performing the transfer.
								Memcached uses 75% of the number of cores reported of the system
								(with a minimum of 4 cores) <sup class="ph sup">2</sup>.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-v</samp>, <samp class="ph codeph">--verbose</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Verbose logging; provide more verbosity.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">-x EXTRA</samp>, <samp class="ph codeph">--extra=EXTRA</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Provide extra, uncommon configuration parameters.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">--single-node</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Transfer from a single server node in a source cluster. This
								single server node is a source node URL.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">--source-vbucket-state=SOURCE_VBUCKET_STATE</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Only transfer from the source vbuckets occurs in this state, such
								as <samp class="ph codeph">active</samp> (default) or <samp class="ph codeph">replica</samp>.
								Must be used with the Couchbase cluster as a source.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">--destination-vbucket-state=DESTINATION_VBUCKET_STATE</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Only transfer to destination vbuckets in this state, such as
									<samp class="ph codeph">active</samp> (default) or <samp class="ph codeph">replica</samp>.
								Must be used with Couchbase cluster as the destination.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph">--destination-operation=DESTINATION_OPERATION</samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Perform this operation on transfer. <span class="keyword cmdname">set</span> will
								override an existing document;<span class="keyword cmdname">add</span> will not
								override; <span class="keyword cmdname">get</span> will load all keys transferred from
								a source cluster into the caching layer at the destination. <div class="note important"><span class="importanttitle">Important:</span> By default, the <samp class="ph codeph">cbtransfer</samp>
									tool will use <span class="keyword cmdname">set</span> and override any existing
									documents.</div>
</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e144 "><samp class="ph codeph"><span class="ph filepath">/path/to/filename</span></samp></td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e147 ">Export a <samp class="ph codeph">.csv </samp>file from the server or import a
									<samp class="ph codeph">.csv</samp> file to the server. </td>

						</tr>

					</tbody>

				</table>
</div>

			<p class="p"><sup class="ph sup">1</sup>: Regex (Reglar Expression Syntax) specifies a set of strings that
				matches it; the functions in this module let you check if a particular string
				matches a given regular expression (or if a given regular expression matches a
				particular string, which comes down to the same thing). For a complete reference,
				see <a class="xref" href="https://docs.python.org/2/library/re.html" target="_blank">https://docs.python.org/2/library/re.html</a>.</p>

			<div class="p"><sup class="ph sup">2</sup>: To tune memcached to adjust dynamically the number of worker threads,
				do one of the following: <ul class="ul" id="cbtransfer-tool__ul_ofh_2cl_ss">
					<li class="li">Export <samp class="ph codeph">MEMCACHED_NUM_CPUS=number</samp> of threads you want before
						starting Couchbase Server.</li>

					<li class="li">Use the <samp class="ph codeph">-t </samp>&lt;number &gt; command line argument.</li>

					<li class="li">Specify it in the configuration file that is read during startup. Be aware
						that when started from the full server this file is regenerated every time,
						and you will loose the modifications.</li>

				</ul>

			</div>

			<p class="p"> </p>

			<p class="p">The following are extra, specialized command options with the <samp class="ph codeph">cbtransfer -x</samp>
				parameter.</p>

			
			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 2. cbtransfer -x options</span></caption>
				<col style="width:50%">
				<col style="width:50%">
				<thead class="thead" style="text-align:left;">
					<tr class="row">
						<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33944e447"><samp class="ph codeph">-x options</samp></th>

						<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33944e451">Description</th>

					</tr>

					
				</thead>

				<tbody class="tbody">
					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">backoff_cap=10</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Maximum backoff time during the rebalance period.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">batch_max_bytes=400000</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Transfer this # of bytes per batch.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">batch_max_size=1000</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Transfer this # of documents per batch.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">cbb_max_mb=100000</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Split backup file on destination cluster if it exceeds the MB.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">conflict_resolve=1</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">By default, disable conflict resolution.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">data_only=0</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">For value 1, transfer only data from a backup file or cluster.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">design_doc_only=0</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">For value 1, transfer only design documents from a backup file or cluster. Default: 0.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">max_retry=10</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Max number of sequential retries if the transfer fails.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">mcd_compatible=1</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">For value 0, display extended fields for stdout output.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">nmv_retry=1</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">0 or 1, where 1 retries transfer after a NOT_MY_VBUCKET message. Default: 1.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">recv_min_bytes=4096</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Amount of bytes for every TCP/IP batch transferred.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">rehash=0</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">For value 1, rehash the partition IDs of each item. This is required when transferring
								data between clusters with different number of partitions, such as
								when transferring data from a Mac OSX server to a non-Mac OSX
								cluster.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">report=5</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Number of batches transferred before updating progress bar in the console.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">report_full=2000</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Number of batches transferred before emitting progress information in the
								console.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">seqno=0</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">By default, start <samp class="ph codeph">seqno</samp> from beginning.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">try_xwm=1</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">Transfer documents with metadata. Default: 1. Value of 0 is only used when transferring
								from 1.8.x to 1.8.x.</td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e447 "><samp class="ph codeph">uncompress=0</samp></td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33944e451 ">For value 1, restore data in the uncompressed mode.</td>

					</tr>

				</tbody>

			</table>
</div>

		</section>

		
		<section class="section"><h2 class="title sectiontitle">Syntax</h2>
			<p class="p">The following is the basic syntax:</p>

			<pre class="pre codeblock"><code>cbtransfer [options] source destination</code></pre>

			
			
			<p class="p">The following are syntax examples:</p>

			
			<pre class="pre codeblock"><code>
cbtransfer http://SOURCE:8091 /backups/backup-42
cbtransfer /backups/backup-42 http://DEST:8091
cbtransfer /backups/backup-42 couchbase://DEST:8091
cbtransfer http://SOURCE:8091 http://DEST:8091
cbtransfer file.csv http://DEST:8091
			</code></pre>

		
		
		</section>

		
		<section class="section"><h2 class="title sectiontitle">Example: Transferring data to a cluster</h2>
			<p class="p">The following example and response transfers data from a non-running node to a running cluster:</p>

			<p class="p">Syntax:</p>

			<pre class="pre codeblock"><code>
cbtransfer
	couchstore-files://COUCHSTORE_BUCKET_DIR
	couchbase://HOST:PORT
	--bucket-destination=DESTINATION_BUCKET
			</code></pre>

       

<pre class="pre codeblock"><code>cbtransfer
	couchstore-files:///opt/couchbase/var/lib/couchbase/data/default
	couchbase://10.5.3.121:8091
	--bucket-destination=foo
</code></pre>

		
			<p class="p">The response shows 10000 total documents transferred in batch size of 1088 documents each.</p>

		<pre class="pre codeblock"><code>[####################] 100.0% (10000/10000 msgs)
bucket: bucket_name, msgs transferred...
      : total | last | per sec
batch : 1088 | 1088 | 554.8
byte : 5783385 | 5783385 | 3502156.4
msg : 10000 | 10000 | 5230.9
done
</code></pre>

		</section>

		
		<section class="section"><h2 class="title sectiontitle">Example: Transferring data to standard output</h2>
			<p class="p">The following example and response sends all the data from a node to standard output:</p>

		<pre class="pre codeblock"><code>cbtransfer http://10.5.2.37:8091/ stdout:

set pymc40 0 0 10
0000000000
set pymc16 0 0 10
0000000000
set pymc9 0 0 10
0000000000
set pymc53 0 0 10
0000000000
set pymc34 0 0 10
0000000000
</code></pre>

		
		</section>

		
		
		<section class="section"><h2 class="title sectiontitle">Example: Exporting and importing CSV files</h2>
		<p class="p">The <samp class="ph codeph">cbtransfer</samp> tool is also used to import and export <samp class="ph codeph">csv</samp>
				files. Data is imported into Couchbase Server as documents and documents are
				exported from the server into comma-separated values. Design documents associated
				with vBuckets are not included.</p>

			<p class="p">In these examples, the following records are in the default bucket where re-fdeea652a89ec3e9
				is the document ID, 0 are flags, 0 is the expiration, and the CAS value is
				4271152681275955. The actual value is the hash starting with "{""key""....... </p>

		<pre class="pre codeblock"><code>re-fdeea652a89ec3e9,
0,
0,
4271152681275955,
"{""key"":""re-fdeea652a89ec3e9"",
 ""key_num"":4112,
 ""name"":""fdee c3e"",
 ""email"":""fdee@ea.com"",
 ""city"":""a65"",
 ""country"":""2a"",
 ""realm"":""89"",
 ""coins"":650.06,
 ""category"":1,
 ""achievements"":[77, 149, 239, 37, 76],""body"":""xc4ca4238a0b923820d
 .......
""}"
......
</code></pre>

			<p class="p">This example exports these items to a .csv file. All items are transferred from the default
				bucket, <samp class="ph codeph">-b default</samp> available at the node
					<samp class="ph codeph">http://localhost:8091</samp> and put into the
					<samp class="ph codeph">/data.csv</samp> file. If a different bucket is provided for the
					<samp class="ph codeph">-b</samp> option, all items are exported from that bucket. Credentials
				are required for the cluster when exporting items from a bucket in the cluster. </p>

		<pre class="pre codeblock"><code>cbtransfer http://[localhost]:8091 csv:./data.csv -b default -u Administrator -p password
</code></pre>

		
			<p class="p">The following example response is similar to that in other <samp class="ph codeph">cbtransfer</samp>
				scenarios:</p>

		<pre class="pre codeblock"><code>[####################] 100.0% (10000/10000 msgs)
bucket: default, msgs transferred...
       : total | last | per sec
 batch : 1053 | 1053 | 550.8
 byte : 4783385 | 4783385 | 2502156.4
 msg : 10000 | 10000 | 5230.9
2013-05-08 23:26:45,107: mt warning: cannot save bucket design on a CSV destination
done
</code></pre>

		<p class="p">The following example syntax shows 1053 batches of data transferred at 550.8 batches per
				second. The tool outputs “cannot save bucket design….” to indicate that no design
				documents were exported. To import information from a.csv file to a named bucket in
				a cluster:</p>

		<pre class="pre codeblock"><code>cbtransfer /data.csv http://[hostname]:[port] -B bucket_name -u Administrator -p password
</code></pre>

		<p class="p">If the .csv file is not correctly formatted, the following error displays during import:</p>

		<pre class="pre codeblock"><code>w0 error: fails to read from csv file, .....
</code></pre>

			
		</section>

	</div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../admin/cli-intro.html" title="Couchbase Server command-line interface (CLI) tools are provided to manage and monitor clusters, servers, vBuckets, XDCR, and so on.">CLI reference</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../admin/CLI/cbstats-intro.html" title="The cbstats tool is used to get node and cluster-level statistics about performance and items in storage.">cbstats tool</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../admin/CLI/cbworkloadgen_tool.html" title="The cbworkloadgen tool is used to generate random data and perform read/writes.">cbworkloadgen tool</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>