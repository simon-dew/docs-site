<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Warmup — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/admin-intro.html"><span>Administration</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../../admin/cli-intro.html"><span>CLI reference</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../../admin/CLI/cli-overview.html"><span>CLI overview</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/CLI/cbcli-intro.html"><span>couchbase-cli tool</span></a></li><li class="section"><a href="../../../admin/CLI/cbanalyze-core_tool.html"><span>cbanalyze-core tool</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/CLI/cbbackup_tool.html"><span>cbbackup tool</span></a></li><li class="section"><a href="../../../admin/CLI/cbcollect_info_tool.html"><span>cbcollect_info tool</span></a></li><li class="section"><a href="../../../admin/CLI/cbdocloader_tool.html"><span>cbdocloader tool</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/CLI/cbepctl-intro.html"><span>cbepctl tool</span></a></li><li class="section"><a href="../../../admin/CLI/cbhealthchecker_tool.html"><span>cbhealthchecker tool</span></a></li><li class="section"><a href="../../../admin/CLI/cbreset_password_tool.html"><span>cbreset_password tool</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/CLI/cbrestore_tool.html"><span>cbrestore tool</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../../admin/CLI/cbstats-intro.html"><span>cbstats tool</span></a><ul class="sub-sections"><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-generalform.html"><span>General form</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/CLI/CBstats/cbstats-all.html"><span>All</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-allocator.html"><span>Allocator</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-checkpoint.html"><span>Checkpoint</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-config.html"><span>Config</span></a></li><li class="section"><a href="../../../admin/CLI/cli-cbstats-dcp.html"><span>DCP</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-diskinfo.html"><span>Diskinfo</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-dispatcher-job.html"><span>Dispatcher</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-failovers.html"><span>Failovers</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-hash.html"><span>Hash</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-keyvkey.html"><span>Key and vkey</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-kv.html"><span>Kvstore and kvtimings</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-memory.html"><span>Memory</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-reset.html"><span>Reset</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-runtimes.html"><span>Runtimes</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-scheduler.html"><span>Scheduler</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-tap.html"><span>Tap</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-timing.html"><span>Timings</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-uuid.html"><span>UUID</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-vbucket.html"><span>vBucket</span></a></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-warmup.html" class="current"><span>Warmup</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../../admin/CLI/CBstats/cbstats-workload.html"><span>Workload</span></a></li></ul></li><li class="section"><a href="../../../admin/CLI/cbtransfer_tool.html"><span>cbtransfer tool</span></a></li><li class="section"><a href="../../../admin/CLI/cbworkloadgen_tool.html"><span>cbworkloadgen tool</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
	<h1 class="title topictitle1" id="ariaid-title1">Warmup</h1>

	
	
	<div class="body refbody"><p class="shortdesc">The <samp class="ph codeph">cbstats warmup</samp> command shows statistics related to warmup logic.</p>

		<section class="section"><h2 class="title sectiontitle">Description</h2>
			<p class="p">If a Couchbase Server node is starting up for the first
				time, it creates whatever DB files necessary and begin serving data immediately.
				However, if there is already data on disk (likely because the node rebooted or the
				service restarted), the node needs to read all of this data off of disk before it
				can begin serving data. This is called warmup. Depending on the size of data, this
				can take some time. </p>
<p class="p">The <samp class="ph codeph">cbstats warmup</samp> command is used to
				get information about server warmup, including the status of warmup and whether
				warmup is enabled. The following shows the command
			syntax:</p>
<pre class="pre codeblock"><code>cbstats [host]:[dataport] -b bucket_name -p bucket_password raw warmup

cbstats [host]:11210 warmup
</code></pre>

			<p class="p">The bucket does not need to be specified, if the default bucket statistics are being requested.</p>

			
			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. cbstats options</span></caption>
					<col style="width:33.33333333333333%">
					<col style="width:33.33333333333333%">
					<col style="width:33.33333333333333%"><thead class="thead" style="text-align:left;">
						<tr class="row">
							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d24938e51">Option</th>

							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d24938e54">Description</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e51 ">-p</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e54 ">The password for the bucket if one exists.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e51 ">-d</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e54 ">The bucket to get statistics from. Default: default.</td>

						</tr>

					</tbody>

				</table>
</div>

			

			
			<p class="p">The following statistics are of particular interest when monitoring the warmup.</p>
<dl class="dl">
				
					<dt class="dt dlterm">ep_warmup_thread</dt>

					<dd class="dd">This is the overall indication of whether or not warmup is still running.
						Look for values: running and complete.</dd>

				
				
					<dt class="dt dlterm">ep_warmup_state</dt>

					<dd class="dd">This describes which phase of warmup is currently running. Look for values:
						loading keys, loading access log, and done. </dd>

				
			</dl>
<ul class="ul">
				<li class="li">When <samp class="ph codeph">ep_warmup_state</samp> is loading keys, compare
						<samp class="ph codeph">ep_warmup_key_count</samp> (current number) with
						<samp class="ph codeph">ep_warmup_estimated_key_count</samp> (target number).</li>

				<li class="li">When <samp class="ph codeph">ep_warmup_state</samp> is loading access log, compare
						<samp class="ph codeph">ep_warmup_value_count</samp> (current number) with
						<samp class="ph codeph">ep_warmup_estimated_value_count</samp> (target number).</li>

			</ul>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 2. cbstats warmup stats</span></caption>
					<col style="width:33.33333333333333%">
					<col style="width:33.33333333333333%">
					<col style="width:33.33333333333333%">
					<thead class="thead" style="text-align:left;">
						<tr class="row">
							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d24938e148">Statistic</th>

							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d24938e151">Description</th>

							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d24938e154">Value Type</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Shows if warmup is enabled / disabled</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">String values: enabled or disabled</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_dups</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Number of failures due to duplicate keys</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_estimated_key_count</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Estimated number of keys in database</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer. Default: unknown</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_estimate_time</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Estimated time in microseconds to do warmup</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_estimated_value_count</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Estimated number of key data to read based on the access
								log</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer. Default: unknown</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_item_expired</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Number if expired items.</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer. Default: 0</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_keys_count</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Number of keys warmed up</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_keys_time</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Total time spent by loading persisted keys</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_min_item_threshold</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Enable data traffic after loading this percentage of key
								data</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_min_memory_threshold</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Enable data traffic after filling this % of memory</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer (%)</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_oom</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Number of out of memory failures during warmup</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_state</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">The current state of the warmup thread</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">String</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_thread</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Warmup thread status</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">String values: running or complete</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_time</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Total time spent by loading data (warmup)</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer (microseconds) </td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e148 ">ep_warmup_value_count</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e151 ">Number of values warmed up</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d24938e154 ">Integer</td>

						</tr>

					</tbody>

				</table>
</div>
</section>

		
		<section class="section"><h2 class="title sectiontitle">Example</h2>
			<p class="p">Example request:</p>

			<pre class="pre codeblock"><code>
cbstats 10.5.2.117:11210 warmup
			</code></pre>

		
		</section>

		
		<section class="section"><h2 class="title sectiontitle">Response</h2>
			<p class="p">Example response:</p>

			<pre class="pre codeblock"><code>
 ep_warmup:                       enabled
 ep_warmup_dups:                  0
 ep_warmup_estimate_time:         57546
 ep_warmup_estimated_key_count:   0
 ep_warmup_estimated_value_count: unknown
 ep_warmup_item_expired:          0
 ep_warmup_key_count:             0
 ep_warmup_keys_time:             529022
 ep_warmup_min_item_threshold:    100
 ep_warmup_min_memory_threshold:  100
 ep_warmup_oom:                   0
 ep_warmup_state:                 done
 ep_warmup_thread:                complete
 ep_warmup_time:                  529192
 ep_warmup_value_count:           0
	
			</code></pre>

			
		</section>

	</div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../admin/CLI/cbstats-intro.html" title="The cbstats tool is used to get node and cluster-level statistics about performance and items in storage.">cbstats tool</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../../admin/CLI/CBstats/cbstats-vbucket.html" title="The cbstats vbucket commands provide information">vBucket</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../../admin/CLI/CBstats/cbstats-workload.html" title="The cbstats workload command provides the workload status of threads for buckets.">Workload</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../../';</script><script src="../../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>