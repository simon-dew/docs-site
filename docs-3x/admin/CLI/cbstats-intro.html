<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>cbstats tool — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/admin-intro.html"><span>Administration</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/CLI/cli-overview.html"><span>CLI overview</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbcli-intro.html"><span>couchbase-cli tool</span></a></li><li class="section"><a href="../../admin/CLI/cbanalyze-core_tool.html"><span>cbanalyze-core tool</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbbackup_tool.html"><span>cbbackup tool</span></a></li><li class="section"><a href="../../admin/CLI/cbcollect_info_tool.html"><span>cbcollect_info tool</span></a></li><li class="section"><a href="../../admin/CLI/cbdocloader_tool.html"><span>cbdocloader tool</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbepctl-intro.html"><span>cbepctl tool</span></a></li><li class="section"><a href="../../admin/CLI/cbhealthchecker_tool.html"><span>cbhealthchecker tool</span></a></li><li class="section"><a href="../../admin/CLI/cbreset_password_tool.html"><span>cbreset_password tool</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/cbrestore_tool.html"><span>cbrestore tool</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/CLI/cbstats-intro.html" class="current"><span>cbstats tool</span></a><ul class="sub-sections"><li class="section"><a href="../../admin/CLI/CBstats/cbstats-generalform.html"><span>General form</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/CLI/CBstats/cbstats-all.html"><span>All</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-allocator.html"><span>Allocator</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-checkpoint.html"><span>Checkpoint</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-config.html"><span>Config</span></a></li><li class="section"><a href="../../admin/CLI/cli-cbstats-dcp.html"><span>DCP</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-diskinfo.html"><span>Diskinfo</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-dispatcher-job.html"><span>Dispatcher</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-failovers.html"><span>Failovers</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-hash.html"><span>Hash</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-keyvkey.html"><span>Key and vkey</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-kv.html"><span>Kvstore and kvtimings</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-memory.html"><span>Memory</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-reset.html"><span>Reset</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-runtimes.html"><span>Runtimes</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-scheduler.html"><span>Scheduler</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-tap.html"><span>Tap</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-timing.html"><span>Timings</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-uuid.html"><span>UUID</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-vbucket.html"><span>vBucket</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-warmup.html"><span>Warmup</span></a></li><li class="section"><a href="../../admin/CLI/CBstats/cbstats-workload.html"><span>Workload</span></a></li></ul></li><li class="section"><a href="../../admin/CLI/cbtransfer_tool.html"><span>cbtransfer tool</span></a></li><li class="section"><a href="../../admin/CLI/cbworkloadgen_tool.html"><span>cbworkloadgen tool</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
	<h1 class="title topictitle1" id="ariaid-title1">cbstats tool</h1>

	
	<div class="body refbody"><p class="shortdesc">The <samp class="ph codeph">cbstats</samp> tool is used to get node and cluster-level statistics about
		performance and items in storage.</p>

		
		<section class="section"><h2 class="title sectiontitle">Description</h2>
			<p class="p">The <samp class="ph codeph">cbstats</samp> tool is a per-node, per-bucket operation.
				That means that the IP address of a node in the cluster and a named bucket must be specified. 
				If a named bucket is not provided, the server applies the
				setting to any default bucket that exists at the specified node. 
				To perform this operation for an entire cluster, perform the command for every
				node/bucket combination that exists for that cluster.</p>

			
		<p class="p">The tool is found in the following locations:</p>


		
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
				<col style="width:50%"><col style="width:50%"><thead class="thead" style="text-align:left;">
					<tr class="row">
						<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33313e41">Platform</th>

						<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33313e44">Location</th>

					</tr>

				</thead>

				<tbody class="tbody">
					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e41 ">Linux</td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e44 "><samp class="ph codeph">/opt/couchbase/bin/cbstats</samp></td>

					</tr>


					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e41 ">Windows</td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e44 "><samp class="ph codeph">C:\Program&nbsp;Files\Couchbase\Server\bin\cbstats.exe</samp></td>

					</tr>

					<tr class="row">
						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e41 ">Mac OS X</td>

						<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e44 "><samp class="ph codeph">/Applications/Couchbase&nbsp;Server.app/Contents/Resources/couchbase-core/bin/cbstats</samp></td>

					</tr>

				</tbody>

			</table>
</div>

		
			
		</section>

		
		<section class="section"><h2 class="title sectiontitle">CLI command and parameters</h2>
		<p class="p">This tool is used to get the couchbase node statistics. The general format for this command
				is:</p>

			<pre class="pre codeblock"><code>
cbstats [host]:11210 [command] -b [bucket-name] -p [bucket-password]
			</code></pre>

			
			
		
		
		<p class="p">The following are commands. The <samp class="ph codeph">all</samp> and <samp class="ph codeph">timings</samp>
				commands are used to understand cluster or node performance. The majority of these
				commands are predominately used by Couchbase internally and to help resolve
				customer support incidents. </p>

					

		<pre class="pre"><code>
all
allocator
checkpoint [vbid]
config
dcp
dcp-takeover vb name
dcpagg
diskinfo [detail]
dispatcher [logs]
failovers [vbid]
hash [detail]
items (memcached bucket only)
key keyname vbid
kvstore
kvtimings
memory
prev-vbucket
raw argument
reset
runtimes
scheduler
slabs (memcached bucket only)
tap [username password]
tap-takeover vb name
tapagg
timings
vbucket
vbucket-detail [vbid]
vbucket-seqno [vbid]
vkey keyname vbid
warmup
workload
</code></pre>

			<p class="p">The following are command options:</p>

			
			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
					<col style="width:50%"><col style="width:50%"><thead class="thead" style="text-align:left;">
						<tr class="row">
							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33313e121">Options</th>

							<th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d33313e124">Description</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e121 ">-h, --help</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e124 ">Shows the help message and exits.</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e121 ">-b [bucket-name]</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e124 ">The bucket to get the status from. Default: default</td>

						</tr>

						<tr class="row">
							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e121 ">-p [password]</td>

							<td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d33313e124 ">The password for the bucket, if one exists.</td>

						</tr>

					</tbody>

				</table>
</div>

			
			
		</section>

		
		<section class="section"><h2 class="title sectiontitle">Syntax</h2>
			<p class="p">Request syntax:</p>

			<pre class="pre codeblock"><code>
cbstats [host]:11210 [command]
			</code></pre>

		</section>

		
		<section class="section"><h2 class="title sectiontitle">Example: Timings</h2>
			<p class="p">To get statistics, for example, timings on host 10.5.2.117:</p>

			<pre class="pre codeblock"><code>cbstats 10.5.2.117:11210 timings</code></pre>

			
			<p class="p">Response:</p>

			<pre class="pre codeblock"><code>
 disk_commit (1024 total)
    0 - 1s : (100.00%) 1024 ###################################################
    Avg    : (     1s)
 get_stats_cmd (30663276 total)
    0 - 1us       : (  0.05%)    14827 
    1us - 2us     : (  6.56%)  1995778 ##
    2us - 4us     : ( 41.79%) 10804626 ##############
    4us - 8us     : ( 45.20%)  1044043 #
    8us - 16us    : ( 45.49%)    89929 
    16us - 32us   : ( 45.90%)   124472 
    32us - 64us   : ( 46.38%)   148935 
    64us - 128us  : ( 56.17%)  2999690 ###
    128us - 256us : ( 68.57%)  3804009 ####
    256us - 512us : ( 69.91%)   411281 
    512us - 1ms   : ( 78.77%)  2717402 ###
    1ms - 2ms     : ( 96.36%)  5391526 #######
    2ms - 4ms     : ( 99.05%)   826345 #
    4ms - 8ms     : ( 99.96%)   278727 
    8ms - 16ms    : (100.00%)    11443 
    16ms - 32ms   : (100.00%)      217 
    32ms - 65ms   : (100.00%)       19 
    65ms - 131ms  : (100.00%)        7 
    Avg           : (  347us)
 disk_vbstate_snapshot (93280 total)
    32us - 64us   : ( 15.34%) 14308 ######
    64us - 128us  : ( 74.74%) 55413 #########################
    128us - 256us : ( 91.39%) 15532 #######
    256us - 512us : ( 95.69%)  4007 #
    512us - 1ms   : ( 99.49%)  3546 #
    1ms - 2ms     : ( 99.95%)   423 
    2ms - 4ms     : ( 99.99%)    43 
    4ms - 8ms     : (100.00%)     4 
    2s - 4s       : (100.00%)     4 
    Avg           : (  190us)
 notify_io (4 total)
    4us - 8us   : ( 25.00%) 1 ############
    16us - 32us : ( 75.00%) 2 ########################
    32us - 64us : (100.00%) 1 ############
    Avg         : (   17us)
			</code></pre>

			
			
		
		</section>

		
		<section class="section"><h2 class="title sectiontitle">Example: Using with other CLI tools</h2>
		
		<p class="p">The <samp class="ph codeph">cbstats</samp> output can be used with other command-line tools
			to sort and filter the data, for example, the <samp class="ph codeph">watch</samp> command.</p>

		
		<pre class="pre codeblock"><code>watch --diff "cbstats \
    ip-10-12-19-81:11210 -b bucket_name -p bucket_password all | egrep 'item|mem|flusher|ep_queue|bg|eje|resi|warm'"
</code></pre>

		</section>

		
	</div>

	<nav class="related-links"><h2>Related information</h2>
<ol class="olchildlinks">
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-generalform.html">General form</a><br>
This section describes the general form of statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-all.html">All</a><br>
The <samp class="ph codeph">cbstats all</samp> command lists the information used for statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-allocator.html">Allocator</a><br>
The <samp class="ph codeph">cbstats allocator</samp> command provides information on memory management.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-checkpoint.html">Checkpoint</a><br>
Checkpoint stats provide detailed information on per-vbucket checkpoint 		data structure.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-config.html">Config</a><br>
The <samp class="ph codeph">cbstats config</samp> command shows configuration statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/cli-cbstats-dcp.html">DCP</a><br>
Statistics for Database Change Protocol (DCP) are obtained via the CLI with 			the <samp class="ph codeph">cbstats</samp> tool.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-diskinfo.html">Diskinfo</a><br>
The <samp class="ph codeph">cbstats diskinfo</samp> command provides data and file size information.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-dispatcher-job.html">Dispatcher</a><br>
The <samp class="ph codeph">cbstats dispatcher</samp> command gets statistics from reader, writer, auxio, and nonio worker threads.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-failovers.html">Failovers</a><br>
The <samp class="ph codeph">cbstats failovers</samp> command provides ID, sequence, and number of entries information.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-hash.html">Hash</a><br>
The <samp class="ph codeph">cbstats hash</samp> command provides information on vBucket hash tables.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-keyvkey.html">Key and vkey</a><br>
The <samp class="ph codeph">cbstats key</samp> and  <samp class="ph codeph">cbstats vkey</samp> commands provide 		information on keys.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-kv.html">Kvstore and kvtimings</a><br>
The <samp class="ph codeph">cbstats kvstore</samp> and <samp class="ph codeph">kvtimings</samp> commands provide low-level stats and timings  		from the underlying KV storage system.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-memory.html">Memory</a><br>
The <samp class="ph codeph">cbstats memory</samp> command gets memory-related statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-reset.html">Reset</a><br>
The <samp class="ph codeph">cbstats reset</samp> command resets the following reset and reset histogram statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-runtimes.html">Runtimes</a><br>
The <samp class="ph codeph">cbstats runtimes</samp> command provides various information about runtime statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-scheduler.html">Scheduler</a><br>
The <samp class="ph codeph">cbstats scheduler</samp> command provides scheduler task statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-tap.html">Tap</a><br>
The <samp class="ph codeph">cbstats tap</samp> command is used to get statistics associated with 		tap and <samp class="ph codeph">cbstats tapagg</samp> is used to get statistics from named tap 		connections.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-timing.html">Timings</a><br>
The <samp class="ph codeph">cbstats timings</samp> command provides timing statistics.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-uuid.html">UUID</a><br>
The <samp class="ph codeph">cbstats uuid</samp> command provides the UUID for the server node.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-vbucket.html">vBucket</a><br>
The <samp class="ph codeph">cbstats vbucket</samp> commands provide information</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-warmup.html">Warmup</a><br>
The <samp class="ph codeph">cbstats warmup</samp> command shows statistics related to warmup logic.</li>
<li class="link olchildlink"><a href="../../admin/CLI/CBstats/cbstats-workload.html">Workload</a><br>
The <samp class="ph codeph">cbstats workload</samp> command provides the workload status of threads     for buckets.</li>
</ol>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../admin/cli-intro.html" title="Couchbase Server command-line interface (CLI) tools are provided to manage and monitor clusters, servers, vBuckets, XDCR, and so on.">CLI reference</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../admin/CLI/cbrestore_tool.html" title="The cbrestore tool restores data from a file to an entire cluster or to a single bucket in the cluster.">cbrestore tool</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../admin/CLI/cbtransfer_tool.html" title="The cbtransfer tool is used to transfer data between clusters and to/from files.">cbtransfer tool</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="../Monitoring/monitor-statistics.html" title="Couchbase Server provides statistics at multiple levels throughout the cluster.">Couchbase Server statistics</a></div></div>
</nav>
</div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>