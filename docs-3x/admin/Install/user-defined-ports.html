<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Using user-defined ports — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a><ul class="sub-sections"><li class="section"><a href="../../admin/Install/setup-overview.html"><span>Couchbase setup overview</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/Install/pre-install.html"><span>Pre-installation</span></a><ul class="sub-sections"><li class="section"><a href="../../admin/Install/install-resourceReqs.html"><span>Resource requirements</span></a></li><li class="section"><a href="../../admin/Install/install-platforms.html"><span>Supported platforms</span></a></li><li class="section"><a href="../../admin/Install/install-networkPorts.html"><span>Network ports</span></a></li><li class="section"><a href="../../admin/Install/user-defined-ports.html" class="current"><span>Using user-defined ports</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../admin/Install/install-browsers.html"><span>Supported web browsers</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/Install/RHEL-install-intro.html"><span>Red Hat/CentOS/SUSE installation</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Install/Ubuntu-install.html"><span>Ubuntu/Debian installation</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Install/Windows-install.html"><span>Microsoft Windows installation</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Install/Mac-install.html"><span>Mac OS X installation</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Install/post-install.html"><span>Post-installation</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Install/upgrading.html"><span>Upgrading </span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Install/migrating.html"><span>Migrating</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/admin-intro.html"><span>Administration</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
  <h1 class="title topictitle1" id="ariaid-title1">Using user-defined ports</h1>

  
  <div class="body"><p class="shortdesc">You can install and run Couchbase Server with user-defined ports rather than with the
    default ports.</p>

    <p class="p">To run Couchbase server on user-defined ports, make sure that the minimum RAM and CPU are
      available for the Couchbase instance. </p>

    <div class="note important"><span class="importanttitle">Important:</span> If you want to run Couchbase Server on user-defined ports and with multiple
      instances running on a single machine, you have to keep in mind that the standard RPM
      installation for Linux doesn’t allow you to specify separate installation paths needed
      for separate multiple instances. Therefore, you must perform multiple non-root (sudo or
      non-sudo) installations instead.</div>

    
    <div class="note note"><span class="notetitle">Note:</span> Before creating user-defined ports, refer to the list of the <a class="xref" href="install-networkPorts.html" title="Couchbase Server uses specific network ports for communication between server components and with the clients accessing the data stored in the Couchbase cluster.">reserved network ports</a>.</div>

    
    <section class="section"><h2 class="title sectiontitle">Setting up Couchbase Server with user-defined ports</h2>
    <ol class="ol">
      <li class="li">Install Couchbase Server
        <ul class="ul">
          <li class="li">If Couchbase Server is already installed and running, stop it.</li>

        </ul>
</li>

      <li class="li">Add the new user-defined ports to the <span class="ph filepath">/opt/couchbase/etc/couchbase/static_config</span>
        file. <ul class="ul">
          <li class="li">The <span class="ph filepath">/opt/couchbase/etc/couchbase/static_config</span> is the location
              from where the Couchbase Server picks up the configuration parameters.</li>

          <li class="li">If port numbers are not specified, default ports are used.</li>

          <li class="li">To override some or all default ports, append the user-defined ports to the file.</li>

        </ul>
</li>

      <li class="li">(Optional) CAPI port (default 8092) can be edited in the
          <span class="ph filepath">/opt/couchbase/etc/couchdb/default.d/capi.ini</span> file by replacing 8092 with the new
        port name.</li>

      <li class="li">If the Couchbase Server was previously configured, delete the
            <span class="ph filepath">opt/couchbase/var/lib/couchbase/config/config.dat</span> file to remove
          the old configuration.</li>

      <li class="li">Start Couchbase Server.</li>

    </ol>

    </section>

    
    <section class="section"><h2 class="title sectiontitle">Ports to change</h2>
      
    <p class="p">The following are the user-defined ports to add, replace, or append to the
        <span class="ph filepath">/opt/couchbase/etc/couchbase/static_config</span> file. </p>

    <pre class="pre codeblock"><code>
{rest_port, 9000}.                                   
{mccouch_port, 8999}.                         
{memcached_port, 12000}.
{memcached_dedicated_port, 11999}.
{moxi_port, 12001}.
{short_name, "ns_1"}.
{ssl_rest_port,11000}.                       
{ssl_capi_port,11001}.
{ssl_proxy_downstream_port,11002}.
{ssl_proxy_upstream_port,11003}.
</code></pre>

    
    <div class="note note"><span class="notetitle">Note:</span> If the newly configured ports overlap with ports used by other running
        applications, Couchbase Server fails to start. If the newly configured ports overlap with
        ports used by Couchbase buckets, Erlang crash notifications appear in the log file. </div>

      <div class="note note"><span class="notetitle">Note:</span> In order to set up multiple nodes per machine, you need to assign unique
        values to these ports.</div>

      
    </section>

    <section class="section"><h2 class="title sectiontitle">How to map user-defined ports to the default ports</h2> This chart shows how
      certain user-defined ports are mapped to the default ports: <pre class="pre codeblock"><code>
{rest_port, 9000}                    8091 Web administration port                                   
{mccouch_port, 8999}                 11213 Default value for mccouch                         
{memcached_port, 12000}              11211 Client interface (proxy)
{memcached_dedicated_port, 11999}    11211 Client interface (proxy)
{moxi_port, 12001}                   11210 Internal/external bucket port
{ssl_rest_port,11000}                18091 Internal REST HTTPS for SSL                                      
{ssl_capi_port,11001}                18092 Internal CAPI HTTPS for SSL
{ssl_proxy_downstream_port,11002}    11214 Incoming SSL proxy
{ssl_proxy_upstream_port,11003}      11215 Internal outgoing SSL proxy
</code></pre>

      <div class="note important"><span class="importanttitle">Important:</span> </div>
 All default ports are reserved and cannot be used for other
      purposes.</section>
 
  </div>

  <nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../admin/Install/pre-install.html" title="Pre-installation describes requirements, supported configurations, and reserved or restricted items that have to be considered before installing Couchbase Server.">Pre-installation</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../admin/Install/install-networkPorts.html" title="Couchbase Server uses specific network ports for communication between server components and with the clients accessing the data stored in the Couchbase cluster.">Network ports</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../admin/Install/install-browsers.html" title="Supported web browsers include Mozilla Firefox, Apple Safari, Google Chrome, and Microsoft Internet Explorer.">Supported web browsers</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="install-networkPorts.html" title="Couchbase Server uses specific network ports for communication between server components and with the clients accessing the data stored in the Couchbase cluster.">Network ports</a></div></div>
</nav>
</div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>