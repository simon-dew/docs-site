<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Recovering a node — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/admin-intro.html"><span>Administration</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/Misc/admin-basics.html"><span>Administration basics</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/concept-intro.html"><span>Architecture and concepts</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/security/security-intro.html"><span>Security in Couchbase </span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/bp-deployment-considerations.html"><span>Deployment considerations</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Tasks/cluster-management.html"><span>Cluster management</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Monitoring/monitor-intro.html"><span>Monitoring</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/XDCR/xdcr-intro.html"><span>Cross Datacenter Replication (XDCR)</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/UI/ui-intro.html"><span>Web console</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-cluster-summary.html"><span>Cluster Overview</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/UI/ui-server-nodes.html"><span>Server Nodes</span></a><ul class="sub-sections"><li class="section"><a href="../../admin/UI/ui-dcp-queues.html"><span>Viewing DCP queues</span></a></li><li class="section"><a href="../../admin/UI/ui-task-failover-graceful.html"><span>Failing over a node</span></a></li><li class="section"><a href="../../admin/UI/ui-task-node-recovery-incremental.html" class="current"><span>Recovering a node</span></a><ul class="sub-sections"></ul></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-data-buckets.html"><span>Data Buckets</span></a></li><li class="section"><a href="../../admin/UI/ui-views-editor.html"><span>Views</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-xdcr-panel.html"><span>XDCR</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-logs.html"><span>Log</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-settings.html"><span>Settings</span></a></li></ul></li><li class="section"><a href="../../admin/Misc/faq.html"><span>FAQs</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Misc/Trbl-intro.html"><span>Troubleshooting</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
    <h1 class="title topictitle1" id="ariaid-title1">Recovering a node</h1>

    
    <div class="body taskbody"><p class="shortdesc">Recovery is performed after a server node is failed over and before rebalance
        operations. Either Delta or Full recovery can be specified.</p>


        <section class="section context">
            <div class="p">The process for re-adding a server involves: <ol class="ol">
                    <li class="li">Fail over the node using either the graceful or hard failover method.
                        Graceful failover is recommended.</li>

                    <li class="li">After the node is failed over, specify whether to use delta or full
                        recovery.</li>

                    <li class="li">Perform maintenance operations on the node. </li>

                    <li class="li">Rebalance the cluster. During the rebalance, the same server node is added
                        back to the cluster using the specified recovery method.</li>

                </ol>

            </div>

            
            <p class="p">To use delta recovery during failover, recovery, and rebalance operations:</p>

        </section>

        
        
        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Navigate to <span class="ph uicontrol">Server Nodes</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Failover</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Select <span class="ph uicontrol">Graceful Failover</span>.</span>
                <div class="itemgroup info">When failover happens on a specific node, that node is marked as
                    <span class="ph uicontrol">Failed Over: Pending Removal</span></div>
                
                <div class="itemgroup stepresult"><img class="image" src="../images/ui-delta-recovery.png" width="720"></div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Delta Recovery</span>. Alternatively, select <span class="ph uicontrol">Full
                    Recovery</span>.</span>
                <div class="itemgroup info">With delta recovery mode, Couchbase detects (with the Database Change
                    Protocol) which data files are up-to-date and which are out-of-date and then,
                    during rebalance, the existing data files on the failed over server node are
                    retained and the out-of-date files are updated. With full recovery mode, the
                    data files are removed from the failed over server node and then, during
                    rebalance, the node is populated with new data files (active and replica
                    vBuckets).</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To view the status of the server node, click <span class="ph uicontrol">Pending Rebalance</span>.</span>
                <div class="itemgroup info">The server node shows a <span class="ph uicontrol">Pending delta recovery</span> status
                    if delta recovery was selected. If you cancel the recovery, you can re-select
                    either delta or full recovery.</div>
                <div class="itemgroup stepresult"><img class="image" src="../images/ui-delta-recovery-pending.png" width="720"></div>
                
            
                    
                
                
                
            </li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Rebalance</span>.</span>
            <div class="itemgroup info">The rebalance operation must be performed to re-add the failed over server node to
                    the cluster.</div></li>
</ol>

    </div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../admin/UI/ui-server-nodes.html" title="The Server Nodes section shows statistics across the server nodes in the cluster.">Server Nodes</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../admin/UI/ui-task-failover-graceful.html" title="Failover is performed on a specific node via Server Nodes &gt; Failover">Failing over a node</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>