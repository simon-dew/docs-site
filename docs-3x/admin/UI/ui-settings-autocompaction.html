<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Auto-Compaction tab — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/admin-intro.html"><span>Administration</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/Misc/admin-basics.html"><span>Administration basics</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/concept-intro.html"><span>Architecture and concepts</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/security/security-intro.html"><span>Security in Couchbase </span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/bp-deployment-considerations.html"><span>Deployment considerations</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Tasks/cluster-management.html"><span>Cluster management</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Monitoring/monitor-intro.html"><span>Monitoring</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/XDCR/xdcr-intro.html"><span>Cross Datacenter Replication (XDCR)</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/UI/ui-intro.html"><span>Web console</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-cluster-summary.html"><span>Cluster Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-server-nodes.html"><span>Server Nodes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-data-buckets.html"><span>Data Buckets</span></a></li><li class="section"><a href="../../admin/UI/ui-views-editor.html"><span>Views</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-xdcr-panel.html"><span>XDCR</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-logs.html"><span>Log</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/UI/ui-settings.html"><span>Settings</span></a><ul class="sub-sections"><li class="section"><a href="../../admin/UI/ui-settings-cluster.html"><span>Cluster tab</span></a></li><li class="section"><a href="../../admin/UI/ui-settings-update-notifications.html"><span>Update Notifications tab</span></a></li><li class="section"><a href="../../admin/UI/ui-settings-autofailover.html"><span>Auto-Failover tab</span></a></li><li class="section"><a href="../../admin/UI/ui-settings-alerts.html"><span>Alerts tab</span></a></li><li class="section"><a href="../../admin/UI/ui-settings-autocompaction.html" class="current"><span>Auto-Compaction tab</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../admin/UI/ui-settings-sample-buckets.html"><span>Sample Buckets tab</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-settings-account-mgmt.html"><span>Account Management tab</span></a></li></ul></li></ul></li><li class="section"><a href="../../admin/Misc/faq.html"><span>FAQs</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Misc/Trbl-intro.html"><span>Troubleshooting</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
  <h1 class="title topictitle1" id="ariaid-title1">Auto-Compaction tab</h1>

  <div class="body">
    <p class="p">The <span class="ph uicontrol">Auto-Compaction</span> tab
      configures the default auto-compaction settings for all the databases. 
      These can be overridden using per-bucket settings available when creating or editing data buckets. 
      You can provide a purge interval to remove the key and metadata for items that have been deleted or are expired. 
      This is known as ‘tombstone purging’. </p>

    
              <img class="image" src="../images/web-console-server-settings-autocompaction.png" width="720">
    
    <p class="p">The Auto-Compaction tab sets the following default parameters:</p>


      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="topic_etf_npc_34__table_m3c_tqc_34" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. Auto-compaction parameters</span></caption>
          <col style="width:30.959752321981426%">
          <col style="width:69.04024767801857%">
          <thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d109469e38">Parameter</th>

              <th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d109469e41">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e38 ">Database Fragmentation</td>

              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e41 ">If checked, you must specify either the percentage of fragmentation at which
                database compaction will be triggered, or the database size at which compaction will
                be triggered. You can also configure both trigger parameters.</td>

            </tr>

            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e38 ">View Fragmentation</td>

              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e41 ">If checked, you must specify either the percentage of fragmentation at which
                database compaction will be triggered, or the view size at which compaction will be
                triggered. You can also configure both trigger parameters.</td>

            </tr>

            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e38 ">Time Period</td>

              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e41 ">If checked, you must specify the start hour and minute, and end hour and minute
                of the time period when compaction is allowed to occur.</td>

            </tr>

            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e38 ">Abort if run time exceeds the above period</td>

              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e41 ">If checked, if database compaction is running when the configured time period
                ends, the compaction process will be terminated.</td>

            </tr>

            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e38 ">Process Database and View compaction in parallel</td>

              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e41 ">If enabled, database and view compaction will be executed simultaneously,
                implying a heavier processing and disk I/O load during the compaction
                process.</td>

            </tr>

            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e38 ">Metadata Purge Interval</td>

              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d109469e41 ">
                <p class="p">Defaults to three days. Tombstones are records of expired or deleted items and
                  they include the key and metadata. Tombstones are used in Couchbase Server to
                  provide eventual consistency of data between clusters.</p>

                <p class="p">The auto-compaction process waits this number of days before it permanently
                  deletes tombstones for expired or deleted items. </p>

                <p class="p">If you set this value too low, you may see more inconsistent results in views
                  queries such as deleted items in a result set. You may also see inconsistent items
                  in clusters with XDCR set up between the clusters. If you set this value too high,
                  it will delay the server from reclaiming disk space.</p>

              </td>

            </tr>

          </tbody>

        </table>
</div>


    
  </div>

  <nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../admin/UI/ui-settings.html" title="The Settings section provides configuration and information for the cluster, update notifications, auto failover, alerts, auto compaction, sample buckets, and account management.">Settings</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../admin/UI/ui-settings-alerts.html">Alerts tab</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../admin/UI/ui-settings-sample-buckets.html">Sample Buckets tab</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="../Concepts/concept-tombstone.html" title="Tombstones are records of expired or deleted items that include item keys and metadata.">Tombstone purging</a></div>
<div><a class="link" href="../Tasks/tasks-compaction.html" title="Database and view compaction helps to reclaim disk space and reduce fragmentation.">Compacting data files</a></div>
<div><a class="link" href="../REST/rest-bucket-intro.html" title="The Buckets REST API creates, deletes, flushes, and retrieves information about buckets and bucket operations.">Buckets API</a></div>
<div><a class="link" href="../REST/compaction-rest-api.html" title="Compaction is used to reclaim disk space and reduce disk fragmentation.">Compaction API</a></div></div>
</nav>
</div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>