<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>XDCR replication via memcached protocol — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/admin-intro.html"><span>Administration</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/Misc/admin-basics.html"><span>Administration basics</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/concept-intro.html"><span>Architecture and concepts</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/security/security-intro.html"><span>Security in Couchbase </span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/bp-deployment-considerations.html"><span>Deployment considerations</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Tasks/cluster-management.html"><span>Cluster management</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Monitoring/monitor-intro.html"><span>Monitoring</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/XDCR/xdcr-intro.html"><span>Cross Datacenter Replication (XDCR)</span></a><ul class="sub-sections"><li class="section"><a href="../../admin/XDCR/xdcr-usecases.html"><span>XDCR use cases</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-architecture.html"><span>XDCR architecture</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-memory-replication.html"><span>Stream-based XDCR</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-topologies.html"><span>XDCR basic topologies</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-topologies-adv.html"><span>XDCR advanced topologies</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-memcachedReplication.html" class="current"><span>XDCR replication via memcached protocol</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../admin/XDCR/xdcr-systemOutage.html"><span>XDCR and network or system outages</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-docs.html"><span>XDCR document handling</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-flushRequests.html"><span>XDCR flush requests</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-streamMgmt.html"><span>XDCR stream management</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-pause-resume.html"><span>XDCR pause and resume replication</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-dataEncryption.html"><span>XDCR data encryption</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-intro.html"><span>Web console</span></a></li><li class="section"><a href="../../admin/Misc/faq.html"><span>FAQs</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Misc/Trbl-intro.html"><span>Troubleshooting</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
  <h1 class="title topictitle1" id="ariaid-title1">XDCR replication via memcached protocol</h1>

  
  <div class="body"><p class="shortdesc">XDCR can replicate data through the memcached protocol at a destination cluster.</p>

    <p class="p">This mode utilizes highly efficient memcached protocol on the destination cluster for replicating
      changes. The new mode of XDCR increases XDCR throughput, reducing the CPU usage at destination
      cluster and also improves XDCR scalability. </p>

    <p class="p">In earlier versions of Couchbase Server only the REST protocol could be used for replication.
      On a source cluster a work process batched multiple mutations and sent the batch to a
      destination cluster using a REST interface. The REST interface at the destination node
      unpacked the batch of mutations and sent each mutation via a single memcached command. The
      destination cluster then stored mutations in RAM. This process is known as <em class="ph i">CAPI mode
        XDCR</em> as it relies on the REST API known as CAPI.</p>

    <p class="p">This second mode available for XDCR is known as <em class="ph i">XMEM mode XDCR</em> which bypasses the REST
      interface and replicates mutations via the memcached protocol at the destination cluster:</p>

    
      <img class="image" src="../images/XDCR_xmem.png" width="720">
    <p class="p">In this mode, every replication process at a source cluster delivers mutations directly via
      the memcached protocol on the remote cluster. This additional mode does not impact current
      XDCR architecture, rather it is implemented completely within the data communication layer
      used in XDCR. Any external XDCR interface remains the same. The benefit of using this mode is
      performance by increasing XDCR throughput, improving XDCR scalability, and reducing CPU usage
      at destination clusters during replication.</p>

    <p class="p">XDCR can be configured to operate via the new XMEM mode, which is the default or with CAPI
      mode. To change the replication mode, change the setting for
        <samp class="ph codeph">xdcr_replication_mode</samp> via the Web Console or REST API. </p>

  </div>

  <nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../admin/XDCR/xdcr-intro.html" title="XDCR replicates data from one cluster to another cluster primarily for disaster recovery.">Cross Datacenter Replication (XDCR)</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../admin/XDCR/xdcr-topologies-adv.html">XDCR advanced topologies</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../admin/XDCR/xdcr-systemOutage.html" title="XDCR is resilient to intermittent network failures.">XDCR and network or system outages</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="../REST/rest-xdcr-intro.html" title="The XDCR REST API is used to manage Cross Datacenter Replication (XDCR) operations.">XDCR API</a></div></div>
</nav>
</div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>