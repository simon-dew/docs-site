<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>XDCR basic topologies â€” Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/admin-intro.html"><span>Administration</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../admin/Misc/admin-basics.html"><span>Administration basics</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/concept-intro.html"><span>Architecture and concepts</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/security/security-intro.html"><span>Security in Couchbase </span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Concepts/bp-deployment-considerations.html"><span>Deployment considerations</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Tasks/cluster-management.html"><span>Cluster management</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Monitoring/monitor-intro.html"><span>Monitoring</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../admin/XDCR/xdcr-intro.html"><span>Cross Datacenter Replication (XDCR)</span></a><ul class="sub-sections"><li class="section"><a href="../../admin/XDCR/xdcr-usecases.html"><span>XDCR use cases</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-architecture.html"><span>XDCR architecture</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-memory-replication.html"><span>Stream-based XDCR</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-topologies.html" class="current"><span>XDCR basic topologies</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../admin/XDCR/xdcr-topologies-adv.html"><span>XDCR advanced topologies</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-memcachedReplication.html"><span>XDCR replication via memcached protocol</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-systemOutage.html"><span>XDCR and network or system outages</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-docs.html"><span>XDCR document handling</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-flushRequests.html"><span>XDCR flush requests</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-streamMgmt.html"><span>XDCR stream management</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-pause-resume.html"><span>XDCR pause and resume replication</span></a></li><li class="section"><a href="../../admin/XDCR/xdcr-dataEncryption.html"><span>XDCR data encryption</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/UI/ui-intro.html"><span>Web console</span></a></li><li class="section"><a href="../../admin/Misc/faq.html"><span>FAQs</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Misc/Trbl-intro.html"><span>Troubleshooting</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
  <h1 class="title topictitle1" id="ariaid-title1">XDCR basic topologies</h1>

  <div class="body">
    <p class="p">XDCR can be configured to support a variety of different topologies; the most common are
      unidirectional and bidirectional.</p>

    <p class="p">Unidirectional Replication is one-way replication, where active data gets replicated from the
      source cluster to the destination cluster. You may use unidirectional replication when you
      want to create an active offsite backup, replicating data from one cluster to a backup
      cluster.</p>

    <p class="p">Bidirectional Replication enables two clusters to replicate data with each other. Setting up
      bidirectional replication in Couchbase Server involves setting up two unidirectional
      replication links from one cluster to the other. This is useful when you want to load balance
      your workload across two clusters where each cluster bidirectionally replicates data to the
      other cluster.</p>

    <p class="p">In both topologies, data changes on the source cluster are replicated to the destination
      cluster only after they are persisted to disk. You can also have more than two datacenters and
      replicate data between all of them.</p>

    <p class="p">XDCR can be setup on a per bucket basis. A bucket is a logical container for documents in
      Couchbase Server. Depending on your application requirements, you might want to replicate only
      a subset of the data in Couchbase Server between two clusters. With XDCR you can selectively
      pick which buckets to replicate between two clusters in a unidirectional or bidirectional
      fashion. As shown in Figure 3, there is no XDCR between Bucket A (Cluster 1) and Bucket A
      (Cluster 2). Unidirectional XDCR is setup between Bucket B (Cluster 1) and Bucket B (Cluster
      2). There is bidirectional XDCR between Bucket C (Cluster 1) and Bucket C (Cluster 2):</p>

    <p class="p">Cross datacenter replication in Couchbase Server involves replicating active data to
      multiple, geographically diverse datacenters either for disaster recovery or to bring data
      closer to its users for faster data access, as shown in below:</p>

    
        <img class="image" src="../images/xdcr_selective.png" width="720">
      
    <p class="p">As shown above, after the document is stored in Couchbase Server and before XDCR replicates a
      document to other datacenters, a couple of things happen within each Couchbase Server
      node.</p>

    <ol class="ol">
      <li class="li">Each server in a Couchbase cluster has a managed cache. When an application stores a
        document in Couchbase Server it is written into the managed cache.</li>

      <li class="li">The document is added into the intra-cluster replication queue to be replicated to other
        servers within the cluster.</li>

      <li class="li">The document is added into the disk write queue to be asynchronously persisted to disk.
        The document is persisted to disk after the disk-write queue is flushed.</li>

      <li class="li">After the documents are persisted to disk, XDCR pushes the replica documents to other
        clusters. On the destination cluster, replica documents received will be stored in cache.
        This means that replica data on the destination cluster can undergo low latency read/write
        operations: <img class="image" src="../images/xdcr-persistence.png" width="720">
      </li>

    </ol>

  </div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../admin/XDCR/xdcr-intro.html" title="XDCR replicates data from one cluster to another cluster primarily for disaster recovery.">Cross Datacenter Replication (XDCR)</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../admin/XDCR/xdcr-memory-replication.html" title="Stream-based XDCR collects data changes from memory on the source cluster and streams the data changes directly to memory on the destination cluster.">Stream-based XDCR</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../admin/XDCR/xdcr-topologies-adv.html">XDCR advanced topologies</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">Â© 2011â€“2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>