<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Connecting to buckets — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/admin-intro.html"><span>Administration</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../developer/java-2.1/java-intro.html"><span>Java SDK 2.1</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/java-2.0/java-intro.html"><span>Java SDK 2.0</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dotnet-2.1/dotnet-intro.html"><span>.NET SDK 2.1</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../developer/dotnet-2.0/dotnet-intro.html"><span>.NET SDK 2.0</span></a><ul class="sub-sections"><li class="section"><a href="../../developer/dotnet-2.0/overview.html"><span>Overview</span></a></li><li class="section"><a href="../../developer/dotnet-2.0/download-links.html"><span>Download and API Reference</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dotnet-2.0/getting-started.html"><span>Getting started</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../developer/dotnet-2.0/managing-connections.html"><span>Managing server connections </span></a><ul class="sub-sections"><li class="section"><a href="../../developer/dotnet-2.0/configuring-the-client.html"><span>Configuring the client</span></a></li><li class="section"><a href="../../developer/dotnet-2.0/configuration-app-config.html" class="current"><span>Connecting to buckets</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../developer/dotnet-2.0/closing-connections.html"><span>Closing the connection</span></a></li><li class="section"><a href="../../developer/dotnet-2.0/configuring-ssl.html"><span>Configuring SSL</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../developer/dotnet-2.0/documents.html"><span>Working with documents</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dotnet-2.0/querying.html"><span>Querying buckets</span></a></li><li class="section"><a href="../../developer/dotnet-2.0/handling-timeouts.html"><span>Handling timeouts</span></a></li><li class="section"><a href="../../developer/dotnet-2.0/setting-up-logging.html"><span>Setting up logging</span></a></li><li class="section"><a href="../../developer/dotnet-2.0/release-notes.html"><span>Release notes</span></a></li></ul></li></ul></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
 <h1 class="title topictitle1" id="ariaid-title1">Connecting to buckets</h1>

 
 <div class="body conbody"><p class="shortdesc">After you create a <samp class="ph codeph">ClientConfiguration</samp>, you can then connect to a
    cluster by using the <samp class="ph codeph">Cluster</samp> class. </p>

 	<p class="p">To connect to a bucket, create a <samp class="ph codeph">Cluster</samp> object and pass the
				<samp class="ph codeph">ClientConfiguration</samp> object as a parameter, as shown in the following
			example:</p>

   <div class="p">
    <pre class="pre codeblock language-csharp"><code>
  var config = new ClientConfiguration
  {
    Servers = new List&lt;Uri&gt;
    {
      new Uri("http://192.168.56.101:8091/pools"),
      new Uri("http://192.168.56.102:8091/pools"),
      new Uri("http://192.168.56.103:8091/pools"),
      new Uri("http://192.168.56.104:8091/pools"),
    }
  };

  using (var cluster = new Cluster(config))
  {
    //open buckets here
  }  
			</code></pre>

   </div>

   <p class="p">The default constructor allocates a <samp class="ph codeph">ClientConnection</samp> internally with the
			default settings. Creating a <samp class="ph codeph">ClientConfiguration</samp> object is required only
			when you want to override the default settings.</p>

   <p class="p">Now that we have a <samp class="ph codeph">Cluster</samp> object, we can connect to a bucket by calling the
				<span class="keyword apiname">Cluster.OpenBucket()</span> method. The default
				<span class="keyword apiname">OpenBucket()</span> method connects to the default bucket. If you want to
			open a different bucket, use one of the overloads that take a bucket name and password.
			It’s important to note that you do not need to provide a bucket configuration to open
			another bucket; if one doesn’t exist, the client will clone one from the default
			configuration.</p>

   <pre class="pre codeblock language-csharp"><code>
  using (var cluster = new Cluster(config))
  {
      using (var bucket = cluster.OpenBucket())
      {
          //use bucket here
      }
  }
		</code></pre>

   <p class="p">When you call <samp class="ph codeph">OpenBucket()</samp>, internally the client is using the configuration
      provided to establish the connection between the client and the server. The references are
      maintained by the <samp class="ph codeph">Cluster</samp> object; it’s the root object and should be
      long-lived and reused within your application. </p>

 </div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../developer/dotnet-2.0/managing-connections.html" title="TCP connections are a finite resource and need to managed appropriately for an application to perform to expectations, scale to demand and work reliably.">Managing server connections</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../developer/dotnet-2.0/configuring-the-client.html" title="While the client comes with reasonable default configuration settings, sometimes you need to customize the configuration for your unique environment or use case.">Configuring the client</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../developer/dotnet-2.0/closing-connections.html" title="Both Cluster and Cluster objects implement the IDisposable pattern and also have finalizers. That being said, managing the lifetime of these objects is critical for developing robust, high performance applications. In a typical application, you would create a single, static Cluster object that would live for the duration of the application or the process’s lifetime—create the Cluster object when the application starts and call it’s Dispose method when the application shuts down. Depending upon finalization is not suggested, but admissible in certain applications.">Closing the connection</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>