<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Schemaless data modeling — Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/admin-intro.html"><span>Administration</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/first-app.html"><span>Creating your first application</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../developer/dev-guide-3.0/modeling-docs.html"><span>Modeling documents</span></a><ul class="sub-sections"><li class="section"><a href="../../developer/dev-guide-3.0/compare-docs-vs-relational.html"><span>Comparing document-oriented and relational data</span></a></li><li class="section"><a href="../../developer/dev-guide-3.0/using-json-docs.html"><span>Using JSON documents</span></a></li><li class="section"><a href="../../developer/dev-guide-3.0/schemaless.html" class="current"><span>Schemaless data modeling</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../developer/dev-guide-3.0/doc-design-considerations.html"><span>Document design considerations</span></a></li><li class="section"><a href="../../developer/dev-guide-3.0/model-docs-retrieval.html"><span>Modeling documents for retrieval</span></a></li><li class="section"><a href="../../developer/dev-guide-3.0/lookups.html"><span>Using reference documents for lookups</span></a></li><li class="section"><a href="../../developer/dev-guide-3.0/sample-docs.html"><span>Sample storage documents</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/access-data.html"><span>Accessing data with Couchbase SDKs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/store-data.html"><span>Storing data</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/find-data.html"><span>Finding data with views</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/advanced-topics.html"><span>Advanced topics in development</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/client-library.html"><span>Developing a client library</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content"><h1 class="title topictitle1" id="ariaid-title1">Schemaless data modeling</h1>
<div class="body conbody"><p class="p">When you use documents to represent data, a
database schema is optional. The majority of your effort will be creating one or
more documents that will represent application data. This document structure can
evolve over time as your application grows and adds new features.</p>
<p class="p">In Couchbase Server you do not need to perform data modeling and establish
relationships between tables the way you would in a traditional relational
database. Technically, every document you store with structure in Couchbase
Server has its own implicit schema; the schema is represented in how you
organize and nest information in your documents.</p>
<p class="p">While you can choose any structure for your documents, the JSON model in
particular will help you organize your information in a standard way, and enable
you to take advantage of Couchbase Server’s ability to index and query. As a
developer you benefit in several ways from this approach:</p>
<ul class="ul">
<li class="li"><p class="p">Extend the schema at run time, or anytime. You can add new fields for a type of item anytime.
					Changes to your schema can be tracked by a version number, or by other fields as
					needed.</p>
</li>

<li class="li"><p class="p">Document-based data models may better represent the information you want to
 store and the data structures you need in your application.</p>
</li>

<li class="li"><p class="p">You design your application information in documents, rather than model your
 data for a database.</p>
</li>

<li class="li"><p class="p">Converting application information into JSON is very simple; there are many
 options, and there are many libraries widely available for JSON conversion.</p>
</li>

<li class="li"><p class="p">Minimization of one-to-many relationships through use of nested entities and
 therefore, reduction of joins.</p>
</li>

</ul>
<p class="p">When you use JSON documents, you create an application that can use the indexing and querying
			features in Couchbase Server. For more information, see <a class="xref" href="find-data.html#concept1470">Finding data with views</a></p>
<p class="p">There are several considerations to have in mind when you design your JSON
document:</p>
<ul class="ul">
<li class="li"><p class="p">Whether you want to use a <em class="ph i">type</em> field at the highest level of your JSON
 document in order to group and filter object types.</p>
</li>

<li class="li"><p class="p">What particular keys, ids, prefixes or conventions you want to use for items,
 for instance ‘beer_My_Brew.’</p>
</li>

<li class="li"><p class="p">When you want a document to expire, if at all, and what expiration would be
 best.</p>
</li>

<li class="li"><p class="p">If want to use a document to access other documents. In other words, you can
 store keys that refer other documents in a JSON document and get the keys
 through this document. In the NoSQL database jargon, this is often known as
 <dfn class="term">using composite keys</dfn>.</p>
</li>

</ul>
<p class="p">You can use a <samp class="ph codeph">type</samp> field to group together sets of records. For example, the following JSON document contains a <samp class="ph codeph">type</samp> field with the value <samp class="ph codeph">beer</samp> to indicate that the document represents a beer. A document that represents another kind of beverage would use a different value in the type field, such as <samp class="ph codeph">ale</samp> or <samp class="ph codeph">cider</samp>. </p>
<pre class="pre codeblock"><code><samp class="ph codeph">{
    "beer_id": "beer_Hoptimus_Prime",
    "type” : “beer”,
    "abv": 10.0,
    "category": "North American Ale",
    "name": "Hoptimus Prime",
    "style": “Double India Pale Ale”
}
</samp></code></pre>
<p class="p">Here is another type of document in our application which we use to represent
breweries. As in the case of beers, we have a <samp class="ph codeph">type</samp> field we can use now or
later to group and categorize our beer producers:</p>
<pre class="pre codeblock"><code><samp class="ph codeph">{
    "brewery_id": ”brewery_Legacy_Brewing_Co",
    "type” : “brewery",
    "name" : "Legacy Brewing Co.",
    "address": "525 Canal Street
                Reading, Pennsylvania, 19601
                United States",
    "updated": "2010-07-22 20:00:20"
}
</samp></code></pre>
<p class="p">What happens if we want to change the fields we store for a brewery? In this
case we just add the fields to brewery documents. In this case we decide later
that we want to include GPS location of the brewery:</p>
<pre class="pre codeblock"><code><samp class="ph codeph">{
    "brewery_id": ”brewery_Legacy_Brewing_Co”,
    "type” : “brewery”,
    "name" : "Legacy Brewing Co.",
    "address": "525 Canal Street
                Reading, Pennsylvania, 19601
                United States",
    "updated": "2010-07-22 20:00:20",
    "latitude": -75.928469,
    "longitude": 40.325725
}
</samp></code></pre>
<p class="p">So in the case of document-based data, we extend the record by just adding the two new fields for
				<samp class="ph codeph">latitude</samp> and <samp class="ph codeph">longitude</samp>. When we add other breweries
			after this one, we would include these two new fields. For older breweries we can update
			them with the new fields or provide programming logic that shows a default for older
			breweries. The best approach for adding new fields to a document is to perform a
			compare and swap operation on the document to change it; with this type of operation,
			Couchbase Server will send you a message that the data has already changed if someone has
			already changed the record. For more information about compare and swap methods with
			Couchbase, see <a class="xref" href="update-info.html#concept29631__cas">Compare and swap (CAS)</a>.</p>
<p class="p">To create relationships between items, we again use fields. In this example we
create a logical connection between beers and breweries using the <samp class="ph codeph">brewery</samp>
field in our beer document which relates to the <samp class="ph codeph">id</samp> field in the brewery
document. This is analogous to the idea of using a foreign key in traditional
relational database design.</p>
<p class="p">This first document represents a beer, Hoptimus Prime:</p>
<pre class="pre codeblock"><code><samp class="ph codeph">{
    "beer_id": "beer_Hoptimus_Prime",
    "type” : “beer”,
    "abv": 10.0,
    "brewery": ”brewery_Legacy_Brewing_Co",
    "category": "North American Ale",
    "name": "Hoptimus Prime",
    "style": “Double India Pale Ale”
}
</samp></code></pre>
<p class="p">This second document represents the brewery which brews Hoptimus Prime:</p>
<pre class="pre codeblock"><code><samp class="ph codeph">{
    "brewery_id": ”brewery_Legacy_Brewing_Co”,
    "type” : “brewery”,
    "name" : "Legacy Brewing Co.",
    "address": "525 Canal Street
                         Reading, Pennsylvania, 19601
                         United States",
    "updated": "2010-07-22 20:00:20",
    "latitude": -75.928469,
    "longitude": 40.325725
}
</samp></code></pre>
<p class="p">In our beer document, the <samp class="ph codeph">brewery</samp> field points to ‘brewery_Legacy_Brewery_Co’,
			which is the key for the document that represents the brewery. By using this model of
			referencing documents within a document, we create relationships between application
			objects.</p>
</div>
<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../developer/dev-guide-3.0/modeling-docs.html">Modeling documents</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../developer/dev-guide-3.0/using-json-docs.html">Using JSON documents</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../developer/dev-guide-3.0/doc-design-considerations.html">Document design considerations</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>