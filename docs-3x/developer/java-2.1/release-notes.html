<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Release notes â€” Couchbase Server 3.0/3.1</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation">
	<!-- Google Tag Manager -->
				<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MVPNN2"
					height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
				<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
					new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
					j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
					'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
					})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
				<!-- End Google Tag Manager -->
				<header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server 3.0/3.1</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/index.html">Documentation Home</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/nosql-databases/downloads">Downloads</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../admin/Couchbase-intro.html"><span>Introduction</span></a></li><li class="section"><a href="../../admin/Whats-new-3.0.html"><span>What's new in 3.0</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/admin-intro.html"><span>Administration</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rest-intro.html"><span>REST API reference</span></a></li><li class="section section--has-sub-sections"><a href="../../admin/rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li><li class="section"><a href="../../admin/pdfs.html"><span>PDFs</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/intro.html"><span>Overview</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dev-guide-3.0/concepts.html"><span>Developing applications</span></a></li><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../developer/dev-guide-3.0/old-versions.html"><span>Older SDK versions</span></a><ul class="sub-sections"><li class="section section--has-sub-sections&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;section--active"><a href="../../developer/java-2.1/java-intro.html"><span>Java SDK 2.1</span></a><ul class="sub-sections"><li class="section"><a href="../../developer/java-2.1/overview.html"><span>Overview</span></a></li><li class="section"><a href="../../developer/java-2.1/download-links.html"><span>Download and API Reference</span></a></li><li class="section"><a href="../../developer/java-2.1/migrate.html"><span>Migrating from Java SDK 1.4.x to 2.x</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/java-2.1/getting-started.html"><span>Getting started with the Java SDK</span></a></li><li class="section"><a href="../../developer/java-2.1/managing-connections.html"><span>Managing connections</span></a></li><li class="section"><a href="../../developer/java-2.1/env-config.html"><span>Configuring the environment</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/java-2.1/documents.html"><span>Working with documents</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/java-2.1/querying.html"><span>Querying buckets</span></a></li><li class="section"><a href="../../developer/java-2.1/observables.html"><span>Mastering observables</span></a></li><li class="section"><a href="../../developer/java-2.1/logging.html"><span>Setting up logging</span></a></li><li class="section"><a href="../../developer/java-2.1/release-notes.html" class="current"><span>Release notes</span></a><ul class="sub-sections"></ul></li></ul></li><li class="section section--has-sub-sections"><a href="../../developer/java-2.0/java-intro.html"><span>Java SDK 2.0</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dotnet-2.1/dotnet-intro.html"><span>.NET SDK 2.1</span></a></li><li class="section section--has-sub-sections"><a href="../../developer/dotnet-2.0/dotnet-intro.html"><span>.NET SDK 2.0</span></a></li></ul></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
	<h1 class="title topictitle1" id="ariaid-title1">Release notes</h1>

	<p class="shortdesc">Release notes for the 2.1 version of the Java SDK.</p>


	<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../developer/java-2.1/java-intro.html" title="The Couchbase Java SDK provides synchronous and asynchronous (reactive) interfaces that allow your applications to efficiently interact with a Couchbase Server cluster. It provides capabilities to store, update, and retrieve documents in the database and query the database by using N1QL.">Java SDK 2.1</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../developer/java-2.1/logging.html" title="The Couchbase Java SDK has no hard dependency on a specific logger implementation. It tries to find a logger on the class path and uses that logger if it is supported by the SDK. If no logger implementation is found, the standard JDK logger is used.">Setting up logging</a></div>
</div>
</nav><article class="topic concept nested1" aria-labelledby="ariaid-title2" id="ga216">
		<h2 class="title topictitle2" id="ariaid-title2">Couchbase Java Client 2.1.6 GA (2 December 2015)</h2>

		
		<div class="body conbody"><p class="shortdesc">Version 2.1.6 is the sixth bug fix release of the 2.1 series.
			It contains bug fixes and stability improvements in bootstrapping, configuration management, view queries and remove with CAS.</p>


			<section class="section" id="ga216__ga216-fixes"><h3 class="title sectiontitle">Fixed issues</h3>
				
				<p class="p">This release fixes the following issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-864" target="_blank"> JCBC-864</a>:  When used with the durability
						requirements, the <samp class="ph codeph">remove</samp> operation now properly honors the
						CAS when provided inside the <samp class="ph codeph">Document</samp>. It now correctly
						throws <samp class="ph codeph">CASMismatchExceptions</samp> when the CAS does not match
						with the server. Previously, the supplied CAS was ignored, and the
							<samp class="ph codeph">remove</samp> operation was performed without optimistic
						concurrency checks.</li>


					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-263" target="_blank"> JVMCBC-263</a>: A bug in the view query parser has
						been uncovered which would make the parser hang when the key, in particular,
						includes a closing <samp class="ph codeph">}</samp> but no opening <samp class="ph codeph">{</samp>
						inside a string.</li>


					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-262" target="_blank"> JVMCBC-262</a>: The logic that performs a proactive
						load of new configurations through the "Carrier Publication" mechanism now
						only targets nodes where the KV-Service is enabled. Such targeting is
						important in multi-dimensional scaling (MDS) scenarios so that it doesn't
						address the nodes where only the query or indexing services are
						enabled.</li>


					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-102" target="_blank"> JVMCBC-102</a>: The initial bootstrap process has
						been made more resilient to individual node failures, fixing many bugs
						around initial bootstrapping. This improvement especially affects the case
						where one of the nodes was not responding and opening a
							<samp class="ph codeph">memcached</samp> type bucket. It now works correctly, which
						involves internally skipping over not responding nodes as well as falling
						back from carrier publication to the HTTP bootstrapping approach.</li>


					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-257" target="_blank"> JVMCBC-257</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-265" target="_blank">JVMCBC-265</a>: The configuration management logic
						has been improved in various places, making it more resilient to failed
						bucket open attempts or cleaning up the state properly. The proactive
						configuration loading approach was also optimized when no buckets are open
						or are currently being closed. In particular, one issue has been resolved
						where an asynchronous open bucket attempt with a fallback to a good one did
						not work previously.</li>

				</ul>

			</section>


		</div>

	</article>


	<article class="topic concept nested1" aria-labelledby="ariaid-title3" id="ga215">
		<h2 class="title topictitle2" id="ariaid-title3">Couchbase Java Client 2.1.5 GA (13 October 2015)</h2>

		
		<div class="body conbody"><p class="shortdesc">Version 2.1.5 is the fifth bug fix release of the 2.1 series. It contains bug
			fixes and correctness improvements, especially during bootstrap, shutdown and when
			SSL is enabled.</p>


			<section class="section" id="ga215__ga215-features"><h3 class="title sectiontitle">New features and behavioral changes</h3>
				
				<p class="p">This release contains the following enhancements:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-229" target="_blank">JVMCBC-229</a>: In various forum questions we've identified DNS issues as a common problem for timeouts during the open bucket phase. To help with easier debugging, we now proactively perform the DNS lookup in advance and print a WARNING log if it takes much longer than it should (over 1 second).</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-222" target="_blank">JVMCBC-222</a>: Multi Dimensional Scaling (MDS) support for Memcached buckets has been introduced to be forward compatible with Couchbase Server 4.0 and later.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-250" target="_blank">JVMCBC-250</a>: An explicit, lower (configurable) socket connect timeout is now always used when connections are established. This provides more reliable semantics during the socket open phase and allows for faster retrying mechanisms inside the core layer.</li>

				</ul>

			</section>


			<section class="section" id="ga215__ga215-fixes"><h3 class="title sectiontitle">Fixed issues</h3>
				
				<p class="p">This release fixes the following issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-834" target="_blank">JCBC-834</a>: The <samp class="ph codeph">query(SpatialView)</samp> method was using the wrong timeout setting (N1qlQuery instead of ViewQuery). This has been fixed and it is now using the proper view timeout.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-239" target="_blank">JVMCBC-239</a>: A bug in the N1QL response parser has been fixed which was sometimes triggered during server node restarts. The parser would not be able to move on and be stuck in an invalid state of the stream parsing phase, resulting in consistent and non-recovering timeouts on subsequent queries.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-231" target="_blank">JVMCBC-231</a>: A race condition in the reconfiguration logic during shutdown has been fixed which makes this part of the phase much more resilient.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-251" target="_blank">JVMCBC-251</a>: Full cleanup of SDK-owned threads during full shutdown, diagnostics have been made easier through new logs, and cb-io threads are more aggressively cleaned up, leading to more correct behaviour especially when performing redeployments in an application container.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-248" target="_blank">JVMCBC-248</a>: SSL Handshake failures during the connect phase are now more explicitly handled
							and propagate the right error up the call stack.</li>

				</ul>

			</section>


		</div>

	</article>


	<article class="topic concept nested1" aria-labelledby="ariaid-title4" id="ga214">
		<h2 class="title topictitle2" id="ariaid-title4">Couchbase Java Client 2.1.4 GA (7 July 2015)</h2>

		
		<div class="body conbody"><p class="shortdesc">Version 2.1.4 is the fourth bug fix release of the 2.1 series. It contains bug
			fixes and correctness improvements, especially during node failures when durability
			requirements and/or replica read operations are used. Also, reported stuck threads after
			shutdown have been fixed.</p>


			<section class="section" id="ga214__ga214-fixes"><h3 class="title sectiontitle">Fixed issues</h3>
				
				<p class="p">This release fixes the following issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-766" target="_blank">JCBC-766</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-197" target="_blank">JVMCBC-197</a>: If the list of keys passed in for a view
						query exceeds the limit allowed for a HTTP GET request, it will fail. For that
						reason, the keys are now transparently delivered in the body of the HTTP request,
						allowing it to work with an unbounded number of keys.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-790" target="_blank">JCBC-790</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-211" target="_blank">JVMCBC-211</a>: When <samp class="ph codeph">ReplicaMode.ALL</samp> is
						used to perform a replica read on the <strong class="ph b">blocking API</strong>, the client now
						transparently drops all partitions which are not available, returning the partial
						responses much more quickly. During a failover transition phase, the behavior
						still depends on the failure mode used. By default it will retry based on the
						timeout before the results are returned, if the fail fast mode is used the results
						will return more quickly. While we are planning to add a blocking
							<samp class="ph codeph">Iterator</samp> API in the future, right now you can easily fallback
						to the asynchronous API to fetch the responding items as they come along. See the
						documentation for the <samp class="ph codeph">getFromReplica</samp> for more information.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-202" target="_blank">JVMCBC-202</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-204" target="_blank">JVMCBC-204</a>: When durability requirements are used, the
						underlying observe poll mechanism is now more resilient to node failures.
						Previously, it was possible that those observe poll cycles got stuck, either
						because the underlying operations were timing out (and made the whole batch to
						time out as well), or the logic suffered from a condition where the operations
						were written, but not flushed (which caused them to be stuck in the write queue
						and not transmissioned to NIO/the networking subsystem).</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-201" target="_blank">JVMCBC-201</a>: During shutdown, all the Couchbase-owned
						threads are now properly terminated. They were always daemon-threads, but in some
						environments they need to be explicitly closed so that redeploy works without
						issues. With this change the core scheduler threads are properly terminated, but
						this only works if no other scheduler is passed in manually. If this is done, the
						termination of the threads is up to the user, because the client can't control
						where it is needed as well.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-209" target="_blank">JVMCBC-209</a>: A race condition between a socket
						disconnect and its automated reconnect logic could lead to a pathological
						situation where, even if properly instructed to disconnect, the socket will be
						reestablished over and over again. This race condition has been fixed and
						additional guards for the shutdown state transition have been put in place to
						override any other potential race conditions permanently.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-778" target="_blank">JCBC-778</a>: A small change in the DCP code avoids a false
						alarm triggered by an unknown message in the flow. More DCP enhancements are in
						the pipeline and are likely to ship in the 2.2 branch.</li>

				</ul>

			</section>


		</div>

	</article>


	<article class="topic concept nested1" aria-labelledby="ariaid-title5" id="ga213">
		<h2 class="title topictitle2" id="ariaid-title5">Couchbase Java Client 2.1.3 GA (4 May 2015)</h2>

		
		<div class="body conbody"><p class="shortdesc">Version 2.1.3 is the third bug fix release of the 2.1 series. It contains bug fixes and
			correctness improvements, especially when multiple buckets are open or streaming
			connections are used to grab configuration changes (that is for all memcached buckets and
			Couchbase buckets on Server 2.2 and older).</p>


			<section class="section" id="ga213__ga213-features"><h3 class="title sectiontitle">New features and behavioral changes</h3>
				
				<p class="p">This release contains the following enhancements:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-188" target="_blank">JVMCBC-188</a>: Authentication headers are now sent to the
						remote node when the <samp class="ph codeph">Query</samp> service is used, and as a result
						password-protected buckets can now also be used for N1QL queries.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-191" target="_blank">JVMCBC-191</a>: If the server returns unknown status codes,
						they are logged for easier debuggability in support tickets.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-192" target="_blank">JVMCBC-192</a>: When <samp class="ph codeph">KeyValue</samp> endpoints
						are idle (that is, no key/value traffic is going through to a specific node for
						the configured time), in addition to heartbeats, the client now also proactively
						fetches a new cluster configuration. This avoids undetected cluster topology
						changes during idle load scenarios.</li>

				</ul>

			</section>


			<section class="section" id="ga213__ga213-fixes"><h3 class="title sectiontitle">Fixed issues</h3>
				
				<p class="p">This release fixes the following issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-187" target="_blank">JVMCBC-187</a>: Document IDs with special characters (that
						is, when a character takes more than one byte) are now properly encoded and
						decoded. Previously they were not stored correctly and as a result corrupted the
						wire protocol and the IDs ended up in a bad state on the node.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-195" target="_blank">JVMCBC-195</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-185" target="_blank">JVMCBC-185</a>: Multiple issues around HTTP config
						streaming have been fixed. The code now properly restores a new HTTP streaming
						connection when the old one gets closed. This is important for all
							<samp class="ph codeph">memcached</samp> buckets, as well as <samp class="ph codeph">couchbase</samp>
						buckets on Couchbase Server 2.2 and older.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-184" target="_blank">JVMCBC-184</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-194" target="_blank">JVMCBC-194</a>: Multiple issues around configuration
						management when multiple buckets are open at the same time have been fixed.
						Multiple configurations were racing each other in special cases which lead to
						pathological situations where no new config was picked up as a result. This has
						been fixed.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-186" target="_blank">JVMCBC-186</a>: When some of the nodes in the bootstrap
						list are not discoverable through the Java <samp class="ph codeph">InetAddr</samp>, the code now
						ignores (and logs) the error and keeps moving forward. If at least one of the
						other nodes in the list is correct, the bootstrap wil continue. If all of them
						fail, the bootstrap process will be aborted as before.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-193" target="_blank">JVMCBC-193</a>: All internal RxJava
							<samp class="ph codeph">Subjects</samp> that can be written from more than one thread are now
						properly serialized, ensuring that no updates are lost. This is especially
						important for the internal configuration stream to not loose any new
						configurations at any point in time or raise errors.</li>


				</ul>

			</section>


		</div>

	</article>


	<article class="topic concept nested1" aria-labelledby="ariaid-title6" id="ga212">
		<h2 class="title topictitle2" id="ariaid-title6">Couchbase Java Client 2.1.2 GA (3 April 2015)</h2>

		
		<div class="body conbody"><p class="shortdesc">Version 2.1.2 is the second bug fix release of the 2.1 series. It contains bug
			fixes and correctness improvements, especially related to durability requirements,
			streaming parsers and unstable cluster behavior.</p>


			<section class="section" id="ga212__ga212-features"><h3 class="title sectiontitle">New features and behavioral changes</h3>
				
				<p class="p">This release contains the following enhancements:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-729" target="_blank">JCBC-729</a>: Decoding JSON long numbers has been made more
						performant because it does not go through a catch block on parsing an int value
						anymore.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-724" target="_blank">JCBC-724</a>: The environment configuration dump on startup
						now also includes the settings from the <samp class="ph codeph">CouchbaseEnvironment</samp>, not
						just the <samp class="ph codeph">CoreEnvironment</samp>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-725" target="_blank">JCBC-725</a>: The N1QL metrics are now exposed as a
						strongly typed <samp class="ph codeph">QueryMetrics</samp> object instead of the more generic
							<samp class="ph codeph">JsonObject</samp> object. It provides direct method access to
						parameters like <samp class="ph codeph">executionTime</samp>, <samp class="ph codeph">resultSize</samp> and
						many more.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-735" target="_blank">JCBC-735</a>: The <samp class="ph codeph">signature</samp> field returned
						by the server can be more than just a <samp class="ph codeph">JsonObject</samp>, so the parsing
						has been modified and it is now exposed as a more generic <samp class="ph codeph">Object</samp>
						type.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-168" target="_blank">JVMCBC-168</a>: Nagle's algorithm is now disabled by
						default, providing slightly better performance especially when lots of small
						packets are sent (for example, under get-heavy workloads).</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-170" target="_blank">JVMCBC-170</a>: A hard minimum pool size for both the I/)
						and computation pools of 3 is now enforced to avoid resource starvation if either
						the operating system returns a very small CPU count or it is configured lower than
						the boundary. An INFO level message is logged as well.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-167" target="_blank">JVMCBC-167</a>: An environment configuration option has
						been added that allows you to disable the buffer pooling. While not recommended in
						general, it can be a helpful switch if there is an indication that the SDK is
						leaking memory. If pooling is disabled, a higher garbage collection pressure is
						expected. It can be disabled like this: <pre class="pre codeblock language-java"><code>CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .bufferPoolingEnabled(false)
    .build();</code></pre>
</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-554" target="_blank">JCBC-554</a>: A new experimental utility class is provided
						that greatly simplifies asynchronous retry logic. By using this class, you can
						specify in a builder-like fashion the type of exceptions to retry and the retry
						interval. The following example configures the application to retry
							<samp class="ph codeph">BackpressureException</samp> exceptions at 10 millisecond intervals
						with a maximum of 8 retries allowed, but lets all other exceptions pass through
						without being retried: <pre class="pre codeblock language-java"><code>import static com.couchbase.client.java.util.retry.RetryBuilder.anyOf;

Observable
    .from(ids)
    .flatMap(id -&gt; bucket.upsert(JsonDocument.create(id, JsonObject.empty())))
    .retryWhen(anyOf(BackpressureException.class).delay(Delay.fixed(10, TimeUnit.MILLISECONDS)).max(8).build())
    .subscribe();</code></pre>
</li>


				</ul>

			</section>


			<section class="section" id="ga212__ga212-fixes"><h3 class="title sectiontitle">Fixed issues</h3>
				
				<p class="p">This release fixes the following issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-171" target="_blank">JVMCBC-171</a>: The regression introduced in 2.1.1 has been
						fixed where the SDK tries to connect to <samp class="ph codeph">localhost</samp>, even when the
						nodes are running on remote servers. The issue only showed up in the combination
						of SDK 2.1.1 with Couchbase Server 3.0.0, 3.0.1 (all platforms) and 3.0.2
						(Windows).</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-154" target="_blank">JVMCBC-154</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-163" target="_blank">JVMCBC-163</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-177" target="_blank">JVMCBC-177</a>: Multiple fixes for various rebalance and
						failure scenarios have been implemented in the core layer to react more
						deterministically. Especially parallel configuration pulling from various other
						nodes has been improved as well as continuous configuration polling after every
						failed reconnect attempt has been added.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-728" target="_blank">JCBC-728</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-731" target="_blank">JCBC-731</a>: The <samp class="ph codeph">JsonLongDocument</samp> is now
						fully interoperable when used together on the mutation methods and the counter
						method. Previously, there were issues when a value written by the counter method
						was read by <samp class="ph codeph">get</samp> and vice versa. In addition, the counter method
						now correctly uses the documented default value of 0 as advertised in the
						Javadocs.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-166" target="_blank">JVMCBC-166</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-175" target="_blank">JVMCBC-175</a>: Durability constraints
							(<samp class="ph codeph">ReplicateTo</samp>, <samp class="ph codeph">PersistTo</samp>) internals have been
						reworked and are now correct. In particular, they take the returned CAS value into
						account to make sure only success is reported when the document is overwritten on
						the replica. In addition, the active partition is always polled (even when not
						explicitly needed) to correctly determine concurrent modifications of the same
						document.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-723" target="_blank">JCBC-723</a>: When a <samp class="ph codeph">touch</samp> operation does
						not find the document with the given ID, it now properly throws a
							<samp class="ph codeph">DocumentDoesNotExistException</samp>. Previously, a generic exception
						was thrown that did not hold the semantical information needed to react properly
						on the application side.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-165" target="_blank">JVMCBC-165</a>: Thanks to a user contribution, the client
						now never adds line breaks on internal HTTP Basic auth requests against the
						configuration or view service (and in the future the N1QL service).</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-176" target="_blank">JVMCBC-176</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-740" target="_blank">JCBC-740</a>: In the <samp class="ph codeph">AsyncViewResponse</samp>
						errors are now exposed as an <samp class="ph codeph">Observable</samp> because they can also
						come after the emitted rows in the response. The core layer has been modified to
						take this into account and the java binding reflects the change. The blocking API
						has not changed.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-172" target="_blank">JVMCBC-172</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-174" target="_blank">JVMCBC-174</a>: Two parsing issues have been fixed in the
						N1QL streaming parser. It now correctly decodes all possible JSON ways of a
						signature and also it properly waits for the actual last chunk of the query
						response before accepting a new request. This mitigates some errors and a form of
						a race condition that was showing up in continuous N1QL requests.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-173" target="_blank">JVMCBC-173</a>: Internal DCP compatibility has been
						restored which was broken in the last versions. It now uses a special form of a
						transient endpoint and works again.</li>

				</ul>


			</section>


		</div>

	</article>


	<article class="topic concept nested1" aria-labelledby="ariaid-title7" id="ga211">
		<h2 class="title topictitle2" id="ariaid-title7">Couchbase Java Client 2.1.1 GA (2 March 2015)</h2>

		

		<div class="body conbody"><p class="shortdesc">Version 2.1.1 is the first bug fix release of the 2.1 series. It contains bug fixes
			and correctness improvements, especially around <samp class="ph codeph">PersistTo</samp> and
				<samp class="ph codeph">ReplicateTo</samp> and query handling.</p>


			<section class="section" id="ga211__ga211-features"><h3 class="title sectiontitle">New features and behavioral changes</h3>
				
				<p class="p">This release contains the following enhancements:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-136" target="_blank">JVMCBC-136</a>: A new underlying subject has been
						introduced that makes it possible that even if the user does not subscribe to an
						observable stream (in the view and query cases) the underlying buffers are freed
						and not accidentally leaked. While the developer is in charge to consume all data
						that has been asked for, this is a second line of defense that should prevent
						accidental leaking.<p class="p">To properly implement this, a contract has been established
							that needs to be followed. In general this should never come up, but if you run
							across them there is a good chance your application logic is doing something
							odd and you should reconsider it:</p>
<ul class="ul">
							<li class="li">You need to subscribe to an observable in a specific amount of time. By
								default, this time is 2 seconds and can (but shouldn't) be modified through
								the environmental <samp class="ph codeph">autoreleaseAfter</samp> setting. If you tune
								this to a high value, many buffers might end up in the old generation before
								being automatically cleaned up, and this will make your garbage collection
								profile worse.</li>

							<li class="li">You cannot subscribe more than once to the observable. If you want to do
								this, use the facilities provided by RxJava (like <samp class="ph codeph">connect</samp>
								and <samp class="ph codeph">cache</samp>) to do this.</li>

						</ul>
For now, these rules only apply to all observables exposed in the results
						from both view and query requests. All other operations are not affected by this,
						but keep in mind that requesting an operation and not consuming it can always lead
						to bad situations where data is not properly freed or cleaned up. </li>


					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-717" target="_blank">JCBC-717</a>: The <samp class="ph codeph">signature</samp> field is now
						exposed on a query result.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-707" target="_blank">JCBC-707</a>: We were able to reduce garbage collection
						(GC) pressure a little bit by not going through the intermediary
							<samp class="ph codeph">String</samp> representation anymore when using the
							<samp class="ph codeph">JsonDocument</samp> or the <samp class="ph codeph">JsonArrayDocument</samp>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-711" target="_blank">JCBC-711</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-709" target="_blank">JCBC-709</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-711" target="_blank">JCBC-711</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-706" target="_blank">JCBC-706</a>: In preparation for our upcoming Apache Spark
						integration, we had to make some classes serializable. This has no impact
						whatsoever on the interfaces, but is mentioned here in case someone also needs
						that functionality independently.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-703" target="_blank">JCBC-703</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-704" target="_blank">JCBC-704</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-146" target="_blank">JVMCBC-146</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-147" target="_blank">JVMCBC-147</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-149" target="_blank">JVMCBC-149</a>: The complete code path used with
							<samp class="ph codeph">PersistTo</samp> or <samp class="ph codeph">ReplicateTo</samp> overloads has been
						overhauled and optimized. It also now supports proper fail fast abort mechanisms
						when the fail fast retry strategy is used, properly channels all errors into a
							<samp class="ph codeph">DurabilityException</samp>, and raises proper errors when the replica
						is not configured on the bucket. All in all, the current code is faster and easier
						to reason about, especially during failure scenarios.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-137" target="_blank">JVMCBC-137</a>: The SDK has been equipped with
						forward-compatible functionality to support a later release of Couchbase Server.
						Information about those features will be announced separately in the future. </li>

				</ul>

			</section>


			<section class="section" id="ga211__ga211-fixes"><h3 class="title sectiontitle">Fixed issues</h3>
				
				<p class="p">This release fixes the following issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-150" target="_blank">JVMCBC-150</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-148" target="_blank">JVMCBC-148</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-708" target="_blank">JCBC-708</a>: Locking failures are now properly
						distinguishable from temporary failures. The server does not in all cases send
						back the semantically correct error message, so the client does some additional
						guesswork to present the user an accurate error as possible. A new
							<samp class="ph codeph">TemporaryLockFailureException</samp> has been added that will be
						thrown on double locking attempts as well as when unlock is called with an invalid
							<samp class="ph codeph">cas</samp>. Refer to the Javadoc API reference about each method for
						the full details and error signatures.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-571" target="_blank">JCBC-571</a>: Certainly an edge case, but possible: when
						too many <samp class="ph codeph">keys</samp> are passed into a <samp class="ph codeph">ViewQuery</samp> the
						code now properly converts the underlying request from GET into POST to not risk
						HTTP errors from the view server. </li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-144" target="_blank">JVMCBC-144</a>: 2.1.0 introduced source JAR rewriting of
						dependencies so that breakpoints could be properly set on
						<samp class="ph codeph">core-io</samp>, but a bug crept in with some of the Netty dependencies.
						This has been fixed and everything should be properly debuggable now.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-138" target="_blank">JVMCBC-138</a>: A fix is in place that prevents node
						connect/disconnect events from happening more than once, resulting in misleading
						but harmless double log messages.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-145" target="_blank">JVMCBC-145</a>: An important bug has been fixed where the
						response flags from an <samp class="ph codeph">Observe</samp> call were not correctly parsed,
						leading to never completing PersistTo/ReplicateTo calls.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-719" target="_blank">JCBC-719</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-713" target="_blank">JCBC-713</a>: A small leak in the <samp class="ph codeph">flush()</samp>
						method has been fixed and its internal implementation has been rewritten to be
						more compliant with RX best practices. Also, it now stores marker documents in all
						partitions instead of just one and polls them. This reduces the likelihood of
						prematurely returning to the user that the flush is complete when it isn't
						yet.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-141" target="_blank">JVMCBC-141</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-142" target="_blank">JVMCBC-142</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-143" target="_blank">JVMCBC-143</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-151" target="_blank">JVMCBC-151</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-152" target="_blank">JVMCBC-152</a>: Several bugs in the Query streaming handler
						have been fixed. Also, the keep-alive logic on the Query handler has been enhanced
						and now uses the correct endpoint on the server side.</li>

				</ul>


			</section>



			<section class="section" id="ga211__ga211-known"><h3 class="title sectiontitle">Known issues</h3>
				
				<p class="p">This release has the following known issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-154" target="_blank">JVMCBC-154</a>: When a failover is performed and there are
						operations in the pipeline, it could be that some of them are not properly cleaned
						up during the cancellation phase. The leak detector might report a leak, but it
						should not affect a long running application very much. This is going to be fixed
						in one of the next versions, but should not harm a production application in a
						blocking fashion.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-171" target="_blank">JVMCBC-171</a>: A regression has been introduced in 2.1.1
						which manifests in a way that when connected to a 3.0 or higher remote cluster the
						SDK still wants to contact <samp class="ph codeph">127.0.0.1/localhost</samp>. Please upgrade to
						2.1.2 if you hit the issue.</li>

				</ul>


			</section>


		</div>

	</article>



	<article class="topic concept nested1" aria-labelledby="ariaid-title8" id="ga210">
		<h2 class="title topictitle2" id="ariaid-title8">Couchbase Java Client 2.1.0 GA (3 February 2015)</h2>

		

		<div class="body conbody"><p class="shortdesc">Version 2.1.0 GA is the first stable release of the 2.1 series. It brings many
			enhancements and bug fixes over the 2.0 series (since 2.0.3).</p>


			<section class="section" id="ga210__ga210-features"><h3 class="title sectiontitle">New features and behavioral changes</h3>
				
				<p class="p">This release contains the following enhancements:</p>


				<ul class="ul">
					<li class="li">Support for N1QL DP4: The <samp class="ph codeph">query()</samp> methods have been reworked to
						provide closer integration with the new APIs available for N1QL DP4. In
						particular, the <samp class="ph codeph">Statement</samp> has been introduced and there is no
						support for raw, parameterized and prepared queries. For more information about
						using N1QL, see <a class="xref" href="http://blog.couchbase.com/n1ql-dp4-java-sdk" target="_blank">Preview using N1QL DP4 from the Java
						SDK</a>.</li>

					<li class="li">Support for spatial view queries: Support for spatial view queries has been
						added, which work very similar to the regular view queries. Note that at the time
						of release, the current server version still marks its support as experimental.
						Also, because the underlying response has changed since Couchbase Server 3.0, it
						is not backward compatible with the geospatial views on Couchbase Server 2.5 and
						earlier. For more information about spatial view queries, see <a class="xref" href="querying-views.html#concept2677" title="This section describes how to query views in a design document.">Working with views</a>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-92" target="_blank">JVMCBC-92</a>: The poll interval for
							<samp class="ph codeph">ReplicateTo</samp> and <samp class="ph codeph">PersistTo</samp> can now be
						configured on the environment through the <samp class="ph codeph">observeIntervalDelay</samp>
						setting. For information about the options and default settings, see <a class="xref" href="env-config.html#concepteEnvConfig" title="The CouchbaseEnvironment class enables you to configure Java SDK options for bootstrapping, timeouts, reliability, and performance.">Configuring the environment</a>.</li>

					<li class="li">Pluggable request retry strategies: Because of popular demand, pluggable retry
						strategies have been added to the environment. The default strategy is best
						effort, which mirrors the 2.0 behavior of retrying the operation until it
						succeeds. This one now also takes the new maximum request lifetime into account.
							<p class="p">In addition, a fail-fast retry strategy has been added that immediately
							cancels the request if no suitable node in the cluster can be found where the
							request should be dispatched to. This can happen for a variety of reasons
							depending on the request type, but it provides a much closer feedback loop to
							the caller. It can work as a foundation for a user level circuit breaker or
							anyone who is willing to trade user level code (retry) for tighter
							control.</p>
<p class="p">Finally, these strategies are pluggable through a callback, so a
							custom advanced-user implementation could decide on a request-by-request basis
							whether it should be retried.</p>
<p class="p">Here is how to configure the fail-fast
							strategy:</p>

						<pre class="pre codeblock language-java"><code>CouchbaseEnvironment env = DefaultCouchbaseEnvironment
    .builder()
    .retryStrategy(FailFastRetryStrategy.INSTANCE)
    .build();</code></pre>

					</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-134" target="_blank">JVMCBC-134</a>: A configurable maximum request lifetime has
						been added to the environment, which is used by the best effort retry strategy to
						determine when it is time to not retry the request anymore. This has been added to
						avoid operations circling around infinitely because of either a bug or a not
						stabilizing cluster state. For information about the options and default settings,
						see <a class="xref" href="env-config.html#concepteEnvConfig" title="The CouchbaseEnvironment class enables you to configure Java SDK options for bootstrapping, timeouts, reliability, and performance.">Configuring the environment</a>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-21" target="_blank">JVMCBC-21</a>: Keepalive heartbeats are now available again
						in the Java SDK. By default, every endpoint (socket) sends a heartbeat message to
						the remote server to keep the connection from going completely idle, which can
						cause side effects that firewalls shut them down proactively. The default value is
						set to 30 seconds, but it can be configured on the environment if needed. For
						information about the options and default settings, see <a class="xref" href="env-config.html#concepteEnvConfig" title="The CouchbaseEnvironment class enables you to configure Java SDK options for bootstrapping, timeouts, reliability, and performance.">Configuring the environment</a>.</li>

					<li class="li">Subscribable event bus: an event bus has been added to the environment where the
						SDK pushes different kinds of events through it. Applications can subscribe to the
						event bus to receive those notifications and react if they want to. Currently,
						bucket open or close and node connect or disconnect events are published, but we
						plan to add much more in the future (especially in the area around profiling and
						monitoring for enhanced field serviceability).<p class="p">Here is a simple example that
							shows how to subscribe and print certain system events:</p>

						<pre class="pre codeblock language-java"><code>couchbaseEnvironment.eventBus().get().subscribe(System.out::println);</code></pre>

						<p class="p">The example returns data similar to this:</p>

						<pre class="pre codeblock language-java"><code>NodeConnectedEvent{node=localhost/127.0.0.1}
BucketOpenedEvent{name='beer-sample'}
BucketClosedEvent{name='beer-sample'}
NodeDisconnectedEvent{node=localhost/127.0.0.1}</code></pre>

					</li>


					<li class="li">Bootstrap through DNS SRV: It is now possible to fetch the list of bootstrap
						nodes through a DNS SRV record. This allows system administrators to centralize
						their bootstrap node list configuration in a very easy manner. It needs to be
						enabled on the environment to make it work. For more information, see <a class="xref" href="managing-connections.html#concept2677" title="This section covers the different approaches to connecting and disconnecting, as well as how to configure encryption.">Managing connections</a>.</li>


					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-539" target="_blank">JCBC-539</a>: A stateful helper class called
							<samp class="ph codeph">NodeLocatorHelper</samp> has been introduced. The class provides a
						cluster-aware way to see which document IDs map to which node in the cluster. Note
						that this functionality is mainly interesting for users who want to log and/or
						pass information to different systems for a variety of reasons. One possible
						scenario is to enrich user level circuit breaker functionality.</li>


					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-542" target="_blank">JCBC-542</a>: The API now throws semantically correct
						exceptions on nearly all operations affecting the key-value service. This includes
						exceptions such as <samp class="ph codeph">tmpfail</samp> or <samp class="ph codeph">out of memory</samp>. To
						get the full list of exceptions thrown by each method, refer to the <a class="xref" href="download-links.html#concept553" title="The Java SDK is available on Maven Central or by downloading it as an archive. A Javadoc API reference is also available online.">API Reference</a>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-92" target="_blank">JVMCBC-92</a>: The poll interval for
							<samp class="ph codeph">ReplicateTo</samp> and <samp class="ph codeph">PersistTo</samp> can now be
						configured on the environment through the <samp class="ph codeph">observeIntervalDelay</samp>
						setting. For information about the options and default settings, see <a class="xref" href="env-config.html#concepteEnvConfig" title="The CouchbaseEnvironment class enables you to configure Java SDK options for bootstrapping, timeouts, reliability, and performance.">Configuring the environment</a>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-129" target="_blank">JVMCBC-129</a>: The delay between reconnect attempts is now
						configurable. For information about the options and default settings, see <a class="xref" href="env-config.html#concepteEnvConfig" title="The CouchbaseEnvironment class enables you to configure Java SDK options for bootstrapping, timeouts, reliability, and performance.">Configuring the environment</a>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-83" target="_blank">JVMCBC-83</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-84" target="_blank">JVMCBC-84</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-128" target="_blank">JVMCBC-128</a>: We've optimized the hot code path quite a
						bit and you should now see lower latency and higher throughput on most of the
						workloads. Also, we slightly reduced the allocation rate on the shared buffer
						pool.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-93" target="_blank">JVMCBC-93</a>: The internal pooling of endpoints has been
						refactored order minimize the time the SDK hooks onto channels. In particular,
						sockets to port 8091 are now immediately closed if not needed anymore.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-633" target="_blank">JCBC-633</a>: The <samp class="ph codeph">ViewResult</samp> now
						implements the <samp class="ph codeph">Iterator</samp> interface, which allows iterating over
						the <samp class="ph codeph">ViewRows</samp> with a for-loop instead of having to use the
						iterator explicitly.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-628" target="_blank">JCBC-628</a>: Both <samp class="ph codeph">JsonArray</samp> and
							<samp class="ph codeph">JsonObject</samp> can now be constructed from raw JSON literals
						through new factory methods (see the <samp class="ph codeph">fromJson</samp> methods for more
						details).</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-127" target="_blank">JVMCBC-127</a>: Similar to spymemcached in the 1.x SDK
						series, the 2.1 SDK now also sets the opaque identifier on the binary requests in
						order to make it easier to correlate requests and responses with tools like
							<samp class="ph codeph">tcpdump</samp>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-698" target="_blank">JCBC-698</a>: The disconnect timeout has been increased to
						25 seconds from the quite short 5 seconds by default. Also, the
							<samp class="ph codeph">Bucket#close()</samp> method now uses this timeout instead of the
						incorrect management one.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-66" target="_blank">JVMCBC-66</a>: Great news for everyone who wants to debug
						the <samp class="ph codeph">core-io</samp> repackaged dependencies. From now on we also include
						the repackaged dependencies in the source JAR of the core, which means that IDEs
						can pick up the full sources and you can set breakpoints in all places.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-689" target="_blank">JCBC-689</a>: When an incorrect password is used together
						with the <samp class="ph codeph">ClusterManager</samp>, it now throws a proper exception
							(<samp class="ph codeph">InvalidPasswordException</samp>) instead of a cryptic error message
						failing the observable.</li>

				</ul>

			</section>


			<section class="section" id="ga210__ga210-fixes"><h3 class="title sectiontitle">Fixed issues</h3>
				
				<p class="p">This release fixes the following issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-669" target="_blank">JCBC-669</a>: A bug was fixed on both the
							<samp class="ph codeph">JsonArray</samp> and <samp class="ph codeph">JsonValue</samp> where when
							<samp class="ph codeph">toMap</samp> or <samp class="ph codeph">toList</samp> was used it did not conver
						the contained maps and lists. Now proper deep conversion is happening
						automatically.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-122" target="_blank">JVMCBC-122</a>, :<a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-123" target="_blank">JVMCBC-123</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-682" target="_blank">JCBC-682</a>, <a class="xref" href="https://www.couchbase.com/issues/browse/JCBC-684" target="_blank">JCBC-684</a>: ByteBuffer leaks have been fixed in various
						places, especially when on a get request the document is not found, as well as
						during <samp class="ph codeph">Observe</samp> calls and in the
						<samp class="ph codeph">BucketManager</samp>.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-126" target="_blank">JVMCBC-126</a>: Several
							<samp class="ph codeph">IndexOutOfBoundsExceptions</samp> in the streaming parsers for both
						View and Query have been fixed. The code is now more resilient to specific
						arriving chunk boundaries.</li>

				</ul>


			</section>


			<section class="section" id="ga210__ga210-known"><h3 class="title sectiontitle">Known issues</h3>
				
				<p class="p">This release has the following known issues:</p>


				<ul class="ul">
					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-136" target="_blank">JVMCBC-136</a>: Unconsumed <samp class="ph codeph">ByteBuf</samp>
						Observables are not properly released and will leak memory. To avoid this
						situation, just make sure to consume all observables that you request from the
						SDK. In the future, we are going to improve the situation with auto release
						buffers if no one has subscribed after a specific amount of time.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-138" target="_blank">JVMCBC-138</a>: On a multinode cluster, the SDK will report
						multiple connect and disconnect messages to some nodes in the cluster on startup.
						This is not harmful, just confusing, and will be resolved in a later bug fix
						release.</li>

					<li class="li"><a class="xref" href="https://www.couchbase.com/issues/browse/JVMCBC-154" target="_blank">JVMCBC-154</a>: When a failover is performed and there are
						operations in the pipeline, it could be that some of them are not properly cleaned
						up during the cancellation phase. The leak detector might report a leak, but it
						should not affect a long running application very much. This is going to be fixed
						in one of the next versions, but should not harm a production application in a
						blocking fashion.</li>

				</ul>


			</section>


		</div>

	</article>



</div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">Â© 2011â€“2015 <b class="company-name">Couchbase</b>. All rights reserved.</span><a href="http://support.couchbase.com/">Customer Login</a><a href="http://www.couchbase.com/terms-of-service">Terms of Service</a><a href="http://www.couchbase.com/privacy-policy">Privacy Policy</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>