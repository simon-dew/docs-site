<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Search Request JSON Properties | Couchbase Docs (Staging)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11050/server/current/search/search-request-params.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="You can add additional properties to a Search request to control how the Search Service returns results.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/search/search-request-params.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11050/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>

  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11050/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="3">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/simon-dew/docs-devex/edit/release/7.2/modules/search/pages/search-request-params.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
    </div>
  </div>

</aside>

<style>

</style>
<div class="feedback">
  

  <a href="#" class="btn any-feedback-btn" 
    id="feedbackTrigger"
    data-jira-component-id="">
    Report Feedback? </a>

</div>

<main
    class="article " 
    data-ceiling="topbar">

<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">server</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Search Request JSON Properties</h1>
<div class="labels">
<ul><li class="reference"><span><i class="fas fa-book"></i></i> reference</span></li>
</ul>
</div>


</div>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
You can add additional properties to a Search request to control how the Search Service returns results.
</blockquote>
</div>
<div class="paragraph">
<p>The following is an example Search request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L2-L112">{
    "query": {},

    "ctl": {
        "timeout": 10000,
        "consistency": {
            "vectors": {
                "searchIndexName": {
                    "607/205096593892159": 2,
                    "640/298739127912798": 4  
                }
            },
            "level": "at_plus",
            "results": "complete"
        }
    },
    "size": 10,
    "from": 0,
    "highlight": {

        "style": "html",
        "fields": ["textField"]

    },
    "fields": ["textField"],
    "facets": {

        "field1": {
            "size": 5,
            "field": "field1"
        },

        "field2": {
            "size": 5,
            "field": "field2",
            "numeric_ranges": [
                {

                    "name": "high",
                    "min": 7,
                    "max": 10

                },
                {

                    "name": "low",
                    "min": 0,
                    "max": 7

                }
             ]
        },

        "field3": {
            "size": 10,
            "field": "dateField",
            "date_ranges": [
                {
                    "name": "old",
                    "start": "2020-12-31",
                    "end": "2023-12-31"
                },
                {
                    "name": "new",
                    "start": "2023-12-31",
                    "end": "2024-12-31"
                }  
            ]
        }

    },
    "explain": true,
    "sort": [

        "field1",
            {
                "by": "field",
                "field": "field2",
                "desc": false,
                "mode": "max",
                "missing": "last",
                "type": "number"
            },
            "-_score",
            "-_id"
            
    ],
    "includeLocations": false,
    "score": "none",
    "search_after": ["field1Value", "5", "10.033205341869529", "1234"],
    "search_before": ["field1Value", "5", "10.033205341869529", "1234"],
    "limit": 10,
    "offset": 0,
    "collections": ["collection1", "collection2"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A Search request can contain the following properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="query"></a>query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An object that contains the properties for one of the supported query types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#server:fts:fts-supported-queries-query-string-query.adoc" class="xref unresolved">server:fts:fts-supported-queries-query-string-query.adoc</a></p>
</li>
<li>
<p><a href="#server:fts:fts-supported-queries-match.adoc" class="xref unresolved">server:fts:fts-supported-queries-match.adoc</a></p>
</li>
<li>
<p><a href="#server:fts:fts-supported-queries-match-phrase.adoc" class="xref unresolved">server:fts:fts-supported-queries-match-phrase.adoc</a></p>
</li>
<li>
<p><a href="#server:fts:fts-supported-queries-non-analytic-query.adoc" class="xref unresolved">server:fts:fts-supported-queries-non-analytic-query.adoc</a></p>
</li>
<li>
<p><a href="#server:fts:fts-supported-queries-compound-query.adoc" class="xref unresolved">server:fts:fts-supported-queries-compound-query.adoc</a></p>
</li>
<li>
<p><a href="#server:fts:fts-supported-queries-range-query.adoc" class="xref unresolved">server:fts:fts-supported-queries-range-query.adoc</a></p>
</li>
<li>
<p><a href="#server:fts:fts-supported-queries-geospatial.adoc" class="xref unresolved">server:fts:fts-supported-queries-geospatial.adoc</a></p>
</li>
<li>
<p><a href="#server:fts:fts-supported-queries-special-query.adoc" class="xref unresolved">server:fts:fts-supported-queries-special-query.adoc</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ctl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An object that contains properties for query consistency.</p>
</div>
<div class="paragraph">
<p>For more information about how to configure Search query consistency inside the <code>ctl</code> object, see <a href="#ctl">Ctl Object</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">size/limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the total number of results to return for a single page of search results.</p>
</div>
<div class="paragraph">
<p>If you provide both the <code>size</code> and <code>limit</code> properties, the Search Service uses the <code>size</code> value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">from/offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set an offset value to change where pagination starts for search results, based on the Search query&#8217;s <a href="#sort">Sort Object</a>.</p>
</div>
<div class="paragraph">
<p>For example, if you set a <code>size</code> value of <code>5</code> and a <code>from</code> value of <code>10</code>, the Search query returns results 11 through 15 on a page.</p>
</div>
<div class="paragraph">
<p>If you provide both the <code>from</code> and <code>offset</code> properties, the Search Service uses the <code>from</code> value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">highlight</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains properties to control search result highlighting.</p>
</div>
<div class="paragraph">
<p>For more information about how to configure highlighting in Search results, see <a href="#highlight">Highlight Object</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An array of strings to specify each indexed field you want to return in search results.</p>
</div>
<div class="paragraph">
<p>You must add a field and its contents to a Search index to view it in search results or add it to the <code>fields</code> array.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="facets"></a>facets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains <code>{facet-name}</code> objects to define each facet you want to return with search results.</p>
</div>
<div class="paragraph">
<p>The Search Service supports the following facet types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Term Facet</strong>: Counts the documents that have the same value for a specified field.</p>
</li>
<li>
<p><strong>Numeric Range Facet</strong>: Counts the documents with numeric field values that are greater than or less than a specified range or ranges.</p>
</li>
<li>
<p><strong>Date Range Facet</strong>: Counts the documents with date field values that are earlier or later than a specified range or ranges.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, about how to configure the different facet types inside the <code>facets</code> object, see <a href="#facet-name">{facet-name} Object</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">explain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>To create an explanation for a search result&#8217;s score in search results, set <code>explain</code> to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>To turn off explanations for search result scoring, set <code>explain</code> to <code>false</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains an array of strings or JSON objects to set how to sort search results.</p>
</div>
<div class="paragraph">
<p>The strings can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{field_name}</code>: Specify the name of a field to use to sort the search results.</p>
</li>
<li>
<p><code>_id</code>: Use the document&#8217;s identifier to sort the search results.</p>
</li>
<li>
<p><code>_score</code>: Use the document&#8217;s score from the Search query to sort the search results.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about the properties for a <code>sort</code> JSON object, see <a href="#sort">Sort Object</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="includelocations"></a>includeLocations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>To return the position of each occurrence of a search term inside a document, set <code>includeLocations</code> to <code>true</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must have <strong>Include Term Vectors</strong> enabled or the <code>include_term_vectors</code> property set to <code>true</code> on a field to use <code>includeLocations</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To turn off term locations, set <code>includeLocations</code> to <code>false</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">score</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>To turn off document relevancy scoring in search results, set <code>score</code> to <code>none</code>.</p>
</div>
<div class="paragraph">
<p>To turn on document relevancy scoring in search results, remove the <code>score</code> property.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">search_after</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use <code>search_after</code> in a search request, you can&#8217;t use <code>search_before</code>. Both properties are included in the example code to show the correct syntax.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Use <code>search_after</code> with <code>from/offset</code> and <code>sort</code> to control pagination in search results.</p>
</div>
<div class="paragraph">
<p>Give a value for each string or JSON object in the <code>sort</code> array to the <code>search_after</code> array.
The Search Service starts search result pagination after the document with those values.</p>
</div>
<div class="paragraph">
<p>You must provide the values in the same order that they appear in the <code>sort</code> array.</p>
</div>
<div class="paragraph">
<p>For example, if you had a set of 10 documents to sort based on <code>_id</code> values of 1-10, with <code>from</code> set to <code>2</code> and <code>search_after</code> set to <code>8</code>, documents 9-10 appear on the same page.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">search_before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use <code>search_before</code> in a search request, you can&#8217;t use <code>search_after</code>. Both properties are included in the example code to show the correct syntax.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Use <code>search_before</code> with <code>from/offset</code> and <code>sort</code> to control pagination in search results.</p>
</div>
<div class="paragraph">
<p>Give a value for each string or JSON object in the <code>sort</code> array to the <code>search_before</code> array.
The Search Service starts search result pagination before the document with those values.</p>
</div>
<div class="paragraph">
<p>You must provide the values in the same order that they appear in the <code>sort</code> array.</p>
</div>
<div class="paragraph">
<p>For example, if you had a set of 10 documents to sort based on <code>_id</code> values of 1-10, with <code>from</code> set to <code>2</code> and <code>search_before</code> set to <code>8</code>, documents 2-6 appear on the same page.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains an array of strings that specify the collections where you want to run the query.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="ctl"><a class="anchor" href="#ctl"></a>Ctl Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>ctl</code> object to make sure that the Search Service runs your Search query against the latest version of the documents in your database.</p>
</div>
<div class="paragraph">
<p>The <code>ctl</code> object and its properties cause the Search Service to run your query against the latest version of a document written to a <a href="#server:learn:buckets-memory-and-storage/vbuckets.adoc" class="xref unresolved">vBucket</a>.
The Search Service uses a consistency vector to synchronize the last document write to a vBucket from the Data Service with the Search index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L6-L22">    "ctl": {
        "timeout": 10000,
        "consistency": {
            "vectors": {
                "searchIndexName": {
                    "607/205096593892159": 2,
                    "640/298739127912798": 4  
                }
            },
            "level": "at_plus",
            "results": "complete"
        }
    },</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ctl</code> object contains the following properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the maximum time, in milliseconds, that a Search query can execute on a Search index partition.</p>
</div>
<div class="paragraph">
<p>If the query time exceeds the <code>timeout</code>, the Search Service cancels the query.
The query might return partial results if any index partitions responded before the timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">consistency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An object that contains a <code>vectors</code> object and the <code>level</code> and <code>results</code> properties.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="#consistency">Consistency Object</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="consistency"><a class="anchor" href="#consistency"></a>Consistency Object</h3>
<div class="paragraph">
<p>Use the <code>consistency</code> object to control the consistency behavior for a Search index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">        "consistency": {
            "vectors": {
                "searchIndexName": {
                    "607/205096593892159": 2,
                    "640/298739127912798": 4  
                }
            },
            "level": "at_plus",
            "results": "complete"
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>consistency</code> object has the following properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vectors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An object that contains a {search-index-name} object for each Search index in the query.</p>
</div>
<div class="paragraph">
<p>For more information about the {search-index-name} object, see <a href="#vectors">{search-index-name} Object</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the consistency to bounded or unbounded consistency:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>at_plus</code>: The Search query executes but requires that the Search index matches the timestamp of the last document update.
You must provide a <code>vectors</code> object</p>
</li>
<li>
<p><code>not_bounded</code>: The Search query executes without a consistency requirement.
<code>not_bounded</code> is faster than <code>at_plus</code>, as it doesn&#8217;t rely on a <code>vectors</code> object or wait for the Search index to match the Data Service index.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>To display an error instead of partial results if any index partitions are unavailable on a node, set <code>results</code> to <code>complete</code>.</p>
</div>
<div class="paragraph">
<p>To return partial results from a query if a node is unreachable, remove the <code>results</code> property.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="vectors"><a class="anchor" href="#vectors"></a>{search-index-name} Object</h4>
<div class="paragraph">
<p>Use a <code>{search-index-name}</code> object to set the Search index and consistency vectors for a Search query.</p>
</div>
<div class="paragraph">
<p>The <code>{search-index-name}</code> object contains a vBucket mapping and UUID property with the sequence number for each update to a vBucket&#8217;s data that you want to include in your search results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L11-L16">            "vectors": {
                "searchIndexName": {
                    "607/205096593892159": 2,
                    "640/298739127912798": 4  
                }
            },</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your Search query uses an <a href="#server:fts:fts-creating-full-text-aliases.adoc" class="xref unresolved">index alias</a> that references multiple Search indexes, you must include a <code>{search-index-name}</code> object for each Search index in the alias.</p>
</div>
<div class="paragraph">
<p>To get the vBucket mapping, UUID, and the sequence number for a data write, use a <code>MutationToken</code> from a Data Service <code>MutationResult</code>.
The Data Service returns a <code>MutationResult</code> object or promise for CRUD operations.
For more information, see <a href="../guides/kv-operations.html" class="xref page">Key-Value Operations</a>.</p>
</div>
<div class="paragraph">
<p>For examples on how to obtain and use a <code>MutationToken</code> with the Couchbase SDKs, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#dotnet-sdk:howtos:full-text-searching-with-sdk.adoc#consistency" class="xref unresolved">.NET</a>
| <a href="#go-sdk:howtos:full-text-searching-with-sdk.adoc#consistency" class="xref unresolved">Go</a>
| <a href="#java-sdk:howtos:full-text-searching-with-sdk.adoc#consistency" class="xref unresolved">Java</a>
| <a href="#kotlin-sdk:howtos:full-text-search.adoc#scan-consistency" class="xref unresolved">Kotlin</a>
| <a href="#nodejs-sdk:howtos:full-text-searching-with-sdk.adoc#scan-consistency-and-consistentwith" class="xref unresolved">Node.js</a>
| <a href="#php-sdk:howtos:full-text-searching-with-sdk.adoc#consistency" class="xref unresolved">PHP</a>
| <a href="#python-sdk:howtos:full-text-searching-with-sdk.adoc#scan-consistency-and-consistent-with" class="xref unresolved">Python</a>
| <a href="#ruby-sdk:howtos:full-text-searching-with-sdk.adoc#consistency" class="xref unresolved">Ruby</a>
| <a href="#scala-sdk:howtos:full-text-searching-with-sdk.adoc#consistency" class="xref unresolved">Scala</a></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{search-index-name}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index that you want to search and use with consistency.</p>
</div>
<div class="paragraph">
<p>The {search-index-name} object contains a {vBucketMapping}/{vBucketUUID} property for each document write operation that you want in your search results.</p>
</div>
<div class="paragraph">
<p>Set the value of the property to the sequence number for the write operation.</p>
</div>
<div class="paragraph">
<p>For example, if you had a property of <code>607/205096593892159": 2</code>, the Search Service looks for a write operation on vBucket <code>607</code>, with a UUID of <code>205096593892159</code>, with sequence number <code>2</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="highlight"><a class="anchor" href="#highlight"></a>Highlight Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>highlight</code> object to control how the Search Service highlights matches in search results.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L27-L32">    "highlight": {

        "style": "html",
        "fields": ["textField"]

    },</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">style</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets how the Search Service highlights a match from a search query:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ansi</code>: The Search Service highlights matches with a yellow background (\u001b[43m).</p>
</li>
<li>
<p><code>html</code>: The Search Service surrounds matches with <code>&lt;mark&gt;</code> and <code>&lt;/mark&gt;</code> HTML tags.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains an array of strings for each field name where you want to highlight a search query match.</p>
</div>
<div class="paragraph">
<p>If you include the <code>fields</code> array, the Search Service only highlights fields that are in the array.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="facet-name"><a class="anchor" href="#facet-name"></a>{facet-name} Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use a <code>{facet-name}</code> object to create a search facet.</p>
</div>
<div class="paragraph">
<p>You can have multiple <code>{facet-name}</code> objects inside the <a href="#facets">facets object</a> in your search query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L36-L85">    "facets": {

        "field1": {
            "size": 5,
            "field": "field1"
        },

        "field2": {
            "size": 5,
            "field": "field2",
            "numeric_ranges": [
                {

                    "name": "high",
                    "min": 7,
                    "max": 10

                },
                {

                    "name": "low",
                    "min": 0,
                    "max": 7

                }
             ]
        },

        "field3": {
            "size": 10,
            "field": "dateField",
            "date_ranges": [
                {
                    "name": "old",
                    "start": "2020-12-31",
                    "end": "2023-12-31"
                },
                {
                    "name": "new",
                    "start": "2023-12-31",
                    "end": "2024-12-31"
                }  
            ]
        }

    },</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>{facet-name}</code> object contains the following properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the total number of categories to return with the search results for a Term facet.</p>
</div>
<div class="paragraph">
<p>The Search Service orders facet categories from values with the most occurrences to the least occurrences.</p>
</div>
<div class="paragraph">
<p>For Numeric Range and Date Range facets, the total number of categories returned depends on the number of ranges defined for the facet.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the field to use to collect facet information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">numeric_ranges</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If you want to collect a Numeric Range facet, add a <code>numeric_ranges</code> array.</p>
</div>
<div class="paragraph">
<p>A <code>numeric_ranges</code> array contains objects that define each numeric range you want to collect with your search results.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="#numeric">Numeric_ranges Array Objects</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">date_ranges</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If you want to collect a Date Range facet, add a <code>date_ranges</code> array.</p>
</div>
<div class="paragraph">
<p>A <code>date_ranges</code> array contains objects that define each date range you want to collect with your search results.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="#date">Date_ranges Array Objects</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="numeric"><a class="anchor" href="#numeric"></a>Numeric_ranges Array Objects</h3>
<div class="paragraph">
<p>The objects in a <code>numeric_ranges</code> array specify the range or ranges for a Numeric Range facet.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>numeric_ranges</code> array sets two ranges, <code>high</code> and <code>low</code>, to collect for a Numeric Range facet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L47-L62">            "numeric_ranges": [
                {

                    "name": "high",
                    "min": 7,
                    "max": 10

                },
                {

                    "name": "low",
                    "min": 0,
                    "max": 7

                }
             ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Search query increments the <code>count</code> property for <code>high</code> when the value of the <code>field</code> in the <a href="#facet-name">{facet-name} Object</a> is greater than 7 but less than 10.</p>
</div>
<div class="paragraph">
<p>If the document&#8217;s <code>field</code> value is less than 7 but greater than 0, the query increments the <code>count</code> value for <code>low</code>.</p>
</div>
<div class="paragraph">
<p>You can set both a <code>min</code> and <code>max</code> for a range, or just a <code>min</code> or <code>max</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the numeric range.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The minimum value to compare against the value of the <code>field</code> in the <a href="#facet-name">{facet-name} Object</a>.</p>
</div>
<div class="paragraph">
<p>If a document&#8217;s value for the field is greater than <code>min</code>, the Search Service increments the <code>count</code> value returned in the Search query results.</p>
</div>
<div class="paragraph">
<p>You can also define a <code>max</code> property to set an upper limit for your numeric range.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum value to compare against the value of the <code>field</code> in the <a href="#facet-name">{facet-name} Object</a>.</p>
</div>
<div class="paragraph">
<p>If a document&#8217;s value for the field is less than <code>max</code>, the Search Service increments the <code>count</code> value returned in the Search query results.</p>
</div>
<div class="paragraph">
<p>You can also define a <code>min</code> property to set a lower limit for your numeric range.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="date"><a class="anchor" href="#date"></a>Date_ranges Array Objects</h3>
<div class="paragraph">
<p>The objects in a <code>date_ranges</code> array specify the range or ranges for a Date Range facet.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>date_ranges</code> array sets two ranges, <code>old</code> and <code>new</code>, to collect for a Date Range facet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L70-L81">            "date_ranges": [
                {
                    "name": "old",
                    "start": "2020-12-31",
                    "end": "2023-12-31"
                },
                {
                    "name": "new",
                    "start": "2023-12-31",
                    "end": "2024-12-31"
                }  
            ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Search query increments the <code>count</code> property for <code>old</code> when the value of the <code>field</code> in the <a href="#facet-name">{facet-name} Object</a> is later than <code>2020-12-31</code> but earlier than <code>2023-12-31</code>.</p>
</div>
<div class="paragraph">
<p>If the document&#8217;s <code>field</code> value is later than <code>2023-12-31</code> but earlier than <code>2024-12-31</code>, the query increments the <code>count</code> value for <code>new</code>.</p>
</div>
<div class="paragraph">
<p>You can set both a <code>start</code> and <code>end</code> for a range, or just a <code>start</code> or <code>end</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the date range.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RFC-3339 formatted Date String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The starting date value to compare against the value of the <code>field</code> in the <a href="#facet-name">{facet-name} Object</a>.</p>
</div>
<div class="paragraph">
<p>If a document&#8217;s value for the field is later than <code>start</code>, the Search Service increments the <code>count</code> value returned in the Search query results.</p>
</div>
<div class="paragraph">
<p>You can also define a <code>end</code> property to set an upper limit for your date range.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RFC-3339 formatted Date String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The ending date value to compare against the value of the <code>field</code> in the <a href="#facet-name">{facet-name} Object</a>.</p>
</div>
<div class="paragraph">
<p>If a document&#8217;s value for the field is earlier than <code>end</code>, the Search Service increments the <code>count</code> value returned in the Search query results.</p>
</div>
<div class="paragraph">
<p>You can also define a <code>start</code> property to set a lower limit for your date range.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sort"><a class="anchor" href="#sort"></a>Sort Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>sort</code> object to control how the Search Service sorts search results.</p>
</div>
<div class="paragraph">
<p>The following <code>sort</code> object orders search results by the values in <code>field1</code>, then by <code>field2</code>, the document&#8217;s score, and then the document&#8217;s ID value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/b017bb844aec65a56af2089501b8e7deb60d6589/modules/search/examples/run-search-full-request.jsonc#L89-L103">    "sort": [

        "field1",
            {
                "by": "field",
                "field": "field2",
                "desc": false,
                "mode": "max",
                "missing": "last",
                "type": "number"
            },
            "-_score",
            "-_id"
            
    ],</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>sort</code> object can contain the following string values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{field_name}</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of a field in the Search index. The Search Service sorts documents based on the value of the field, in ascending order.</p>
</div>
<div class="paragraph">
<p>To sort in descending order based on a <code>{field-name}</code>, add a hyphen (-) to the start of the field name string.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">_id</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Search Service sorts documents based on their identifier value, in ascending order.</p>
</div>
<div class="paragraph">
<p>To sort in descending order based on a document&#8217;s ID value, add a hyphen (-) before the underscore (_) in the <code>_id</code> string.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">_score</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The Search Service sorts documents based on their score value, in ascending order.</p>
</div>
<div class="paragraph">
<p>To sort in descending order based on a document&#8217;s score, add a hyphen (-) before the underscore (_) in the <code>_score</code> string.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To customize search result sorting beyond ascending and descending values, use a JSON object.</p>
</div>
<div class="paragraph">
<p>JSON objects in a <code>sort</code> object can contain the following properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets what value to use for the sort:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: Uses the document&#8217;s ID value.</p>
</li>
<li>
<p><code>score</code>: Uses the document&#8217;s score.</p>
</li>
<li>
<p><code>field</code>: Uses the value of a specific field to sort. See <a href="#field">field</a>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="field"></a>field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When <code>by</code> is set to <code>field</code>, specify the name of the field to use to sort search results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">desc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>To sort the values in the field in descending order, set <code>desc</code> to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>To sort the values in the field in ascending order, set <code>desc</code> to <code>false</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the order for search results when the <code>field</code> contains multiple values, such as an array:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>default</code>: Use the first value in the field as the sort key.</p>
</li>
<li>
<p><code>min</code>: Use the smallest value in the field as the sort key.</p>
</li>
<li>
<p><code>max</code>: Use the largest value in the field as the sort key.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">missing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set how the Search Service sorts documents that don&#8217;t have a value for the field specified in <code>field</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>first</code>: Documents with a missing value appear first and before other results in search results.</p>
</li>
<li>
<p><code>last</code>: Documents with a missing value appear last and after other results in search results.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the data type of the field specified in <code>field</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>string</code>: The field contains a string.</p>
</li>
<li>
<p><code>date</code>: The field contains date/time data.</p>
</li>
<li>
<p><code>number</code>: The field contains a number or geographic data, like a latitude or longitude value.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
