<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Release Notes for Couchbase Server 7.2 | Couchbase Docs (Preview)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-11050/server/current/release-notes/relnotes.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.2">
<meta name="page-url" content="/server/current/release-notes/relnotes.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/DOC-11050/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-11050/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/simon-dew/docs-server/modules/release-notes/pages/relnotes.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Release Notes &amp; Licenses</li>
<li class="crumb"><a href="relnotes.html">Release Notes</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Release Notes for Couchbase Server 7.2</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div class="sect1">
<h2 id="release-723"><a class="anchor" href="#release-723"></a>Release 7.2.3 (November 2023)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Server Release 7.2.3 was released in November 2023</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Fixed Security Vulnerabilities</strong></p>
</div>
<div class="paragraph">
<p>For complete details of fixed security vulnerabilities in Couchbase Enterprise Server,
see the <a href="https://www.couchbase.com/alerts/">Enterprise Security Alerts page</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This release contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fixes to issues</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="fixed-issues"><a class="anchor" href="#fixed-issues"></a>Fixed Issues</h3>

</div>
<div class="sect2">
<h3 id="xdcr"><a class="anchor" href="#xdcr"></a>XDCR</h3>
<table id="table-fixed-issues-723-xdcr" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-59339">MB-59339</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCP nozzle race would leave gomemcached feed running and leak memory.<br>
Normally, if DCP nozzles are started and then stopped in sequence, there shouldn’t be any UprFeed leaks.
Hard-coded testing resulted in situations indicating that the leaking gomemcached feed wasn&#8217;t closed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed: the feed is correctly synchronized and closed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-722"><a class="anchor" href="#release-722"></a>Release 7.2.2 (September 2023)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Server 7.2.2 was released in September 2023</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Couchbase release 7.2.1 is no longer available for download.</strong><br>
Customers upgrading from 7.2.0 should upgrade to 7.2.2,
which contains all 7.2.1 fixes and several additional critical fixes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This release contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fixes to issues</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="fixed-issues-2"><a class="anchor" href="#fixed-issues-2"></a>Fixed issues</h3>
<div class="sect3">
<h4 id="analytics-service"><a class="anchor" href="#analytics-service"></a>Analytics Service</h4>
<table id="table-fixed-issues-722-analytics-service" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-58694" target="_blank" rel="noopener">MB-58694</a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Some DCP messages were unnecessarily processed multiple times.<br>
In addition, if the Analytics Service had high CPU usage, unnecessary flushes of DCP state to storage could occur;
this also contributed to additional high CPU usage.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCP messages are now processed once, regardless of the configured <code>dcpIdleQueueFlushThresholdMillis</code>.<br>
High CPU usage will not trigger unnecessary flushes of DCP state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-58723" target="_blank" rel="noopener">MB-58723</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frames that contain only DCP data were unnecessarily processed by the complete ingestion pipeline, resulting in performance degradation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The complete ingestion pipeline no longer processes frames that only contain DCP data.<br>
Instead, they are processed specifically by the ingestion operators that update DCP metadata, resulting in better performance.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="search-service"><a class="anchor" href="#search-service"></a>Search Service</h4>
<table id="table-fixed-issues-722-search-service" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-58450" target="_blank" rel="noopener">MB-58450</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An issue occurred with a node failover.<br>
If a user did not bring in a replacement node before the failover occurred, then lost active or lost replica search indexes that had partitions on the replaced node were not rebuilt.
  As a result, search requests returned partial/incomplete results. In addition, existing indexes with defined replica(s) became vulnerable to potential node failures.<br></p>
<p class="tableblock">This issue is only pertinent to the 7.2.1 release, and does not affect older builds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">During rebalancing, a check is now made for missing partitions.<br>
If missing partitions are found, they are rebuilt before the rebalance is complete.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-721"><a class="anchor" href="#release-721"></a>Release 7.2.1 (September 2023)</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Couchbase release 7.2.1 is no longer available for download.</strong><br>
Customers upgrading from 7.2.0 should upgrade to 7.2.2,
which contains all 7.2.1 fixes and several additional critical fixes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Couchbase Server 7.2.1 was released in September 2023.</p>
</div>
<div class="paragraph">
<p>This release contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New features</p>
</li>
<li>
<p>Enhancements</p>
</li>
<li>
<p>A list of future reserved words in an upcoming Server release</p>
</li>
<li>
<p>Newly supported platforms</p>
</li>
<li>
<p>Fixes to issues</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="new-features"><a class="anchor" href="#new-features"></a>New Features</h3>
<div class="paragraph">
<p>This release includes the following new features.</p>
</div>
<div class="sect3">
<h4 id="xdcr-2"><a class="anchor" href="#xdcr-2"></a>XDCR</h4>
<div class="paragraph">
<p>The following XDCR features are new:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XDCR replications, specified by means of the REST API, can now use the <code>filterBinary</code> flag.
This specifies whether binary documents should be replicated.
Detailed information on the <a href="../rest-api/rest-xdcr-create-replication.html#filter-binary" class="xref page">filterBinary flag</a> is provided on the REST reference page, <a href="../rest-api/rest-xdcr-create-replication.html" class="xref page">Creating a Replication</a>.</p>
</li>
<li>
<p>Using the REST API, node-connectivity can now be checked, prior to the creation of an XDCR reference.
See <a href="../rest-api/rest-xdcr-connection-precheck.html" class="xref page">Checking Connections</a>.</p>
</li>
<li>
<p>In Couchbase Server Version 7.2.1 and later, XDCR provides enhanced information on cluster-rebalance status.
See <a href="../manage/manage-xdcr/create-xdcr-replication.html#rebalance-information" class="xref page">Rebalance Information</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enhancements"><a class="anchor" href="#enhancements"></a>Enhancements</h3>
<div class="paragraph">
<p>This release includes the following enhancements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bloom filters for the Indexing Service were not previously enabled by default. Bloom filters are now enabled by default. This change reduces the Index Service disk lookups when there are insert heavy workloads. Bloom filters are used by the index storage layer to reduce the disk i/o and improve the overall efficiency of the index service. You can disable bloom filters and opt out.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="future-reserved-words"><a class="anchor" href="#future-reserved-words"></a>Future Reserved Words</h3>
<div class="paragraph">
<p>To give you enough time to prepare ahead, we are going to add the following reserved words for features in an upcoming Couchbase Server release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SEQUENCE</p>
</li>
<li>
<p>CACHE</p>
</li>
<li>
<p>RESTART</p>
</li>
<li>
<p>MAXVALUE</p>
</li>
<li>
<p>MINVALUE</p>
</li>
<li>
<p>NEXT</p>
</li>
<li>
<p>PREV</p>
</li>
<li>
<p>PREVIOUS</p>
</li>
<li>
<p>NEXTVAL</p>
</li>
<li>
<p>PREVVAL</p>
</li>
<li>
<p>CYCLE</p>
</li>
<li>
<p>RECURSIVE</p>
</li>
<li>
<p>RESTRICT</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>No action is required for upgrading to Server 7.2.1.</p>
</div>
</div>
<div class="sect2">
<h3 id="new-supported-platforms"><a class="anchor" href="#new-supported-platforms"></a>New Supported Platforms</h3>
<div class="paragraph">
<p>See <a href="../install/install-platforms.html" class="xref page">Supported Platforms</a> for the complete list of supported platforms.</p>
</div>
<div class="paragraph">
<p>This release adds support for the following new platforms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alma Linux 9</p>
</li>
<li>
<p>Rocky Linux 9</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="fixed-issues-3"><a class="anchor" href="#fixed-issues-3"></a>Fixed Issues</h3>
<div class="paragraph">
<p>This release contains the following fixes.</p>
</div>
<div class="sect3">
<h4 id="analytics-service-2"><a class="anchor" href="#analytics-service-2"></a>Analytics Service</h4>
<table id="table-fixed-issues-721-analytics-service" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56957" target="_blank" rel="noopener">MB-56957</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External collections could not be created using Azure Managed Identity.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure dependencies have been updated to correct this issue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57588" target="_blank" rel="noopener">MB-57588</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query results could be unnecessarily converted twice to JSON when documents were large.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Query result is now converted to JSON once for all documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57615" target="_blank" rel="noopener">MB-57615</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When the Prometheus stats returned from Analytics exceeded four kilobytes, the status code was inadvertently set to 500 (Internal Error), and this resulted in a large number of warnings in the Analytics warning log. Couchbase Server discarded these statistics.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This has been fixed to properly return a 200 (OK) status code when the size of Prometheus stats exceeds 4KiB, allowing these stats to be recorded properly. The warning is not displayed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="data-service"><a class="anchor" href="#data-service"></a>Data Service</h4>
<table id="table-fixed-issues-721-data-dervice" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-39344" target="_blank" rel="noopener">MB-39344</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The last item in a replica checkpoint was not expelled. In scenarios such as large average item size, high numbers of replicas or low Bucket quota could result in a data-node entering an unrecoverable Out-of-Memory state.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ItemExpel has been enhanced to release all the items in a checkpoint when memory conditions allow.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56084" target="_blank" rel="noopener">MB-56084</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A rollback loop affected legacy clients when collections were used and a tombstone newer than the last mutation in the default collection was purged.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The lastReadSeqno is now Incremented when the client is not collection-aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56644" target="_blank" rel="noopener">MB-56644</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In rare cases, after a failover or memcached restart, a replica rollback while under memory pressure might have caused a crash in the Data Service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory pressure recovery logic (Item expelling) is now skipped when replica rollback is in progress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56970" target="_blank" rel="noopener">MB-56970</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XDCR or restore from backup entered an endless loop if attempting to overwrite a document which was deleted or expired some time ago with a deleteWithMeta operation. This was due to a specific unanticipated state in memory which increased CPU usage, and connection became unusable for further operations.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">deleteWithMeta is now resilient to temporary non-existent values with xattr datatype.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57002" target="_blank" rel="noopener">MB-57002</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When using .NET SDK on Windows 10 client and client certs were enabled on CB Server, the Data-Service did not establish a connection and client bootstrap failed with a OpenSSL “session id context uninitialized" error.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data-Service has been updated to disable TLS session resume.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57064" target="_blank" rel="noopener">MB-57064</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET_META requests for deleted items fetched metadata in memory which was not evicted in value-eviction buckets.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata items are now cleaned when the expiry pager runs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57106" target="_blank" rel="noopener">MB-57106</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCP clients streamed in out-of-sequence-order [OSO] backfill snapshots under Magma observed duplicate documents received in the disk snapshot. This happened where the stream was paused and resumed when the resume point was wrongly set to a key already processed in the stream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSO backfill in Magma now sets the correct resume point after a pause.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57304" target="_blank" rel="noopener">MB-57304</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Service rebalance duration was significantly impacted if other DCP clients created a large number of Streams, if those streams needed to be read from disk, due to the lack of prioritizing between rebalance and other DCP clients.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of backfills each DCP client can perform concurrently has been limited to allow fairer allocation of resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57400" target="_blank" rel="noopener">MB-57400</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The computation count for the items remaining DCP/Checkpoint stats exposed to Prometheus was the O(N) function. Where N is the number of items in a checkpoint. This caused various performance issues including Prometheus stats timeouts when checkpoints accumulated a high number of items.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The computation count has been optimized and now is O(1).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57609" target="_blank" rel="noopener">MB-57609</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A spurious auto-failover could happen when Magma compaction visited a TTL&#8217;d document that was already deleted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document not found does not now increment the number of read failures.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="index-service"><a class="anchor" href="#index-service"></a>Index Service</h4>
<table id="table-fixed-issues-721-index-service" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56339" target="_blank" rel="noopener">MB-56339</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">During scaling, an GSI indexer rebalance froze and did not successfully complete. This was because an index snapshot was not correctly deleted and recreated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A flag now handles snapshots to ensure they are correctly deleted or recreated when indexes are updated during rebalancing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57021" target="_blank" rel="noopener">MB-57021</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When alter index updated the replica count, new replicas were not built immediately when the original definition was {defer_build: true}. Existing replicas were built and new replicas were built in the next processing iteration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New replicas are now built when the replica count is updated for deferred indexes. The status of existing index instances is checked, and if ready, a new build of the instance is triggered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57777" target="_blank" rel="noopener">MB-57777</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When the indexer was unable to keep up with KV mutations, and there was a queue of mutations within the indexer, there was a large memory overhead from the bookkeeping of queued up mutations.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indexer has been improved to optimize memory usage so that the bookkeeping overhead is reduced for queued up mutations.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="query-service"><a class="anchor" href="#query-service"></a>Query Service</h4>
<table id="table-fixed-issues-721-query-service" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56533" target="_blank" rel="noopener">MB-56533</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Due to how nested dependencies were handled, a sudden rise in memory utilization of the query service on a node caused a memory alert issue. The node did not recover correctly following a restart.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nested dependencies are now handled appropriately in the ADVISE statement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56563" target="_blank" rel="noopener">MB-56563</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A query with multiple filters on an index key, one of which was a parameter, could produce incorrect results. This was caused by incorrectly composing the exact index spans to support the query.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The way in which exact spans are set has been modified to correct this issue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56579" target="_blank" rel="noopener">MB-56579</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Covering FLATTEN_KEYS() on an array index generated incorrect results. This was because a modified version of the ANY clause was applied after the index which meant false positives were retained and Distinct scan rows were eliminated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ANY filter is now applied on an index scan itself when covering an index scan with flatten keys.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56683" target="_blank" rel="noopener">MB-56683</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inter-service read timeout errors were not detected or handled accordingly. User requests consequently failed with timeout errors without retrying with a new connection.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The error handling and retry mechanism has been modified to handle these types of timeout issues and errors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56727" target="_blank" rel="noopener">MB-56727</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Under certain circumstances, a query with UNNEST used a covering index scan and incorrect results were returned. Reference to the UNNEST expression should have prevented the covering index from being used for the query as the index did not contain the entire array.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The logic to determine covering UNNEST scans has been changed to not use a covering index scan for such queries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56937" target="_blank" rel="noopener">MB-56937</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When an index scan had multiple spans, index selectivity was incorrectly calculated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index selectivity for multiple index spans is now correctly calculated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57024" target="_blank" rel="noopener">MB-57024</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incorrect results were returned for a non-IndexScan on a constant false condition. This was due to incorrect handling of a FALSE WHERE clause.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The FALSE WHERE clause is now correctly handled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57029" target="_blank" rel="noopener">MB-57029</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Querying system:functions_cache in a multi query node cluster returned incomplete results with warnings. The query result included entries in the local query node, but none from remote query nodes. This was due to a typographical error.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The typographical error has been corrected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57080" target="_blank" rel="noopener">MB-57080</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A panic in go_json.stateInString under parsed value functions caused by incorrect concurrent access resulted in the state being freed whilst still in use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The concurrent access issue has been resolved.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57251" target="_blank" rel="noopener">MB-57251</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Prepared statement might have resulted in an incorrect result in a multi-node environment. For example, a database with two query nodes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correlated subqueries from an encoded plan are now detected and marked. This ensures correct results are provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57279" target="_blank" rel="noopener">MB-57279</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a WITH clause (common table expression, or CTE) was used inside a subquery, and the WITH clause definition referenced the parent query, and was correlated, the query engine did not properly detect the correlation. This produced an incorrect result from the WITH clause evaluation because the result was not cached correctly.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correlations inside WITH clause definitions are now properly detected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57316" target="_blank" rel="noopener">MB-57316</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cbq required a client authentication key file whenever a certificate authority file was used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cbq now accepts a certificate authority file without a client key file enabling use with username and password credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57680" target="_blank" rel="noopener">MB-57680</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When appropriate optimizer statistics were used in Cost-Based Optimizer (CBO), for a query with ORDER BY, if there were multiple indexes available for the query, CBO unconditionally favored an index that provided ordering. Such indexes were not always the best ones to use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CBO now allows cost-based comparison of indexes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57838" target="_blank" rel="noopener">MB-57838</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An ADVISE statement with multiple levels of UNNEST caused a syntax error in the CREATE INDEX statement from the Index Advisor.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADVISE has been improved when there are queries with multiple levels of UNNEST.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="cluster-manager"><a class="anchor" href="#cluster-manager"></a>Cluster Manager</h4>
<table id="table-fixed-issues-721-cluster-manager" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57484" target="_blank" rel="noopener">MB-57484</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Cluster Manager process crash meant the Delete Bucket memcached command was not always called before bucket files were deleted later in rebalance. This caused the memcached process to crash repeatedly causing data service downtime.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Delete Bucket command is now called on memcached before a file is deleted during rebalance. This ensures mencached doesn’t attempt to read the files.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="cross-datacenter-replication-xdcr"><a class="anchor" href="#cross-datacenter-replication-xdcr"></a>Cross Datacenter Replication (XDCR)</h4>
<table id="table-fixed-issues-721-xdcr" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56601" target="_blank" rel="noopener">MB-56601</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data streamed from the Data Service over XDCR should always be streamed in order by mutation id. However, in some scenarios, for efficiency, the Data Service streamed records that were not ordered by mutation id. In certain situations, this out-of-sequence-order [OSO] caused performance issues.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSO mode is now available as a global override to be switched off for any currently deployed replications to avoid performance issues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56711" target="_blank" rel="noopener">MB-56711</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XDCR did not process documents with a JSON array and Extended Attributes (XATTRs). When a document contained XATTRs, XDCR checked for XATTRs in transactions, transaction filters were enabled, and XATTRs were not checked.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When documents contain arrays, XATTRs are now checked in the transaction XATTRs, and the document is not prevented from being parsed in an array.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56741" target="_blank" rel="noopener">MB-56741</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binary documents were replicated when an Advanced Filtering Expression was present.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A filter has been added which can be turned on to prevent all binary documents from being replicated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56773" target="_blank" rel="noopener">MB-56773</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It appeared that XDCR had stalled and an explanation was not provided. For rebalances on the source or target, the XDCR pipeline should be restarted, and data movement should continue. Before the pipeline was restated, there might have been fewer data movements as the rebalanced VBs were no longer streaming.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An ETA is now provided in the Server UI to show when the pipeline is due to be restarted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56799" target="_blank" rel="noopener">MB-56799</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkpoint Manager created checkpoint records out-of-sequence when many target nodes ran slowly.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkpoint Manager now creates checkpoints in sequence when target nodes are slow.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56848" target="_blank" rel="noopener">MB-56848</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The bucket topology service sent a concurrent map iteration and map write panic to XDCR which caused a fatal error.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validation has been improved to prevent the panic from happening.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56938" target="_blank" rel="noopener">MB-56938</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prometheus stats did not include a pipeline’s status.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The pipeline status is now provided as part of a prometheus stat.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57130" target="_blank" rel="noopener">MB-57130</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Checkpoint Manager Initialization error caused two memory leak types. These were a backfill pipeline and a main pipeline memory leak.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Pipeline Manager and backfill pipeline have both been modified to prevent the memory leaks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57183" target="_blank" rel="noopener">MB-57183</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XDCR Checkpoint Manager instances were not cleaned up under certain circumstances due to timing and networking issues when contacting target, or when an invalid backfill task was fed in as input.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkpoint Manager instances are now cleaned up. A flag has been added to check for invalid backfill tasks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57234" target="_blank" rel="noopener">MB-57234</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a replication spec change was made to a non-Data Service node, delete replication hung and caused the node to return an incorrect replication configuration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XDCR now checks that the node is running the Data Service and handles it correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57277" target="_blank" rel="noopener">MB-57277</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XDCR could fail due to multiple connection issues. For example, DNS issues or firewalls. For a number of databases, it was a difficult task to manually check every node to determine where the connection issue was. For multiple nodes in a database and in the target database, debugging the issue required many connection checks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A connection pre-check feature has been added to XDCR which ensures all connections from source nodes to target nodes are valid. Credentials are now also checked.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57412" target="_blank" rel="noopener">MB-57412</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Running ipv6 only mode + non-encrypted remote resulted in invalid IP addresses being returned, leading to connection issues.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A valid IP address is now returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57462" target="_blank" rel="noopener">MB-57462</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatsMgr stopping could hang due to watching for notifications resulting in stranded go-routines.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go-routines are now stopped correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57562" target="_blank" rel="noopener">MB-57562</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When ipv4 only mode was used, and full encryption only had an alternate address configured where the internal address was unresolvable, XDCR resulted in an error when it contacted the target data nodes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specific scenario has been fixed so that replication can now proceed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57743" target="_blank" rel="noopener">MB-57743</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Prometheus endpoint did not expose any XDCR error metrics.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XDCR error metrics are now exposed via Prometheus.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57787" target="_blank" rel="noopener">MB-57787</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A legacy race condition where metadata store could cause a conflict was exposed as part of the binary filter improvements.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legacy race conditions have all been resolved.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-58203" target="_blank" rel="noopener">MB-58203</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Under certain circumstances, when rebalancing, the target cluster could return an EACCESS error code that caused source XDCR to pause the pipeline.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This has been reversed. Instead of pausing the pipeline when rebalancing, XDCR now retries when an EACCESS error is encountered in XmemNozzle. XDCR counts and prints this activity in the log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-58545" target="_blank" rel="noopener">MB-58545</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkpoint Manager could be stuck when stopping if it had not been started yet, resulting in memory leak.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkpoint Manager can now be stopped correctly even when it hasn&#8217;t been started.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="metrics-and-monitoring"><a class="anchor" href="#metrics-and-monitoring"></a>Metrics and Monitoring</h4>
<table id="table-fixed-issues-721-metrics-monitoring" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56464" target="_blank" rel="noopener">MB-56464</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An issue occurred where the Cluster Manager instructed Prometheus to reload the configuration and the reload timeout impacted other requests.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Cluster Manager has been improved to handle timeouts when instructing Prometheus to reload the configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56517" target="_blank" rel="noopener">MB-56517</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Cluster Manager&#8217;s computed utilization stats were inaccurate due to time interval discrepancies in components where data was collected.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Cluster Manager now reports raw stats as Prometheus counters.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="storage"><a class="anchor" href="#storage"></a>Storage</h4>
<table id="table-fixed-issues-721-storage" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57157" target="_blank" rel="noopener">MB-57157</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inconsistencies were observed where a single Magma bucket in a database took a long time to warm up.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The seq index scan has been optimized for tombstones of zero value size. Optimization is for look up by key, sequence iteration, and key iteration. Docs of 0 value size are placed in both key index and seq index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57714" target="_blank" rel="noopener">MB-57714</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk backfills were hanging permanently due to high memory consumption when large documents were streamed over many DCP streams concurrently.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory for a document read by a DCP stream is now released before  switching to another stream.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="known-issues-721"><a class="anchor" href="#known-issues-721"></a>Known Issues</h3>
<div class="sect3">
<h4 id="search-service-2"><a class="anchor" href="#search-service-2"></a>Search Service</h4>
<table id="table-known-issues-721-search-service" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Workaround</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-58450" target="_blank" rel="noopener">MB-58450</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An issue occurs with node failover.
If a user does not bring in a replacement node before the failover occurs,
then lost active or lost replica search indexes that have partitions on the replaced node are not rebuilt.<br>
As a result, search requests return partial/incomplete results. In addition,existing indexes with defined replica(s) become vulnerable to another node failure.</p>
<p class="tableblock">This issue is only pertinent to the <strong>7.2.1</strong> release, and does not affect older builds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This situation can be prevented if a replacement node was brought into the cluster in place of the failed over node,
before starting the rebalance operation.
  This problem should not affect on-line or off-line rebalances.</p>
<p class="tableblock">  If lost indexes are encountered, then, a manual update to the affected search index definition(s) will trigger a rebuild of the affected indexes.<br>
  (The advice here is to toggle the replica count so that unaffected index partitions are re-used, and only the lost partitions are rebuilt.)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-720"><a class="anchor" href="#release-720"></a>Release 7.2</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="new-features"><a class="anchor" href="#new-features"></a>New Features and Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>The following new platforms are supported:</p>
<div class="ulist">
<ul>
<li>
<p>Red Hat Enterprise Linux 9</p>
</li>
<li>
<p>Oracle Linux 9</p>
</li>
<li>
<p>Ubuntu 20 LTS (ARM64)</p>
</li>
<li>
<p>Ubuntu 22 LTS (x86, ARM64)</p>
</li>
<li>
<p>Amazon Linux 2023 (x86, ARM64)</p>
</li>
<li>
<p>macOS 12 Apple Silicon</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="../install/install-platforms.html" class="xref page">Supported Platforms</a> for the complete list of supported platforms, and notes on deprecated platforms.</p>
</div>
</li>
<li>
<p><em>Cost Based Optimizer for Analytics</em> (<em>CBO</em>).
The cost-based optimizer for Analytics chooses the optimal plan to execute an Analytics query.
The cost-based optimizer gathers and utilizes samples from Analytics collections, and then queries the samples at query planning time to estimate the cost of each operation.</p>
<div class="paragraph">
<p>The Analytics Service introduces new syntax for managing samples, and provides parameters and hints to help specify the behavior of the cost-based optimizer.
See <a href="#analytics:5b_cbo.adoc" class="xref unresolved">Cost-Based Optimizer for Analytics</a>.</p>
</div>
</li>
<li>
<p><em>Time Series Queries</em>.
Time series data is any data which changes over time.
It is usually collected frequently, in regular or irregular intervals, from a device or a process.</p>
<div class="paragraph">
<p>The Query Service provides a standard format for time series data, which promotes compact storage and quick processing, and introduces a _TIMESERIES function to query time series data.
See <a href="../n1ql/n1ql-language-reference/time-series.html" class="xref page">Time Series Data</a> and the <a href="../n1ql/n1ql-language-reference/timeseries.html" class="xref page">_TIMESERIES Function</a>.</p>
</div>
</li>
<li>
<p><em>Change History</em>.
A change history can be maintained for collections in a bucket.
Changes to documents within the collections are included in the change history.
A maximum size for the change history can be specified in bytes or seconds.
See <a href="../learn/data/change-history.html" class="xref page">Change History</a>.</p>
<div class="paragraph">
<p>For information on establishing change-history default settings, at bucket-creation time, see <a href="../rest-api/rest-bucket-create.html" class="xref page">Creating and Editing Buckets</a>.
For information on switching the change history on or off for a specific collection, see <a href="../rest-api/creating-a-collection.html" class="xref page">Creating and Editing a Collection</a>.
To examine the change-history status for each collection in a bucket, see the <a href="../cli/cbstats/cbstats-collections.html" class="xref page">collections</a> option for <code>cbstats</code>.
To read the change history, use the <a href="#4.1@kafka-connector::index.adoc" class="xref unresolved">Kafka 4.1 Connector</a>.</p>
</div>
</li>
<li>
<p>New alerts are provided for <em>change-history size threshold</em> and <em>Index Service low residence threshold</em>.
See <a href="../rest-api/rest-cluster-email-notifications.html" class="xref page">Setting Alerts</a>.</p>
</li>
<li>
<p>You can now configure block size for <em>Magma</em> storage when you create a bucket.
See <a href="../rest-api/rest-bucket-create.html" class="xref page">Creating and Editing Buckets</a>.</p>
</li>
<li>
<p>New metrics are provided for tracking XDCR <em>conflict resolution</em> on the target cluster.
See <a href="../learn/clusters-and-availability/xdcr-conflict-resolution.html#monitoring-conflict-resolution" class="xref page">Monitoring Conflict Resolution on the Target Cluster</a>.</p>
</li>
<li>
<p>Couchbase Server now checks node certificates to ensure a node-name is correctly identified with a Subject Alternative Name (SAN) when certificates are uploaded and when a node is added or joins a cluster.
See <a href="../learn/security/certificates.html#node-certificate-validation" class="xref page">Node-Certificate Validation</a>.</p>
</li>
<li>
<p>The Analytics Service now supports external datasets on <em>Google Cloud Platform</em> (GCP) storage.
You can manage these datasets using the UI or the Analytics Links REST API.
See <a href="#analytics:manage-links.adoc" class="xref unresolved">analytics:manage-links.adoc</a> and <a href="#analytics:rest-links.adoc" class="xref unresolved">analytics:rest-links.adoc</a>.</p>
</li>
<li>
<p>When connecting from an external network, you can now use the <code>network=external</code> option to specify an alternate address when using <code>cbbackupmgr</code>, <code>cbimport</code>, and <code>cbexport</code>.
See <strong>Host Formats</strong> information in <a href="#backup-restore:cbbackupmgr.adoc" class="xref unresolved">cbbackupmgr</a>, <a href="#tools:cbimport.adoc" class="xref unresolved">cbimport</a>, and <a href="#tools:cbexport.adoc" class="xref unresolved">cbexport</a>.</p>
</li>
<li>
<p>You can now download the <code>cbbackupmgr</code>, <code>cbimport</code>, and <code>cbexport</code> tools from a tools package.
This enables developers or testers to use the tools from machines on which Couchbase Server is not installed.
See <a href="../cli/cli-intro.html#server-tools-packages" class="xref page">Server Tools Packages</a>.</p>
</li>
<li>
<p><em>Capella</em> databases use Certificate Authorities (CAs), to establish secure connections: these CAs are now automatically trusted when you use Couchbase Web Console or the REST API to establish <em>fully secure</em> XDCR connections between Capella databases and Couchbase Enterprise Server 7.2+.
See <a href="../manage/manage-xdcr/secure-xdcr-replication.html#capella-trusted-cas" class="xref page">Capella Trusted CAs</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="deprecated-features-and-platforms-720"><a class="anchor" href="#deprecated-features-and-platforms-720"></a>Deprecated and Removed Features and Platforms</h3>
<div class="ulist">
<ul>
<li>
<p>The following operating systems are no longer supported:</p>
<div class="ulist">
<ul>
<li>
<p>SUSE Linux Enterprise Server 12 versions earlier than SP2</p>
</li>
<li>
<p>MacOS 10.15 Catalina</p>
</li>
<li>
<p>RHEL 7</p>
</li>
<li>
<p>CentOS 7</p>
</li>
<li>
<p>Oracle Linux 7</p>
</li>
<li>
<p>Ubuntu 18 LTS</p>
</li>
</ul>
</div>
</li>
<li>
<p>MacOS 11 Big Sur is deprecated.</p>
</li>
<li>
<p>Debian 10 is deprecated.</p>
<div class="paragraph">
<p>See <a href="../install/install-platforms.html" class="xref page">Supported Platforms</a> for the complete list of supported platforms.</p>
</div>
</li>
<li>
<p>TLS 1.0 and 1.1 are deprecated.
See <a href="../learn/security/on-the-wire-security.html#min-tls-version" class="xref page">Establishing the Minimum TLS-Version</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="fixed-issues-720"><a class="anchor" href="#fixed-issues-720"></a>Fixed Issues</h3>
<div class="paragraph">
<p>This release contains the following fixes.</p>
</div>
<div class="sect3">
<h4 id="cluster-manager-2"><a class="anchor" href="#cluster-manager-2"></a>Cluster Manager</h4>
<table id="table-fixed-issues-720-clustermanager" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54396" target="_blank" rel="noopener">MB-54396</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reporting wrong fragmentation and data size stats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55769" target="_blank" rel="noopener">MB-55769</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Buckets page should load even if the browser machine is slow or bandwidth is low.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="cross-datacenter-replication-xdcr-2"><a class="anchor" href="#cross-datacenter-replication-xdcr-2"></a>Cross Datacenter Replication (XDCR)</h4>
<table id="table-fixed-issues-720-xdcr" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-53065" target="_blank" rel="noopener">MB-53065</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prolonged TMPFAIL or ENOMEM causes memory bloat.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54332" target="_blank" rel="noopener">MB-54332</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inter Cluster XDCR failing in Server 7.1.2 and Capella.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55060" target="_blank" rel="noopener">MB-55060</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XDCR on non-KV node freezes when replication settings changed several times.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="query-service-2"><a class="anchor" href="#query-service-2"></a>Query Service</h4>
<table id="table-fixed-issues-720-queryservice" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54034" target="_blank" rel="noopener">MB-54034</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display the number of uses for prepared statements accurately.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54040" target="_blank" rel="noopener">MB-54040</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[SQL++] insert does not trigger a memory quota exceeded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54043" target="_blank" rel="noopener">MB-54043</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Potential for request stall if stream operator fails to notify request that it has terminated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54044" target="_blank" rel="noopener">MB-54044</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optimizer hints are not displayed in EXPLAIN statements for subqueries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54326" target="_blank" rel="noopener">MB-54326</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable impersonate if KV node does not support collections to prevent Query service errors when upgrading from 6.6.5.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54514" target="_blank" rel="noopener">MB-54514</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORDER BY after UNION requires explicitly aliased terms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54596" target="_blank" rel="noopener">MB-54596</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Covered FTS SEARCH() with memory_quota fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54705" target="_blank" rel="noopener">MB-54705</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Active requests and queued requests in SQL++ metrics are gauges, not counters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55864" target="_blank" rel="noopener">MB-55864</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory exceeded quota error with ARRAY_AGG.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-57215" target="_blank" rel="noopener">MB-57215</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBJECT_ functions may return incorrect results.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="index-service-2"><a class="anchor" href="#index-service-2"></a>Index Service</h4>
<table id="table-fixed-issues-720-indexservice" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54348" target="_blank" rel="noopener">MB-54348</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When an index drop is immediately followed by bucket delete, the indexer can deadlock when a rare race condition occurs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55195" target="_blank" rel="noopener">MB-55195</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A scanning issue occurs when an index is on a node and the replica index is on a different node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55216" target="_blank" rel="noopener">MB-55216</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index build hangs in mixed mode when the projector skips transaction records.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55217" target="_blank" rel="noopener">MB-55217</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index build stuck on "Check pending stream" during shard rebalance testing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55228" target="_blank" rel="noopener">MB-55228</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Report aggregated node level statistics information using prometheus.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55218" target="_blank" rel="noopener">MB-55218</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use streamId instead of index.Stream to determine stream catchup pending.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55243" target="_blank" rel="noopener">MB-55243</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cbindex did not execute the build index and the performance test is stuck.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55246" target="_blank" rel="noopener">MB-55246</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change log level when using watchers to connect to indexer services in a cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55248" target="_blank" rel="noopener">MB-55248</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"FlushTs Not Snapshot Aligned" message incorrectly displayed in Log multiple times.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55312" target="_blank" rel="noopener">MB-55312</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nil value in the Node table causes a panic issue in the logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55512" target="_blank" rel="noopener">MB-55512</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Orphaned watcher background thread in logs following a Server upgrade.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55517" target="_blank" rel="noopener">MB-55517</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RedistributeIndexes flag should consider partitioned and non-partitioned indexes.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="storage-2"><a class="anchor" href="#storage-2"></a>Storage</h4>
<table id="table-fixed-issues-720-storage" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55426" target="_blank" rel="noopener">MB-55426</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address plasma RP Version 16 bit overflow, and recovery and data logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56016" target="_blank" rel="noopener">MB-56016</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensure rows that were previously compacted do not return when a crash and recovery occurs in the Magma storage engine.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="eventing-service"><a class="anchor" href="#eventing-service"></a>Eventing Service</h4>
<table id="table-fixed-issues-720-eventingservice" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-53270" target="_blank" rel="noopener">MB-53270</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use "_txn:" so the Eventing service detects and rejects transaction documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-53393" target="_blank" rel="noopener">MB-53393</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restoring Eventing Functions to new scope in the same bucket upgrades and overwrites the admin or global Function Scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54315" target="_blank" rel="noopener">MB-54315</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Running "advancedGetOpWithCache" returns an incorrect meta.id on the second call when accessing a document twice.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-55193" target="_blank" rel="noopener">MB-55193</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FunctionOverload parser results in false positives when it incorrectly flags function names with reserved function names as their prefix.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56748" target="_blank" rel="noopener">MB-56748</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eventing Bucket Backed Cache in the Advanced Accessor couchbase.get() not efficient for very large documents.
The final implementation returns small documents with a speed up is 20-25X while large documents are returned with a speed up of 400-500X when using {"cache": true}.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56749" target="_blank" rel="noopener">MB-56749</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eventing writes to the wrong keyspace (_default._default) if the collection name is long (over 30 characters).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56750" target="_blank" rel="noopener">MB-56750</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As of 7.2, the curl() call no longer performs URL encoding.
Older functions with a language compatibility of 6.6.2 still work.
In some cases, an eventing function created in 7.1 might require a parameter added to the curl() call  "url_encode_version": "7.1.0" as the 7.1 release changed the 6.6.2 URL encoding method.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="backup-service"><a class="anchor" href="#backup-service"></a>Backup Service</h4>
<table id="table-fixed-issues-720-backupservice" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54549" target="_blank" rel="noopener">MB-54549</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backup and restore fails when a bucket name contains a "." character.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="views"><a class="anchor" href="#views"></a>Views</h4>
<table id="table-fixed-issues-720-views" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.4725%;">
<col style="width: 72.5275%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-53646" target="_blank" rel="noopener">MB-53646</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View engine queries should filter out transaction documents inserted into buckets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54172" target="_blank" rel="noopener">MB-54172</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensure all data is returned when DCP stream starts in disk-only mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-54173" target="_blank" rel="noopener">MB-54173</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle json and raw compressed XATTR document types in the View engine.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="known-issues-720"><a class="anchor" href="#known-issues-720"></a>Known Issues</h3>
<div class="paragraph">
<p>This release contains the following known issues.</p>
</div>
<div class="sect3">
<h4 id="couchbase-cli"><a class="anchor" href="#couchbase-cli"></a>Couchbase CLI</h4>
<table id="table-known-issues-720-couchbasecli" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Workaround</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56321" target="_blank" rel="noopener">MB-56321</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.1.0 couchbase-cli may authenticate using either a username or password, or a mTLS (client certificate).
The CLI argument validation does not handle the case where no authentication is required. For example, node-init.
This results in a false positive where couchbase-cli requires authentication flags to be provided.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before a node is initialized, use placeholders for the username and password.
After the node is initialized, a username and password must be supplied.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="search-service-3"><a class="anchor" href="#search-service-3"></a>Search Service</h4>
<table id="table-known-issues-720-searchservice" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Workaround</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56226" target="_blank" rel="noopener">MB-56226</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intermittent crashes and errors happen on Full Text Search at query time in term dictionary and postings list.
This happens when attempting to access invalid addresses or out-of-bounds data.
For example, when term dictionary might be an empty byte slice.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For the errors, a retry logic on the application layer might help.
However, there is no workaround for the intermittent crashes which Couchbase are investigating.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="analytics-service-3"><a class="anchor" href="#analytics-service-3"></a>Analytics Service</h4>
<table id="table-known-issues-720-analyticsservice" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Workaround</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.couchbase.com/browse/MB-56058" target="_blank" rel="noopener">MB-56058</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first version of the cost-based optimizer (CBO) focuses on optimizing SPJ (select-project-join) queries, or multi-inner-join subgraphs of such queries.
For more complex queries, e.g. queries involving outer joins or complex correlated subqueries, some parts of the query will be handled by CBO and other parts will not be.</p>
<p class="tableblock">As a result, query plans currently displayed for such queries will be missing CBO-provided cost and cardinality estimates, instead showing those values as <code>0</code>.
Such queries will still have valid plans and will execute correctly, but their plans may not be as optimal as desired.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is no workaround for this display issue.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.2"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
