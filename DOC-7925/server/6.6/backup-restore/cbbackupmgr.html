<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>cbbackupmgr | Couchbase Docs (Staging)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-7925/server/6.6/backup-restore/cbbackupmgr.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="A utility for backing up and restoring a Couchbase cluster">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="6.6">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-7925/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
</nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/couchbase/backup/docs/modules/backup-restore/pages/cbbackupmgr.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">server</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">cbbackupmgr</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A utility for backing up and restoring a Couchbase cluster</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="synopsis"><a class="anchor" href="#synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content">cbbackupmgr [--version] [--help] &lt;command&gt; [&lt;args&gt;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>cbbackupmgr is a high performance backup and restore client for Couchbase
Server.</p>
</div>
<div class="paragraph">
<p>See <a href="cbbackupmgr-tutorial.html" class="page">cbbackupmgr-tutorial</a> to get started. For more information on
how specific commands work you can run "cbbackupmgr &lt;command&gt; --help". For
backup strategies see <a href="cbbackupmgr-strategies.html" class="page">cbbackupmgr-strategies</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="options"><a class="anchor" href="#options"></a>OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">--version</dt>
<dd>
<p>Prints the cbbackupmgr suite version that the cbbackupmgr program came from.</p>
</dd>
<dt class="hdlist1">--help</dt>
<dd>
<p>Prints the synopsis and a list of commands. If a cbbackupmgr command is
named, this option will bring up the manual page for that command.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbbackupmgr-commands"><a class="anchor" href="#cbbackupmgr-commands"></a>CBBACKUPMGR COMMANDS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="cbbackupmgr-backup.html" class="page">cbbackupmgr-backup</a></dt>
<dd>
<p>Backs up data from a Couchbase cluster.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-collect-logs.html" class="page">cbbackupmgr-collect-logs</a></dt>
<dd>
<p>Collects diagnostic information.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-compact.html" class="page">cbbackupmgr-compact</a></dt>
<dd>
<p>Compacts a backup.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-config.html" class="page">cbbackupmgr-config</a></dt>
<dd>
<p>Creates a new backup repository.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-list.html" class="page">cbbackupmgr-list</a></dt>
<dd>
<p>Lists backups in the archive.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-info.html" class="page">cbbackupmgr-info</a></dt>
<dd>
<p>Developer preview command that displays information about the backups in
the archive.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-merge.html" class="page">cbbackupmgr-merge</a></dt>
<dd>
<p>Merges backups together.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-remove.html" class="page">cbbackupmgr-remove</a></dt>
<dd>
<p>Deletes a backup repository.</p>
</dd>
<dt class="hdlist1"><a href="cbbackupmgr-restore.html" class="page">cbbackupmgr-restore</a></dt>
<dd>
<p>Restores a backup from the archive.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="identifier-terminology"><a class="anchor" href="#identifier-terminology"></a>IDENTIFIER TERMINOLOGY</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;archive&gt;</dt>
<dd>
<p>The root directory containing multiple backup repositories. This is the
top-level backup directory and contains all backup data as well as backup
logs.</p>
</dd>
<dt class="hdlist1">&lt;repository&gt;</dt>
<dd>
<p>Contains a backup configuration used for taking actual backups. A repository
should be created for a specific Couchbase cluster and it will contain
multiple incremental backups.</p>
</dd>
<dt class="hdlist1">&lt;backup&gt;</dt>
<dd>
<p>A backup of a Couchbase cluster at a given point in time. All backups are
incremental backups.</p>
</dd>
<dt class="hdlist1">&lt;bucket&gt;</dt>
<dd>
<p>A backup may consist of one or more buckets. Each bucket is stored separately.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filedirectory-structure"><a class="anchor" href="#filedirectory-structure"></a>FILE/DIRECTORY STRUCTURE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please see the <a href="cbbackupmgr-archivelayout.html" class="page">cbbackupmgr-archivelayout</a> document.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="environment-and-configuration-variables"><a class="anchor" href="#environment-and-configuration-variables"></a>ENVIRONMENT AND CONFIGURATION VARIABLES</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">CB_CLUSTER</dt>
<dd>
<p>Specifies the hostname of the Couchbase cluster to connect to. If the
hostname is supplied as a command line argument then this value is
overridden.</p>
</dd>
<dt class="hdlist1">CB_USERNAME</dt>
<dd>
<p>Specifies the username for authentication to a Couchbase cluster. If the
username is supplied as a command line argument then this value is
overridden.</p>
</dd>
<dt class="hdlist1">CB_PASSWORD</dt>
<dd>
<p>Specifies the password for authentication to a Couchbase cluster. If the
password is supplied as a command line argument then this value is
overridden.</p>
</dd>
<dt class="hdlist1">CB_ARCHIVE_PATH</dt>
<dd>
<p>Specifies the path to the backup archive. If the archive path is supplied as
a command line argument then this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_STAGING_DIRECTORY</dt>
<dd>
<p>Specifies the path to the staging directory. If the <code>--obj-staging-dir</code>
argument is provided in the command line then this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_REGION</dt>
<dd>
<p>Specifies the object store region. If the <code>--obj-region</code> argument is provided
in the command line then this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_ACCESS_KEY_ID</dt>
<dd>
<p>Specifies the object store access key id. If the <code>--obj-access-key-id</code>
argument is provided in the command line this value is overridden.</p>
</dd>
<dt class="hdlist1">CB_OBJSTORE_SECRET_ACCESS_KEY</dt>
<dd>
<p>Specifies the object store secret access key. If the
<code>--obj-secret-access-key</code> argument is provided in the command line this value
is overridden.</p>
</dd>
<dt class="hdlist1">CB_AWS_ENABLE_EC2_METADATA</dt>
<dd>
<p>By default cbbackupmgr will disable fetching EC2 instance metadata. Setting
this environment variable to true will allow the AWS SDK to fetch metadata
from the EC2 instance endpoint.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="discussion"><a class="anchor" href="#discussion"></a>DISCUSSION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The cbbackupmgr command is used for backing up Couchbase clusters, managing
those backups, and restoring them.</p>
</div>
<div class="paragraph">
<p>The cbbackupmgr command was built around the concept of taking only incremental
backups. This concept is important because as the data in a cluster grows it
becomes increasingly difficult to take full backups in a reasonable amount of
time. By taking incremental backups we are able to reduce the time it takes to
backup a cluster by ensuring that we transfer the smallest amount of data
possible each time we back the cluster up.</p>
</div>
<div class="paragraph">
<p>A consequence of taking incremental backups is that we must know about the
previous backups that we have taken in order to know where we left off. This
means that the cbbackupmgr command must manage the backups it has taken. The
cbbackupmgr command does this by using the concept of a backup archive and a
backup repository. A backup repository is a directory that contains a backup
configuration for backing up a specific cluster. Normally there will be one
backup repository per Couchbase cluster. Each time you want to back up this
cluster you will specify this backup repository with the cbbackupmgr-backup
command and the backup tool will automatically find where the last backup
finished and incrementally backup new data in that cluster.</p>
</div>
<div class="paragraph">
<p>The backup archive is the top-level directory and contains one or more backup
repositories and a logs folder. Logging for all backup repositories is contained
in the logs folder in the backup.log file. For more information on the backup
archive structure see <a href="cbbackupmgr-archivelayout.html" class="page">cbbackupmgr-archivelayout</a>.</p>
</div>
<div class="paragraph">
<p>In an incremental approach the amount of data being stored in the backup archive
is always increasing. To handle this issue the backup command allows backups to
be merged together. This allows data to be deduplicated resulting in a single
backup that takes up less disk space than the multiple previous backups. More
information about how to take advantage of incremental backups and merges is
contained in <a href="cbbackupmgr-strategies.html" class="page">cbbackupmgr-strategies</a>.</p>
</div>
<div class="paragraph">
<p>The minimum hardware requirement for running cbbackupmgr is four CPU cores,
8GiB RAM. The recommend hardware is sixteen CPU cores, 16GiB RAM and SSD disks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="further-documentation"><a class="anchor" href="#further-documentation"></a>FURTHER DOCUMENTATION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A tutorial for getting started with the backup command is also available in
<a href="cbbackupmgr-tutorial.html" class="page">cbbackupmgr-tutorial</a>.</p>
</div>
<div class="paragraph">
<p>A guide for production backup strategies is available in
<a href="cbbackupmgr-strategies.html" class="page">cbbackupmgr-strategies</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authors"><a class="anchor" href="#authors"></a>AUTHORS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>cbbackupmgr is a Couchbase Enterprise Edition tool and was written by Couchbase.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reporting-bugs"><a class="anchor" href="#reporting-bugs"></a>REPORTING BUGS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Report urgent issues to the Couchbase Support Team at <a href="mailto:support@couchbase.com">support@couchbase.com</a>.
Bugs can be reported to the Couchbase Jira Bug Tracker at
<a href="http://www.couchbase.com/issues" class="bare">http://www.couchbase.com/issues</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="cbbackupmgr-tutorial.html" class="page">cbbackupmgr-tutorial</a>,
<a href="cbbackupmgr-archivelayout.html" class="page">cbbackupmgr-archivelayout</a>,
<a href="cbbackupmgr-config.html" class="page">cbbackupmgr-config</a>,
<a href="cbbackupmgr-backup.html" class="page">cbbackupmgr-backup</a>,
<a href="cbbackupmgr-restore.html" class="page">cbbackupmgr-restore</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbbackupmgr"><a class="anchor" href="#cbbackupmgr"></a>CBBACKUPMGR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href="cbbackupmgr.html" class="page">cbbackupmgr</a> suite</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
