<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>cbbackupmgr tutorial | Couchbase Docs (Staging)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-7925/server/6.6/backup-restore/cbbackupmgr-tutorial.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="A quick guide to using cbbackupmgr">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="6.6">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/DOC-7925/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/cloud.html">
                      Cloud
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <form class="navbar-item search">
                  <input type="text" placeholder="Search Docs" class="query" id="search-query" />
                  <button type="button" class="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </form>
                <a class="btn btn-primary try-btn" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<nav class="nav">
</nav>
<aside class="toc sidebar">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/simondew/GitHub/couchbase/backup/docs/modules/backup-restore/pages/cbbackupmgr-tutorial.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">server</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">cbbackupmgr tutorial</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A quick guide to using cbbackupmgr</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A tutorial that goes gives examples of how to use all of the commands in
cbbackupmgr effectively.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tutorial"><a class="anchor" href="#tutorial"></a>TUTORIAL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial we will show how to take backups and restore data using
cbbackupmgr. This tutorial uses a cluster that contains both the travel-sample
and beer-sample buckets installed and requires modifying some of the documents
in the travel-sample bucket. To make it easier to set up a cluster and edit/get
documents the following scripts are provided at
<a href="http://github.com/couchbaselabs/backup-tutorial" class="bare">http://github.com/couchbaselabs/backup-tutorial</a>. You can then find scripts
corresponding to your version of Couchbase. We will reference other scripts in
this github repository later in the tutorial so it is recommended that you
download these scripts. The only requirement for running the scripts is that you
have curl installed. To automatically setup the cluster in the appropriate state
required for this tutorial download and install Couchbase and then run the
01-initialize.sh script. If you do not want to use this script then you can
navigate through the Couchbase setup process and initialize the cluster with all
available services and install the travel-sample and beer-sample sample data
bucket.</p>
</div>
<div class="paragraph">
<p>Using this cluster we will show how the incremental/merge approach taken by
cbbackupmgr reduces time and overhead on your cluster.</p>
</div>
<div class="sect2">
<h3 id="configuring-a-backup"><a class="anchor" href="#configuring-a-backup"></a>Configuring a Backup</h3>
<div class="paragraph">
<p>Before getting started with cbbackupmgr we must first decide the directory where
to store all of our backups. This directory is referred to as the backup
archive. The backup archive contains one or more backup repositories. These
backup repositories are where your backups will be contained. The easiest way to
think of a backup repository is that it corresponds directly to a single cluster
that you want to back up. The backup repository also contains a configuration
for how to back that cluster up. A backup repository is created by using the
config subcommand. In this tutorial we will use a backup archive located at
/data/backup. The backup archive is automatically created if the directory
specified is empty. Below is an example of how to create a backup repository
called "cluster" which will backup all data and index definitions from all
buckets in the target cluster.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr config -a /data/backup -r cluster

Backup repository `cluster` created successfully in archive `/data/backup`</pre>
</div>
</div>
<div class="paragraph">
<p>One of the most important aspects of backup repository creation is that we can
configure that backup repository in many different ways to change the way
backups in each backup repository are taken. Let&#8217;s say we want a separate backup
of only the index definitions in the travel-sample bucket. To do this we can
create a separate backup repository called "single".</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr config -a /data/backup -r single \
  --include-buckets travel-sample --disable-data

Backup repository `single` created successfully in archive `/data/backup`</pre>
</div>
</div>
<div class="paragraph">
<p>The config subcommand provides many options in order to customize how you backup
your data. See the <a href="cbbackupmgr-config.html" class="page">cbbackupmgr-config</a> page for more information
about what options are available and how they are used.</p>
</div>
</div>
<div class="sect2">
<h3 id="backing-up-a-cluster"><a class="anchor" href="#backing-up-a-cluster"></a>Backing up a Cluster</h3>
<div class="paragraph">
<p>Now that we have created some backup repositories we should take a look at our
backup archive to see what it looks like. The easiest way to do this is to use
the info subcommand. This subcommand is used to retrieve information form a
backup archive. It will return the size as well as information about the
repositories, backups and item counts.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr info -a /data/backup --all
Name         | UUID                                  | Size  | # Repos  |
backup       | 32c97d5f-821a-4284-840b-9ee7cf8733a3  | 0B    | 2        |
  *  Name     | Size  | # Backups  |
  *  cluster  | 0B    | 0          |</pre>
</div>
</div>
<div class="paragraph">
<p>The info subcommand gives us a directory print out of all of the backup
repositories and backups in the backup archive. Since there are no backups yet
we can just see our archives information in the output of this command. There is
also information about how much disk space each repository contains. More
information about the info subcommand can be found in the
<a href="cbbackupmgr-info.html" class="page">cbbackupmgr-info</a> page.</p>
</div>
<div class="paragraph">
<p>Now that we have our backup repositories configured it&#8217;s time to start taking
backups. Since the backup repository contains all of the configuration
information for how the backup should be taken we just need to specify the
backup repository name and the information for the target cluster we intend to
back up. Below is an example of how to take a backup on the "cluster" backup
repository. We will assume that we have our cluster running on localhost.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cbbackupmgr backup -c 127.0.0.1 -u Administrator -p password -a ~/backup_repo -r cluster
Backing up to 2020-03-25T08_08_11.770436Z
Copied all data in 33.02s (Avg. 759.44KB/Sec)  38894 items / 24.47MB
beer-sample             [===================================] 100.00%
travel-sample           [===================================] 100.00%

Backup successfully completed
Backed up bucket "beer-sample" succeeded
Mutations backed up: 7303, Mutations failed to backup: 0
Deletions backed up: 0, Deletions failed to backup: 0
Backed up bucket "travel-sample" succeeded
Mutations backed up: 31591, Mutations failed to backup: 0
Deletions backed up: 0, Deletions failed to backup: 0</pre>
</div>
</div>
<div class="paragraph">
<p>When the backup command is executed it will by default print out a progress bar
which is helpful for understanding how long your backup will take to complete
and the rate of data movement. While the backup is running the progress bar will
give an estimated time to completion, but this will change to average backup
rate when the backup finishes. Information is also provided on the total data
and items already backed up and the current rate of data movement. If the backup
completes successfully you will see the "Backup completed successfully" message
and a break down of mutations and deletions backed up per bucket.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s also run the backup on the "single" backup repository to see how the two
backup runs differ.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr backup -a /data/backup -r single \
  -c couchbase://127.0.0.1 -u Administrator -p password

Backing up to 2020-03-25T08_08_58.903046Z
Copied all data in 1s (Avg. 480B/Sec)                 0 items / 480B
travel-sample           [==================================] 100.00%

Backup successfully completed
Backed up bucket "travel-sample" succeeded
Mutations backed up: 0, Mutations failed to backup: 0
Deletions backed up: 0, Deletions failed to backup: 0</pre>
</div>
</div>
<div class="paragraph">
<p>Since the "single" backup repository is only configured to back up index
definitions for the travel-sample bucket we do not see a progress bar for the
beer-sample bucket. We can also see that the backup executed quicker since
there was much less data to actually back up.</p>
</div>
<div class="paragraph">
<p>Since we now have backups in our backup archive let&#8217;s take a look at the state
of our backup archive has changed by using the info subcommand.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cbbackupmgr info -a /data/backup --all
Name         | UUID                                  | Size     | # Repos  |
backup       | 32c97d5f-821a-4284-840b-9ee7cf8733a3  | 54.35MB  | 2        |

*  Name     | Size     | # Backups  |
*  cluster  | 54.33MB  | 1          |

+    Backup                       | Size     | Type  | Source                 | Cluster UUID                      | Range  | Events  | Aliases  | Complete  |
+    2020-03-25T08_08_11.770436Z  | 54.33MB  | FULL  | http://localhost:9000  | ffa8024f899ca6acc7c59cf0f541dbdd  | N/A    | 0       | 0        | true      |

-      Bucket       | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      beer-sample  | 18.43MB  | 7303   | 7303       | 0           | 1      | 0    | 1        | 0     |

-      Bucket         | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      travel-sample  | 35.91MB  | 31591  | 31591      | 0           | 0      | 0    | 10       | 0     |

*  Name    | Size     | # Backups  |
*  single  | 16.20KB  | 1          |

+    Backup                       | Size     | Type  | Source                 | Cluster UUID                      | Range  | Events  | Aliases  | Complete  |
+    2020-03-25T08_08_58.903046Z  | 16.20KB  | FULL  | http://localhost:9000  | ffa8024f899ca6acc7c59cf0f541dbdd  | N/A    | 0       | 0        | true      |

-      Bucket         | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      travel-sample  | 16.20KB  | 0      | 0          | 0           | 0      | 0    | 10       | 0     |</pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have some backups defined the output of the info subcommand is much
more useful. We can see that our "cluster" backup repository contains one backup
with a name corresponding to the time the backup was taken. That backup also
contains two buckets and we can see the number of views, indexes, mutations,
tombstones and more in the bucket. The "single" backup repository also contains
one  backup, but this backup only contains the travel-sample bucket and contains
0 data items but we can see it has 10 indexes. Note that the info command also
supports JSON output if that is preferable. See <a href="cbbackupmgr-info.html" class="page">cbbackupmgr-info</a> page.</p>
</div>
<div class="paragraph">
<p>One of the most important features of cbbackupmgr is that it is an
incremental-only backup utility. This means that once we have backed up some
data we will never need to back it up again. In order to simulate some changes
on the cluster we can run the 02-modify.sh script from the backup-tutorial
github repository mentioned at the beginning of the tutorial. If you do not have
this script then you will need to modify two documents and add two new documents
to the travel-sample bucket. After we have modified some data we will run the
backup subcommand on the "cluster" backup repository again.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cbbackupmgr backup -a /data/backup -r cluster -c couchbase://127.0.0.1 -u Administrator -p password
Backing up to 2020-03-25T08_41_21.461311Z
Copied all data in 3s (Avg. 18.98KB/Sec)           4 items / 56.95KB
travel-sample           [==================================] 100.00%
beer-sample             [==================================] 100.00%

Backup successfully completed
Backed up bucket "beer-sample" succeeded
Mutations backed up: 0, Mutations failed to backup: 0
Deletions backed up: 0, Deletions failed to backup: 0
Backed up bucket "travel-sample" succeeded
Mutations backed up: 4, Mutations failed to backup: 0
Deletions backed up: 0, Deletions failed to backup: 0</pre>
</div>
</div>
<div class="paragraph">
<p>In this backup notice that since we updated 2 items and created two items that
this is all that we need back up during this run. If we info the backup archive
using the info subcommand then we will see that the backup archive looks like
something like what is below. We can see that our incremental contains 4 items
all of which are mutations. Those correspond to the 2 modifications and the 2
additions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cbbackupmgr info -a /data/backup --all
Name         | UUID                                  | Size     | # Repos  |
backup       | 32c97d5f-821a-4284-840b-9ee7cf8733a3  | 86.37MB  | 2        |

*  Name     | Size     | # Backups  |
*  cluster  | 86.35MB  | 2          |

+    Backup                       | Size     | Type  | Source                 | Cluster UUID                      | Range  | Events  | Aliases  | Complete  |
+    2020-03-25T08_08_11.770436Z  | 54.33MB  | FULL  | http://localhost:9000  | ffa8024f899ca6acc7c59cf0f541dbdd  | N/A    | 0       | 0        | true      |

-      Bucket       | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      beer-sample  | 18.43MB  | 7303   | 7303       | 0           | 1      | 0    | 1        | 0     |

-      Bucket         | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      travel-sample  | 35.91MB  | 31591  | 31591      | 0           | 0      | 0    | 10       | 0     |

+    Backup                       | Size     | Type  | Source                 | Cluster UUID                      | Range  | Events  | Aliases  | Complete  |
+    2020-03-25T08_41_21.461311Z  | 32.02MB  | INCR  | http://localhost:9000  | ffa8024f899ca6acc7c59cf0f541dbdd  | N/A    | 0       | 0        | true      |

-      Bucket       | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      beer-sample  | 16.00MB  | 0      | 0          | 0           | 1      | 0    | 1        | 0     |

-      Bucket         | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      travel-sample  | 16.02MB  | 4      | 4          | 0           | 0      | 0    | 10       | 0     |

*  Name    | Size     | # Backups  |
*  single  | 16.20KB  | 1          |

+    Backup                       | Size     | Type  | Source                 | Cluster UUID                      | Range  | Events  | Aliases  | Complete  |
+    2020-03-25T08_08_58.903046Z  | 16.20KB  | FULL  | http://localhost:9000  | ffa8024f899ca6acc7c59cf0f541dbdd  | N/A    | 0       | 0        | true      |

-      Bucket         | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      travel-sample  | 16.20KB  | 0      | 0          | 0           | 0      | 0    | 10       | 0     |</pre>
</div>
</div>
<div class="paragraph">
<p>The backup subcommand provides many options in order to customize how you backup
your data. See the <a href="cbbackupmgr-backup.html" class="page">cbbackupmgr-backup</a> page for more information
about what options are available and how they are used.</p>
</div>
</div>
<div class="sect2">
<h3 id="restoring-a-backup"><a class="anchor" href="#restoring-a-backup"></a>Restoring a Backup</h3>
<div class="paragraph">
<p>Now that we have some backup data let&#8217;s restore that data backup to the cluster.
In order to restore data we just need to know the name of the backup that we
want to restore. To find the name we can again use the info subcommand in order
to see what is in our backup archive. The backup name will always be a
timestamp. For example, let&#8217;s say we want to restore the
2016-03-22T10_26_08.933579821-07_00 from the "cluster" backup repository. In
order to do this we run the command below.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr restore -a /tmp/backup -r cluster \
  -c http://127.0.0.1:8091 -u Administrator -p password \
  --start oldest \
  --end latest --force-updates

(1/1) Restoring backup 2016-03-22T14_00_16.892277632-07_00
Copied all data in 2s (Avg. 19.96MB/Sec)       38894 items / 39.91MB
travel-sample           [==================================] 100.00%
beer-sample             [==================================] 100.00%

Restore completed successfully</pre>
</div>
</div>
<div class="paragraph">
<p>In the command above we use the --start and --end flags to specify the range of
backups we want to restore. Since we are only restoring one backup we specify
the same value for both --start and --end. We also added the --force-updates
flag in order to skip Couchbase conflict resolution. This tells cbbackupmgr to
force overwrite key-value pairs being restored even if the key-value pair on the
cluster is newer and the one being restored. If we look at the two values that
we updated on the cluster we will now see that they have been reverted back to
what they were at the time we took the initial backup. If you used the script in
the backup-tutorial github repository to update documents then you can use the
03-inspect.sh script to see the state of the updated documents after the
restore.</p>
</div>
<div class="paragraph">
<p>The restore subcommand also allows for you to exclude data that was backed up
from the restore and provides various other options. See the
<a href="cbbackupmgr-restore.html" class="page">cbbackupmgr-restore</a> page for more information on restoring data.</p>
</div>
</div>
<div class="sect2">
<h3 id="merging-backups"><a class="anchor" href="#merging-backups"></a>Merging backups</h3>
<div class="paragraph">
<p>Using an incremental backup solution means that each backup we take increases
disk space. Since disk space in not infinite we need to be able to reclaim this
disk space. In order to do this we use the <a href="cbbackupmgr-merge.html" class="page">cbbackupmgr-merge</a>
subcommand to merge two or more backups together. Since we have two backups in
the "cluster" backup repository we will merge these backups together using the
command below.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr merge -a /data/backup -r cluster \
  --start oldest --end latest

Merge completed successfully</pre>
</div>
</div>
<div class="paragraph">
<p>After merging the backups together we can use the info subcommand to see the
effect the merge subcommand we just ran had on the backup archive.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cbackupmgr info -a /data/backup --all
Name         | UUID                                  | Size     | # Repos  |
backup       | 32c97d5f-821a-4284-840b-9ee7cf8733a3  | 54.35MB  | 2        |

*  Name     | Size     | # Backups  |
*  cluster  | 54.33MB  | 1          |

+    Backup                       | Size     | Type          | Source  | Cluster UUID                      | Range                                      | Events  | Aliases  | Complete  |
+    2020-03-25T08_41_21.461311Z  | 54.33MB  | MERGE - FULL  | Merge   | ffa8024f899ca6acc7c59cf0f541dbdd  | 2020-03-25T08_08_11-2020-03-25T08_41_21:2  | 0       | 0        | true      |

-      Bucket       | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      beer-sample  | 18.43MB  | 7303   | 7303       | 0           | 1      | 0    | 1        | 0     |

-      Bucket         | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      travel-sample  | 35.91MB  | 31593  | 31593      | 0           | 0      | 0    | 10       | 0     |

*  Name    | Size     | # Backups  |
*  single  | 16.20KB  | 1          |

+    Backup                       | Size     | Type  | Source                 | Cluster UUID                      | Range  | Events  | Aliases  | Complete  |
+    2020-03-25T08_08_58.903046Z  | 16.20KB  | FULL  | http://localhost:9000  | ffa8024f899ca6acc7c59cf0f541dbdd  | N/A    | 0       | 0        | true      |
-      Bucket         | Size     | Items  | Mutations  | Tombstones  | Views  | FTS  | Indexes  | CBAS  |
-      travel-sample  | 16.20KB  | 0      | 0          | 0           | 0      | 0    | 10       | 0     |</pre>
</div>
</div>
<div class="paragraph">
<p>We can see from the info command that there is now a single backup in the
"cluster" backup repository. This backup has a name that reflects the name of
the most recent backup in the merge. It also has 31593 data items in the
travel-sample bucket. This is two more items than the original backup we took
because the second backup had two new items. The two items that were updated
were deduplicated during the merge so they do not add extra items to the count
displayed by the info subcommand.</p>
</div>
<div class="paragraph">
<p>For more information on how the merge command works as well as information on
other ways the merge command can be used see the <a href="cbbackupmgr-merge.html" class="page">cbbackupmgr-merge</a>
page.</p>
</div>
</div>
<div class="sect2">
<h3 id="removing-a-backup-repository"><a class="anchor" href="#removing-a-backup-repository"></a>Removing a Backup Repository</h3>
<div class="paragraph">
<p>If no longer need a backup repository then we can use the remove subcommand to
remove the backup repository. Below is an example showing how to remove the
"cluster" backup repository.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cbbackupmgr remove -a /data/backup -r cluster

Backup repository `cluster` deleted successfully from archive `/data/backup`</pre>
</div>
</div>
<div class="paragraph">
<p>If we now run the info subcommand you will see that the "cluster" backup
repository no longer exists. For more information on the remove subcommand see
the <a href="cbbackupmgr-remove.html" class="page">cbbackupmgr-remove</a> page.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="cbbackupmgr-backup.html" class="page">cbbackupmgr-backup</a>,
<a href="cbbackupmgr-config.html" class="page">cbbackupmgr-config</a>,
<a href="cbbackupmgr-info.html" class="page">cbbackupmgr-info</a>,
<a href="cbbackupmgr-merge.html" class="page">cbbackupmgr-merge</a>,
<a href="cbbackupmgr-remove.html" class="page">cbbackupmgr-remove</a>,
<a href="cbbackupmgr-restore.html" class="page">cbbackupmgr-restore</a>,
<a href="cbbackupmgr-strategies.html" class="page">cbbackupmgr-strategies</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cbbackupmgr"><a class="anchor" href="#cbbackupmgr"></a>CBBACKUPMGR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href="cbbackupmgr.html" class="page">cbbackupmgr</a> suite</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase_logo_black.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
