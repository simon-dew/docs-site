<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>cbrestore | Couchbase Docs (Staging)</title>
    <link rel="canonical" href="https://simon-dew.github.io/docs-site/DOC-4287/server/6.5/cli/cbtools/old/cbrestore-tool.html">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <link rel="schema.dcterms" href="https://purl.org/dc/terms/">
    <meta name="dcterms.subject" content="server">
    <meta name="dcterms.identifier" content="6.5">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="icon" href="../../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" id="topbar">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.couchbase.com"><img src="../../../../../_/img/logo.svg" alt="Couchbase"></a>
        <button class="navbar-burger" data-target="topbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="topbar-menu" class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item has-dropdown">
            <a class="navbar-link" href="https://simon-dew.github.io/docs-site/DOC-4287">Docs</a>
            <div class="navbar-dropdown explore">
              <div class="title">Couchbase Documentation Overview</div>
              <div class="cols">
                <ul>
                  <li class="heading"><a href="../../../index.html">Server</a></li>
                  <li><a href="../../../../../server/6.5/n1ql/n1ql-language-reference/index.html">N1QL</a></li>
                  <li><a href="../../../../../server/6.5/fts/full-text-intro.html">Full Text Search</a></li>
                  <li><a href="../../../../../server/6.5/analytics/introduction.html">Analytics</a></li>
                  <li><a href="../../../../../server/6.5/eventing/eventing-overview.html">Eventing</a></li>
                  <li><a href="#">Autonomous Operator</a></li>
                </ul>
                <ul>
                  <li class="heading">Mobile</li>
                  <li><a href="#">Lite</a></li>
                  <li><a href="#">Sync Gateway</a></li>
                </ul>
                <ul class="two-cols">
                  <li class="heading"><a href="../../../../../server/6.5/sdk/overview.html">SDKs</a></li>
                  <li><a href="#">C</a></li>
                  <li><a href="#">.NET</a></li>
                  <li><a href="#">Go</a></li>
                  <li><a href="#">Java</a></li>
                  <li><a href="#">Node.js</a></li>
                  <li><a href="#">PHP</a></li>
                  <li><a href="#">Python</a></li>
                  <li><a href="#">Scala</a></li>
                </ul>
                <ul>
                  <li class="heading"><a href="../../../../../server/6.5/connectors/intro.html">Connectors</a></li>
                  <li><a href="#">Elasticsearch</a></li>
                  <li><a href="../../../../../server/6.5/connectors/hadoop-1.2/hadoop.html">Hadoop</a></li>
                  <li><a href="#">Kafka</a></li>
                  <li><a href="#">Spark</a></li>
                  <li><a href="../../../../../server/6.5/connectors/odbc-jdbc-drivers.html">ODBC/JDBC</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="navbar-item has-dropdown">
            <a class="navbar-link component" href="../../../index.html"><span class="title">server</span> <span class="version">6.5</span></a>
            <div class="navbar-dropdown versions">
              <div class="cols">
                <ul>
                  <li><a class="navbar-item" href="../../../../6.0/introduction/intro.html">server 6.0</a></li>
                  <li><a class="navbar-item" href="../../../../5.5/index.html">server 5.5</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <a class="btn red-btn" href="https://www.couchbase.com/downloads">Downloads</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body container">
<nav class="nav">
</nav>
<aside class="toc sidebar">
  <div class="toc-menu"></div>
</aside>
<main class="article" data-ceiling="topbar">
  <div class="article-header">
<button class="nav-control"></button>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../../index.html">server</a></li>
    <li class="crumb"><a href="cbrestore-tool.html">cbrestore</a></li>
  </ul>
</nav>
<div class="tools" role="navigation">
  <ul>
    <li class="tool edit"><a href="https://github.com/couchbase/couchbase-cli/edit/master/docs/modules/cli/pages/cbtools/old/cbrestore-tool.adoc" title="Edit Page" target="_blank" rel="noopener">Edit</a></li>
  </ul>
</div>
  </div>
<article class="doc">
<h1 class="page">cbrestore</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The <code class="cmd">cbrestore</code> tool restores data from a file to an entire cluster or a single bucket in the cluster.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syntax"><a class="anchor" href="#syntax"></a>Syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbrestore [options] [backup-dir] [destination]</pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>[options]</code>: Command options for <code class="cmd">cbrestore</code>.</p>
</li>
<li>
<p><code>[backup-dir]</code>: The backup directory for the source data  created by <code>cbbackup</code> when performing the backup.</p>
</li>
<li>
<p><code>[destination]</code>: This is a bucket in an existing cluster used as the destination bucket for the restored information.
If you are restoring data to a single node in a cluster, provide the hostname and port of the node, If you are restoring an entire bucket, provide the URL of one of the nodes within the cluster.
Be sure to create the destination bucket before restoring the data.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Items that had been written to file on disk are restored to RAM.</p>
</div>
<div class="paragraph">
<p>The <code>cbbackup</code>, <code>cbrestore</code>, and <code>cbtransfer</code> tools do not communicate with external IP addresses for server nodes outside of a cluster.
Backup, restore, or transfer operations are performed on data from a node within a Couchbase cluster.
They only communicate with nodes from a node list obtained within a cluster.
If you install Couchbase Server with a default IP address, you cannot use an external host name to access it.</p>
</div>
<div class="paragraph">
<p><strong>Restoring Global Secondary Indexes</strong></p>
</div>
<div class="paragraph">
<p>If the backup being restored contains global secondary index definitions (stored in <code>index.json</code>), then these are also restored as part of the <code class="cmd">cbrestore</code> process.
Unlike both data and map-reduce views, global secondary indexes are not automatically distributed across a cluster.
As a result, many users manually distribute their indexes across separate index nodes to ensure high availability (see <a href="#">n1ql:n1ql-language-reference/createindex.adoc</a>).</p>
</div>
<div class="paragraph">
<p>Due to the topology-agnostic nature of <code>cbbackup</code>, these index definitions are stored without the explicit node names, which are passed in as part of the <code>CREATE INDEX</code> command.
<code>cbbackup</code> does however store the indexer-id for each index, a value used to internally identify a specific index node.
In order to restore indexes to a cluster, <code>cbrestore</code> sends each index definition, along with this identifier, to the index service which will appropriately distribute these indexes across all index nodes.
When you restore indexes to the same cluster (and same topology) that the backup was taken from, the indexing service is able to locate the appropriate index nodes so that the indexes are on the same nodes as before.
Often the topology of a cluster at the time of backup is not the same as the topology when restoring.
In such a case, the indexing service may be unable to find the specific node associated with an index which it is restoring.
The behavior when the specific index node cannot be found is for the index service to distribute the index definition to another index node, chosen at random.
This random distribution can cause indexes with the same definitions to be placed on the same node rather than separate nodes.
You should always check that the indexes have been correctly distributed after running a restore, you may need to manually redistribute some indexes if necessary.</p>
</div>
<div class="paragraph">
<p>Once the index definitions have been restored by <code class="cmd">cbrestore</code> they must be built manually (see <a href="#">n1ql:n1ql-language-reference/build-index.adoc</a>) as the index service only creates them (without building them).
This is to prevent resource contention caused by simultaneous data restoration and building of indexes during the restore process.
Additionally this gives the Couchbase administrator a chance to examine and redistribute the indexes before they are built.</p>
</div>
<div class="paragraph">
<p>You can check whether or not an index is in a ‘created’, ‘built’ or ‘building’ state by viewing the ‘Index’ tab in the web console.</p>
</div>
<div class="paragraph">
<p><strong>Conflict Resolution</strong></p>
</div>
<div class="paragraph">
<p>By default, when restoring from a backup using <code class="cmd">cbrestore</code>, Couchbase Server will perform conflict resolution on all documents to be restored.
The conflict resolution behavior is the same as cross datacenter replication (XDCR), which is detailed in <a href="#">learn:clusters-and-availability/replication-architecture.adoc#xdcr-conflict-resolution</a>.
This is so that documents which have been updated after the backup are not incorrectly overwritten by the restore process.</p>
</div>
<div class="paragraph">
<p>As a result, after running the restore process, some documents may not match the content of the backup file.
In certain cases where a document has been recently deleted on the cluster, the document may not be restored at all due to this conflict resolution.</p>
</div>
<div class="paragraph">
<p>To restore the contents of a backup while overwriting current documents with the same key, pass the extra parameter <code>conflict_resolve=0</code> as part of the <code class="cmd">cbrestore</code> command.
To ensure that only the documents contained in the backup exist in the bucket after performing the restore, flush the bucket prior to performing the restore</p>
</div>
<div class="paragraph">
<p><strong>Tool Location</strong></p>
</div>
<div class="paragraph">
<p>The tool is in the following locations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.0048%;">
<col style="width: 87.9952%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operating system</th>
<th class="tableblock halign-left valign-top">Location</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">/opt/couchbase/bin/cbrestore</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">C:\Program Files\Couchbase\Server\bin\cbrestore</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mac OS X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em class="path">/Applications/Couchbase Server.app/Contents/Resources/couchbase-core/bin/cbrestore</em></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Be sure to create the destination bucket before restoring the data.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="options"><a class="anchor" href="#options"></a>Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are the command options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. cbrestore options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-h, --help</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command line help.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-a, --add</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to not overwrite existing items in the destination.
Use <code class="cmd">add</code> instead of <code class="cmd">set</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-b BUCKET_SOURCE, --bucket-source=BUCKET_SOURCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single named bucket from the backup directory to restore.
If the backup directory only contains a single bucket, then that bucket is automatically used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-B BUCKET_DESTINATION, --bucket-destination=BUCKET_DESTINATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When <code>--bucket-source</code> is specified, overrides the destination bucket name.
This allows you to restore to a different bucket and defaults to the same as the bucket-source.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--from-date=FROM_DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restore data from the date specified as <code>yyyy-mm-dd</code> <strong>*</strong>.
By default, all data from the very beginning is restored.</p>
<p class="tableblock">The updated tool adds new options to support partial restore operations.
The tool still supports the existing options for full restores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--to-date=TO_DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restore data until the date specified as <code>yyyy-mm-dd</code><strong>*</strong>.
By default, all data collected is restored.
The updated tool adds new options to support partial restore operations.
The tool still supports the existing options for full restores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-i ID, --id=ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer only items that match a vBucket ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-k KEY, --key=KEY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer only items with keys that match a regexp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-m MODE, --mode=MODE</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-n, --dry-run</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No actual transfer.
Just validate parameters, files, connectivity, and configurations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-u USERNAME, --username=USERNAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST user name for source cluster or server node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-p PASSWORD, --password=PASSWORD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST password for cluster or server node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--single-node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a single server node from the source only, not all server nodes from the entire cluster.
This single server node is defined by the source URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t THREADS, --threads=THREADS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of concurrent workers threads performing the transfer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-v, --verbose</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verbose logging.
More v&#8217;s provide more verbosity.
Max: -vvv.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-x EXTRA, --extra=EXTRA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide extra, uncommon configuration parameters.
Comma-separated key=val(key-val)* pairs.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>The format of the <code>DATE</code> specification is <code>YYYY-MM-DD</code>, where:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>YYYY</code></dt>
<dd>
<p>4-digit year</p>
</dd>
<dt class="hdlist1"><code>MM</code></dt>
<dd>
<p>2-digit month</p>
</dd>
<dt class="hdlist1"><code>DD</code></dt>
<dd>
<p>2-digit day</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following are extra, specialized command options with the <code>cbrestore -x</code> parameter.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. cbrestore -x options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">-x option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backoff_cap=10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum back-off time during the rebalance period.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>batch_max_bytes=400000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer this # of bytes per batch.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>batch_max_size=1000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer this # of documents per batch.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cbb_max_mb=100000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Split backup file on destination cluster if it exceeds the MB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>conflict_resolve=1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, enable conflict resolution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data_only=0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For value 1, transfer only data from a backup file or cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>design_doc_only=0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For value 1, transfer only design documents from a backup file or cluster.
Default: 0.</p>
<p class="tableblock">The design documents are restored from a backup file created with the <code>cbbackup</code> tool.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_retry=10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of sequential retries if the transfer fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcd_compatible=1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For value 0, display extended fields for stdout output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nmv_retry=1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or 1, where 1 retries transfer after a NOT_MY_VBUCKET message.
Default: 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>recv_min_bytes=4096</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amount of bytes for every TCP/IP batch transferred.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rehash=0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For value 1, rehash the partition IDs of each item as it is required when transferring data between clusters with the different number of partitions; for example, when transferring data from an Mac OS X server to a non-Mac OS X cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>report=5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number batches transferred before updating the progress bar in the console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>report_full=2000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number batches transferred before emitting the progress information in the console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>seqno=0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, start <code>seqno</code> from beginning.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>try_xwm=1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer documents with metadata.
Default: 1.
The value of 0 is used only when transferring from 1.8.x to 1.8.x.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uncompress=0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For value 1, restore data in uncompressed mode.</p>
<p class="tableblock">This option is unsupported.
To restore from compressed backups, use <code>cbbackupmgr</code>, which is available for Couchbase Server Enterprise Edition only.
See <a href="#">backup-restore:backup-restore.adoc</a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are basic syntax examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbrestore ~/backup http://192.0.2.0:8091 -b travel-sample
cbrestore ~/backup couchbase://192.0.2.0:8091 -b travel-sample
cbrestore ~/backup memcached://192.0.2.0:11211 -b travel-sample</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example for restoring only design documents</strong></p>
</div>
<div class="paragraph">
<p>The following example restores design documents from the backup file, ~/backup/travel-sample, to the destination bucket, travel-sample, in a cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbrestore ~/backup http://192.0.2.0:8091 -x design_doc_only=1 \
    -b travel-sample -B travel-sample</pre>
</div>
</div>
<div class="paragraph">
<p>If multiple source buckets were backed up, this command must be performed multiple times.
In the following example, a cluster with two data buckets is backed up and has the following backup files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>~/backup/travel-sample/design.json</code></p>
</li>
<li>
<p><code>~/backup/beer-sample/design.jsonT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following command restores the design documents in both backup files to a bucket in a cluster named <code>my_bucket</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbrestore -b travel-sample -B travel-sample -x design_doc_only=1 \
    ~/backup http://192.0.2.0:8091

cbrestore -b beer-sample -B beer-sample -x design_doc_only=1 \
    ~/backup http://192.0.2.0:8091</pre>
</div>
</div>
<div class="paragraph">
<p>The following example response shows a successful restore.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>transfer design doc only. bucket msgs will be skipped.
done</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example for restoring data incrementally</strong></p>
</div>
<div class="paragraph">
<p>The following example requests a restoration of data backed up between August 1, 2014, and August 3, 2014.
The <code>-b</code> option specifies the name of the bucket to restore from the backup file, and the <code>-B</code> option specifies the name of the destination bucket in the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbrestore -b travel-sample -B travel-sample \
    --from-date=2014-08-01 --to-date=2014-08-03 ~/backup \
    http://192.0.2.0:8091</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example for restoring data while ignoring conflict resolution</strong></p>
</div>
<div class="paragraph">
<p>The following example requests a restoration of data while ignoring the built-in conflict resolution.
This causes all documents in the backup file to be restored regardless of whether the documents in the target cluster would win conflict resolution.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cbrestore -b travel-sample -B travel-sample -x conflict_resolve=0 \
    ~/backup http://192.0.2.0:8091</pre>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../../_/img/logo.svg" alt="Couchbase">
          </a>
        </div>
        <div class="contact">
          <p class="address">3250 Olcott Street
Santa Clara, CA 95054
United States</p>
          <a href="https://www.couchbase.com/contact" class="btn white-btn">Contact Us</a>
          <a class="tel" href="tel:1-650-417-7500">1-650-417-7500</a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Company</span></li>
          <li><a href="https://www.couchbase.com/about">About</a></li>
          <li><a href="https://www.couchbase.com/leadership">Leadership</a></li>
          <li><a href="https://www.couchbase.com/news-and-press-releases">News &amp; Press</a></li>
          <li><a href="https://www.couchbase.com/careers">Careers</a></li>
          <li><a href="https://www.couchbase.com/resources/events">Events</a></li>
          <li><a href="https://www.couchbase.com/contact">Contact Us</a></li>
          <li><a href="https://www.couchbase.com/request-pricing">Pricing</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Support</span></li>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://www.couchbase.com/services">Professional Services</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support Login</a></li>
          <li><a href="https://learn.couchbase.com/store" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><span class="heading">Quicklinks</span></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Online Training</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
          <li><a href="https://www.couchbase.com/nosql-resources/why-nosql">Why NoSQL</a></li>
          <li><a href="https://www.couchbase.com/resources/security">Security</a></li>
          <li><a href="https://www.couchbase.com/resources/gdpr">GDPR</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <a href="https://www.facebook.com/Couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="26.363 116.363 560.215 560.215"><path d="m586.58 209.58c0-48.96-44.252-93.212-93.212-93.212h-373.79c-48.96 0-93.212 44.252-93.212 93.212v373.79c0 48.96 44.252 93.212 93.212 93.212h186.42v-211.85h-68.732v-93.212h68.732v-36.72c0-63.083 47.077-119.58 105.45-119.58h75.323v93.212h-75.323c-8.474 0-17.889 10.357-17.889 25.422v37.662h93.212v93.212h-93.212v211.85h99.803c48.96 0 93.212-44.252 93.212-93.212v-373.79z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="32.012 176.622 542.326 437.815"><path d="m574.34 227.46c-19.772 8.474-41.428 15.065-64.025 17.889 22.597-14.123 40.486-35.778 48.96-61.2-21.655 13.182-45.194 21.655-70.615 27.305-20.714-21.655-48.96-34.837-80.972-34.837-61.2 0-111.1 49.902-111.1 111.1 0 8.474 0.942 16.948 2.825 25.422-92.271-5.649-174.18-49.902-229.74-117.69-9.415 16.006-15.065 35.778-15.065 55.551 0 38.603 19.772 72.498 49.902 92.271-17.889-0.942-35.778-5.649-50.843-14.123v0.942c0 53.668 38.603 98.862 89.446 109.22-9.415 2.825-18.831 3.766-29.188 3.766-7.532 0-14.123-0.942-20.714-1.883 14.123 44.252 55.551 76.265 103.57 77.206-37.662 30.129-85.68 48.018-138.41 48.018-9.415 0-17.889-0.941-26.363-1.883 48.96 32.012 107.34 49.902 170.42 49.902 204.31 0 316.36-169.48 316.36-316.36v-14.123c21.656-14.125 40.487-33.897 55.551-56.494z"/></svg>
            </a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/couchbase" class="icon">
              <svg width="50px" height="50px" viewBox="31.071 119.188 539.537 540.443"><path d="m531.97 119.19h-461.35c-21.655 0-39.545 16.948-39.545 38.603v463.24c0 21.655 17.889 38.603 39.545 38.603h460.41c21.655 0 39.545-16.948 39.545-38.603v-463.24c0.942-21.656-16.947-38.603-38.603-38.603zm-337.07 451.94h-81.914v-243.86h81.914v243.86zm-40.486-276.81c-28.246 0-46.135-18.831-46.135-42.369s17.889-42.369 46.135-42.369 45.194 17.889 45.194 42.369c0.942 23.538-16.948 42.369-45.194 42.369zm335.19 276.81h-81.914v-129.93c0-32.954-12.24-55.551-41.428-55.551-22.597 0-35.778 15.065-41.428 30.129-1.883 5.649-2.825 12.24-2.825 19.772v136.52h-81.914s0.942-221.26 0-243.86h81.914v34.837c11.298-16.948 30.129-40.486 73.44-40.486 53.668 0 94.154 34.837 94.154 110.16l1e-3 138.41zm-168.54-208.08s0.941-0.941 0 0z"/></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <span>2019 COUCHBASE All rights reserved.</span>
      <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
      <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
      <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
      <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
    </div>
  </div>
</footer>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
