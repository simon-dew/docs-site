<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Early Filters, Order, and Pagination | Couchbase Docs (Staging)</title>
<link rel="canonical" href="https://simon-dew.github.io/docs-site/AV-64941/cloud/learn/services-and-indexes/indexes/early-filters-and-pagination.html">
<link rel="stylesheet" href="../../../../../_/css/site.css">
<script src="../../../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="When covering indexes and index pushdowns are not available, the Query Service may use early filtering, early ordering, and early pagination to improve the query response time.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="cloud">
<meta name="dcterms.identifier" content="serverless">
<meta name="page-url" content="/cloud/serverless/learn/services-and-indexes/indexes/early-filters-and-pagination.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://simon-dew.github.io/docs-site/AV-64941/home/index.html">
                    <img src="../../../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>

  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://simon-dew.github.io/docs-site/AV-64941/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="cloud">
        <option value="" data-url="../../../../learn/services-and-indexes/indexes/early-filters-and-pagination.html">Provisioned</option>
        <option value="serverless" data-url="early-filters-and-pagination.html" selected>Serverless</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/simon-dew/docs-devex/edit/elixir/modules/learn/pages/services-and-indexes/indexes/early-filters-and-pagination.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
    </div>
  </div>

</aside>

<style>

</style>
<div class="feedback">
  

  <a href="#" class="btn any-feedback-btn" 
    id="feedbackTrigger"
    data-jira-component-id="">
    Report Feedback? </a>

</div>

<main
    class="article " 
    data-ceiling="topbar">

<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../../index.html">Couchbase Capella</a></li>
<li class="crumb">Develop</li>
<li class="crumb"><a href="../../../n1ql/query.html">Query</a></li>
<li class="crumb"><a href="global-secondary-indexes.html">Using Indexes</a></li>
<li class="crumb"><a href="early-filters-and-pagination.html">Early Filters, Order, and Pagination</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Early Filters, Order, and Pagination</h1>
<div class="labels">
<ul>
<li class="concept"><span><i class="far fa-lightbulb"></i> concept</span></li>
</ul>
</div>


</div>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
When covering indexes and index pushdowns are not available, the Query Service may use early filtering, early ordering, and early pagination to improve the query response time.
</blockquote>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Examples on this Page</div>
<div class="paragraph">
<p>The examples in this topic use the sample dataset which is supplied with Couchbase Capella.
For instructions on how to install the sample data, see <a href="../../../clusters/data-service/import-data-documents.html#import-overview" class="xref page">Import Sample Data</a>.</p>
</div>
<div class="paragraph">
<p>To use the examples on this page, you must set the query context to the <code>samples</code> scope in the sample dataset.
For more information, see <a href="../../../n1ql/n1ql-intro/queriesandresults.html#query-context" class="xref page">Query Context</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a query has a <a href="../../../n1ql/n1ql-language-reference/covering-indexes.html" class="xref page">covering index</a>, and the query is on a single keyspace, then the index contains all the data needed to perform the query.
The Query service does not need to fetch data from the Data service.
Any filters, order, or pagination (offset and limit) are performed by the Index service.</p>
</div>
<div id="cover" class="literalblock">
<div class="title">Covering index</div>
<div class="content">
<pre>@startuml

skinparam defaultTextAlignment center
skinparam linetype ortho

() " " as start
() " " as end

rectangle "Index\nService"{
  rectangle "Index Scan" as IndexScan
  rectangle Filter
  rectangle Order
  rectangle Offset
  rectangle Limit
}

note bottom of Filter
  Filters, order, and pagination
  performed by the Index Service
end note

start ..r..&gt; IndexScan
IndexScan -&gt; Filter
Filter -&gt; Order
Order -&gt; Offset
Offset -&gt; Limit
Limit ..r..&gt; end

@enduml</pre>
</div>
</div>
<div class="paragraph">
<p>If a query is <em>not</em> covered by an index, then the query needs to fetch data from the Data service after performing the index scan, in order to return the requested results.
By default, any filters, order, or pagination are performed by the Query service after the fetch.</p>
</div>
<div id="fig-uncovered" class="literalblock">
<div class="title">Default filters, order, and pagination</div>
<div class="content">
<pre>@startuml

skinparam defaultTextAlignment center

() " " as start
() " " as end

rectangle "Index\nService"{
  rectangle "Index Scan" as IndexScan
}

rectangle "Query\nService"{
  rectangle Fetch
  rectangle Filter
  rectangle Order
  rectangle Offset
  rectangle Limit
}

note bottom of Filter
  Filters, order, and pagination
  performed after fetch
end note

database "Data\nService" as Data

start ..r..&gt; IndexScan
IndexScan -&gt; Fetch
Fetch -&gt; Filter
Filter -&gt; Order
Order -&gt; Offset
Offset -&gt; Limit
Fetch --&gt; Data
Fetch &lt;-- Data
Limit ..r..&gt; end

@enduml</pre>
</div>
</div>
<div class="paragraph">
<p>Fetching data from the Data service can be expensive.
Any feature that can reduce the amount of data to be fetched will improve the query response time.
It would obviously be inefficient to fetch an entire dataset, and then discard a large portion of it by applying filters and pagination.
Couchbase Capella therefore attempts to apply filters, order, and pagination <em>before</em> fetching data, wherever possible.</p>
</div>
<div class="paragraph">
<p>Index <a href="index_pushdowns.html" class="xref page">pushdowns</a> provide one way to reduce the amount of data to be fetched.
Some filters, ordering, and pagination may be pushed down to the Index service, along with grouping and aggregates.
The Index service applies these operations to the result of the index scan.
The Query service then only needs to fetch the remaining data.</p>
</div>
<div id="fig-pushdown" class="literalblock">
<div class="title">Filter, order, and pagination pushdown</div>
<div class="content">
<pre>@startuml

skinparam defaultTextAlignment center
skinparam linetype ortho

() " " as start
() " " as end

rectangle "Index\nService"{
  rectangle "Index Scan" as IndexScan
  rectangle Filter
  rectangle Order
  rectangle Offset
  rectangle Limit
}

note bottom of Filter
  Filters, order, and pagination
  pushed down to the Index Service
end note

rectangle "Query\nService"{
  rectangle Fetch
}

database "Data\nService" as Data

start ..r..&gt; IndexScan
IndexScan -&gt; Filter
Filter -&gt; Order
Order -&gt; Offset
Offset -&gt; Limit
Limit -r-&gt; Fetch
Fetch --&gt; Data
Fetch &lt;-- Data
Fetch ..r..&gt; end

@enduml</pre>
</div>
</div>
<div class="paragraph">
<p>However, there are some operations that cannot be pushed down to the Index service: for example, a filter that uses a function or a LIKE operator on top of an index term.
These operations must be performed by the Query service.
If the Query Service has to perform a fetch from the Data service, and then apply any operations that could not be pushed down to the Index service,
this may still lead to some inefficient queries.</p>
</div>
<div class="paragraph">
<p>In Couchbase Capella, <em class="def">early filtering</em>, <em class="def">early ordering</em>, and <em class="def">early pagination</em> provide another line of defense, in cases where covering indexes and index pushdowns are not available.
With this feature, the Query service may apply filtering, ordering, and pagination directly to the results returned by the Index service, before performing the fetch.</p>
</div>
<div id="fig-early" class="literalblock">
<div class="title">Early filters, order, and pagination</div>
<div class="content">
<pre>@startuml

skinparam defaultTextAlignment center

() " " as start
() " " as end

rectangle "Index\nService"{
  rectangle "Index Scan" as IndexScan
}

rectangle "Query\nService"{
  rectangle Fetch
  rectangle Filter
  rectangle Order
  rectangle Offset
  rectangle Limit
}

note bottom of Filter
  Early filters, order, and pagination
  performed by Query service
end note

database "Data\nService" as Data

start ..r..&gt; IndexScan
IndexScan -&gt; Filter
Filter -&gt; Order
Order -&gt; Offset
Offset -&gt; Limit
Limit -&gt; Fetch
Fetch --&gt; Data
Fetch &lt;-- Data
Fetch ..r..&gt; end

@enduml</pre>
</div>
</div>
<div class="paragraph">
<p>Note that in practice, an uncovered query may use a mixture of the methods illustrated by <a href="#fig-uncovered">Default filters, order, and pagination</a>, <a href="#fig-pushdown">Filter, order, and pagination pushdown</a>, and <a href="#fig-early">Early filters, order, and pagination</a>.
In addition, early filtering may be performed independently of early ordering and pagination, and vice versa.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="early-filtering"><a class="anchor" href="#early-filtering"></a>Early Filtering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Early filtering may be applied independently of early ordering and pagination.
For an illustration of early filtering, consider the following index.</p>
</div>
<div class="exampleblock">
<div class="content">
<div id="early-filter-idx" class="listingblock">
<div class="title">Index I</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-idx.n1ql">CREATE INDEX idx_eat_city_name
ON landmark(city DESC, name)
WHERE activity = "eat";</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This index contains all the data needed to perform <a href="#early-filter-1">Example 1</a>; it therefore acts as a covering index to this query.</p>
</div>
<div id="early-filter-1" class="exampleblock">
<div class="title">Example 1. Covered query</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-1.n1ql">EXPLAIN SELECT city, name FROM landmark
WHERE city = "Paris" AND activity = "eat";</code></pre>
</div>
</div>
<div class="paragraph">
<p>The query plan shows that the query is covered.
In addition, the predicate <code>city = "Paris"</code> is applied as a span by the Index service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-1.jsonc">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "IndexScan3",
          "bucket": "&lt;BUCKET_NAME&gt;",
          "covers": [ <i class="conum" data-value="1"></i><b>(1)</b>
            "cover ((`landmark`.`city`))",
            "cover ((`landmark`.`name`))",
            "cover ((meta(`landmark`).`id`))"
          ],
          "filter_covers": {
            "cover ((`landmark`.`activity`))": "eat"
          },
          "index": "idx_eat_city_name",
// ...
          "spans": [
            {
              "exact": true,
              "range": [ <i class="conum" data-value="2"></i><b>(2)</b>
                {
                  "high": "\"Paris\"",
                  "inclusion": 3,
                  "index_key": "`city`",
                  "low": "\"Paris\""
                }
              ]
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>covers</code> section shows that the query is covered.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>range</code> section shows that this predicate is applied as a span by the Index service.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#early-filter-2">Example 2</a> adds an extra field to the projection.
Now the query is no longer covered, and the Query service needs to fetch documents based on keys returned from the index.</p>
</div>
<div id="early-filter-2" class="exampleblock">
<div class="title">Example 2. Predicate pushdown</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-2.n1ql">EXPLAIN SELECT city, name, address FROM landmark
WHERE city = "Paris" AND activity = "eat";</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query does not run too slowly, since the predicate <code>city = "Paris"</code> is pushed down to the Index service.
The index only returns document keys for documents matching the predicate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-2.jsonc">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "IndexScan3",
          "bucket": "&lt;BUCKET_NAME&gt;",
          "index": "idx_eat_city_name",
          "index_id": "e5dbf76060ed1d19",
          "index_projection": {
            "primary_key": true
          },
          "keyspace": "landmark",
          "namespace": "default",
          "scope": "samples",
          "spans": [
            {
              "exact": true,
              "range": [ <i class="conum" data-value="1"></i><b>(1)</b>
                {
                  "high": "\"Paris\"",
                  "inclusion": 3,
                  "index_key": "`city`",
                  "low": "\"Paris\""
                }
              ]
            }
          ],
          "using": "gsi"
        },
        {
          "#operator": "Fetch", <i class="conum" data-value="2"></i><b>(2)</b>
          "bucket": "&lt;BUCKET_NAME&gt;",
          "keyspace": "landmark",
          "namespace": "default",
          "scope": "samples"
        },
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>range</code> section shows that this predicate is pushed down to the Index service.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>After the pushdown, the Query service fetches documents from the Data service.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s consider the case when the filter is not on the index key exactly, but applies a function on top of the index key.</p>
</div>
<div id="early-filter-3" class="exampleblock">
<div class="title">Example 3. Early filtering</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-3.n1ql">EXPLAIN SELECT city, name, address FROM landmark
WHERE LOWER(city) = "paris" AND activity = "eat";</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the filter cannot be pushed down to the Index service.
This is where early filtering comes into play.
The Query service can apply the specified filter to the results of the index scan, before fetching the matching documents from the Data service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-3.jsonc">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "IndexScan3",
          "bucket": "&lt;BUCKET_NAME&gt;",
          "filter": "(lower(_index_key ((`landmark`.`city`))) = \"paris\")", <i class="conum" data-value="1"></i><b>(1)</b>
          "index": "idx_eat_city_name",
          "index_conditions": { <i class="conum" data-value="2"></i><b>(2)</b>
            "_index_condition ((`landmark`.`activity`))": "eat"
          },
          "index_id": "e5dbf76060ed1d19",
          "index_keys": [ <i class="conum" data-value="3"></i><b>(3)</b>
            "_index_key ((`landmark`.`city`))",
            "_index_key ((meta(`landmark`).`id`))"
          ],
          "index_projection": {
            "entry_keys": [ <i class="conum" data-value="4"></i><b>(4)</b>
              0
            ],
            "primary_key": true
          },
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The early index filters, including all the filters that can be evaluated on the index keys.
Inside the filter, <code>_index_key ((`landmark`.`city`))</code> is analogous to <code>cover ((`landmark`.`city`))</code> for a covering index scan.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>index_conditions</code> section is analogous to the <code>filter_covers</code> section in the plan for a covered query.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>index_keys</code> section is analogous to the <code>covers</code> section in the plan for a covered query.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>index_projection</code> section contains the <code>_index_key</code> needed for evaluating the early index filters&#8201;&#8212;&#8201;in this case position <code>0</code> for <code>"city"</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>If necessary, the Query service may use a mixture of index pushdowns and early filtering, as shown in the following example.</p>
</div>
<div id="early-filter-4" class="exampleblock">
<div class="title">Example 4. Predicate pushdown and early filter</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-4.n1ql">EXPLAIN SELECT city, name, address FROM landmark
WHERE city = "Paris" AND name LIKE "%Paris%" AND activity = "eat";</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Index service evaluates the filters used to generate the index spans first, before returning to the Query service.
As a result, the early filters only contain the predicates that were not pushed down to the Index service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-filter-4.jsonc">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "IndexScan3",
          "bucket": "&lt;BUCKET_NAME&gt;",
          "filter": "(_index_key ((`landmark`.`name`)) like \"%Paris%\")", <i class="conum" data-value="1"></i><b>(1)</b>
          "index": "idx_eat_city_name",
          "index_conditions": {
            "_index_condition ((`landmark`.`activity`))": "eat"
          },
          "index_id": "e5dbf76060ed1d19",
          "index_keys": [
            "_index_key ((`landmark`.`name`))",
            "_index_key ((meta(`landmark`).`id`))"
          ],
// ...
          "spans": [ <i class="conum" data-value="2"></i><b>(2)</b>
            {
              "range": [
                {
                  "high": "\"Paris\"",
                  "inclusion": 3,
                  "index_key": "`city`",
                  "low": "\"Paris\""
                },
                {
                  "high": "[]",
                  "inclusion": 1,
                  "index_key": "`name`",
                  "low": "\"\""
                }
              ]
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The filter <code>name LIKE "%Paris%"</code> does not generate an exact index span, and needs to be evaluated as an early index filter.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The filter <code>city = "Paris"</code> generates an exact span, and thus can be pushed down to the Index service.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="early-order-and-pagination"><a class="anchor" href="#early-order-and-pagination"></a>Early Order and Pagination</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Early order and pagination may be applied independently of early filtering.
As an illustration, consider the following index.</p>
</div>
<div class="exampleblock">
<div class="content">
<div id="early-paginate-idx" class="listingblock">
<div class="title">Index II</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-idx.n1ql">CREATE INDEX idx_landmark_city_name
ON landmark(city DESC, name);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This index acts as a covering index to <a href="#early-paginate-1">Example 5</a>.</p>
</div>
<div id="early-paginate-1" class="exampleblock">
<div class="title">Example 5. Covered query</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-1.n1ql">EXPLAIN SELECT city, name FROM landmark
WHERE city IS NOT MISSING
ORDER BY city DESC, name OFFSET 100 LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>covers</code> section of the query plan shows that the query is covered.
In addition, the ordering, offset, and limit are performed by the Index service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-1.jsonc">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "Sequence",
          "~children": [
            {
              "#operator": "IndexScan3",
              "bucket": "&lt;BUCKET_NAME&gt;",
              "covers": [
                "cover ((`landmark`.`city`))",
                "cover ((`landmark`.`name`))",
                "cover ((meta(`landmark`).`id`))"
              ],
              "index": "idx_landmark_city_name",
              "index_id": "c2a48a468ef63f23",
              "index_order": [ <i class="conum" data-value="1"></i><b>(1)</b>
                {
                  "desc": true,
                  "keypos": 0
                },
                {
                  "keypos": 1
                }
              ],
              "index_projection": {
                "entry_keys": [
                  0,
                  1
                ]
              },
              "keyspace": "landmark",
              "limit": "5", <i class="conum" data-value="2"></i><b>(2)</b>
              "namespace": "default",
              "offset": "100", <i class="conum" data-value="3"></i><b>(3)</b>
              "scope": "samples",
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Index order performed by index operator</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Limit performed by index operator</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Offset performed by index operator</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#early-paginate-2">Example 6</a> adds an extra field to the projection.
Now the query is no longer covered.</p>
</div>
<div id="early-paginate-2" class="exampleblock">
<div class="title">Example 6. Order and pagination pushdown</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-2.n1ql">EXPLAIN SELECT city, name, address FROM landmark
WHERE city IS NOT MISSING
ORDER BY city DESC, name OFFSET 100 LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>However the query runs pretty quickly, since the ordering, offset, and limit can still be pushed down to the Index service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-2.jsonc">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "Sequence",
          "~children": [
            {
              "#operator": "IndexScan3",
              "bucket": "&lt;BUCKET_NAME&gt;",
              "index": "idx_landmark_city_name",
              "index_id": "c2a48a468ef63f23",
              "index_order": [ <i class="conum" data-value="1"></i><b>(1)</b>
                {
                  "desc": true,
                  "keypos": 0
                },
                {
                  "keypos": 1
                }
              ],
              "index_projection": {
                "primary_key": true
              },
              "keyspace": "landmark",
              "limit": "5", <i class="conum" data-value="2"></i><b>(2)</b>
              "namespace": "default",
              "offset": "100", <i class="conum" data-value="3"></i><b>(3)</b>
              "scope": "samples",
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Index order pushdown</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Limit pushdown</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Offset pushdown</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>However, if we change the order of the ordering terms so that they no longer match the index key order, ordering cannot be pushed down to the Index service.</p>
</div>
<div id="early-paginate-3" class="exampleblock">
<div class="title">Example 7. Early order and pagination</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-3.n1ql">EXPLAIN SELECT city, name, address FROM landmark
WHERE city IS NOT MISSING
ORDER BY name, city DESC OFFSET 100 LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>So in this case, early ordering, limit, and offset are done by the Query service before fetch.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-3.jsonc">[
  {
    "plan": {
      "#operator": "Sequence",
      "~children": [
        {
          "#operator": "Sequence",
          "~children": [
            {
              "#operator": "IndexScan3",
              "bucket": "&lt;BUCKET_NAME&gt;",
              "index": "idx_landmark_city_name",
              "index_id": "c2a48a468ef63f23",
              "index_keys": [
                "_index_key ((`landmark`.`city`))",
                "_index_key ((`landmark`.`name`))",
                "_index_key ((meta(`landmark`).`id`))"
              ],
              "keyspace": "landmark",
              "namespace": "default",
              "scope": "samples",
              "spans": [
                {
                  "exact": true,
                  "range": [
                    {
                      "inclusion": 1,
                      "index_key": "`city`",
                      "low": "null"
                    }
                  ]
                }
              ],
              "using": "gsi"
            },
            {
              "#operator": "Order", <i class="conum" data-value="1"></i><b>(1)</b>
              "flags": 1,
              "limit": "5", <i class="conum" data-value="2"></i><b>(2)</b>
              "offset": "100", <i class="conum" data-value="3"></i><b>(3)</b>
              "sort_terms": [
                {
                  "expr": "_index_key ((`landmark`.`name`))"
                },
                {
                  "desc": "\"desc\"",
                  "expr": "_index_key ((`landmark`.`city`))"
                }
              ]
            },
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Early ordering</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Early limit</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Early offset</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Similarly, if we change the direction of the sort from descending to ascending, the ordering cannot be pushed down to the Index service, since it does not support reverse index scan.</p>
</div>
<div id="early-paginate-4" class="exampleblock">
<div class="title">Example 8. Early reverse order and pagination</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-4.n1ql">EXPLAIN SELECT city, name, address FROM landmark
WHERE city IS NOT MISSING
ORDER BY city ASC, name OFFSET 100 LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case also, early ordering, limit, and offset are done by the Query service before fetch.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="https://github.com/simon-dew/docs-devex/blob/a8aee2b869643b16b1a208fc80b043f171f794cd/modules/learn/examples/services-and-indexes/indexes/early-paginate-4.jsonc">// ...
            {
              "#operator": "Order",
              "flags": 1,
              "limit": "5",
              "offset": "100",
              "sort_terms": [ <i class="conum" data-value="1"></i><b>(1)</b>
                {
                  "desc": "\"asc\"",
                  "expr": "_index_key ((`landmark`.`city`))"
                },
                {
                  "expr": "_index_key ((`landmark`.`name`))"
                }
              ]
            },
// ...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>sort_terms</code> section uses <code>_index_key</code> expressions to sort the results using the index keys.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="limitations"><a class="anchor" href="#limitations"></a>Limitations</h3>
<div class="paragraph">
<p>The optimizer only selects early ordering and pagination when the following conditions are met.
Many of these conditions are similar to the conditions for index order pushdowns.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The query must be simple, referencing a single keyspace with no joins.</p>
</li>
<li>
<p>There can be no <code>GROUP BY</code> or aggregates in the query.</p>
</li>
<li>
<p>Index pushdown for <code>ORDER</code>, <code>LIMIT</code> and <code>OFFSET</code> must not be possible.</p>
</li>
<li>
<p>The <code>ORDER BY</code> clause and <code>LIMIT</code> clause must be present.
The <code>OFFSET</code> clause is optional.</p>
</li>
<li>
<p>All expression references in the <code>ORDER BY</code> clause must be present in the index&#8201;&#8212;&#8201;similar to the covering requirement for index pushdown.
However there is no requirement for exact index spans.</p>
</li>
<li>
<p>Projection alias can be used in the <code>ORDER BY</code> clause, if all the references in the aliased expression are available from the index.</p>
</li>
<li>
<p>Only simple <code>IndexScan</code> is supported for early ordering.
More complex index scans such as <code>IntersectScan</code>, <code>OrderedIntersectScan</code>, <code>UnionScan</code> and <code>DistinctScan</code> are not supported.</p>
</li>
<li>
<p>When early ordering is in effect, parallelism is turned off.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table summarizes the different methods of performing filtering, order, or pagination, from most efficient to least.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 32%;">
<col style="width: 17%;">
<col style="width: 17%;">
<col style="width: 17%;">
<col style="width: 17%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Covering index</th>
<th class="tableblock halign-left valign-top">Index pushdown<br>
<sup><a href="#note">[note]</a></sup></th>
<th class="tableblock halign-left valign-top">Early filters, order, or pagination<br>
<sup><a href="#note">[note]</a></sup></th>
<th class="tableblock halign-left valign-top">Default filters, order, or pagination<br>
<sup><a href="#note">[note]</a></sup></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch required?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-times-circle fa-red"></i></span> No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-circle fa-green"></i></span> Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-circle fa-green"></i></span> Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check-circle fa-green"></i></span> Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filters, order, and pagination<br>
performed:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After scan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After scan,<br>
before fetch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After scan,<br>
before fetch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After fetch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; by:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query service</p></td>
</tr>
</tbody>
</table>
<div id="note" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An uncovered query may use a mixture of these methods.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-links"><a class="anchor" href="#related-links"></a>Related Links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="index-scans.html#query-execution-details" class="xref page">Query Execution: Details</a></p>
</li>
<li>
<p><a href="../../../n1ql/n1ql-language-reference/covering-indexes.html" class="xref page">Covering Indexes</a></p>
</li>
<li>
<p><a href="index_pushdowns.html" class="xref page">Index Pushdown Optimizations</a></p>
</li>
<li>
<p><a href="../../../n1ql/n1ql-language-reference/groupby-aggregate-performance.html" class="xref page">Grouping and Aggregate Pushdown</a></p>
</li>
<li>
<p><a href="../../../n1ql/n1ql-language-reference/where.html" class="xref page">WHERE Clause</a>&#8201;&#8212;&#8201;to apply a filter</p>
</li>
<li>
<p><a href="../../../n1ql/n1ql-language-reference/orderby.html" class="xref page">ORDER BY Clause</a>&#8201;&#8212;&#8201;to apply a sort</p>
</li>
<li>
<p><a href="../../../n1ql/n1ql-language-reference/offset.html" class="xref page">OFFSET Clause</a> and <a href="../../../n1ql/n1ql-language-reference/limit.html" class="xref page">LIMIT Clause</a>&#8201;&#8212;&#8201;to apply pagination</p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2023 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Capella","components":["cloud"],"url":"/cloud/index.html","latestVersions":{"cloud":""}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
</body>
</html>
